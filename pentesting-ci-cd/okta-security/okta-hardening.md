# Okta Ojačavanje

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Pogledajte [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Direktorijum

### Ljudi

Iz perspektive napadača, ovo je veoma interesantno jer ćete moći da vidite **sve registrovane korisnike**, njihove **email** adrese, **grupe** kojima pripadaju, **profile** i čak **uređaje** (mobilne uređaje zajedno sa njihovim operativnim sistemima).

Prilikom belog-boksa pregleda, proverite da li postoje nekoliko "**Pending user action**" i "**Password reset**".

### Grupe

Ovde možete pronaći sve kreirane grupe u Okta. Interesantno je razumeti različite grupe (skup **dozvola**) koje mogu biti dodeljene **korisnicima**.\
Moguće je videti **ljude uključene u grupe** i **aplikacije dodeljene** svakoj grupi.

Naravno, svaka grupa sa imenom **admin** je interesantna, posebno grupa **Global Administrators**, proverite članove da biste saznali ko su najprivilegovaniji članovi.

Prilikom belog-boksa pregleda, **ne bi trebalo da postoji više od 5 globalnih administratora** (bolje ako ih ima samo 2 ili 3).

### Uređaji

Pronađite ovde **listu svih uređaja** svih korisnika. Takođe možete videti da li se uređaj **aktivno upravlja** ili ne.

### Uređivač profila

Ovde je moguće posmatrati kako se ključne informacije kao što su ime, prezime, email, korisničko ime... dele između Okta i drugih aplikacija. Ovo je interesantno jer ako korisnik može da **izmeni polje u Okta** (kao što je njegovo ime ili email) koje se zatim koristi od strane **spoljne aplikacije** da **identifikuje** korisnika, unutrašnji napadač može pokušati da **preuzme druge naloge**.

Osim toga, u profilu **`User (default)`** iz Okta možete videti **koja polja** svaki **korisnik** ima i koja su polja **izmenjiva** od strane korisnika. Ako ne možete videti admin panel, jednostavno idite na **ažuriranje informacija o svom profilu** i videćete koja polja možete ažurirati (imajte na umu da za ažuriranje email adrese morate je verifikovati).

### Integracije direktorijuma

Direktorijumi vam omogućavaju da uvezete ljude iz postojećih izvora. Pretpostavljam da ćete ovde videti korisnike uvezene iz drugih direktorijuma.

Nisam to video, ali pretpostavljam da je ovo interesantno da se otkriju **drugi direktorijumi koje Okta koristi za uvoz korisnika**, tako da ako **kompromitujete taj direktorijum** možete postaviti vrednosti atributa u korisnicima kreiranim u Okta i **možda kompromitovati Okta okruženje**.

### Izvori profila

Izvor profila je **aplikacija koja deluje kao izvor istine** za atribute korisničkog profila. Korisnik može biti izvor samo jedne aplikacije ili direktorijuma u isto vreme.

Nisam to video, pa je svaka informacija o bezbednosti i hakovanju u vezi sa ovom opcijom dobrodošla.

## Prilagođavanja

### Brendovi

Proverite u kartici **Domains** ove sekcije email adrese koje se koriste za slanje emailova i prilagođenu domenu unutar Okta kompanije (koju verovatno već znate).

Osim toga, u kartici **Setting**, ako ste admin, možete "**Koristiti prilagođenu stranicu za odjavu**" i postaviti prilagođeni URL.

### SMS

Ovde nema ničeg interesantnog.

### Korisnički panel

Ovde možete pronaći konfigurisane aplikacije, ali detalje o njima ćemo videti kasnije u drugoj sekciji.

### Ostalo

Interesantno podešavanje, ali ništa posebno interesantno sa aspekta bezbednosti.

## Aplikacije

### Aplikacije

Ovde možete pronaći sve **konfigurisane aplikacije** i njihove detalje: Ko ima pristup njima, kako je konfigurisano (SAML, OPenID), URL za prijavu, mapiranje između Okta i aplikacije...

U kartici **`Sign On`** takođe postoji polje nazvano **`Password reveal`** koje bi omogućilo korisniku da **otkrije svoju lozinku** prilikom provere postavki aplikacije. Da biste proverili postavke aplikacije iz korisničkog panela, kliknite na 3 tačke:

<figure><img src="../../.gitbook/assets/image (4) (7).png" alt=""><figcaption></figcaption></figure>

I možete videti još neke detalje o aplikaciji (kao što je funkcija otkrivanja lozinke, ako je omogućena):

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (3).png" alt=""><figcaption></figcaption></figure>

## Upravljanje identitetom

### Sertifikati pristupa

Koristite Sertifikate pristupa da biste kreirali kampanje za pregled pristupa vaših korisnika resursima periodično i automatski odobravali ili oduzimali pristup kada je to potrebno.

Nisam video da se koristi, ali pretpostavljam da je ovo korisna funkcionalnost sa aspekta odbrane.

## Bezbednost

### Opšte

* **Emailovi sa obaveštenjima o bezbednosti**: Sve bi trebalo da bude omogućeno.
* **Integracija CAPTCHA**: Preporučuje se postavljanje barem nevidljivog reCaptcha
* **Bezbednost organizacije**: Sve može biti omogućeno i emailovi za aktivaciju ne bi trebalo da traju dugo (7 dana je u redu)
* **Prevencija enumeracije korisnika**: Obe opcije bi trebalo da budu omogućene
* Imajte na umu da prevencija enumeracije korisnika neće imati efekta ako su dozvoljeni bilo koji od sledećih uslova (videti [Upravljanje korisnicima](https://help.okta.com/oie/en-us/Content/Topics/users-groups-profiles/usgp-main.htm) za više informacija):
* Registracija samousluge
* JIT tokovi sa email autentifikacijom
* **Okta ThreatInsight podešavanja**: Prijavljivanje i sprovođenje bezbednosti na osnovu nivoa pretnje

### HealthInsight

Ovde je moguće pronaći pravilno i **opasno** konfigurisana **podešavanja**.

### Autentifikatori

Ovde možete pronaći sve metode autentifikacije koje korisnik može koristiti: Lozinka, telefon, email
### Globalna politika sesije

Ovde možete pronaći politike sesije dodeljene različitim grupama. Na primer:

<figure><img src="../../.gitbook/assets/image (2) (1) (2).png" alt=""><figcaption></figcaption></figure>

Preporučuje se zahtevanje MFA, ograničavanje trajanja sesije na nekoliko sati, ne čuvanje kolačića sesije preko ekstenzija pregledača i ograničavanje lokacije i Identity Provider-a (ako je to moguće). Na primer, ako svaki korisnik treba da se prijavi iz određene zemlje, možete dozvoliti samo tu lokaciju.

### Identity Providers

Identity Providers (IdP-ovi) su usluge koje **upravljaju korisničkim nalozima**. Dodavanje IdP-ova u Okta omogućava vašim krajnjim korisnicima da se **samoregistruju** sa vašim prilagođenim aplikacijama tako što će se prvo autentifikovati putem društvenog naloga ili pametne kartice.

Na stranici Identity Providers, možete dodati društvene prijave (IdP-ove) i konfigurisati Okta kao pružaoca usluga (SP) dodavanjem dolaznog SAML-a. Nakon što ste dodali IdP-ove, možete postaviti pravila usmeravanja koja će korisnike usmeriti na IdP na osnovu konteksta, kao što su lokacija korisnika, uređaj ili domen e-pošte.

**Ako je konfigurisan bilo koji pružalac identiteta** sa gledišta napadača i branioca, proverite tu konfiguraciju i **da li je izvor zaista pouzdan**, jer napadač koji kompromituje IdP može dobiti pristup Okta okruženju.

### Delegirana autentifikacija

Delegirana autentifikacija omogućava korisnicima da se prijave na Okta unosom podataka za prijavu za **Active Directory (AD) ili LDAP** server njihove organizacije.

Ponovo proverite ovo, jer napadač koji kompromituje AD organizacije može preći na Okta zahvaljujući ovoj postavci.

### Mreža

Mrežna zona je konfigurabilna granica koju možete koristiti da **dodelite ili ograničite pristup računarima i uređajima** u vašoj organizaciji na osnovu **IP adrese** koja zahteva pristup. Možete definisati mrežnu zonu tako što ćete navesti jednu ili više pojedinačnih IP adresa, opsege IP adresa ili geografske lokacije.

Nakon što definišete jednu ili više mrežnih zona, možete ih **koristiti u globalnim politikama sesije**, politikama autentifikacije, obaveštenjima o VPN-u i pravilima usmeravanja.

Sa gledišta napadača, interesantno je znati koje su IP adrese dozvoljene (i proveriti da li su neke IP adrese **privilegovane** u odnosu na druge). Sa gledišta napadača, ako korisnici treba da pristupaju sa određene IP adrese ili regiona, proverite da li se ova funkcija pravilno koristi.

### Integracije uređaja

* **Upravljanje krajnjim tačkama**: Upravljanje krajnjim tačkama je uslov koji se može primeniti u politici autentifikacije kako bi se osiguralo da upravljani uređaji imaju pristup aplikaciji.
* Još nisam video da se ovo koristi. TODO
* **Obaveštenja o usluzi**: Još nisam video da se ovo koristi. TODO

### API

Na ovoj stranici možete kreirati Okta API tokene i videti one koji su **kreirani**, njihove **privilegije**, **vreme isteka** i **URL-ove porekla**. Imajte na umu da se API tokeni generišu sa dozvolama korisnika koji je kreirao token i važe samo ako je **korisnik** koji ih je kreirao **aktivan**.

**Pouzdani izvori** omogućavaju pristup veb lokacijama koje kontrolišete i kojima verujete da pristupaju vašoj Okta organizaciji putem Okta API-ja.

Ne bi trebalo da bude puno API tokena, jer ako ih ima previše, napadač može pokušati da im pristupi i koristi ih.

## Radni tok

### Automatizacija

Automatizacija vam omogućava da kreirate automatske akcije koje se izvršavaju na osnovu skupa uslova okidača koji se javljaju tokom životnog ciklusa krajnjih korisnika.

Na primer, uslov može biti "Neaktivnost korisnika u Okta" ili "Isticanje lozinke korisnika u Okta", a akcija može biti "Slanje e-pošte korisniku" ili "Promena stanja životnog ciklusa korisnika u Okta".

## Izveštaji

### Izveštaji

Preuzmite zapise. Oni se **šalju** na **e-adresu** trenutnog naloga.

### Sistemski zapis

Ovde možete pronaći **zapise o radnjama koje su korisnici izvršili** sa mnogo detalja, kao što su prijava u Okta ili u aplikacije putem Okta.

### Praćenje uvoza

Ovo može **uvoziti zapise iz drugih platformi** na koje se pristupa putem Okta.

### Ograničenja brzine

Proverite dostignuta ograničenja brzine API-ja.

## Postavke

### Nalog

Ovde možete pronaći **opšte informacije** o Okta okruženju, kao što su naziv kompanije, adresa, **e-adresa za naplatu**, **e-adresa za tehničku podršku**, kao i ko treba da prima Okta ažuriranja i kakva Okta ažuriranja.

### Preuzimanja

Ovde možete preuzeti Okta agente za sinhronizaciju Okta sa drugim tehnologijama.

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **oglašavanje vaše kompanije u HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
