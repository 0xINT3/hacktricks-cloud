# Okta Verharding

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repos.

</details>

## Gids

### Mense

Vanuit 'n aanvaller se perspektief is dit baie interessant omdat jy **alle geregistreerde gebruikers**, hul **e-posadress**e, die **groepe** waarvan hulle deel uitmaak, **profiele** en selfs **toestelle** (selfone saam met hul bedryfstelsels) kan sien.

Vir 'n witboks-oorsig, kyk of daar verskeie "**Hangende gebruikeraksie**" en "**Wagwoordherstel**" is.

### Groepe

Hier vind jy al die geskep groepe in Okta. Dit is interessant om die verskillende groepe (stel van **toestemmings**) wat aan **gebruikers** toegeken kan word, te verstaan.\
Dit is moontlik om die **mense wat binne groepe ingesluit is** en die **toepassings wat aan elke groep toegewys is**, te sien.

Natuurlik is enige groep met die naam **admin** interessant, veral die groep **Global Administrators**, kyk na die lede om uit te vind wie die bevoorregte lede is.

Vanuit 'n witboks-oorsig, **moet daar nie meer as 5 globale administrateurs wees** nie (beter as daar slegs 2 of 3 is).

### Toestelle

Vind hier 'n **lys van al die toestelle** van al die gebruikers. Jy kan ook sien of dit aktief bestuur word of nie.

### Profielredakteur

Hier kan jy sien hoe sleutelinligting soos voornames, agternames, e-posse, gebruikersname... gedeel word tussen Okta en ander toepassings. Dit is interessant omdat as 'n gebruiker 'n veld in Okta kan **verander** (soos sy naam of e-pos) wat dan deur 'n **eksterne toepassing** gebruik word om die gebruiker te **identifiseer**, 'n interne persoon kan probeer om ander rekeninge oor te neem.

Verder kan jy in die profiel **`Gebruiker (verstek)`** van Okta sien **watter velde** elke **gebruiker** het en watter een **deur gebruikers geskryf** kan word. As jy nie die administrasiepaneel kan sien nie, gaan net na **werk jou profiel by** en jy sal sien watter velde jy kan opdateer (let daarop dat jy 'n e-posadres moet verifieer om dit op te dateer).

### Gidsintegrasies

Gidse maak dit moontlik om mense van bestaande bronne in te voer. Ek vermoed hier sal jy die gebruikers sien wat uit ander gidse ingevoer is.

Ek het dit nie gesien nie, maar ek vermoed dit is interessant om uit te vind **watter gidse Okta gebruik om gebruikers in te voer**, sodat as jy daardie gids **kompromitteer**, jy sekere eienskapswaardes in die gebruikers wat in Okta geskep is, kan stel en **moontlik die Okta-omgewing kan kompromitteer**.

### Profielbronne

'n Profielbron is 'n **toepassing wat as 'n bron van waarheid optree** vir gebruikersprofielkenmerke. 'n Gebruiker kan slegs deur een toepassing of gids as bron gebruik word.

Ek het dit nie gesien nie, so enige inligting oor sekuriteit en hacking met betrekking tot hierdie opsie word waardeer.

## Aanpassings

### Handelsmerke

Kyk in die **Domeine**-tabblad van hierdie afdeling na die e-posse wat gebruik word om e-posse te stuur en die aangepaste domein binne Okta van die maatskappy (wat jy waarskynlik al ken).

Verder kan jy in die **Instelling**-tabblad, as jy 'n administrateur is, "**'n aangepaste afmeldbladsy gebruik**" en 'n aangepaste URL instel.

### SMS

Niks interessant hier nie.

### Eindgebruikerspaneel

Hier kan jy gekonfigureerde toepassings vind, maar ons sal die besonderhede daarvan later in 'n ander afdeling sien.

### Ander

Interessante instelling, maar niks besonders interessant vanuit 'n sekuriteitsperspektief nie.

## Toepassings

### Toepassings

Hier kan jy al die **gekonfigureerde toepassings** en hul besonderhede vind: Wie het toegang daartoe, hoe is dit gekonfigureer (SAML, OPenID), URL om aan te meld, die koppeling tussen Okta en die toepassing...

In die **`Aanmelding`**-tabblad is daar ook 'n veld genaamd **`Wagwoord onthul`** wat 'n gebruiker in staat sou stel om sy wagwoord te **onthul** wanneer hy die toepassingsinstellings nagaan. Om die instellings van 'n toepassing vanuit die Gebruikerspaneel te kontroleer, klik op die 3 punte:

<figure><img src="../../.gitbook/assets/image (4) (7).png" alt=""><figcaption></figcaption></figure>

En jy kan nog meer besonderhede oor die toepassing sien (soos die wagwoord onthul-funksie, as dit geaktiveer is):

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (3).png" alt=""><figcaption></figcaption></figure>

## Identiteitsbestuur

### Toegangsertifikate

Gebruik Toegangsertifikate om ouditveldtogte te skep om jou gebruikers se toegang tot hulpbronne periodiek te hersien en toegang outomaties goed of terug te trek wanneer dit nodig is.

Ek het dit nie gebruik gesien nie, maar ek vermoed dat dit vanuit 'n verdedigende oogpunt 'n goeie funksie is.

## Sekuriteit

### Algemeen

* **Sekuriteitskennisgewings-e-posse**: Alles moet geaktiveer wees.
* **CAPTCHA-integrasie**: Dit word aanbeveel om ten minste die onsigbare reCaptcha in te stel.
* **Organisasie-sekuriteit**: Alles kan geaktiveer word en aktiverings-e-posse moet nie lank duur nie (7 dae is goed).
* **Voorkoming van gebruikersopnoeming**: Beide moet geaktiveer wees.
* Let daarop dat die voorkoming van gebruikersopnoeming nie van toepassing is as een van die volgende voorwaardes toegelaat word nie (Sien [Gebruikersbestuur](https://help.okta.com/oie/en-us/Content/Topics/users-groups-profiles/usgp-main.htm) vir meer inligting):
* Selfdiensregistrasie
* JIT-vloei met e-posverifikasie
* **Okta ThreatInsight-instellings**: Log en dwing sekuriteit af op grond van die dreigingsvlak

### HealthInsight

Hier kan jy korrek en **gevaarlike** gekonfigureerde **instellings** vind.

### Verifikatore

Hier kan jy al die verifikasiemetodes vind wat 'n gebruiker kan gebruik: Wagwoord, telefoon, e-pos, kode, WebAuthn... Deur op die wagwoordverifikator te klik, kan jy die **wagwoordbeleid** sien. Kyk of dit sterk is.

In die **Inschrywing**-tabblad kan jy sien watter een verpligtend of opsioneel is:

<figure><img src="../../.gitbook/assets/image (21).png" alt=""><figcaption></figcaption></figure>

Dit is aanbeveelbaar om Telefoon uit te skakel. Die sterkste is waarskynlik 'n kombinasie van wagwoord, e-pos en WebAuthn.

###
### Globale Sessiebeleid

Hier kan jy die sessiebeleide vind wat aan verskillende groepe toegewys is. Byvoorbeeld:

<figure><img src="../../.gitbook/assets/image (2) (1) (2).png" alt=""><figcaption></figcaption></figure>

Dit word aanbeveel om MFA aan te vra, die sessielewensduur tot 'n paar uur te beperk, sessie-koekies nie oor blaaieruitbreidings te behou nie, en die ligging en Identiteitsverskaffer (indien moontlik) te beperk. Byvoorbeeld, as elke gebruiker van 'n land moet aanmeld, kan jy slegs hierdie ligging toelaat.

### Identiteitsverskaffers

Identiteitsverskaffers (IdPs) is dienste wat **gebruikersrekeninge bestuur**. Deur IdPs in Okta toe te voeg, kan jou eindgebruikers **selfregistreer** met jou aangepaste programme deur eers te verifieer met 'n sosiale rekening of 'n slimkaart.

Op die Identiteitsverskaffers-bladsy kan jy sosiale aanmeldings (IdPs) byvoeg en Okta as 'n diensverskaffer (SP) konfigureer deur inkomende SAML by te voeg. Nadat jy IdPs bygevoeg het, kan jy roetere√´ls opstel om gebruikers na 'n IdP te stuur op grond van konteks, soos die gebruiker se ligging, toestel, of e-posdomein.

**As enige identiteitsverskaffer gekonfigureer is**, vanuit 'n aanvaller en verdediger se oogpunt, kontroleer daardie konfigurasie en **of die bron werklik betroubaar is**, aangesien 'n aanvaller wat dit kompromitteer ook toegang tot die Okta-omgewing kan verkry.

### Gedelegerde Verifikasie

Gedelegerde verifikasie stel gebruikers in staat om by Okta aan te meld deur inlogbesonderhede vir hul organisasie se **Active Directory (AD) of LDAP**-bediener in te voer.

Hersien dit weer, aangesien 'n aanvaller wat 'n organisasie se AD kompromitteer, in staat kan wees om na Okta te skuif danksy hierdie instelling.

### Netwerk

'n Netwerkzone is 'n konfigureerbare grens wat jy kan gebruik om toegang tot rekenaars en toestelle in jou organisasie te **verleen of te beperk** op grond van die **IP-adres** wat toegang versoek. Jy kan 'n netwerkzone definieer deur een of meer individuele IP-adresse, reekse van IP-adresse, of geografiese ligginge te spesifiseer.

Nadat jy een of meer netwerksones gedefinieer het, kan jy hulle gebruik in Globale Sessiebeleide, verifikasiebeleide, VPN-kennisgewings, en roetere√´ls.

Vanuit 'n aanvaller se perspektief is dit interessant om te weet watter Ps toegelaat word (en om te kontroleer of enige **IP's bevoorregter** is as ander). Vanuit 'n aanvaller se perspektief, as gebruikers vanaf 'n spesifieke IP-adres of streek moet toegang verkry, kontroleer dat hierdie funksie korrek gebruik word.

### Toestel-integrasies

* **Eindpuntbestuur**: Eindpuntbestuur is 'n voorwaarde wat in 'n verifikasiebeleid toegepas kan word om te verseker dat bestuurde toestelle toegang tot 'n toepassing het.
* Ek het dit nog nie gebruik gesien nie. TODO
* **Kennisgewingsdienste**: Ek het dit nog nie gebruik gesien nie. TODO

### API

Jy kan Okta API-tokens op hierdie bladsy skep en sien watter tokens is **geskep**, hul **bevoegdhede**, **vervaltyd** en **Oorsprong-URL's**. Let daarop dat API-tokens gegenereer word met die toestemmings van die gebruiker wat die token geskep het en slegs geldig is as die **gebruiker** wat dit geskep het, **aktief** is.

Die **Vertroude Oorspronge** gee toegang tot webwerwe wat jy beheer en vertrou om toegang tot jou Okta-organisasie te verkry deur die Okta API.

Daar behoort nie baie API-tokens te wees nie, aangesien 'n aanvaller probeer toegang verkry en dit gebruik as daar wel is.

## Werkvloei

### Outomatisering

Outomatisering stel jou in staat om geoutomatiseerde aksies te skep wat uitgevoer word op grond van 'n stel trigger-voorwaardes wat gedurende die lewensiklus van eindgebruikers plaasvind.

Byvoorbeeld, 'n voorwaarde kan wees "Gebruiker onaktief in Okta" of "Gebruiker se wagwoord verval in Okta" en die aksie kan wees "Stuur 'n e-pos aan die gebruiker" of "Verander gebruiker se lewensiklusstatus in Okta".

## Verslae

### Verslae

Laai logboeke af. Hulle word gestuur na die **e-posadres** van die huidige rekening.

### Stelsellogboek

Hier kan jy die **logboeke van die aksies wat deur gebruikers uitgevoer is** vind, met baie besonderhede soos aanmelding in Okta of in programme deur Okta.

### Invoermonitering

Dit kan logboeke **invoer vanaf die ander platforms** wat met Okta gebruik word.

### Tarieflimiete

Kontroleer die API-tarieflimiete wat bereik is.

## Instellings

### Rekening

Hier kan jy **algemene inligting** oor die Okta-omgewing vind, soos die maatskappy se naam, adres, **e-pos faktureringskontak**, **e-pos tegniese kontak**, en ook wie Okta-opdaterings moet ontvang en watter soort Okta-opdaterings.

### Aflaaie

Hier kan jy Okta-agente aflaai om Okta met ander tegnologie√´ te sinchroniseer.

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSKRIPSIEPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks-uitrusting**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
