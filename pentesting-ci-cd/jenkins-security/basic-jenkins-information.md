# Osnovne informacije o Jenkinsu

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Pristup

### Korisničko ime + Lozinka

Najčešći način prijave na Jenkins je putem korisničkog imena ili lozinke.

### Kolačić

Ako se **ukrade ovlašćeni kolačić**, može se koristiti za pristup sesiji korisnika. Kolačić se obično naziva `JSESSIONID.*`. (Korisnik može prekinuti sve svoje sesije, ali prvo mora saznati da je kolačić ukraden).

### SSO/Pluginovi

Jenkins se može konfigurisati korišćenjem pluginova da bude **dostupan putem SSO-a treće strane**.

### Tokeni

**Korisnici mogu generisati tokene** kako bi omogućili pristup aplikacijama da ih oponašaju putem CLI-ja ili REST API-ja.

### SSH ključevi

Ovaj komponenta pruža ugrađeni SSH server za Jenkins. To je alternativni interfejs za [Jenkins CLI](https://www.jenkins.io/doc/book/managing/cli/), i komande se mogu pozvati na ovaj način koristeći bilo koji SSH klijent. (Iz [dokumentacije](https://plugins.jenkins.io/sshd/))

## Autorizacija

U `/configureSecurity` je moguće **konfigurisati metodu autorizacije Jenkins-a**. Postoji nekoliko opcija:

* **Svako može sve**: Čak i anonimni pristup može administrirati server
* **Legacy režim**: Isto kao Jenkins <1.164. Ako imate **"admin" ulogu**, imaćete **potpunu kontrolu** nad sistemom, a **inače** (uključujući **anonimne** korisnike) imaćete samo **pristup za čitanje**.
* **Prijavljeni korisnici mogu sve**: U ovom režimu, svaki **prijavljeni korisnik ima potpunu kontrolu** nad Jenkins-om. Jedini korisnik koji nema potpunu kontrolu je **anonimni korisnik**, koji ima samo **pristup za čitanje**.
* **Matrix-based security**: Možete konfigurisati **ko može šta** u tabeli. Svaka **kolona** predstavlja **dozvolu**. Svaki **red** predstavlja **korisnika ili grupu/ulogu**. Ovo uključuje posebnog korisnika '**anonymous**', koji predstavlja **neautentifikovane korisnike**, kao i '**authenticated**', koji predstavlja **sve autentifikovane korisnike**.

![](<../../.gitbook/assets/image (40).png>)

* **Project-based Matrix Authorization Strategy:** Ovaj režim je **proširenje** za "**Matrix-based security**" koje omogućava dodatnu ACL matricu da se **definiše za svaki projekat posebno**.
* **Role-Based Strategy:** Omogućava definisanje autorizacija korišćenjem **uloga**. Upravljajte ulogama u `/role-strategy`.

## **Security Realm**

U `/configureSecurity` je moguće **konfigurisati security realm**. Po defaultu, Jenkins podržava nekoliko različitih Security Realms:

* **Delegiraj servlet kontejneru**: Za **delegiranje autentifikacije servlet kontejneru koji pokreće Jenkins kontroler**, kao što je [Jetty](https://www.eclipse.org/jetty/).
* **Jenkins-ova sopstvena baza korisnika**: Koristite **Jenkins-ovu sopstvenu ugrađenu bazu podataka korisnika** za autentifikaciju umesto delegiranja eksternom sistemu. Ovo je podrazumevano omogućeno.
* **LDAP**: Delegirajte autentifikaciju konfigurisanom LDAP serveru, uključujući korisnike i grupe.
* **Unix baza korisnika/grupa**: Delegira autentifikaciju na osnovnu Unix bazu korisnika na Jenkins kontroleru. Ovaj režim takođe omogućava ponovnu upotrebu Unix grupa za autorizaciju.

Pluginovi mogu pružiti dodatne security realme koji mogu biti korisni za uključivanje Jenkins-a u postojeće identitetske sisteme, kao što su:

* [Active Directory](https://plugins.jenkins.io/active-directory)
* [GitHub Authentication](https://plugins.jenkins.io/github-oauth)
* [Atlassian Crowd 2](https://plugins.jenkins.io/crowd2)

## Jenkins čvorovi, agenti i izvršioci

Definicije iz [dokumentacije](https://www.jenkins.io/doc/book/managing/nodes/):

**Čvorovi** su **mašine** na kojima se pokreću **agenti za izgradnju**. Jenkins prati svaki povezani čvor za prostor na disku, slobodan privremeni prostor, slobodnu zamenu, vreme/sinhronizaciju sata i vreme odziva. Čvor se isključuje ako bilo koja od ovih vrednosti pređe konfigurisani prag.

**Agenti** **upravljaju** izvršenjem zadataka u ime Jenkins kontrolera koristeći izvršioce. Agent može koristiti bilo koji operativni sistem koji podržava Java-u. Alati potrebni za izgradnju i testiranje instaliraju se na čvoru na kojem se agent pokreće; mogu **se instalirati direktno ili u kontejneru** (Docker ili Kubernetes). Svaki **agent je efektivno proces sa sopstvenim PID-om** na host mašini.

Izvršilac je **slot za izvršavanje zadataka**; efektivno, to je **nit u agentu**. Broj izvršilaca na čvoru definiše broj **paralelnih zadataka** koji mogu biti izvršeni na tom čvoru istovremeno. Drugim rečima, ovo određuje broj **paralelnih Pipeline `stages`** koji mogu biti izvršeni na tom čvoru istovremeno.

## Jenkins Tajne

### Enkripcija Tajni i Akreditiva

Definicija iz [dokumentacije](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials):
Jenkins koristi **AES za enkripciju i zaštitu tajni**, akreditiva i njihovih odgovarajućih ključeva za enkripciju. Ovi ključevi za enkripciju se čuvaju u `$JENKINS_HOME/secrets/` zajedno sa glavnim ključem koji se koristi za zaštitu tih ključeva. Ovaj direktorijum treba konfigurisati tako da samo korisnik operativnog sistema koji pokreće Jenkins kontroler ima pristup za čitanje i pisanje ovom direktorijumu (tj. `chmod` vrednost `0700` ili korišćenje odgovarajućih atributa fajla). **Glavni ključ** (ponekad nazvan "ključ za enkripciju ključeva" u
### Pristup akreditivima

Akreditivi mogu biti **ograničeni na globalne provajdere** (`/credentials/`) koji mogu biti pristupljeni od strane bilo kog konfigurisanog projekta, ili mogu biti ograničeni na **specifične projekte** (`/job/<ime-projekta>/configure`) i stoga pristupačni samo iz tog specifičnog projekta.

Prema [**dokumentaciji**](https://www.jenkins.io/blog/2019/02/21/credentials-masking/): Akreditivi koji su u opsegu su dostupni u pipelajnu bez ograničenja. Da bi se **sprečilo slučajno otkrivanje u zapisu izgradnje**, akreditivi su **maskirani** iz redovnog izlaza, tako da poziv `env` (Linux) ili `set` (Windows), ili programi koji ispisuju svoje okruženje ili parametre ne bi **otkrili ih u zapisu izgradnje** korisnicima koji inače ne bi imali pristup akreditivima.

**Zato napadaču treba, na primer, da ih base64 kodira kako bi izvukao akreditive.**

## Reference

* [https://www.jenkins.io/doc/book/security/managing-security/](https://www.jenkins.io/doc/book/security/managing-security/)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)
* [https://www.jenkins.io/doc/developer/security/secrets/](https://www.jenkins.io/doc/developer/security/secrets/)
* [https://www.jenkins.io/blog/2019/02/21/credentials-masking/](https://www.jenkins.io/blog/2019/02/21/credentials-masking/)
* [https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery)
* [https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
