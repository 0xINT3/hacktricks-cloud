# S√©curit√© d'Okta

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez** üí¨ [**le groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

## Informations de base

Okta, Inc. est une entreprise de **gestion des identit√©s et des acc√®s** qui fournit des logiciels cloud pour aider les entreprises √† **g√©rer et s√©curiser l'authentification des utilisateurs dans les applications modernes**, et pour les d√©veloppeurs √† int√©grer des contr√¥les d'identit√© dans les applications, les services web et les appareils.

Leur service principal, appel√© Okta Identity Cloud, propose des produits tels que l'authentification unique (SSO), l'authentification multi-facteurs (MFA), la gestion du cycle de vie, l'annuaire universel, la gestion de l'acc√®s aux API, et plus encore. Cela permet aux entreprises de prot√©ger leurs donn√©es sensibles et de faciliter l'acc√®s des utilisateurs, rendant les applications et les services plus accessibles et faciles √† utiliser pour les employ√©s ou les clients.

Les services d'Okta sont largement utilis√©s dans les contextes d'entreprise, ainsi que par des petites entreprises et des d√©veloppeurs. Elle joue un r√¥le crucial dans la possibilit√© pour les entreprises d'adopter et de g√©rer de mani√®re s√©curis√©e les technologies cloud. √Ä ma connaissance en septembre 2021, Okta reste un acteur important de l'industrie de la gestion des identit√©s et des acc√®s (IAM).

{% hint style="danger" %}
L'objectif principal d'Okta est de configurer l'acc√®s de diff√©rents utilisateurs et groupes √† des applications externes. Si vous parvenez √† **compromettre les privil√®ges d'administrateur dans un environnement Okta**, vous pourrez tr√®s probablement **compromettre toutes les autres plateformes utilis√©es par l'entreprise**.
{% endhint %}

{% hint style="success" %}
Pour effectuer une analyse de s√©curit√© d'un environnement Okta, vous devriez demander un **acc√®s en lecture seule d'administrateur**.
{% endhint %}

## R√©pertoire

### Personnes

Du point de vue d'un attaquant, cela est tr√®s int√©ressant car vous pourrez voir **tous les utilisateurs enregistr√©s**, leurs adresses **e-mail**, les **groupes** auxquels ils appartiennent, les **profils** et m√™me les **appareils** (t√©l√©phones portables avec leurs syst√®mes d'exploitation).

Pour une revue en bo√Æte blanche, v√©rifiez qu'il n'y a pas plusieurs "Action utilisateur en attente" et "R√©initialisation de mot de passe".

### Groupes

C'est ici que vous trouverez tous les groupes cr√©√©s dans Okta. Il est int√©ressant de comprendre les diff√©rents groupes (ensemble de **permissions**) qui peuvent √™tre accord√©s aux **utilisateurs**.\
Il est possible de voir les **personnes incluses dans les groupes** et les **applications attribu√©es** √† chaque groupe.

Bien s√ªr, tout groupe portant le nom d'**admin** est int√©ressant, en particulier le groupe **Administrateurs globaux**, v√©rifiez les membres pour savoir qui sont les membres les plus privil√©gi√©s.

Dans le cadre d'une revue en bo√Æte blanche, il **ne devrait pas y avoir plus de 5 administrateurs globaux** (mieux s'il n'y en a que 2 ou 3).

### Appareils

Trouvez ici une **liste de tous les appareils** de tous les utilisateurs. Vous pouvez √©galement voir s'ils sont **g√©r√©s activement** ou non.

### √âditeur de profil

Il est possible d'observer ici comment des informations cl√©s telles que les pr√©noms, les noms de famille, les adresses e-mail, les noms d'utilisateur... sont partag√©es entre Okta et d'autres applications. C'est int√©ressant car si un utilisateur peut **modifier dans Okta un champ** (comme son nom ou son adresse e-mail) qui est ensuite utilis√© par une **application externe** pour **identifier** l'utilisateur, un initi√© pourrait essayer de **prendre le contr√¥le d'autres comptes**.

De plus, dans le profil **`Utilisateur (par d√©faut)`** d'Okta, vous pouvez voir **quels champs** chaque **utilisateur** poss√®de et lesquels peuvent √™tre **modifi√©s** par les utilisateurs. Si vous ne pouvez pas voir le panneau d'administration, allez simplement **mettre √† jour vos informations de profil** et vous verrez quels champs vous pouvez mettre √† jour (notez que pour mettre √† jour une adresse e-mail, vous devrez la v√©rifier).

### Int√©grations de r√©pertoire

Les r√©pertoires vous permettent d'importer des personnes √† partir de sources existantes. Je suppose que vous verrez ici les utilisateurs import√©s √† partir d'autres r√©pertoires.

Je ne l'ai pas vu, mais je suppose que cela est int√©ressant pour d√©couvrir **d'autres r√©pertoires qu'Okta utilise pour importer des utilisateurs**, afin que si vous **compromettez ce r√©pertoire**, vous puissiez d√©finir certaines valeurs d'attributs dans les utilisateurs cr√©√©s dans Okta et **peut-√™tre compromettre l'environnement Okta**.

### Sources de profil

Une source de profil est une **application qui sert de source de v√©rit√©** pour les attributs du profil utilisateur. Un utilisateur ne peut √™tre sourc√© que par une seule application ou un seul r√©pertoire √† la fois.

Je ne l'ai pas vu, donc toute information sur la s√©curit√© et le piratage concernant cette option est appr√©ci√©e.

## Personnalisation

### Marques

V√©rifiez dans l'onglet **Domaines** de cette section les adresses e-mail utilis√©es pour envoyer des e-mails et le domaine personnalis√© √† l'int√©rieur d'Okta de l'entreprise (que vous connaissez probablement d√©j√†).

De plus, dans l'onglet **Param√®tres**, si vous √™tes administrateur, vous pouvez "**Utiliser une page de d√©connexion personnalis√©e**" et d√©finir une URL personnalis√©e.

### SMS

Rien d'int√©ressant ici.

### Tableau de bord utilisateur final

Vous pouvez trouver ici les applications configur√©es, mais nous verrons les d√©tails de celles-ci plus tard dans une section diff√©rente.

### Autres

Param√®tre int√©ressant, mais rien de super int√©ressant d'un point de vue de la s√©curit√©.

## Applications

### Applications

Ici, vous pouvez trouver toutes les **applications configur√©es** et leurs d√©tails : Qui y a acc√®s, comment elle est configur√©e (SAML, OpenID), URL de connexion, les correspondances entre Okta et l'application...

## Gouvernance de l'identit√©

### Certifications d'acc√®s

Utilisez les Certifications d'acc√®s pour cr√©er des campagnes d'audit afin de revoir p√©riodiquement l'acc√®s de vos utilisateurs aux ressources et d'approuver ou de r√©voquer automatiquement l'acc√®s lorsque cela est n√©cessaire.

Je ne l'ai pas vu utilis√©, mais je suppose que d'un point de vue d√©fensif, c'est une fonctionnalit√© int√©ressante.

## S√©curit√©

### G√©n√©ral

* **E-mails de notification de s√©curit√©** : Tout devrait √™tre activ√©.
* **Int√©gration CAPTCHA** : Il est recommand√© de d√©finir au moins le reCaptcha invisible.
* **S√©curit√© de l'organisation** : Tout peut √™tre activ√© et les e-mails d'activation ne devraient pas durer longtemps (7 jours, c'est bien).
* **Pr√©vention de l'√©num√©ration des utilisateurs** : Les deux devraient √™tre activ√©s.
* Notez que la pr√©vention de l'√©num√©ration des utilisateurs n'a pas d'effet si l'une des conditions suivantes est autoris√©e (voir [Gestion des utilisateurs](https://help.okta.com/oie/en-us/Content/Topics/users-groups-profiles/usgp-main.htm) pour plus d'informations) :
* Inscription en libre-service
* Flux JIT avec authentification par e-mail
* **Param√®tres Okta ThreatInsight** : Journaliser et appliquer la s√©curit√© en fonction du niveau de menace
### HealthInsight

Ici, il est possible de trouver des param√®tres correctement configur√©s mais **dangereux**.

### Authentificateurs

Ici, vous pouvez trouver toutes les m√©thodes d'authentification, et dans l'onglet **Inscription**, vous pouvez voir comment elles sont requises pour acc√©der √† Okta en fonction de chaque groupe :

<figure><img src="../.gitbook/assets/image (21).png" alt=""><figcaption></figcaption></figure>

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
