# Gh Actions - Uingizaji wa Scripti

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJISAJILI**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## Taarifa Msingi

Tambua kuwa kuna [**muktadha wa github**](https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context) ambao thamani zake zinadhibitiwa na **mtumiaji** anayesababisha PR. Ikiwa hatua ya github inatumia **data hiyo kutekeleza chochote**, inaweza kusababisha **utekelezaji wa nambari za aina yoyote**. Muktadha hawa kawaida huishia na `body`, `default_branch`, `email`, `head_ref`, `label`, `message`, `name`, `page_name`,`ref`, na `title`. Kwa mfano (orodha kutoka kwenye [**makala hii**](https://medium.com/tinder/exploiting-github-actions-on-open-source-projects-5d93936d189f)):

* github.event.comment.body
* github.event.issue.body
* github.event.issue.title
* github.head\_ref
* github.pull\_request.\*
* github.\*.\*.authors.name
* github.\*.\*.authors.email

Tambua kuwa kuna vyanzo **visivyo wazi sana** vya data isiyoaminika, kama majina ya matawi na anwani za barua pepe, ambazo zinaweza kuwa **nyepesi sana kwa upande wa yaliyoruhusiwa**. Kwa mfano, `zzz";echo${IFS}"hello";#` ingekuwa jina sahihi la tawi na inaweza kuwa njia ya shambulio inayowezekana kwa repo lengwa.

### Mfano wa shambulio la uingizaji wa scripti <a href="#example-of-a-script-injection-attack" id="example-of-a-script-injection-attack"></a>

Shambulio la uingizaji wa scripti linaweza kutokea moja kwa moja ndani ya scripti ya mstari wa mwelekeo. Katika mfano ufuatao, hatua inatumia **muktadha kuthibitisha usahihi wa kichwa cha PR**, lakini pia inaongeza hatari ya uingizaji wa scripti:
```yaml
- name: Check PR title
run: |
title="${{ github.event.pull_request.title }}"
if [[ $title =~ ^octocat ]]; then
echo "PR title starts with 'octocat'"
exit 0
else
echo "PR title did not start with 'octocat'"
exit 1
fi
```
Kabla ya script ya shell kutekelezwa, **maelezo ndani ya `${{ }}`** yanafanyiwa **tathmini** na kisha kubadilishwa na thamani zinazopatikana, ambayo inaweza kufanya iwe **dhaifu kwa kuingiza amri za shell**.

Ili kuingiza amri katika mfumo huu, mshambuliaji anaweza kuunda ombi la kuchota na kichwa cha **`a"; ls $GITHUB_WORKSPACE"`**

Katika mfano huu, herufi ya **`"`** hutumiwa kuingilia kati taarifa ya `title=`**`"${{ github.event.pull_request.title }}"`**, kuruhusu amri ya `ls` kutekelezwa kwenye runner.
