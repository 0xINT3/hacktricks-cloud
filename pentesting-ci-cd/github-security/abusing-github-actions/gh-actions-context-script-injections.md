# Gh Actions - Εισαγωγή Σεναρίου

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας στο hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Βασικές Πληροφορίες

Σημειώστε ότι υπάρχουν ορισμένα [**πεδία πλαισίου του github**](https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context) των οποίων οι τιμές ελέγχονται από τον χρήστη που δημιουργεί το PR. Εάν η ενέργεια του github χρησιμοποιεί αυτά τα δεδομένα για να εκτελέσει οτιδήποτε, μπορεί να οδηγήσει σε **αυθαίρετη εκτέλεση κώδικα**. Αυτά τα πεδία πλαισίου συνήθως τελειώνουν με `body`, `default_branch`, `email`, `head_ref`, `label`, `message`, `name`, `page_name`,`ref` και `title`. Για παράδειγμα (λίστα από αυτό το [**άρθρο**](https://medium.com/tinder/exploiting-github-actions-on-open-source-projects-5d93936d189f)):

* github.event.comment.body
* github.event.issue.body
* github.event.issue.title
* github.head\_ref
* github.pull\_request.\*
* github.\*.\*.authors.name
* github.\*.\*.authors.email

Σημειώστε ότι υπάρχουν **λιγότερο προφανείς πηγές** πιθανώς μη αξιόπιστης εισόδου, όπως ονόματα κλαδιών και διευθύνσεις email, που μπορούν να είναι **αρκετά ευέλικτες όσον αφορά το επιτρεπόμενο περιεχόμενο** τους. Για παράδειγμα, `zzz";echo${IFS}"hello";#` θα ήταν ένα έγκυρο όνομα κλαδιού και θα μπορούσε να αποτελέσει ένα δυνητικό διανυσματικό επίθεσης για έναν στόχο αποθετηρίου.

### Παράδειγμα μιας επίθεσης εισαγωγής σεναρίου <a href="#example-of-a-script-injection-attack" id="example-of-a-script-injection-attack"></a>

Μια επίθεση εισαγωγής σεναρίου μπορεί να συμβεί απευθείας μέσα στο ενσωματωμένο σενάριο μιας ροής εργασίας. Στο παρακάτω παράδειγμα, μια ενέργεια χρησιμοποιεί μια **έκφραση για να ελέγξει την ορθότητα του τίτλου ενός pull request**, αλλά προσθέτει επίσης τον κίνδυνο εισαγωγής σεναρίου:
```yaml
- name: Check PR title
run: |
title="${{ github.event.pull_request.title }}"
if [[ $title =~ ^octocat ]]; then
echo "PR title starts with 'octocat'"
exit 0
else
echo "PR title did not start with 'octocat'"
exit 1
fi
```
Πριν την εκτέλεση του shell script, οι εκφράσεις μέσα στο `${{ }}` αξιολογούνται και στη συνέχεια αντικαθίστανται με τις αντίστοιχες τιμές, πράγμα που μπορεί να το καθιστά ευάλωτο σε εντολές εισαγωγής κελύφους.

Για να εισαχθούν εντολές σε αυτήν τη ροή εργασίας, ο επιτιθέμενος μπορεί να δημιουργήσει ένα αίτημα εξαγωγής με τίτλο **`a"; ls $GITHUB_WORKSPACE"`**

Σε αυτό το παράδειγμα, το χαρακτήρας **`"`** χρησιμοποιείται για να διακόψει την δήλωση `title=`**`"${{ github.event.pull_request.title }}"`**, επιτρέποντας την εκτέλεση της εντολής `ls` στον runner.

<details>

<summary><strong>Μάθετε το hacking στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
