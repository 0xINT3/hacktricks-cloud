# Informa√ß√µes B√°sicas do Github

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ quiser ver sua **empresa anunciada no HackTricks** ou se quiser acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Obtenha o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegrama**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para** [**HackTricks**](https://github.com/carlospolop/hacktricks) **e** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos.**

</details>

## Estrutura B√°sica

A estrutura b√°sica do ambiente do Github de uma grande **empresa** √© possuir uma **empresa** que possui **v√°rias organiza√ß√µes** e cada uma delas pode conter **v√°rios reposit√≥rios** e **v√°rias equipes**. Empresas menores podem possuir apenas **uma organiza√ß√£o e nenhuma empresa**.

Do ponto de vista do usu√°rio, um **usu√°rio** pode ser um **membro** de **diferentes empresas e organiza√ß√µes**. Dentro delas, o usu√°rio pode ter **diferentes fun√ß√µes de empresa, organiza√ß√£o e reposit√≥rio**.

Al√©m disso, um usu√°rio pode fazer **parte de diferentes equipes** com fun√ß√µes diferentes de empresa, organiza√ß√£o ou reposit√≥rio.

E, finalmente, **os reposit√≥rios podem ter mecanismos de prote√ß√£o especiais**.

## Privil√©gios

### Fun√ß√µes da Empresa

* **Propriet√°rio da empresa**: Pessoas com essa fun√ß√£o podem **gerenciar administradores, gerenciar organiza√ß√µes dentro da empresa, gerenciar configura√ß√µes da empresa, aplicar pol√≠ticas em todas as organiza√ß√µes**. No entanto, eles **n√£o podem acessar as configura√ß√µes ou o conte√∫do da organiza√ß√£o** a menos que sejam tornados propriet√°rios da organiza√ß√£o ou recebam acesso direto a um reposit√≥rio de propriedade da organiza√ß√£o.
* **Membros da empresa**: Membros das organiza√ß√µes de propriedade da sua empresa tamb√©m s√£o **automaticamente membros da empresa**.

### Fun√ß√µes da Organiza√ß√£o

Em uma organiza√ß√£o, os usu√°rios podem ter fun√ß√µes diferentes:

* **Propriet√°rios da organiza√ß√£o**: Os propriet√°rios da organiza√ß√£o t√™m **acesso administrativo completo √† sua organiza√ß√£o**. Essa fun√ß√£o deve ser limitada, mas n√£o a menos de duas pessoas, em sua organiza√ß√£o.
* **Membros da organiza√ß√£o**: A fun√ß√£o **padr√£o**, n√£o administrativa, para **pessoas em uma organiza√ß√£o** √© a de membro da organiza√ß√£o. Por padr√£o, os membros da organiza√ß√£o **t√™m v√°rias permiss√µes**.
* **Gerentes de cobran√ßa**: Gerentes de cobran√ßa s√£o usu√°rios que podem **gerenciar as configura√ß√µes de cobran√ßa para sua organiza√ß√£o**, como informa√ß√µes de pagamento.
* **Gerentes de seguran√ßa**: √â uma fun√ß√£o que os propriet√°rios da organiza√ß√£o podem atribuir a qualquer equipe em uma organiza√ß√£o. Quando aplicada, ela d√° a todos os membros da equipe permiss√µes para **gerenciar alertas e configura√ß√µes de seguran√ßa em toda a sua organiza√ß√£o, bem como permiss√µes de leitura para todos os reposit√≥rios** na organiza√ß√£o.
  * Se sua organiza√ß√£o tiver uma equipe de seguran√ßa, voc√™ pode usar a fun√ß√£o de gerente de seguran√ßa para dar aos membros da equipe o menor acesso necess√°rio √† organiza√ß√£o.
* **Gerentes de aplicativos do Github**: Para permitir que usu√°rios adicionais **gerenciem aplicativos do GitHub de propriedade de uma organiza√ß√£o**, um propriet√°rio pode conceder a eles permiss√µes de gerente de aplicativos do GitHub.
* **Colaboradores externos**: Um colaborador externo √© uma pessoa que tem **acesso a um ou mais reposit√≥rios da organiza√ß√£o, mas n√£o √© explicitamente um membro** da organiza√ß√£o.

Voc√™ pode **comparar as permiss√µes** dessas fun√ß√µes nesta tabela: [https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/roles-in-an-organization#permissions-for-organization-roles](https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/roles-in-an-organization#permissions-for-organization-roles)

### Privil√©gios dos Membros

Em _https://github.com/organizations/\<org\_name>/settings/member\_privileges_ voc√™ pode ver as **permiss√µes que os usu√°rios ter√£o apenas por serem membros da organiza√ß√£o**.

As configura√ß√µes aqui configuradas indicar√£o as seguintes permiss√µes dos membros da organiza√ß√£o:

* Ser administrador, escritor, leitor ou sem permiss√£o em todos os reposit√≥rios da organiza√ß√£o.
* Se os membros podem criar reposit√≥rios privados, internos ou p√∫blicos.
* Se o fork de reposit√≥rios √© poss√≠vel
* Se √© poss√≠vel convidar colaboradores externos
* Se sites p√∫blicos ou privados podem ser publicados
* As permiss√µes que os administradores t√™m sobre os reposit√≥rios
* Se os membros podem criar novas equipes

### Fun√ß√µes do Reposit√≥rio

Por padr√£o, as fun√ß√µes do reposit√≥rio s√£o criadas:

* **Leitura**: recomendado para **contribuintes n√£o relacionados ao c√≥digo** que desejam visualizar ou discutir seu projeto
* **Triagem**: recomendado para **contribuintes que precisam gerenciar proativamente problemas e solicita√ß√µes de pull** sem acesso de grava√ß√£o
* **Escrita**: recomendado para contribuintes que **empurram ativamente para o seu projeto**
* **Manuten√ß√£o**: recomendado para **gerentes de projeto que precisam gerenciar o reposit√≥rio** sem acesso a a√ß√µes sens√≠veis ou destrutivas
* **Admin**: recomendado para pessoas que precisam de **acesso total ao projeto**, incluindo a√ß√µes sens√≠veis e destrutivas, como gerenciar seguran√ßa ou excluir um reposit√≥rio

Voc√™ pode **comparar as permiss√µes** de cada fun√ß√£o nesta tabela [https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role](https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role)

Voc√™ tamb√©m pode **criar suas pr√≥prias fun√ß√µes** em _https://github.com/organizations/\<org\_name>/settings/roles_

### Equipes

Voc√™ pode **listar as equipes criadas em uma organiza√ß√£o** em _https://github.com/orgs/\<org\_name>/teams_. Observe que, para ver as equipes que s√£o filhas de outras equipes, voc√™ precisa acessar cada equipe pai.

### Usu√°rios

Os usu√°rios de uma organiza√ß√£o podem ser **listados** em _https://github.com/orgs/\<org\_name>/people._

Nas informa√ß√µes de cada usu√°rio, voc√™ pode ver as **equipes das quais o usu√°rio √© membro** e os **reposit√≥rios aos quais o usu√°rio tem acesso**.

## Autentica√ß√£o do Github

O Github oferece diferentes maneiras de autenticar em sua conta e realizar a√ß√µes em seu nome.

### Acesso Web

Acessando o **github.com**, voc√™ pode fazer login usando seu **nome de usu√°rio e senha** (e um **2FA potencialmente**).

### **Chaves SSH**

Voc√™ pode configurar sua conta com uma ou v√°rias chaves p√∫blicas permitindo que a chave privada relacionada **execute a√ß√µes em seu nome**. [https://github.com/settings/keys](
### Aplica√ß√µes do Github

As aplica√ß√µes do Github podem solicitar permiss√µes para **acessar suas informa√ß√µes do Github ou se passar por voc√™** para realizar a√ß√µes espec√≠ficas em recursos espec√≠ficos. Nas aplica√ß√µes do Github, voc√™ precisa especificar os reposit√≥rios aos quais a aplica√ß√£o ter√° acesso.

* Para instalar um aplicativo do GitHub, voc√™ deve ser um **propriet√°rio da organiza√ß√£o ou ter permiss√µes de administrador** em um reposit√≥rio.
* O aplicativo do GitHub deve **se conectar a uma conta pessoal ou a uma organiza√ß√£o**.
* Voc√™ pode criar sua pr√≥pria aplica√ß√£o do Github em [https://github.com/settings/apps](https://github.com/settings/apps)
* Voc√™ pode ver todas as **aplica√ß√µes do Github que t√™m acesso √† sua conta** em [https://github.com/settings/apps/authorizations](https://github.com/settings/apps/authorizations)
* Estes s√£o os **pontos finais da API para Aplica√ß√µes do Github** [https://docs.github.com/en/rest/overview/endpoints-available-for-github-app](https://docs.github.com/en/rest/overview/endpoints-available-for-github-apps). Dependendo das permiss√µes do aplicativo, ele poder√° acessar alguns deles.
* Voc√™ pode ver aplicativos instalados em uma **organiza√ß√£o** em _https://github.com/organizations/\<org\_name>/settings/installations_

Algumas recomenda√ß√µes de seguran√ßa:

* Um aplicativo do GitHub deve **tomar a√ß√µes independentes de um usu√°rio** (a menos que o aplicativo esteja usando um token [usu√°rio-para-servidor](https://docs.github.com/en/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps#user-to-server-requests)). Para manter os tokens de acesso do usu√°rio para o servidor mais seguros, voc√™ pode usar tokens de acesso que expirar√£o ap√≥s 8 horas e um token de atualiza√ß√£o que pode ser trocado por um novo token de acesso. Para mais informa√ß√µes, consulte "[Atualizando tokens de acesso do usu√°rio para o servidor](https://docs.github.com/en/apps/building-github-apps/refreshing-user-to-server-access-tokens)."
* Certifique-se de que o aplicativo do GitHub se integra a **reposit√≥rios espec√≠ficos**.
* O aplicativo do GitHub deve **se conectar a uma conta pessoal ou a uma organiza√ß√£o**.
* N√£o espere que o aplicativo do GitHub saiba e fa√ßa tudo o que um usu√°rio pode fazer.
* **N√£o use um aplicativo do GitHub se voc√™ precisar apenas de um servi√ßo "Login com o GitHub"**. Mas um aplicativo do GitHub pode usar um [fluxo de identifica√ß√£o do usu√°rio](https://docs.github.com/en/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps) para fazer login nos usu√°rios _e_ fazer outras coisas.
* N√£o crie um aplicativo do GitHub se voc√™ _apenas_ quiser agir como um usu√°rio do GitHub e fazer tudo o que o usu√°rio pode fazer.
* Se voc√™ estiver usando seu aplicativo com a√ß√µes do GitHub e quiser modificar arquivos de fluxo de trabalho, dever√° autenticar em nome do usu√°rio com um token OAuth que inclua o escopo `workflow`. O usu√°rio deve ter permiss√£o de administrador ou grava√ß√£o para o reposit√≥rio que cont√©m o arquivo de fluxo de trabalho. Para mais informa√ß√µes, consulte "[Compreendendo escopos para aplicativos OAuth](https://docs.github.com/en/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/#available-scopes)."
* **Mais** em [aqui](https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps).

### A√ß√µes do Github

Isso **n√£o √© uma maneira de autenticar no Github**, mas uma **a√ß√£o maliciosa do Github** pode obter **acesso n√£o autorizado ao Github** e, **dependendo** dos **privil√©gios** concedidos √† a√ß√£o, v√°rios **ataques diferentes** podem ser realizados. Veja abaixo para mais informa√ß√µes.

## A√ß√µes do Git

As a√ß√µes do Git permitem automatizar a **execu√ß√£o de c√≥digo quando um evento ocorre**. Geralmente, o c√≥digo executado est√° **de alguma forma relacionado ao c√≥digo do reposit√≥rio** (talvez construir um cont√™iner Docker ou verificar se o PR n√£o cont√©m segredos).

### Configura√ß√£o

Em _https://github.com/organizations/\<org\_name>/settings/actions_, √© poss√≠vel verificar a **configura√ß√£o das a√ß√µes do Github** para a organiza√ß√£o.

√â poss√≠vel proibir completamente o uso de a√ß√µes do Github, **permitir todas as a√ß√µes do Github** ou apenas permitir determinadas a√ß√µes.

Tamb√©m √© poss√≠vel configurar **quem precisa aprovar a execu√ß√£o de uma A√ß√£o do Github** e as **permiss√µes do GITHUB\_TOKEN** de uma A√ß√£o do Github quando ela √© executada.

### Segredos do Git

As a√ß√µes do Github geralmente precisam de algum tipo de segredo para interagir com o Github ou aplicativos de terceiros. Para **evitar coloc√°-los em texto claro** no reposit√≥rio, o Github permite coloc√°-los como **Segredos**.

Esses segredos podem ser configurados **para o reposit√≥rio ou para toda a organiza√ß√£o**. Em seguida, para que a **A√ß√£o possa acessar o segredo**, voc√™ precisa declar√°-lo assim:

```yaml
steps:
  - name: Hello world action
    with: # Defina o segredo como uma entrada
      super_secret: ${{ secrets.SuperSecret }}
    env: # Ou como uma vari√°vel de ambiente
      super_secret: ${{ secrets.SuperSecret }}
```

#### Exemplo usando Bash <a href="#example-using-bash" id="example-using-bash"></a>

```yaml
steps:
  - shell: bash
    env:
      SUPER_SECRET: ${{ secrets.SuperSecret }}
    run: |
      example-command "$SUPER_SECRET"
```

{% hint style="warning" %}
Os segredos **s√≥ podem ser acessados pelas A√ß√µes do Github** que os declararam.

Depois de configurados no reposit√≥rio ou nas organiza√ß√µes, **os usu√°rios do Github n√£o poder√£o mais acess√°-los**, eles apenas poder√£o **alter√°-los**.
{% endhint %}

Portanto, a **√∫nica maneira de roubar segredos do Github √© ser capaz de acessar a m√°quina que est√° executando a A√ß√£o do Github** (nesses cen√°rios, voc√™ s√≥ poder√° acessar os segredos declarados para a A√ß√£o).

### Ambientes do Git

O Github permite criar **ambientes** onde voc√™ pode salvar **segredos**. Em seguida, voc√™ pode dar √† a√ß√£o do Github acesso aos segredos dentro do ambiente com algo como:

```yaml
jobs:
  deployment:
    runs-on: ubuntu-latest
    environment: env_name
```

Voc√™ pode configurar um ambiente para ser **acessado** por **todos os branches** (padr√£o), **apenas branches protegidos** ou **especificar** quais branches podem acess√°-lo.\
Tamb√©m √© poss√≠vel definir um **n√∫mero de revis√µes necess√°rias** antes de **executar** uma **a√ß√£o** usando um **ambiente** ou **esperar** algum **tempo** antes de permitir que as implanta√ß√µes prossigam.

### Executador de A√ß√µes do Git

Uma A√ß√£o do Github pode ser **executada dentro do ambiente do Github** ou pode ser executada em uma **infraestrutura de terceiros** configurada pelo usu√°rio.

V√°rias organiza√ß√µes permitir√£o a execu√ß√£o de A√ß√µes do Github em uma **infraestrutura de terceiros** porque costuma ser **mais barato**.

Voc√™ pode **list
## Refer√™ncias

* [https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization](https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization)
* [https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise](https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise)[https://docs.github.com/en/enterprise-server](https://docs.github.com/en/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise)
* [https://docs.github.com/en/get-started/learning-about-github/access-permissions-on-github](https://docs.github.com/en/get-started/learning-about-github/access-permissions-on-github)
* [https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/permission-levels-for-user-owned-project-boards](https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/permission-levels-for-user-owned-project-boards)
* [https://docs.github.com/en/actions/security-guides/encrypted-secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets)

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ quiser ver sua **empresa anunciada no HackTricks** ou se quiser acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github.

</details>