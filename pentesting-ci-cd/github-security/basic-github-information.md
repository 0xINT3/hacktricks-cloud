# Informations de base sur Github

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez** üí¨ [**le groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **d√©p√¥ts Github.**

</details>

## Structure de base

La structure de base de l'environnement Github d'une grande **entreprise** est de poss√©der une **entreprise** qui poss√®de **plusieurs organisations** et chacune d'entre elles peut contenir **plusieurs d√©p√¥ts** et **plusieurs √©quipes**. Les plus petites entreprises peuvent simplement **poss√©der une seule organisation et aucune entreprise**.

Du point de vue de l'utilisateur, un **utilisateur** peut √™tre **membre** de **diff√©rentes entreprises et organisations**. Au sein de celles-ci, l'utilisateur peut avoir **diff√©rents r√¥les d'entreprise, d'organisation et de d√©p√¥t**.

De plus, un utilisateur peut faire **partie de diff√©rentes √©quipes** avec des r√¥les d'entreprise, d'organisation ou de d√©p√¥t diff√©rents.

Et enfin, **les d√©p√¥ts peuvent avoir des m√©canismes de protection sp√©ciaux**.

## Privil√®ges

### R√¥les d'entreprise

* **Propri√©taire de l'entreprise** : Les personnes ayant ce r√¥le peuvent **g√©rer les administrateurs, g√©rer les organisations au sein de l'entreprise, g√©rer les param√®tres de l'entreprise, appliquer des politiques dans les organisations**. Cependant, ils **ne peuvent pas acc√©der aux param√®tres ou au contenu de l'organisation** √† moins qu'ils ne soient propri√©taires de l'organisation ou qu'ils aient un acc√®s direct √† un d√©p√¥t appartenant √† l'organisation.
* **Membres de l'entreprise** : Les membres des organisations appartenant √† votre entreprise sont √©galement **automatiquement membres de l'entreprise**.

### R√¥les d'organisation

Dans une organisation, les utilisateurs peuvent avoir diff√©rents r√¥les :

* **Propri√©taires de l'organisation** : Les propri√©taires de l'organisation ont **un acc√®s administratif complet √† votre organisation**. Ce r√¥le doit √™tre limit√©, mais √† au moins deux personnes, dans votre organisation.
* **Membres de l'organisation** : Le r√¥le **par d√©faut**, non administratif, pour **les personnes dans une organisation** est le membre de l'organisation. Par d√©faut, les membres de l'organisation **ont un certain nombre de permissions**.
* **Gestionnaires de facturation** : Les gestionnaires de facturation sont des utilisateurs qui peuvent **g√©rer les param√®tres de facturation de votre organisation**, tels que les informations de paiement.
* **Gestionnaires de s√©curit√©** : C'est un r√¥le que les propri√©taires d'organisation peuvent attribuer √† n'importe quelle √©quipe d'une organisation. Lorsqu'il est appliqu√©, il donne √† chaque membre de l'√©quipe des autorisations pour **g√©rer les alertes et les param√®tres de s√©curit√© dans toute votre organisation, ainsi que des autorisations de lecture pour tous les d√©p√¥ts** de l'organisation.
  * Si votre organisation dispose d'une √©quipe de s√©curit√©, vous pouvez utiliser le r√¥le de gestionnaire de s√©curit√© pour donner aux membres de l'√©quipe le moins d'acc√®s dont ils ont besoin √† l'organisation.
* **Gestionnaires d'applications Github** : Pour permettre √† des utilisateurs suppl√©mentaires de **g√©rer les applications GitHub appartenant √† une organisation**, un propri√©taire peut leur accorder des autorisations de gestionnaire d'application GitHub.
* **Collaborateurs externes** : Un collaborateur externe est une personne qui a **acc√®s √† un ou plusieurs d√©p√¥ts de l'organisation mais qui n'est pas explicitement membre** de l'organisation.

Vous pouvez **comparer les permissions** de ces r√¥les dans ce tableau : [https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/roles-in-an-organization#permissions-for-organization-roles](https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/roles-in-an-organization#permissions-for-organization-roles)

### Privil√®ges des membres

Dans _https://github.com/organizations/\<org\_name>/settings/member\_privileges_, vous pouvez voir les **permissions que les utilisateurs auront simplement en faisant partie de l'organisation**.

Les param√®tres configur√©s ici indiqueront les autorisations suivantes des membres de l'organisation :

* √ätre administrateur, r√©dacteur, lecteur ou aucune autorisation sur tous les d√©p√¥ts de l'organisation.
* Si les membres peuvent cr√©er des d√©p√¥ts priv√©s, internes ou publics.
* Si la duplication des d√©p√¥ts est possible
* S'il est possible d'inviter des collaborateurs externes
* Si des sites publics ou priv√©s peuvent √™tre publi√©s
* Les autorisations que les administrateurs ont sur les d√©p√¥ts
* Si les membres peuvent cr√©er de nouvelles √©quipes

### R√¥les de d√©p√¥t

Par d√©faut, les r√¥les de d√©p√¥t sont cr√©√©s :

* **Lecture** : recommand√© pour les **non-contributeurs de code** qui souhaitent afficher ou discuter de votre projet
* **Triage** : recommand√© pour les **contributeurs qui ont besoin de g√©rer de mani√®re proactive les probl√®mes et les demandes de tirage** sans acc√®s en √©criture
* **√âcriture** : recommand√© pour les contributeurs qui **poussent activement votre projet**
* **Maintenance** : recommand√© pour les **gestionnaires de projet qui ont besoin de g√©rer le d√©p√¥t** sans acc√®s aux actions sensibles ou destructrices
* **Admin** : recommand√© pour les personnes qui ont besoin d'**un acc√®s complet au projet**, y compris des actions sensibles et destructrices telles que la gestion de la s√©curit√© ou la suppression d'un d√©p√¥t

Vous pouvez **comparer les permissions** de chaque r√¥le dans ce tableau [https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role](https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role)

Vous pouvez √©galement **cr√©er vos propres r√¥les** dans _https://github.com/organizations/\<org\_name>/settings/roles_

### √âquipes

Vous pouvez **listez les √©quipes cr√©√©es dans une organisation** dans _https://github.com/orgs/\<org\_name>/teams_. Notez que pour voir les √©quipes qui sont des enfants d'autres √©quipes, vous devez acc√©der √† chaque √©quipe parente.

### Utilisateurs

Les utilisateurs d'une organisation peuvent √™tre **list√©s** dans _https://github.com/orgs/\<org\_name>/people._

Dans les informations de chaque utilisateur, vous pouvez voir les **√©quipes dont l'utilisateur est membre** et les **d√©p√¥ts auxquels l'utilisateur a acc√®s**.

## Authentification Github

Github offre diff√©rentes fa√ßons de s'authentifier √† votre compte et d'effectuer des actions en votre nom.

### Acc√®s Web

En acc√©dant √† **github.com**, vous pouvez vous
### Applications Github

Les applications Github peuvent demander des autorisations pour **acc√©der √† vos informations Github ou vous impersonnaliser** pour effectuer des actions sp√©cifiques sur des ressources sp√©cifiques. Dans les applications Github, vous devez sp√©cifier les r√©f√©rentiels auxquels l'application aura acc√®s.

* Pour installer une application GitHub, vous devez √™tre un **propri√©taire d'organisation ou avoir des autorisations d'administrateur** dans un r√©f√©rentiel.
* L'application GitHub doit **se connecter √† un compte personnel ou √† une organisation**.
* Vous pouvez cr√©er votre propre application Github dans [https://github.com/settings/apps](https://github.com/settings/apps)
* Vous pouvez voir toutes les **applications Github qui ont acc√®s √† votre compte** dans [https://github.com/settings/apps/authorizations](https://github.com/settings/apps/authorizations)
* Ce sont les **points d'extr√©mit√© API pour les applications Github** [https://docs.github.com/en/rest/overview/endpoints-available-for-github-app](https://docs.github.com/en/rest/overview/endpoints-available-for-github-apps). Selon les autorisations de l'application, elle pourra acc√©der √† certains d'entre eux.
* Vous pouvez voir les applications install√©es dans une **organisation** dans _https://github.com/organizations/\<org\_name>/settings/installations_

Quelques recommandations de s√©curit√© :

* Une application GitHub doit **prendre des mesures ind√©pendantes d'un utilisateur** (sauf si l'application utilise un jeton [demande d'utilisateur √† serveur](https://docs.github.com/en/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps#user-to-server-requests)). Pour garder les jetons d'acc√®s utilisateur-serveur plus s√©curis√©s, vous pouvez utiliser des jetons d'acc√®s qui expireront apr√®s 8 heures et un jeton de rafra√Æchissement qui peut √™tre √©chang√© contre un nouveau jeton d'acc√®s. Pour plus d'informations, voir "[Rafra√Æchissement des jetons d'acc√®s utilisateur-serveur](https://docs.github.com/en/apps/building-github-apps/refreshing-user-to-server-access-tokens)."
* Assurez-vous que l'application GitHub s'int√®gre √† des **r√©f√©rentiels sp√©cifiques**.
* L'application GitHub doit **se connecter √† un compte personnel ou √† une organisation**.
* Ne vous attendez pas √† ce que l'application GitHub sache et fasse tout ce qu'un utilisateur peut faire.
* **N'utilisez pas une application GitHub si vous avez juste besoin d'un service "Connexion avec GitHub"**. Mais une application GitHub peut utiliser un [flux d'identification utilisateur](https://docs.github.com/en/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps) pour connecter les utilisateurs _et_ faire d'autres choses.
* Ne construisez pas une application GitHub si vous voulez _seulement_ agir en tant qu'utilisateur GitHub et faire tout ce que cet utilisateur peut faire.
* Si vous utilisez votre application avec des actions GitHub et que vous voulez modifier des fichiers de flux de travail, vous devez vous authentifier au nom de l'utilisateur avec un jeton OAuth qui inclut la port√©e `workflow`. L'utilisateur doit avoir une autorisation d'administrateur ou d'√©criture pour le r√©f√©rentiel qui contient le fichier de flux de travail. Pour plus d'informations, voir "[Comprendre les port√©es pour les applications OAuth](https://docs.github.com/en/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/#available-scopes)."
* **Plus** dans [ici](https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps).

### Actions Github

Ce n'est pas un moyen de s'authentifier sur Github, mais une Github Action **malveillante** pourrait obtenir un **acc√®s non autoris√© √† Github** et **en fonction** des **privil√®ges** accord√©s √† l'Action, plusieurs **attaques diff√©rentes** pourraient √™tre effectu√©es. Voir ci-dessous pour plus d'informations.

## Actions Git

Les actions Git permettent d'automatiser l'**ex√©cution de code lorsqu'un √©v√©nement se produit**. En g√©n√©ral, le code ex√©cut√© est **quelque peu li√© au code du r√©f√©rentiel** (peut-√™tre construire un conteneur Docker ou v√©rifier que la PR ne contient pas de secrets).

### Configuration

Dans _https://github.com/organizations/\<org\_name>/settings/actions_, il est possible de v√©rifier la **configuration des actions Github** pour l'organisation.

Il est possible d'interdire compl√®tement l'utilisation des actions Github, **d'autoriser toutes les actions Github**, ou simplement d'autoriser certaines actions.

Il est √©galement possible de configurer **qui a besoin d'une approbation pour ex√©cuter une action Github** et les **autorisations du jeton GITHUB\_TOKEN** d'une action Github lorsqu'elle est ex√©cut√©e.

### Secrets Git

Les actions Github ont g√©n√©ralement besoin d'un certain type de secrets pour interagir avec Github ou des applications tierces. Pour **√©viter de les mettre en clair** dans le r√©f√©rentiel, Github permet de les mettre en tant que **secrets**.

Ces secrets peuvent √™tre configur√©s **pour le r√©f√©rentiel ou pour toute l'organisation**. Ensuite, pour que **l'action puisse acc√©der au secret**, vous devez le d√©clarer comme ceci :

```yaml
steps:
  - name: Hello world action
    with: # Set the secret as an input
      super_secret: ${{ secrets.SuperSecret }}
    env: # Or as an environment variable
      super_secret: ${{ secrets.SuperSecret }}
```

#### Exemple utilisant Bash <a href="#example-using-bash" id="example-using-bash"></a>

```yaml
steps:
  - shell: bash
    env:
      SUPER_SECRET: ${{ secrets.SuperSecret }}
    run: |
      example-command "$SUPER_SECRET"
```

{% hint style="warning" %}
Les secrets **ne peuvent √™tre accessibles que depuis les actions Github** qui les ont d√©clar√©s.

Une fois configur√©s dans le r√©f√©rentiel ou les organisations, **les utilisateurs de Github ne pourront plus y acc√©der**, ils pourront simplement les **modifier**.
{% endhint %}

Par cons√©quent, la **seule fa√ßon de voler des secrets Github est de pouvoir acc√©der √† la machine qui ex√©cute l'action Github** (dans ce sc√©nario, vous pourrez acc√©der uniquement aux secrets d√©clar√©s pour l'action).

### Environnements Git

Github permet de cr√©er des **environnements** o√π vous pouvez enregistrer des **secrets**. Ensuite, vous pouvez donner √† l'action Github l'acc√®s aux secrets √† l'int√©rieur de l'environnement avec quelque chose comme :

```yaml
jobs:
  deployment:
    runs-on: ubuntu-latest
    environment: env_name
```

Vous pouvez configurer un environnement pour √™tre **accessible** par **toutes les branches** (par d√©faut), **seulement les branches prot√©g√©es** ou **sp√©cifier** quelles branches peuvent y acc√©der.\
Il est √©galement possible de d√©finir un **nombre d'approbations requises** avant d'**ex√©cuter** une **action** en utilisant un **environnement** ou d'**attendre** un **certain temps** avant de permettre aux d√©ploiements de se poursuivre.

### Ex√©cuteur d'actions Git

Une action Github peut √™tre **ex√©cut√©e √† l'int√©rieur de l'environnement Github** ou peut √™tre ex√©cut√©e dans une **infrastructure tierce** configur√©e par l'utilisateur.

Plus
## R√©f√©rences

* [https://docs.github.com/fr/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization](https://docs.github.com/fr/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization)
* [https://docs.github.com/fr/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise](https://docs.github.com/fr/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise)[https://docs.github.com/fr/enterprise-server](https://docs.github.com/fr/enterprise-server@3.3/admin/user-management/managing-users-in-your-enterprise/roles-in-an-enterprise)
* [https://docs.github.com/fr/get-started/learning-about-github/access-permissions-on-github](https://docs.github.com/fr/get-started/learning-about-github/access-permissions-on-github)
* [https://docs.github.com/fr/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/permission-levels-for-user-owned-project-boards](https://docs.github.com/fr/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/permission-levels-for-user-owned-project-boards)
* [https://docs.github.com/fr/actions/security-guides/encrypted-secrets](https://docs.github.com/fr/actions/security-guides/encrypted-secrets)

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez** üí¨ [**le groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **d√©p√¥ts github.**

</details>