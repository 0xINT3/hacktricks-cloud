# S√©curit√© de TravisCI

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert Red Team AWS HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

## Qu'est-ce que TravisCI

**Travis CI** est un service d'**int√©gration continue** h√©berg√© ou sur site utilis√© pour construire et tester des projets logiciels h√©berg√©s sur plusieurs **plateformes git diff√©rentes**.

{% content-ref url="basic-travisci-information.md" %}
[basic-travisci-information.md](basic-travisci-information.md)
{% endcontent-ref %}

## Attaques

### D√©clencheurs

Pour lancer une attaque, vous devez d'abord savoir comment d√©clencher une construction. Par d√©faut, TravisCI va **d√©clencher une construction sur les pouss√©es et les demandes de tirage** :

![](<../../.gitbook/assets/image (19) (1).png>)

#### T√¢ches Cron

Si vous avez acc√®s √† l'application web, vous pouvez **d√©finir des t√¢ches cron pour ex√©cuter la construction**, cela pourrait √™tre utile pour la persistance ou pour d√©clencher une construction :

![](<../../.gitbook/assets/image (42).png>)

{% hint style="info" %}
Il semble qu'il ne soit pas possible de d√©finir des t√¢ches cron √† l'int√©rieur du fichier `.travis.yml` selon [ceci](https://github.com/travis-ci/travis-ci/issues/9162).
{% endhint %}

### PR de tiers

TravisCI d√©sactive par d√©faut le partage des variables d'environnement avec les PR provenant de tiers, mais quelqu'un pourrait l'activer et vous pourriez alors cr√©er des PR pour le d√©p√¥t et exfiltrer les secrets :

![](<../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png>)

### Extraction de secrets

Comme expliqu√© dans la page [**d'informations de base**](basic-travisci-information.md), il existe 2 types de secrets. Les **secrets des variables d'environnement** (qui sont r√©pertori√©s sur la page web) et les **secrets personnalis√©s chiffr√©s**, qui sont stock√©s √† l'int√©rieur du fichier `.travis.yml` en base64 (notez que les deux, stock√©s chiffr√©s, se termineront en tant que variables d'environnement sur les machines finales).

* Pour **√©num√©rer les secrets** configur√©s en tant que **variables d'environnement**, allez dans les **param√®tres** du **projet** et v√©rifiez la liste. Cependant, notez que toutes les variables d'environnement du projet d√©finies ici appara√Ætront lors du d√©clenchement d'une construction.
* Pour √©num√©rer les **secrets personnalis√©s chiffr√©s**, la meilleure chose √† faire est de **v√©rifier le fichier `.travis.yml`**.
* Pour **√©num√©rer les fichiers chiffr√©s**, vous pouvez v√©rifier les **fichiers `.enc`** dans le d√©p√¥t, les lignes similaires √† `openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d` dans le fichier de configuration, ou les **cl√©s iv et chiffr√©es** dans les **variables d'environnement** telles que :

![](<../../.gitbook/assets/image (71).png>)

### √Ä faire :

* Exemple de construction avec un shell invers√© s'ex√©cutant sur Windows/Mac/Linux
* Exemple de construction divulguant l'encodage base64 des variables d'environnement dans les journaux

### TravisCI Enterprise

Si un attaquant se retrouve dans un environnement qui utilise **TravisCI Enterprise** (plus d'informations sur ce que c'est dans la [**information de base**](basic-travisci-information.md#travisci-enterprise)), il pourra **d√©clencher des constructions dans le Worker**. Cela signifie qu'un attaquant pourra se d√©placer lat√©ralement vers ce serveur √† partir duquel il pourrait √™tre en mesure de :

* s'√©chapper vers l'h√¥te ?
* compromettre Kubernetes ?
* compromettre d'autres machines s'ex√©cutant dans le m√™me r√©seau ?
* compromettre de nouvelles informations d'identification cloud ?

## R√©f√©rences

* [https://docs.travis-ci.com/user/encrypting-files/](https://docs.travis-ci.com/user/encrypting-files/)
* [https://docs.travis-ci.com/user/best-practices-security](https://docs.travis-ci.com/user/best-practices-security)

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert Red Team AWS HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>
