# Sicurezza di TravisCI

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Esperto Red Team AWS di HackTricks)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata in HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**La Famiglia PEASS**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repository di Github.

</details>

## Cos'√® TravisCI

**Travis CI** √® un servizio di **integrazione continua** ospitato o in locale utilizzato per compilare e testare progetti software ospitati su diverse **piattaforme git diverse**.

{% content-ref url="basic-travisci-information.md" %}
[basic-travisci-information.md](basic-travisci-information.md)
{% endcontent-ref %}

## Attacchi

### Trigger

Per lanciare un attacco √® necessario prima sapere come attivare una build. Per impostazione predefinita, TravisCI **attiver√† una build su push e pull request**:

![](<../../.gitbook/assets/image (145).png>)

#### Cron Jobs

Se si ha accesso all'applicazione web √® possibile **impostare crontab per eseguire la build**, questo potrebbe essere utile per la persistenza o per attivare una build:

![](<../../.gitbook/assets/image (243).png>)

{% hint style="info" %}
Sembra che non sia possibile impostare crontab all'interno del file `.travis.yml` secondo [questo](https://github.com/travis-ci/travis-ci/issues/9162).
{% endhint %}

### PR di terze parti

TravisCI di default disabilita la condivisione delle variabili d'ambiente con le PR provenienti da terze parti, ma qualcuno potrebbe abilitarlo e quindi potresti creare PR nel repository ed estrarre i segreti:

![](<../../.gitbook/assets/image (208).png>)

### Estrarre Segreti

Come spiegato nella pagina delle [**informazioni di base**](basic-travisci-information.md), ci sono 2 tipi di segreti. I **segnreti delle variabili d'ambiente** (che sono elencati nella pagina web) e i **segnreti personalizzati criptati**, che sono memorizzati all'interno del file `.travis.yml` come base64 (nota che entrambi, memorizzati criptati, finiranno come variabili d'ambiente nelle macchine finali).

* Per **enumerare i segreti** configurati come **Variabili d'ambiente** vai alle **impostazioni** del **progetto** e controlla l'elenco. Tuttavia, nota che tutte le variabili d'ambiente del progetto impostate qui appariranno quando si attiva una build.
* Per enumerare i **segnreti personalizzati criptati** la cosa migliore che puoi fare √® **controllare il file `.travis.yml`**.
* Per **enumerare i file criptati** puoi controllare i **file `.enc`** nel repository, per righe simili a `openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d` nel file di configurazione, o per **iv e chiavi criptate** nelle **Variabili d'ambiente** come:

![](<../../.gitbook/assets/image (81).png>)

### DA FARE:

* Esempio di build con reverse shell in esecuzione su Windows/Mac/Linux
* Esempio di build che lascia trapelare l'ambiente codificato in base64 nei log

### TravisCI Enterprise

Se un attaccante finisce in un ambiente che utilizza **TravisCI enterprise** (ulteriori informazioni su cosa sia in [**informazioni di base**](basic-travisci-information.md#travisci-enterprise)), sar√† in grado di **attivare le build nel Worker**. Ci√≤ significa che un attaccante sar√† in grado di muoversi lateralmente verso quel server da cui potrebbe essere in grado di:

* scappare all'host?
* compromettere kubernetes?
* compromettere altre macchine in esecuzione nella stessa rete?
* compromettere nuove credenziali cloud?

## Riferimenti

* [https://docs.travis-ci.com/user/encrypting-files/](https://docs.travis-ci.com/user/encrypting-files/)
* [https://docs.travis-ci.com/user/best-practices-security](https://docs.travis-ci.com/user/best-practices-security)

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Esperto Red Team AWS di HackTricks)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata in HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**La Famiglia PEASS**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repository di Github.

</details>
