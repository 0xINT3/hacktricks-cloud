# Ασφάλεια TravisCI

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Ειδικός Red Team AWS του HackTricks)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε τη **εταιρεία σας διαφημισμένη στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στα αποθετήρια του [**HackTricks**](https://github.com/carlospolop/hacktricks) και του [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Τι είναι το TravisCI

Το **Travis CI** είναι ένα **υπηρεσία συνεχούς ολοκλήρωσης** που χρησιμοποιείται για την κατασκευή και δοκιμή λογισμικών έργων που φιλοξενούνται σε διάφορες **διαφορετικές πλατφόρμες git**.

{% content-ref url="basic-travisci-information.md" %}
[basic-travisci-information.md](basic-travisci-information.md)
{% endcontent-ref %}

## Επιθέσεις

### Ενεργοποιητές

Για να εκτελέσετε μια επίθεση πρέπει πρώτα να γνωρίζετε πώς να ενεργοποιήσετε μια κατασκευή. Από προεπιλογή, το TravisCI θα **ενεργοποιήσει μια κατασκευή σε πιέσεις και αιτήσεις ενσωμάτωσης**:

![](<../../.gitbook/assets/image (19) (1).png>)

#### Εργασίες Cron

Αν έχετε πρόσβαση στην web εφαρμογή μπορείτε να **ορίσετε cron jobs για την εκτέλεση της κατασκευής**, αυτό θα μπορούσε να είναι χρήσιμο για τη διατήρηση ή την ενεργοποίηση μιας κατασκευής:

![](<../../.gitbook/assets/image (42).png>)

{% hint style="info" %}
Φαίνεται ότι δεν είναι δυνατή η ορισμός cron jobs μέσα στο `.travis.yml` σύμφωνα με [αυτό](https://github.com/travis-ci/travis-ci/issues/9162).
{% endhint %}

### Αίτηση PR από τρίτο μέρος

Το TravisCI απενεργοποιεί από προεπιλογή τον κοινοποίηση μεταβλητών περιβάλλοντος με PR που προέρχονται από τρίτα μέρη, αλλά κάποιος ενδέχεται να το ενεργοποιήσει και τότε θα μπορούσατε να δημιουργήσετε PR στο αποθετήριο και να εξαγάγετε τα μυστικά:

![](<../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png>)

### Διαρροή Μυστικών

Όπως εξηγείται στη [**σελίδα βασικών πληροφοριών**](basic-travisci-information.md), υπάρχουν 2 τύποι μυστικών. Τα **μυστικά μεταβλητές περιβάλλοντος** (τα οποία εμφανίζονται στην ιστοσελίδα) και τα **προσαρμοσμένα κρυπτογραφημένα μυστικά**, τα οποία αποθηκεύονται μέσα στο αρχείο `.travis.yml` ως base64 (σημειώστε ότι και τα δύο ως κρυπτογραφημένα θα τελειώσουν ως μεταβλητές περιβάλλοντος στις τελικές μηχανές).

* Για να **απαριθμήσετε τα μυστικά** που έχουν ρυθμιστεί ως **Μεταβλητές Περιβάλλοντος** πηγαίνετε στις **ρυθμίσεις** του **έργου** και ελέγξτε τη λίστα. Ωστόσο, σημειώστε ότι όλες οι μεταβλητές περιβάλλοντος του έργου που έχουν οριστεί εδώ θα εμφανιστούν κατά την ενεργοποίηση μιας κατασκευής.
* Για να απαριθμήσετε τα **προσαρμοσμένα κρυπτογραφημένα μυστικά** το καλύτερο που μπορείτε να κάνετε είναι να **ελέγξετε το αρχείο `.travis.yml`**.
* Για να **απαριθμήσετε τα κρυπτογραφημένα αρχεία** μπορείτε να ελέγξετε τα **`.enc` αρχεία** στο αποθετήριο, για γραμμές παρόμοιες με `openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d` στο αρχείο ρυθμίσεων, ή για **κρυπτογραφημένα iv και κλειδιά** στις **Μεταβλητές Περιβάλλοντος** όπως:

![](<../../.gitbook/assets/image (71).png>)

### ΚΑΝΕ:

* Παράδειγμα κατασκευής με αντίστροφη κέλυφος που τρέχει σε Windows/Mac/Linux
* Παράδειγμα κατασκευής που διαρρέει το περιβάλλον κωδικοποιημένο σε base64 στα logs

### TravisCI Enterprise

Αν ένας επιτιθέμενος βρεθεί σε ένα περιβάλλον που χρησιμοποιεί **TravisCI enterprise** (περισσότερες πληροφορίες σχετικά με το τι είναι αυτό στις [**βασικές πληροφορίες**](basic-travisci-information.md#travisci-enterprise)), θα μπορεί να **ενεργοποιήσει κατασκευές στον Εργάτη**. Αυτό σημαίνει ότι ένας επιτιθέμενος θα μπορεί να μετακινηθεί πλάγια σε αυτό τον διακομιστή από τον οποίο θα μπορούσε να:

* δραπετεύσει στον κεντρικό υπολογιστή;
* κινδυνεύσει το Kubernetes;
* κινδυνεύσει άλλες μηχανές που λειτουργούν στο ίδιο δίκτυο;
* κινδυνεύσει νέα διαπιστευτήρια cloud;

## Αναφορές

* [https://docs.travis-ci.com/user/encrypting-files/](https://docs.travis-ci.com/user/encrypting-files/)
* [https://docs.travis-ci.com/user/best-practices-security](https://docs.travis-ci.com/user/best-practices-security)

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Ειδικός Red Team AWS του HackTricks)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε τη **εταιρεία σας διαφημισμένη στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στα αποθετήρια του [**HackTricks**](https://github.com/carlospolop/hacktricks) και του [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
