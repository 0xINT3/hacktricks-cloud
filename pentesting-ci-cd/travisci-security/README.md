# Sicurezza di TravisCI

<details>

<summary><strong>Impara l'hacking di AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT**](https://opensea.io/collection/the-peass-family) esclusivi
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) su GitHub.

</details>

## Cos'√® TravisCI

**Travis CI** √® un servizio di **integrazione continua** ospitato o in locale utilizzato per compilare e testare progetti software ospitati su diverse **piattaforme git diverse**.

{% content-ref url="basic-travisci-information.md" %}
[basic-travisci-information.md](basic-travisci-information.md)
{% endcontent-ref %}

## Attacchi

### Trigger

Per lanciare un attacco √® necessario sapere come avviare una build. Per impostazione predefinita, TravisCI **avvier√† una build su push e pull request**:

![](<../../.gitbook/assets/image (19) (1).png>)

#### Cron Jobs

Se hai accesso all'applicazione web, puoi **impostare cron per eseguire la build**, ci√≤ potrebbe essere utile per la persistenza o per avviare una build:

![](<../../.gitbook/assets/image (42).png>)

{% hint style="info" %}
Sembra che non sia possibile impostare cron all'interno del file `.travis.yml` secondo [questo](https://github.com/travis-ci/travis-ci/issues/9162).
{% endhint %}

### PR di terze parti

TravisCI disabilita per impostazione predefinita la condivisione delle variabili di ambiente con le PR provenienti da terze parti, ma qualcuno potrebbe abilitarla e quindi potresti creare PR per il repository ed estrarre le informazioni segrete:

![](<../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png>)

### Estrarre le informazioni segrete

Come spiegato nella pagina [**informazioni di base**](basic-travisci-information.md), ci sono 2 tipi di informazioni segrete. Le **variabili di ambiente segrete** (che sono elencate nella pagina web) e le **informazioni segrete personalizzate criptate**, che sono memorizzate all'interno del file `.travis.yml` come base64 (nota che entrambe, una volta memorizzate criptate, diventeranno variabili di ambiente nelle macchine finali).

* Per **enumerare le informazioni segrete** configurate come **variabili di ambiente**, vai alle **impostazioni** del **progetto** e controlla l'elenco. Tuttavia, nota che tutte le variabili di ambiente del progetto impostate qui appariranno quando si avvia una build.
* Per enumerare le **informazioni segrete personalizzate criptate**, la cosa migliore che puoi fare √® **controllare il file `.travis.yml`**.
* Per **enumerare i file criptati**, puoi controllare i **file `.enc`** nel repository, le righe simili a `openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d` nel file di configurazione o per **iv e chiavi criptate** nelle **variabili di ambiente** come:

![](<../../.gitbook/assets/image (71).png>)

### TODO:

* Esempio di build con reverse shell in esecuzione su Windows/Mac/Linux
* Esempio di build che divulga l'informazione segreta codificata in base64 nei log

### TravisCI Enterprise

Se un attaccante si trova in un ambiente che utilizza **TravisCI Enterprise** (ulteriori informazioni su cosa sia in [**informazioni di base**](basic-travisci-information.md#travisci-enterprise)), sar√† in grado di **avviare build nel Worker**. Ci√≤ significa che un attaccante sar√† in grado di muoversi lateralmente verso quel server da cui potrebbe essere in grado di:

* scappare verso l'host?
* compromettere Kubernetes?
* compromettere altre macchine in esecuzione nella stessa rete?
* compromettere nuove credenziali cloud?

## Riferimenti

* [https://docs.travis-ci.com/user/encrypting-files/](https://docs.travis-ci.com/user/encrypting-files/)
* [https://docs.travis-ci.com/user/best-practices-security](https://docs.travis-ci.com/user/best-practices-security)

<details>

<summary><strong>Impara l'hacking di AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT**](https://opensea.io/collection/the-peass-family) esclusivi
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) su GitHub.

</details>
