# Informaci칩n B치sica de TravisCI

<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Red de HackTricks AWS)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obt칠n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>

## Acceso

TravisCI se integra directamente con diferentes plataformas de git como Github, Bitbucket, Assembla y Gitlab. Pedir치 al usuario que otorgue permisos a TravisCI para acceder a los repositorios que desea integrar con TravisCI.

Por ejemplo, en Github pedir치 los siguientes permisos:

* `user:email` (solo lectura)
* `read:org` (solo lectura)
* `repo`: Concede acceso de lectura y escritura al c칩digo, estados de confirmaci칩n, colaboradores y estados de implementaci칩n para repositorios y organizaciones p칰blicas y privadas.

## Secretos Encriptados

### Variables de Entorno

En TravisCI, al igual que en otras plataformas de CI, es posible **guardar secretos a nivel de repositorio** que se guardar치n encriptados y se **descifrar치n y se enviar치n en la variable de entorno** de la m치quina que ejecuta la compilaci칩n.

![](<../../.gitbook/assets/image (203).png>)

Es posible indicar las **ramas a las que los secretos estar치n disponibles** (por defecto todas) y tambi칠n si TravisCI **deber칤a ocultar su valor** si aparece **en los registros** (por defecto lo har치).

### Secretos Encriptados Personalizados

Para **cada repositorio** TravisCI genera un **par de claves RSA**, **guarda** la **privada**, y pone a disposici칩n de quienes tienen **acceso** al repositorio la **clave p칰blica** del repositorio.

Puedes acceder a la clave p칰blica de un repositorio con:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Entonces, puedes usar esta configuraci칩n para **encriptar secretos y agregarlos a tu `.travis.yaml`**. Los secretos ser치n **descifrados cuando se ejecute la compilaci칩n** y ser치n accesibles en las **variables de entorno**.

![](<../../.gitbook/assets/image (139).png>)

Ten en cuenta que los secretos encriptados de esta manera no aparecer치n en la lista de variables ambientales de la configuraci칩n.

### Archivos Encriptados Personalizados

De la misma manera que antes, TravisCI tambi칠n permite **encriptar archivos y luego descifrarlos durante la compilaci칩n**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
## TravisCI Enterprise

Travis CI Enterprise es una **versi칩n local de Travis CI**, que puedes implementar **en tu infraestructura**. Piensa en la versi칩n 'servidor' de Travis CI. Usar Travis CI te permite habilitar un sistema de Integraci칩n Continua/Despliegue Continuo (CI/CD) f치cil de usar en un entorno que puedes configurar y asegurar seg칰n tus necesidades.

**Travis CI Enterprise consta de dos partes principales:**

1. Servicios de TCI (o Servicios Centrales de TCI), responsables de la integraci칩n con sistemas de control de versiones, autorizaci칩n de compilaciones, programaci칩n de trabajos de compilaci칩n, etc.
2. Trabajador de TCI e im치genes de entorno de compilaci칩n (tambi칠n llamadas im치genes de SO).

**Los servicios centrales de TCI requieren lo siguiente:**

1. Una base de datos **PostgreSQL11** (o posterior).
2. Una infraestructura para implementar un cl칰ster de Kubernetes; puede implementarse en un cl칰ster de servidores o en una sola m치quina si es necesario.
3. Dependiendo de tu configuraci칩n, es posible que desees implementar y configurar algunos de los componentes por tu cuenta, por ejemplo, RabbitMQ; consulta [Configuraci칩n de Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) para m치s detalles.

**El trabajador de TCI requiere lo siguiente:**

1. Una infraestructura donde se pueda implementar una imagen de docker que contenga el **Trabajador y una imagen de compilaci칩n vinculada**.
2. Conectividad a ciertos componentes de los Servicios Centrales de TCI de Travis CI; consulta [Configuraci칩n del Trabajador](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) para m치s detalles.

La cantidad de trabajadores de TCI y de im치genes de entorno de SO de compilaci칩n implementadas determinar치 la capacidad concurrente total de la implementaci칩n de Travis CI Enterprise en tu infraestructura.
