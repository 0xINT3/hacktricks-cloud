# Temel TravisCI Bilgisi

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>

## Erişim

TravisCI, Github, Bitbucket, Assembla ve Gitlab gibi farklı git platformlarıyla doğrudan entegre olur. Kullanıcıdan, TravisCI'nin TravisCI ile entegre olmak istediği depolara erişim izni vermesi istenir.

Örneğin, Github'da aşağıdaki izinleri isteyecektir:

* `user:email` (salt okunur)
* `read:org` (salt okunur)
* `repo`: Kamu ve özel depolar ve organizasyonlar için kod, taahhüt durumları, işbirlikçiler ve dağıtım durumlarına salt okunur ve yazma erişimi sağlar.

## Şifrelenmiş Sırlar

### Ortam Değişkenleri

TravisCI'da diğer CI platformlarında olduğu gibi, **repo düzeyinde kaydedilen şifreleri** şifreli olarak kaydedip, derleme işlemini gerçekleştiren makinenin **çevresel değişkenine çözümlenip göndermek mümkündür**.

![](<../../.gitbook/assets/image (44).png>)

Şifrelerin **hangi dallarda kullanılabilir olacağı** (varsayılan olarak tümü) ve TravisCI'nin **değerini günlüklerde** gösterip göstermemesi gerektiği de belirtilebilir (varsayılan olarak göstermez).

### Özel Şifrelenmiş Sırlar

Her bir repo için TravisCI, bir **RSA çifti** oluşturur, **özel** olanı **saklar** ve depoya **erişimi olanlara** depodaki **genel anahtarı** sunar.

Bir repo'nun genel anahtarına aşağıdaki komutla erişebilirsiniz:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Ardından, bu yapıyı kullanarak **sırları şifreleyebilir ve `.travis.yaml` dosyanıza ekleyebilirsiniz**. Sırlar, derleme çalıştırıldığında **çözümlenir ve çevresel değişkenlerde** erişilebilir hale gelir.

![](<../../.gitbook/assets/image (2) (2) (1) (1).png>)

Bu şekilde şifrelenen sırların, ayarların çevresel değişkenlerinde listelenmeyeceğini unutmayın.

### Özel Şifrelenmiş Dosyalar

Önceki gibi, TravisCI ayrıca **dosyaları şifrelemeye ve ardından derleme sırasında çözümlemeye** izin verir:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Şifreleme yapılırken, repo içinde aşağıdaki gibi 2 Çevresel Değişken yapılandırılır:

![](<../../.gitbook/assets/image (23).png>)

## TravisCI Enterprise

Travis CI Enterprise, **Travis CI'nin yerinde bir sürümü** olup, **altyapınıza** dağıtabileceğiniz bir sürümdür. Travis CI'nin 'sunucu' sürümünü düşünün. Travis CI kullanarak, istediğiniz gibi yapılandırabileceğiniz ve güvence altına alabileceğiniz kolay kullanımlı bir Sürekli Entegrasyon/Sürekli Dağıtım (CI/CD) sistemini etkinleştirebilirsiniz.

**Travis CI Enterprise, iki ana bölümden oluşur:**

1. TCI **hizmetleri** (veya TCI Çekirdek Hizmetleri), sürüm kontrol sistemleriyle entegrasyon, derlemeleri yetkilendirme, derleme işlerini zamanlama vb. görevlerden sorumludur.
2. TCI **Çalışanı** ve derleme ortamı görüntüleri (aynı zamanda OS görüntüleri olarak da adlandırılır).

**TCI Çekirdek hizmetleri aşağıdakileri gerektirir:**

1. Bir **PostgreSQL11** (veya daha yeni) veritabanı.
2. Bir Kubernetes kümesi dağıtmak için bir altyapı; gerektiğinde bir sunucu kümesinde veya tek bir makinede dağıtılabilir.
3. Kurulumunu ve yapılandırmasını kendi yapmak isteyebileceğiniz bazı bileşenleri dağıtmak ve yapılandırmak isteyebilirsiniz, örneğin RabbitMQ - daha fazla ayrıntı için [Travis CI Enterprise Kurulumu](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) sayfasına bakın.

**TCI Çalışanı aşağıdakileri gerektirir:**

1. **Çalışan ve bağlantılı bir derleme görüntüsü içeren bir docker görüntüsünün dağıtılabileceği bir altyapı**.
2. Belirli Travis CI Çekirdek Hizmetleri bileşenlerine bağlantı - daha fazla ayrıntı için [Çalışanın Kurulumu](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) sayfasına bakın.

Dağıtılan TCI Çalışanı ve derleme ortamı OS görüntülerinin miktarı, altyapınızdaki Travis CI Enterprise dağıtımının toplam eşzamanlı kapasitesini belirleyecektir.

![](<../../.gitbook/assets/image (8) (1) (1) (1) (1) (1).png>)

<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman olmak için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> öğrenin!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek veya HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family)
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da** takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR göndererek paylaşın.

</details>
