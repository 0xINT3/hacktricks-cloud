# Podstawowe informacje o TravisCI

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Dostęp

TravisCI bezpośrednio integruje się z różnymi platformami git, takimi jak Github, Bitbucket, Assembla i Gitlab. Poprosi użytkownika o udzielenie uprawnień TravisCI do dostępu do repozytoriów, z którymi chce się zintegrować.

Na przykład, w Githubie poprosi o następujące uprawnienia:

* `user:email` (tylko do odczytu)
* `read:org` (tylko do odczytu)
* `repo`: Udziela dostępu do odczytu i zapisu do kodu, statusów commitów, współpracowników i statusów wdrożeń dla publicznych i prywatnych repozytoriów i organizacji.

## Zaszyfrowane sekrety

### Zmienne środowiskowe

W TravisCI, podobnie jak w innych platformach CI, możliwe jest **zapisanie na poziomie repozytorium tajemnic**, które zostaną zapisane w postaci zaszyfrowanej i **odszyfrowane i przekazane do zmiennej środowiskowej** maszyny wykonującej proces budowy.

![](<../../.gitbook/assets/image (44).png>)

Można wskazać **gałęzie, dla których mają być dostępne tajemnice** (domyślnie wszystkie) oraz czy TravisCI **powinien ukryć ich wartość**, jeśli pojawi się **w logach** (domyślnie tak).

### Niestandardowe zaszyfrowane sekrety

Dla **każdego repozytorium** TravisCI generuje **parę kluczy RSA**, **zachowuje** klucz **prywatny** i udostępnia **klucz publiczny repozytorium** tym, którzy mają **dostęp** do repozytorium.

Możesz uzyskać dostęp do klucza publicznego jednego repozytorium za pomocą:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Następnie możesz użyć tej konfiguracji do **szyfrowania sekretów i dodawania ich do pliku `.travis.yaml`**. Sekrety zostaną **odszyfrowane podczas uruchamiania procesu budowania** i będą dostępne jako **zmienne środowiskowe**.

![](<../../.gitbook/assets/image (2) (2) (1) (1).png>)

Należy zauważyć, że sekrety zaszyfrowane w ten sposób nie będą widoczne na liście zmiennych środowiskowych w ustawieniach.

### Niestandardowe zaszyfrowane pliki

Podobnie jak wcześniej, TravisCI umożliwia również **szyfrowanie plików, a następnie ich odszyfrowanie podczas procesu budowania**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Zauważ, że podczas szyfrowania pliku zostaną skonfigurowane 2 zmienne środowiskowe wewnątrz repozytorium, takie jak:

![](<../../.gitbook/assets/image (23).png>)

## TravisCI Enterprise

Travis CI Enterprise to **wersja Travis CI działająca w infrastrukturze lokalnej**, którą można wdrożyć **w Twojej infrastrukturze**. Można to porównać do wersji "serwerowej" Travis CI. Korzystanie z Travis CI umożliwia włączenie prostego w użyciu systemu Continuous Integration/Continuous Deployment (CI/CD) w środowisku, które można skonfigurować i zabezpieczyć według własnych preferencji.

**Travis CI Enterprise składa się z dwóch głównych części:**

1. Usługi TCI (lub TCI Core Services), odpowiedzialne za integrację z systemami kontroli wersji, autoryzację budowy, harmonogramowanie zadań budowy, itp.
2. Pracownik TCI i obrazy środowiska budowy (zwane również obrazami systemu operacyjnego).

**Usługi TCI Core wymagają następujących elementów:**

1. Bazy danych **PostgreSQL11** (lub nowszej).
2. Infrastruktury do wdrożenia klastra Kubernetes; może być wdrożony w klastrze serwerów lub na pojedynczej maszynie, jeśli jest to wymagane.
3. W zależności od konfiguracji, można chcieć wdrożyć i skonfigurować niektóre z komponentów samodzielnie, np. RabbitMQ - zobacz [Konfiguracja Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) dla więcej szczegółów.

**Pracownik TCI wymaga następujących elementów:**

1. Infrastruktury, w której można wdrożyć obraz dockerowy zawierający pracownika i powiązany obraz budowy.
2. Połączenia z niektórymi komponentami usług TCI Core - zobacz [Konfiguracja pracownika](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) dla więcej szczegółów.

Ilość wdrożonych pracowników TCI i obrazów środowiska budowy systemu operacyjnego będzie miała wpływ na całkowitą jednoczesną pojemność wdrożenia Travis CI Enterprise w Twojej infrastrukturze.

![](<../../.gitbook/assets/image (8) (1) (1) (1) (1) (1).png>)

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć **reklamę swojej firmy w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi trikami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
