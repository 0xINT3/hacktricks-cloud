# Informaci칩n B치sica de TravisCI

<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Acceso

TravisCI se integra directamente con diferentes plataformas git como Github, Bitbucket, Assembla y Gitlab. Pedir치 al usuario que otorgue permisos a TravisCI para acceder a los repositorios que quiere integrar con TravisCI.

Por ejemplo, en Github pedir치 los siguientes permisos:

* `user:email` (solo lectura)
* `read:org` (solo lectura)
* `repo`: Otorga acceso de lectura y escritura al c칩digo, estados de commit, colaboradores y estados de despliegue para repositorios y organizaciones p칰blicas y privadas.

## Secretos Encriptados

### Variables de Entorno

En TravisCI, como en otras plataformas de CI, es posible **guardar secretos a nivel de repositorio** que ser치n guardados encriptados y ser치n **desencriptados e insertados en la variable de entorno** de la m치quina que ejecuta la construcci칩n.

![](<../../.gitbook/assets/image (44).png>)

Es posible indicar las **ramas a las que los secretos estar치n disponibles** (por defecto todas) y tambi칠n si TravisCI **deber칤a ocultar su valor** si aparece **en los registros** (por defecto lo har치).

### Secretos Encriptados Personalizados

Para **cada repositorio** TravisCI genera un **par de claves RSA**, **mantiene** la **privada** y hace que la clave **p칰blica del repositorio est칠 disponible** para aquellos que tienen **acceso** al repositorio.

Puedes acceder a la clave p칰blica de un repositorio con:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Entonces, puedes usar esta configuraci칩n para **encriptar secretos y a침adirlos a tu `.travis.yaml`**. Los secretos ser치n **desencriptados cuando se ejecute la construcci칩n** y accesibles en las **variables de entorno**.

![](<../../.gitbook/assets/image (2) (2) (1) (1).png>)

Ten en cuenta que los secretos encriptados de esta manera no aparecer치n listados en las variables de entorno de la configuraci칩n.

### Archivos Encriptados Personalizados

De la misma manera que antes, TravisCI tambi칠n permite **encriptar archivos y luego desencriptarlos durante la construcci칩n**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Tenga en cuenta que al cifrar un archivo se configurar치n 2 Variables de Entorno dentro del repositorio como:

![](<../../.gitbook/assets/image (23).png>)

## TravisCI Enterprise

Travis CI Enterprise es una **versi칩n local de Travis CI**, que puede implementar **en su infraestructura**. Piense en la versi칩n 'servidor' de Travis CI. Usar Travis CI le permite habilitar un sistema de Integraci칩n Continua/Despliegue Continuo (CI/CD) f치cil de usar en un entorno, que puede configurar y asegurar como desee.

**Travis CI Enterprise consta de dos partes principales:**

1. **Servicios** TCI (o Servicios N칰cleo TCI), responsables de la integraci칩n con sistemas de control de versiones, autorizaci칩n de construcciones, programaci칩n de trabajos de construcci칩n, etc.
2. **Trabajador** TCI e im치genes de entorno de construcci칩n (tambi칠n llamadas im치genes de SO).

**Los Servicios N칰cleo TCI requieren lo siguiente:**

1. Una base de datos **PostgreSQL11** (o posterior).
2. Una infraestructura para implementar un cl칰ster de Kubernetes; se puede implementar en un cl칰ster de servidores o en una sola m치quina si es necesario.
3. Dependiendo de su configuraci칩n, es posible que desee implementar y configurar algunos de los componentes por su cuenta, por ejemplo, RabbitMQ - vea [Configuraci칩n de Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) para m치s detalles.

**El Trabajador TCI requiere lo siguiente:**

1. Una infraestructura donde se pueda implementar una imagen de docker que contenga el **Trabajador y una imagen de construcci칩n vinculada**.
2. Conectividad a ciertos componentes de Servicios N칰cleo de Travis CI - vea [Configuraci칩n del Trabajador](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) para m치s detalles.

La cantidad de Trabajadores TCI implementados e im치genes de SO de entorno de construcci칩n determinar치 la capacidad concurrente total de la implementaci칩n de Travis CI Enterprise en su infraestructura.

![](<../../.gitbook/assets/image (8) (1) (1) (1) (1) (1).png>)

<details>

<summary><strong>Aprenda hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si desea ver su **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulte los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obtenga el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **칔nase al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤game** en **Twitter** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparta sus trucos de hacking enviando PRs a los repositorios de github** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
