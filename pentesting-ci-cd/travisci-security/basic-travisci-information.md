# Información básica de TravisCI

<details>

<summary><strong>¡Apoya a HackTricks y obtén beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **última versión de PEASS o descargar HackTricks en PDF** ¡Consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Obtén el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colección de exclusivos [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PRs a los repositorios de Github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Acceso

TravisCI se integra directamente con diferentes plataformas de git como Github, Bitbucket, Assembla y Gitlab. Pedirá al usuario que le dé permisos a TravisCI para acceder a los repositorios con los que desea integrarse.

Por ejemplo, en Github pedirá los siguientes permisos:

* `user:email` (solo lectura)
* `read:org` (solo lectura)
* `repo`: Concede acceso de lectura y escritura al código, estados de confirmación, colaboradores y estados de implementación para repositorios y organizaciones públicos y privados.

## Secretos encriptados

### Variables de entorno

En TravisCI, al igual que en otras plataformas de CI, es posible **guardar secretos a nivel de repositorio** que se guardarán encriptados y se **descifrarán y empujarán en la variable de entorno** de la máquina que ejecuta la compilación.

![](<../../.gitbook/assets/image (44).png>)

Es posible indicar las **ramas en las que los secretos estarán disponibles** (por defecto todas) y también si TravisCI **debería ocultar su valor** si aparece **en los registros** (por defecto lo hará).

### Secretos encriptados personalizados

Para **cada repositorio** TravisCI genera un **par de claves RSA**, **guarda** la **privada** y hace que la **clave pública del repositorio esté disponible** para aquellos que tienen **acceso** al repositorio.

Puede acceder a la clave pública de un repositorio con:

```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```

Luego, puede usar esta configuración para **encriptar secretos y agregarlos a su `.travis.yaml`**. Los secretos se **descifrarán cuando se ejecute la compilación** y serán accesibles en las **variables de entorno**.

![](<../../.gitbook/assets/image (2) (2) (1).png>)

Tenga en cuenta que los secretos encriptados de esta manera no aparecerán en la lista de variables de entorno de la configuración.

### Archivos encriptados personalizados

De la misma manera que antes, TravisCI también permite **encriptar archivos y luego descifrarlos durante la compilación**:

```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

    openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```

Tenga en cuenta que al encriptar un archivo se configurarán 2 variables de entorno dentro del repositorio, como:

![](<../../.gitbook/assets/image (71).png>)

## TravisCI Enterprise

Travis CI Enterprise es una **versión local de Travis CI**, que se puede implementar **en su infraestructura**. Piense en la versión 'servidor' de Travis CI. Usar Travis CI le permite habilitar un sistema de Integración Continua/Implementación Continua (CI/CD) fácil de usar en un entorno que puede configurar y asegurar como desee.

**Travis CI Enterprise consta de dos partes principales:**

1. Servicios de TCI (o Servicios principales de TCI), responsables de la integración con los sistemas de control de versiones, la autorización de compilaciones, la programación de trabajos de compilación, etc.
2. Trabajador de TCI e imágenes de entorno de compilación (también llamadas imágenes de SO).

**Los servicios principales de TCI requieren lo siguiente:**

1. Una base de datos **PostgreSQL11** (o posterior).
2. Una infraestructura para implementar un clúster de Kubernetes; se puede implementar en un clúster de servidores o en una sola máquina si es necesario.
3. Dependiendo de su configuración, es posible que desee implementar y configurar algunos de los componentes por su cuenta, por ejemplo, RabbitMQ - consulte [Configuración de Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) para obtener más detalles.

**El trabajador de TCI requiere lo siguiente:**

1. Una infraestructura donde se pueda implementar una imagen de docker que contenga el **trabajador y una imagen de compilación vinculada**.
2. Conectividad a ciertos componentes de los servicios principales de Travis CI - consulte [Configuración del trabajador](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) para obtener más detalles.

La cantidad de trabajadores de TCI implementados y las imágenes de SO de entorno de compilación determinarán la capacidad total concurrente de la implementación de Travis CI Enterprise en su infraestructura.

![](<../../.gitbook/assets/image (8) (1) (1).png>)

<details>

<summary><strong>¡Apoya a HackTricks y obtén beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **última versión de PEASS o descargar HackTricks en PDF** ¡Consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Obtén el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colección de exclusivos [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PRs a los repositorios de Github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>