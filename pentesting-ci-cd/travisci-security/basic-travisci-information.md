# Información básica de TravisCI

<details>

<summary><strong>¡Apoya a HackTricks y obtén beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **última versión de PEASS o descargar HackTricks en PDF**, ¡consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Obtén [**productos oficiales de PEASS y HackTricks**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colección exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) en GitHub.

</details>

## Acceso

TravisCI se integra directamente con diferentes plataformas de git como Github, Bitbucket, Assembla y Gitlab. Pedirá al usuario que le dé permisos a TravisCI para acceder a los repositorios con los que desea integrarse.

Por ejemplo, en Github pedirá los siguientes permisos:

* `user:email` (solo lectura)
* `read:org` (solo lectura)
* `repo`: Otorga acceso de lectura y escritura a código, estados de confirmación, colaboradores y estados de implementación para repositorios y organizaciones públicas y privadas.

## Secretos encriptados

### Variables de entorno

En TravisCI, al igual que en otras plataformas de CI, es posible **guardar secretos a nivel de repositorio** que se guardarán encriptados y se **desencriptarán y se enviarán a la variable de entorno** de la máquina que ejecuta la compilación.

![](<../../.gitbook/assets/image (44).png>)

Es posible indicar las **ramas en las que los secretos estarán disponibles** (por defecto, todas) y también si TravisCI **debe ocultar su valor** si aparece **en los registros** (por defecto, lo hará).

### Secretos encriptados personalizados

Para **cada repositorio**, TravisCI genera un **par de claves RSA**, **guarda** la **clave privada** y pone a disposición la **clave pública del repositorio** para aquellos que tienen **acceso** al repositorio.

Puedes acceder a la clave pública de un repositorio con:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Entonces, puedes usar esta configuración para **encriptar secretos y agregarlos a tu `.travis.yaml`**. Los secretos se **desencriptarán cuando se ejecute la compilación** y estarán accesibles en las **variables de entorno**.

![](<../../.gitbook/assets/image (2) (2) (1).png>)

Ten en cuenta que los secretos encriptados de esta manera no aparecerán en la lista de variables de entorno de la configuración.

### Archivos Encriptados Personalizados

De la misma manera que antes, TravisCI también permite **encriptar archivos y luego desencriptarlos durante la compilación**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Ten en cuenta que al cifrar un archivo se configurarán 2 variables de entorno dentro del repositorio, como se muestra a continuación:

![](<../../.gitbook/assets/image (23).png>)

## TravisCI Enterprise

Travis CI Enterprise es una versión **local de Travis CI**, que puedes implementar **en tu infraestructura**. Piensa en la versión 'servidor' de Travis CI. Usar Travis CI te permite habilitar un sistema de Integración Continua/Implementación Continua (CI/CD) fácil de usar en un entorno que puedes configurar y asegurar según tus necesidades.

**Travis CI Enterprise consta de dos partes principales:**

1. Servicios de TCI (o Servicios Principales de TCI), responsables de la integración con sistemas de control de versiones, autorización de compilaciones, programación de trabajos de compilación, etc.
2. Trabajador de TCI e imágenes de entorno de compilación (también llamadas imágenes de SO).

**Los servicios principales de TCI requieren lo siguiente:**

1. Una base de datos **PostgreSQL11** (o posterior).
2. Una infraestructura para implementar un clúster de Kubernetes; se puede implementar en un clúster de servidores o en una sola máquina si es necesario.
3. Dependiendo de tu configuración, es posible que desees implementar y configurar algunos de los componentes por tu cuenta, por ejemplo, RabbitMQ. Consulta la [Configuración de Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) para obtener más detalles.

**El trabajador de TCI requiere lo siguiente:**

1. Una infraestructura donde se pueda implementar una imagen de Docker que contenga el trabajador y una imagen de compilación vinculada.
2. Conectividad a ciertos componentes de los servicios principales de Travis CI. Consulta la [Configuración del Trabajador](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) para obtener más detalles.

La cantidad de trabajadores de TCI implementados y las imágenes de entorno de compilación determinarán la capacidad concurrente total de la implementación de Travis CI Enterprise en tu infraestructura.

![](<../../.gitbook/assets/image (8) (1) (1).png>)

<details>

<summary><strong>¡Apoya a HackTricks y obtén beneficios!</strong></summary>

* Si quieres ver tu **empresa anunciada en HackTricks** o si quieres acceder a la **última versión de PEASS o descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop).
* Obtén el [**merchandising oficial de PEASS y HackTricks**](https://peass.creator-spring.com).
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colección exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family).
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) en GitHub.

</details>
