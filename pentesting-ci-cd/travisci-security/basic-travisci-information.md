# Informations de base sur TravisCI

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**d√©p√¥ts Github HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Acc√®s

TravisCI s'int√®gre directement √† diff√©rentes plateformes de git telles que Github, Bitbucket, Assembla et Gitlab. Il demandera √† l'utilisateur de donner √† TravisCI les autorisations d'acc√©der aux r√©f√©rentiels qu'il souhaite int√©grer √† TravisCI.

Par exemple, sur Github, il demandera les autorisations suivantes :

* `user:email` (lecture seule)
* `read:org` (lecture seule)
* `repo`: Accorde l'acc√®s en lecture et en √©criture au code, aux √©tats de validation, aux collaborateurs et aux √©tats de d√©ploiement pour les r√©f√©rentiels et les organisations publics et priv√©s.

## Secrets chiffr√©s

### Variables d'environnement

Dans TravisCI, comme dans d'autres plates-formes CI, il est possible de **sauvegarder des secrets au niveau du r√©f√©rentiel** qui seront chiffr√©s et **d√©chiffr√©s et pouss√©s dans la variable d'environnement** de la machine ex√©cutant la construction.

![](<../../.gitbook/assets/image (44).png>)

Il est possible d'indiquer les **branches pour lesquelles les secrets seront disponibles** (par d√©faut toutes) et √©galement si TravisCI **doit masquer sa valeur** s'il appara√Æt **dans les journaux** (par d√©faut, il le fera).

### Secrets chiffr√©s personnalis√©s

Pour **chaque r√©f√©rentiel**, TravisCI g√©n√®re une **paire de cl√©s RSA**, **garde** la **cl√© priv√©e** et rend la **cl√© publique du r√©f√©rentiel disponible** √† ceux qui ont **acc√®s** au r√©f√©rentiel.

Vous pouvez acc√©der √† la cl√© publique d'un r√©f√©rentiel avec :

```
travis pubkey -r <propri√©taire>/<nom_du_repo>
travis pubkey -r carlospolop/t-ci-test
```

Ensuite, vous pouvez utiliser cette configuration pour **chiffrer des secrets et les ajouter √† votre fichier `.travis.yaml`**. Les secrets seront **d√©chiffr√©s lors de l'ex√©cution de la construction** et accessibles dans les **variables d'environnement**.

![](<../../.gitbook/assets/image (2) (2) (1).png>)

Notez que les secrets chiffr√©s de cette mani√®re ne seront pas r√©pertori√©s dans les variables d'environnement des param√®tres.

### Fichiers chiffr√©s personnalis√©s

De la m√™me mani√®re qu'auparavant, TravisCI permet √©galement de **chiffrer des fichiers et de les d√©chiffrer pendant la construction** :

```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

    openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```

Notez que lors du chiffrement d'un fichier, 2 variables d'environnement seront configur√©es √† l'int√©rieur du r√©f√©rentiel, telles que :

![](<../../.gitbook/assets/image (71).png>)

## TravisCI Enterprise

Travis CI Enterprise est une **version sur site de Travis CI**, que vous pouvez d√©ployer **dans votre infrastructure**. Pensez √† la version ¬´ serveur ¬ª de Travis CI. L'utilisation de Travis CI vous permet d'activer un syst√®me de **Continuous Integration/Continuous Deployment (CI/CD)** facile √† utiliser dans un environnement que vous pouvez configurer et s√©curiser comme vous le souhaitez.

**Travis CI Enterprise se compose de deux parties principales :**

1. Les **services TCI** (ou services de base TCI), responsables de l'int√©gration avec les syst√®mes de contr√¥le de version, de l'autorisation des constructions, de la planification des travaux de construction, etc.
2. Les **travailleurs TCI** et les images d'environnement de construction (√©galement appel√©es images OS).

**Les services de base TCI n√©cessitent ce qui suit :**

1. Une base de donn√©es **PostgreSQL11** (ou ult√©rieure).
2. Une infrastructure pour d√©ployer un cluster Kubernetes ; il peut √™tre d√©ploy√© dans un cluster de serveurs ou dans une seule machine si n√©cessaire.
3. Selon votre configuration, vous voudrez peut-√™tre d√©ployer et configurer certains des composants vous-m√™me, par exemple RabbitMQ - voir la [Configuration de Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) pour plus de d√©tails.

**Le travailleur TCI n√©cessite ce qui suit :**

1. Une infrastructure o√π une image docker contenant le **travailleur et une image de construction li√©e peuvent √™tre d√©ploy√©es**.
2. Une connectivit√© √† certains des composants des services de base Travis CI - voir la [Configuration du travailleur](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) pour plus de d√©tails.

Le nombre de travailleurs TCI d√©ploy√©s et d'images OS d'environnement de construction d√©terminera la capacit√© concurrente totale du d√©ploiement de Travis CI Enterprise dans votre infrastructure.

![](<../../.gitbook/assets/image (8) (1) (1).png>)

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**d√©p√¥ts Github HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>