# Informazioni di base su TravisCI

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos di github.

</details>

## Accesso

TravisCI si integra direttamente con diverse piattaforme git come Github, Bitbucket, Assembla e Gitlab. Chieder√† all'utente di concedere a TravisCI le autorizzazioni per accedere ai repository che desidera integrare con TravisCI.

Ad esempio, su Github chieder√† le seguenti autorizzazioni:

* `user:email` (sola lettura)
* `read:org` (sola lettura)
* `repo`: Concede accesso in lettura e scrittura al codice, agli stati di commit, ai collaboratori e agli stati di distribuzione per repository e organizzazioni pubblici e privati.

## Secreti criptati

### Variabili d'ambiente

In TravisCI, come in altre piattaforme CI, √® possibile **salvare segreti a livello di repository** che verranno salvati criptati e **decifrati e inseriti nelle variabili d'ambiente** della macchina che esegue la build.

![](<../../.gitbook/assets/image (44).png>)

√à possibile indicare le **branch a cui i segreti saranno disponibili** (di default tutte) e anche se TravisCI **dovrebbe nascondere il suo valore** se appare **nei log** (di default lo far√†).

### Secreti criptati personalizzati

Per **ogni repository** TravisCI genera una **coppia di chiavi RSA**, **conserva** quella **privata** e rende disponibile la **chiave pubblica del repository** a coloro che hanno **accesso** al repository.

√à possibile accedere alla chiave pubblica di un repository con:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Quindi, puoi utilizzare questa configurazione per **crittografare i segreti e aggiungerli al tuo file `.travis.yaml`**. I segreti verranno **decrittografati quando viene eseguita la build** e saranno accessibili nelle **variabili d'ambiente**.

![](<../../.gitbook/assets/image (2) (2) (1) (1).png>)

Nota che i segreti crittografati in questo modo non verranno elencati nelle variabili d'ambiente delle impostazioni.

### File Crittografati Personalizzati

Allo stesso modo di prima, TravisCI consente anche di **crittografare i file e poi decrittografarli durante la build**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Si noti che quando si crittografa un file, verranno configurate 2 variabili d'ambiente all'interno del repository come:

![](<../../.gitbook/assets/image (23).png>)

## TravisCI Enterprise

Travis CI Enterprise √® una versione **on-prem di Travis CI**, che √® possibile distribuire **nella propria infrastruttura**. Pensate alla versione "server" di Travis CI. Utilizzando Travis CI √® possibile abilitare un sistema di integrazione continua/sviluppo continuo (CI/CD) facile da usare in un ambiente che √® possibile configurare e proteggere come si desidera.

**Travis CI Enterprise √® composto da due parti principali:**

1. Servizi TCI (o TCI Core Services), responsabili dell'integrazione con i sistemi di controllo versione, dell'autorizzazione delle build, della pianificazione dei lavori di build, ecc.
2. Worker TCI e immagini dell'ambiente di build (chiamate anche immagini del sistema operativo).

**I servizi TCI Core richiedono quanto segue:**

1. Un database **PostgreSQL11** (o successivo).
2. Un'infrastruttura per distribuire un cluster Kubernetes; pu√≤ essere distribuito in un cluster di server o in una singola macchina se necessario.
3. A seconda della configurazione, potrebbe essere necessario distribuire e configurare alcuni dei componenti autonomamente, ad esempio RabbitMQ - consultare [Configurazione di Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) per ulteriori dettagli.

**Il Worker TCI richiede quanto segue:**

1. Un'infrastruttura in cui pu√≤ essere distribuita un'immagine docker contenente il Worker e un'immagine di build collegata.
2. Connessione a determinati componenti dei servizi TCI Core di Travis CI - consultare [Configurazione del Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) per ulteriori dettagli.

Il numero di Worker TCI distribuiti e di immagini dell'ambiente di build determiner√† la capacit√† totale di concorrenza dell'implementazione di Travis CI Enterprise nella propria infrastruttura.

![](<../../.gitbook/assets/image (8) (1) (1) (1) (1) (1).png>)

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata in HackTricks** o **scaricare HackTricks in PDF**, controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di esclusive [**NFT**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
