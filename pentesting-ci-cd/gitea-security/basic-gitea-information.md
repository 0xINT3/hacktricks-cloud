# Gitea基本信息

<details>

<summary><strong>支持HackTricks并获得福利！</strong></summary>

* 如果您想在HackTricks中看到您的公司广告，或者如果您想访问PEASS的最新版本或下载PDF格式的HackTricks，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github仓库提交PR来分享您的黑客技巧。**

</details>

## 基本结构

Gitea的基本环境结构是通过**组织**将仓库分组，每个组织可以包含**多个仓库**和**多个团队**。但是，请注意，就像在github中，用户可以在组织之外拥有仓库。

此外，**用户**可以是**不同组织的成员**。在组织内，用户可以对每个仓库拥有**不同的权限**。

用户还可以是不同团队的一部分，对不同的仓库拥有不同的权限。

最后，**仓库可能具有特殊的保护机制**。

## 权限

### 组织

当创建一个**组织**时，会创建一个名为**Owners**的团队，并将用户放入其中。该团队将赋予对组织的**管理员访问权限**，这些**权限**和团队的**名称****无法修改**。

**组织管理员**（所有者）可以选择组织的**可见性**：

* 公开
* 有限制（仅限登录用户）
* 私有（仅限成员）

**组织管理员**还可以指示**仓库管理员**是否可以为团队**添加或删除访问权限**。他们还可以指定仓库的最大数量。

创建新团队时，选择了几个重要的设置：

* 指定团队成员将能够访问的组织的仓库：特定仓库（团队被添加的仓库）或全部仓库。
* 还指定了成员是否可以创建新的仓库（创建者将获得对其的管理员访问权限）。
* 仓库成员将拥有的**权限**：
* **管理员**访问权限
* **特定**访问权限：

![](<../../.gitbook/assets/image (3) (1) (1) (1) (1).png>)

### 团队和用户

在仓库中，**组织管理员**和**仓库管理员**（如果组织允许）可以**管理**分配给协作者（其他用户）和团队的**角色**。有**3**种可能的**角色**：

* 管理员
* 写入
* 读取

## Gitea身份验证

### Web访问

使用**用户名+密码**和可能（建议）的2FA。

### **SSH密钥**

您可以配置您的帐户使用一个或多个公钥，允许相关的**私钥代表您执行操作**。[http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPG密钥**

您**不能使用这些密钥冒充用户**，但如果您不使用它，可能会发现您发送的提交没有签名。

### **个人访问令牌**

您可以生成个人访问令牌，以**授予应用程序访问您的帐户**。个人访问令牌可以完全访问您的帐户：[http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauth应用程序

就像个人访问令牌一样，**Oauth应用程序**将对您的帐户和您的帐户具有访问权限的位置具有**完全访问权限**，因为如[文档](https://docs.gitea.io/en-us/oauth2-provider/#scopes)中所示，尚不支持范围：

![](<../../.gitbook/assets/image (60).png>)

### 部署密钥

部署密钥可能对仓库具有只读或写入访问权限，因此它们可能对于破坏特定仓库很有趣。

## 分支保护

分支保护旨在**不将仓库的完全控制权交给用户**。目标是在能够在某些分支中编写代码之前，**在其前面放置几种保护方法**。

**仓库的分支保护**可以在_https://localhost:3000/\<orgname>/\<reponame>/settings/branches_中找到

{% hint style="info" %}
**无法在组织级别设置分支保护**。因此，所有这些保护都必须在每个仓库中声明。
{% endhint %}

可以对分支应用不同的保护（例如对主分支）：

* **禁用推送**：无人可以推送到此分支
* **启用推送**：具有访问权限的任何人都可以推送，但不能强制推送。
* **白名单限制推送**：只有选定的用户/团队可以推送到此分支（但不能强制推送）
* **启用合并白名单**：只有在白名单上的用户/团队可以合并PR。
* **启用状态检查**：要求状态检查通过后才能合并。
* **要求批准**：指示在可以合并PR之前需要的批准数量。
* **将批准限制为白名单**：指示可以批准PR的用户/团队。
* **在拒绝审查时阻止合并**：如果请求更改，则无法合并（即使其他检查通过）
* **在官方审查请求上阻止合并**：如果有官方审查请求，则无法合并
* **忽略过时的批准**：有新提交时，旧的批准将被忽略。
* **要求签名的提交**：提交必须签名。
* **如果拉取请求已过时，则阻止合并**
* **受保护/未受保护的文件模式**：指定要保护/取消保护的文件模式

{% hint style="info" %}
正如您所看到的，即使您成功获取了某个用户的某些凭据，**仓库可能受到保护，防止您将代码推送到主分支**，例如破坏CI/CD流程。
{% endhint %}

<details>

<summary><strong>支持HackTricks并获得福利！</strong></summary>

* 如果您想在HackTricks中看到您的公司广告，或者如果您想访问PEASS的最新版本或下载PDF格式的HackTricks，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向
