# Informa√ß√µes B√°sicas sobre Gitea

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs exclusivos**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do github** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Estrutura B√°sica

A estrutura b√°sica do ambiente Gitea √© agrupar reposit√≥rios por **organiza√ß√£o(√µes)**, cada uma delas pode conter **v√°rios reposit√≥rios** e **v√°rias equipes**. No entanto, observe que, assim como no github, os usu√°rios podem ter reposit√≥rios fora da organiza√ß√£o.

Al√©m disso, um **usu√°rio** pode ser **membro** de **diferentes organiza√ß√µes**. Dentro da organiza√ß√£o, o usu√°rio pode ter **diferentes permiss√µes sobre cada reposit√≥rio**.

Um usu√°rio tamb√©m pode fazer **parte de diferentes equipes** com diferentes permiss√µes sobre diferentes reposit√≥rios.

E, finalmente, **reposit√≥rios podem ter mecanismos especiais de prote√ß√£o**.

## Permiss√µes

### Organiza√ß√µes

Quando uma **organiza√ß√£o √© criada**, uma equipe chamada **Owners** √© **criada** e o usu√°rio √© colocado dentro dela. Esta equipe conceder√° **acesso de administra√ß√£o** sobre a **organiza√ß√£o**, essas **permiss√µes** e o **nome** da equipe **n√£o podem ser modificados**.

**Admins da org** (propriet√°rios) podem selecionar a **visibilidade** da organiza√ß√£o:

* P√∫blica
* Limitada (apenas usu√°rios logados)
* Privada (apenas membros)

**Admins da org** tamb√©m podem indicar se os **admins do reposit√≥rio** podem **adicionar e/ou remover acesso** para equipes. Eles tamb√©m podem indicar o n√∫mero m√°ximo de reposit√≥rios.

Ao criar uma nova equipe, v√°rias configura√ß√µes importantes s√£o selecionadas:

* √â indicado os **reposit√≥rios da org que os membros da equipe poder√£o acessar**: reposit√≥rios espec√≠ficos (reposit√≥rios onde a equipe √© adicionada) ou todos.
* Tamb√©m √© indicado **se os membros podem criar novos reposit√≥rios** (o criador receber√° acesso de administra√ß√£o a ele)
* As **permiss√µes** que os **membros** do reposit√≥rio **ter√£o**:
* Acesso de **Administrador**
* Acesso **Espec√≠fico**:

![](<../../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png>)

### Equipes & Usu√°rios

Em um reposit√≥rio, o **admin da org** e os **admins do reposit√≥rio** (se permitido pela org) podem **gerenciar as fun√ß√µes** dadas a colaboradores (outros usu√°rios) e equipes. Existem **3** poss√≠veis **fun√ß√µes**:

* Administrador
* Escrita
* Leitura

## Autentica√ß√£o Gitea

### Acesso Web

Usando **nome de usu√°rio + senha** e potencialmente (e recomendado) um 2FA.

### **Chaves SSH**

Voc√™ pode configurar sua conta com uma ou v√°rias chaves p√∫blicas permitindo que a **chave privada relacionada execute a√ß√µes em seu nome.** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Chaves GPG**

Voc√™ **n√£o pode se passar pelo usu√°rio com essas chaves**, mas se voc√™ n√£o as usar, pode ser poss√≠vel que voc√™ **seja descoberto por enviar commits sem uma assinatura**.

### **Tokens de Acesso Pessoal**

Voc√™ pode gerar um token de acesso pessoal para **dar a um aplicativo acesso √† sua conta**. Um token de acesso pessoal concede acesso total √† sua conta: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Aplica√ß√µes Oauth

Assim como os tokens de acesso pessoal, as **aplica√ß√µes Oauth** ter√£o **acesso completo** √† sua conta e aos locais aos quais sua conta tem acesso, pois, conforme indicado na [documenta√ß√£o](https://docs.gitea.io/en-us/oauth2-provider/#scopes), escopos ainda n√£o s√£o suportados:

![](<../../.gitbook/assets/image (60).png>)

### Chaves de Implanta√ß√£o

Chaves de implanta√ß√£o podem ter acesso somente leitura ou escrita ao reposit√≥rio, portanto, podem ser interessantes para comprometer reposit√≥rios espec√≠ficos.

## Prote√ß√µes de Branch

Prote√ß√µes de branch s√£o projetadas para **n√£o dar controle completo de um reposit√≥rio** aos usu√°rios. O objetivo √© **colocar v√°rios m√©todos de prote√ß√£o antes de poder escrever c√≥digo dentro de algum branch**.

As **prote√ß√µes de branch de um reposit√≥rio** podem ser encontradas em _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
**N√£o √© poss√≠vel definir uma prote√ß√£o de branch no n√≠vel da organiza√ß√£o**. Portanto, todas elas devem ser declaradas em cada reposit√≥rio.
{% endhint %}

Diferentes prote√ß√µes podem ser aplicadas a um branch (como para o master):

* **Desativar Push**: Ningu√©m pode fazer push para este branch
* **Ativar Push**: Qualquer um com acesso pode fazer push, mas n√£o force push.
* **Lista Branca de Push Restrito**: Apenas usu√°rios/equipes selecionados podem fazer push para este branch (mas n√£o force push)
* **Ativar Lista Branca de Merge**: Apenas usu√°rios/equipes na lista branca podem fazer merge de PRs.
* **Ativar Verifica√ß√µes de Status**: Exigir que verifica√ß√µes de status sejam aprovadas antes de fazer merge.
* **Exigir aprova√ß√µes**: Indicar o n√∫mero de aprova√ß√µes necess√°rias antes que um PR possa ser feito merge.
* **Restringir aprova√ß√µes √† lista branca**: Indicar usu√°rios/equipes que podem aprovar PRs.
* **Bloquear merge em revis√µes rejeitadas**: Se forem solicitadas altera√ß√µes, n√£o poder√° ser feito merge (mesmo que os outros checks passem)
* **Bloquear merge em solicita√ß√µes de revis√£o oficiais**: Se houver solicita√ß√µes de revis√£o oficiais, n√£o poder√° ser feito merge
* **Descartar aprova√ß√µes obsoletas**: Quando novos commits, aprova√ß√µes antigas ser√£o descartadas.
* **Exigir Commits Assinados**: Commits devem ser assinados.
* **Bloquear merge se o pull request estiver desatualizado**
* **Padr√µes de Arquivos Protegidos/N√£o Protegidos**: Indicar padr√µes de arquivos para proteger/desproteger contra altera√ß√µes

{% hint style="info" %}
Como voc√™ pode ver, mesmo que voc√™ tenha conseguido obter algumas credenciais de um usu√°rio, **reposit√≥rios podem estar protegidos evitando que voc√™ fa√ßa push de c√≥digo para o master**, por exemplo, para comprometer o pipeline de CI/CD.
{% endhint %}

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs exclusivos**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do github** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
