# Informations de base sur Gitea

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Structure de base

La structure de base de l'environnement Gitea est de regrouper les d√©p√¥ts par **organisation(s)**, chacune pouvant contenir **plusieurs d√©p√¥ts** et **plusieurs √©quipes**. Cependant, notez que, tout comme sur github, les utilisateurs peuvent avoir des d√©p√¥ts en dehors de l'organisation.

De plus, un **utilisateur** peut √™tre **membre** de **diff√©rentes organisations**. Au sein de l'organisation, l'utilisateur peut avoir **diff√©rentes permissions sur chaque d√©p√¥t**.

Un utilisateur peut √©galement faire **partie de diff√©rentes √©quipes** avec diff√©rentes permissions sur diff√©rents d√©p√¥ts.

Et enfin, **les d√©p√¥ts peuvent avoir des m√©canismes de protection sp√©ciaux**.

## Permissions

### Organisations

Lorsqu'une **organisation est cr√©√©e**, une √©quipe appel√©e **Owners** est **cr√©√©e** et l'utilisateur y est ajout√©. Cette √©quipe donnera un **acc√®s administrateur** sur l'**organisation**, ces **permissions** et le **nom** de l'√©quipe **ne peuvent pas √™tre modifi√©s**.

Les **admins de l'org** (propri√©taires) peuvent s√©lectionner la **visibilit√©** de l'organisation :

* Public
* Limit√© (utilisateurs connect√©s uniquement)
* Priv√© (membres uniquement)

Les **admins de l'org** peuvent √©galement indiquer si les **admins des d√©p√¥ts** peuvent **ajouter et/ou retirer l'acc√®s** pour les √©quipes. Ils peuvent aussi indiquer le nombre maximum de d√©p√¥ts.

Lors de la cr√©ation d'une nouvelle √©quipe, plusieurs param√®tres importants sont s√©lectionn√©s :

* Il est indiqu√© **les d√©p√¥ts de l'org auxquels les membres de l'√©quipe pourront acc√©der** : d√©p√¥ts sp√©cifiques (d√©p√¥ts o√π l'√©quipe est ajout√©e) ou tous.
* Il est √©galement indiqu√© **si les membres peuvent cr√©er de nouveaux d√©p√¥ts** (le cr√©ateur obtiendra un acc√®s administrateur √† celui-ci)
* Les **permissions** que les **membres** du d√©p√¥t **auront** :
* Acc√®s **Administrateur**
* Acc√®s **Sp√©cifique** :

![](<../../.gitbook/assets/image (3) (1) (1) (1) (1).png>)

### √âquipes & Utilisateurs

Dans un d√©p√¥t, l'**admin de l'org** et les **admins du d√©p√¥t** (si autoris√© par l'org) peuvent **g√©rer les r√¥les** attribu√©s aux collaborateurs (autres utilisateurs) et aux √©quipes. Il y a **3** r√¥les **possibles** :

* Administrateur
* √âcriture
* Lecture

## Authentification Gitea

### Acc√®s Web

Utilisation de **nom d'utilisateur + mot de passe** et potentiellement (et recommand√©) un 2FA.

### **Cl√©s SSH**

Vous pouvez configurer votre compte avec une ou plusieurs cl√©s publiques permettant √† la **cl√© priv√©e correspondante d'effectuer des actions en votre nom**. [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Cl√©s GPG**

Vous **ne pouvez pas usurper l'identit√© de l'utilisateur avec ces cl√©s** mais si vous ne les utilisez pas, il est possible que vous **soyez d√©couvert pour avoir envoy√© des commits sans signature**.

### **Jetons d'acc√®s personnel**

Vous pouvez g√©n√©rer un jeton d'acc√®s personnel pour **donner √† une application l'acc√®s √† votre compte**. Un jeton d'acc√®s personnel donne un acc√®s complet sur votre compte : [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Applications Oauth

Tout comme les jetons d'acc√®s personnel, les **applications Oauth** auront un **acc√®s complet** sur votre compte et les endroits auxquels votre compte a acc√®s car, comme indiqu√© dans la [documentation](https://docs.gitea.io/en-us/oauth2-provider/#scopes), les scopes ne sont pas encore pris en charge :

![](<../../.gitbook/assets/image (60).png>)

### Cl√©s de d√©ploiement

Les cl√©s de d√©ploiement peuvent avoir un acc√®s en lecture seule ou en √©criture au d√©p√¥t, elles peuvent donc √™tre int√©ressantes pour compromettre des d√©p√¥ts sp√©cifiques.

## Protections de branches

Les protections de branches sont con√ßues pour **ne pas donner un contr√¥le complet d'un d√©p√¥t** aux utilisateurs. L'objectif est de **mettre en place plusieurs m√©thodes de protection avant de pouvoir √©crire du code dans une branche**.

Les **protections de branches d'un d√©p√¥t** peuvent √™tre trouv√©es sur _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
Il n'est **pas possible de d√©finir une protection de branche au niveau de l'organisation**. Donc, toutes doivent √™tre d√©clar√©es sur chaque d√©p√¥t.
{% endhint %}

Diff√©rentes protections peuvent √™tre appliqu√©es √† une branche (comme √† master) :

* **D√©sactiver Push** : Personne ne peut pousser sur cette branche
* **Activer Push** : Toute personne ayant acc√®s peut pousser, mais pas forcer le push.
* **Liste blanche Push Restreint** : Seuls les utilisateurs/√©quipes s√©lectionn√©s peuvent pousser sur cette branche (mais pas forcer le push)
* **Activer la liste blanche de fusion** : Seuls les utilisateurs/√©quipes de la liste blanche peuvent fusionner les PR.
* **Activer les v√©rifications de statut** : Exiger que les v√©rifications de statut soient pass√©es avant de fusionner.
* **Exiger des approbations** : Indiquer le nombre d'approbations requises avant qu'une PR puisse √™tre fusionn√©e.
* **Restreindre les approbations √† la liste blanche** : Indiquer les utilisateurs/√©quipes qui peuvent approuver les PR.
* **Bloquer la fusion en cas d'avis de rejet** : Si des modifications sont demand√©es, cela ne peut pas √™tre fusionn√© (m√™me si les autres contr√¥les passent)
* **Bloquer la fusion en cas de demandes d'examen officielles** : Si des demandes d'examen officielles sont faites, cela ne peut pas √™tre fusionn√©
* **Rejeter les approbations p√©rim√©es** : Lors de nouveaux commits, les anciennes approbations seront rejet√©es.
* **Exiger des commits sign√©s** : Les commits doivent √™tre sign√©s.
* **Bloquer la fusion si la pull request est obsol√®te**
* **Mod√®les de fichiers prot√©g√©s/non prot√©g√©s** : Indiquer des mod√®les de fichiers √† prot√©ger/d√©prot√©ger contre les changements

{% hint style="info" %}
Comme vous pouvez le voir, m√™me si vous avez r√©ussi √† obtenir certaines informations d'identification d'un utilisateur, **les d√©p√¥ts peuvent √™tre prot√©g√©s vous emp√™chant de pousser du code sur master** par exemple pour compromettre le pipeline CI/CD.
{% endhint %}

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
