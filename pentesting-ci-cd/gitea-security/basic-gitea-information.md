# Informazioni di base su Gitea

<details>

<summary><strong>Impara l'hacking di AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT**](https://opensea.io/collection/the-peass-family) esclusivi
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Struttura di base

La struttura di base dell'ambiente Gitea consiste nel raggruppare i repository per **organizzazioni**, ognuna delle quali pu√≤ contenere **diversi repository** e **diverse squadre**. Tuttavia, nota che, proprio come su github, gli utenti possono avere repository al di fuori dell'organizzazione.

Inoltre, un **utente** pu√≤ essere un **membro** di **diverse organizzazioni**. All'interno dell'organizzazione, l'utente pu√≤ avere **diversi permessi su ciascun repository**.

Un utente pu√≤ anche far parte di **diverse squadre** con diversi permessi su diversi repository.

Infine, **i repository possono avere meccanismi di protezione speciali**.

## Permessi

### Organizzazioni

Quando viene creata un'**organizzazione**, viene **creata** una squadra chiamata **Owners** e l'utente viene inserito al suo interno. Questa squadra fornir√† **accesso amministrativo** all'**organizzazione**, questi **permessi** e il **nome** della squadra **non possono essere modificati**.

Gli **amministratori dell'organizzazione** (proprietari) possono selezionare la **visibilit√†** dell'organizzazione:

* Pubblica
* Limitata (solo utenti con accesso)
* Privata (solo membri)

Gli **amministratori dell'organizzazione** possono anche indicare se gli **amministratori del repository** possono **aggiungere e/o rimuovere l'accesso** per le squadre. Possono anche indicare il numero massimo di repository.

Durante la creazione di una nuova squadra, vengono selezionate diverse impostazioni importanti:

* Viene indicato **ai repository dell'organizzazione a cui i membri della squadra potranno accedere**: repository specifici (repository in cui la squadra √® stata aggiunta) o tutti.
* Viene anche indicato **se i membri possono creare nuovi repository** (il creatore otterr√† l'accesso amministrativo ad esso)
* I **permessi** che i **membri** del repository **avranno**:
* Accesso **amministratore**
* Accesso **specifico**:

![](<../../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png>)

### Squadre e Utenti

In un repository, l'**amministratore dell'organizzazione** e gli **amministratori del repository** (se consentito dall'organizzazione) possono **gestire i ruoli** assegnati ai collaboratori (altri utenti) e alle squadre. Ci sono **3** possibili **ruoli**:

* Amministratore
* Scrittura
* Lettura

## Autenticazione Gitea

### Accesso Web

Utilizzando **nome utente + password** e potenzialmente (e consigliato) una 2FA.

### **Chiavi SSH**

Puoi configurare il tuo account con una o pi√π chiavi pubbliche che consentono alla relativa **chiave privata di eseguire azioni per conto tuo**. [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Chiavi GPG**

Non puoi impersonare l'utente con queste chiavi, ma se non le usi potrebbe essere possibile che **venga scoperto l'invio di commit senza firma**.

### **Token di accesso personale**

Puoi generare un token di accesso personale per **concedere a un'applicazione l'accesso al tuo account**. Un token di accesso personale fornisce accesso completo al tuo account: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Applicazioni Oauth

Proprio come i token di accesso personale, le **applicazioni Oauth** avranno **accesso completo** al tuo account e ai luoghi in cui il tuo account ha accesso perch√©, come indicato nella [documentazione](https://docs.gitea.io/en-us/oauth2-provider/#scopes), gli ambiti non sono ancora supportati:

![](<../../.gitbook/assets/image (60).png>)

### Chiavi di deploy

Le chiavi di deploy possono avere accesso in sola lettura o in scrittura al repository, quindi potrebbero essere interessanti per compromettere repository specifici.

## Protezioni del branch

Le protezioni del branch sono progettate per **non dare il controllo completo di un repository** agli utenti. L'obiettivo √® **applicare diversi metodi di protezione prima di poter scrivere codice in un determinato branch**.

Le **protezioni del branch di un repository** possono essere trovate in _https://localhost:3000/\<nomeorganizzazione>/\<nomerepository>/settings/branches_

{% hint style="info" %}
**Non √® possibile impostare una protezione del branch a livello di organizzazione**. Quindi tutte devono essere dichiarate su ogni repository.
{% endhint %}

Diverse protezioni possono essere applicate a un branch (come a master):

* **Disabilita Push**: Nessuno pu√≤ effettuare push su questo branch
* **Abilita Push**: Chiunque con accesso pu√≤ effettuare push, ma non push forzati.
* **Whitelist Restricted Push**: Solo utenti/squadre selezionati possono effettuare push su questo branch (ma senza push forzati)
* **Abilita Whitelist Merge**: Solo utenti/squadre in whitelist possono effettuare merge delle PR.
* **Abilita controlli di stato**: Richiede che i controlli di stato siano superati prima del merge.
* **Richiedi approvazioni**: Indica il numero di approvazioni richieste prima che una PR possa essere unita.
* **Limita approvazioni ai whitelisted**: Indica gli utenti/squadre che possono approvare le PR.
* **Blocca merge su recensioni rifiutate**: Se vengono richieste modifiche, non pu√≤ essere unito (anche se gli altri controlli passano)
* **Blocca merge su richieste di revisione ufficiali**: Se ci sono richieste di revisione ufficiali, non pu√≤ essere unito
* **Ignora approvazioni obsolete**: Quando ci sono nuovi commit, le vecchie approvazioni verranno ignorate.
* **Richiedi commit firmati**: I commit devono essere firmati.
* **Blocca merge se la pull request √® obsoleta**
* **Pattern di file protetti/non protetti**: Indica i pattern di file da proteggere/non proteggere dalle modifiche

{% hint style="info" %}
Come puoi vedere, anche se sei riuscito a ottenere le credenziali di un utente, **i repository potrebbero essere protetti impedendoti di inviare codice a master**, ad esempio per compromettere il flusso di CI/CD.
{% endhint %}

<details>

<summary><strong>Impara l'hacking di AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**P
