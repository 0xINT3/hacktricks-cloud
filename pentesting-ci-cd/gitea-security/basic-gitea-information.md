# 基本的なGitea情報

<details>

<summary><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksスウォッグ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[Telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦 **@hacktricks\_live**（https://twitter.com/hacktricks\_live）をフォローする。
- **HackTricks**（https://github.com/carlospolop/hacktricks）と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出して、あなたのハッキングテクニックを共有してください。

</details>

## 基本構造

基本的なGitea環境構造は、**組織によってリポジトリをグループ化**し、それぞれが**複数のリポジトリ**と**複数のチーム**を含むことです。ただし、GitHubと同様に、ユーザーは組織外のリポジトリを持つことができます。

さらに、**ユーザー**は**異なる組織のメンバー**になることができます。組織内では、ユーザーは各リポジトリに対して**異なる権限**を持つことができます。

ユーザーは**異なるチームの一部**であり、異なるリポジトリに対して異なる権限を持つことができます。

最後に、**リポジトリには特別な保護メカニズム**があります。

## 権限

### 組織

**組織が作成されると**、**Owners**というチームが**作成され**、ユーザーがその中に配置されます。このチームは**組織に対する管理アクセス**を提供し、その**権限**と**チームの名前**は**変更できません**。

**組織の管理者**（所有者）は、組織の**可視性**を選択できます：

- 公開
- 限定（ログインユーザーのみ）
- プライベート（メンバーのみ）

**組織の管理者**はまた、**リポジトリの管理者**が**チームにアクセスを追加または削除**できるかどうかを示すことができます。また、リポジトリの最大数を指定することもできます。

新しいチームを作成する際に、いくつかの重要な設定が選択されます：

- チームのメンバーがアクセスできる**組織のリポジトリ**が指定されます：特定のリポジトリ（チームが追加されているリポジトリ）またはすべてのリポジトリ。
- メンバーが新しいリポジトリを作成できるかどうかが示されます（作成者はそれに管理者アクセスを取得します）
- リポジトリのメンバーが持つ**権限**：
  - **管理者**アクセス
  - **特定**のアクセス：

![](<../../.gitbook/assets/image (118).png>)

### チーム＆ユーザー

リポジトリでは、**組織の管理者**および**リポジトリの管理者**（組織によって許可されている場合）が、共同作業者（他のユーザー）およびチームに与えられる**3つの可能な役割**を管理できます：

- 管理者
- 書き込み
- 読み取り

## Gitea認証

### Webアクセス

**ユーザー名+パスワード**および（推奨される）2要素認証を使用します。

### **SSHキー**

関連する**秘密鍵があなたの代わりにアクションを実行**できるように、1つまたは複数の公開鍵でアカウントを構成できます。[http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPGキー**

これらのキーを使用してユーザーを**偽装することはできません**が、使用しない場合、署名のないコミットを送信することができる可能性があります。

### **個人アクセストークン**

個人アクセストークンを生成して、アプリケーションがあなたのアカウントにアクセスできるようにすることができます。個人アクセストークンはアカウント全体に完全なアクセス権を与えます：[http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauthアプリケーション

個人アクセストークンと同様に、**Oauthアプリケーション**は、アカウント全体とアカウントがアクセス権を持っている場所に**完全なアクセス権**を持ちます。なぜなら、[ドキュメント](https://docs.gitea.io/en-us/oauth2-provider/#scopes)で示されているように、スコープはまだサポートされていないからです：

![](<../../.gitbook/assets/image (194).png>)

### デプロイキー

デプロイキーには、リポジトリへの読み取り専用または書き込みアクセスがあるため、特定のリポジトリを侵害するのに興味深いかもしれません。

## ブランチ保護

ブランチ保護は、**ユーザーにリポジトリの完全な制御権限を与えない**ように設計されています。目標は、**一部のブランチにコードを書く前にいくつかの保護方法を設ける**ことです。

リポジトリの**ブランチ保護**は、_https://localhost:3000/\<orgname>/\<reponame>/settings/branches_で見つけることができます。

{% hint style="info" %}
**組織レベルでブランチ保護を設定することはできません**。したがって、すべてのブランチはそれぞれのリポジトリで宣言されなければなりません。
{% endhint %}

ブランチに異なる保護が適用されることがあります（たとえば、masterに）：

- **プッシュの無効化**：誰もこのブランチにプッシュできません
- **プッシュの有効化**：アクセス権を持つ人は誰でもプッシュできますが、強制プッシュはできません。
- **ホワイトリスト制限付きプッシュ**：選択したユーザー/チームのみがこのブランチにプッシュできます（ただし、強制プッシュはできません）
- **マージホワイトリストの有効化**：ホワイトリストに登録されたユーザー/チームのみがPRをマージできます。
- **ステータスチェックの有効化**：マージする前にステータスチェックをパスする必要があります。
- **承認の必要性**：PRをマージする前に必要な承認の数を示します。
- **承認をホワイトリストに制限**：PRを承認できるユーザー/チームを示します。
- **拒否されたレビューでマージをブロック**：変更が要求された場合、マージできません（他のチェックが合格していても）
- **公式レビューリクエストでマージをブロック**：公式レビューリクエストがある場合、マージできません
- **古い承認を無視**：新しいコミットがあると、古い承認が無視されます。
- **署名されたコミットが必要**：コミットに署名が必要です。
- **プルリクエストが古い場合にマージをブロック**
- **保護/保護解除ファイルパターン**：変更に対して保護/保護解除するファイルのパターンを示します

{% hint style="info" %}
見ての通り、ユーザーの資格情報を入手したとしても、**リポジトリが保護されているため、たとえばCI/CDパイプラインを妨害するためにコードをmasterにプッシュすることができない**場合があります。
{% endhint %}

<details>

<summary><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksスウォッグ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[Telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦 **@hacktricks\_live**（https://twitter.com/hacktricks\_live）をフォローする。
- **HackTricks**（https://github.com/carlospolop/hacktricks）と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出して、あなたのハッキングテクニックを共有してください。

</details>
