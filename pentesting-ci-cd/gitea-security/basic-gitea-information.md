# Giteaの基本情報

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)でAWSハッキングをゼロからヒーローまで学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**PEASSファミリー**](https://opensea.io/collection/the-peass-family)を発見する、私たちの独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクション
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォローする**。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有する。

</details>

## 基本構造

基本的なGitea環境構造は、**組織**によってリポジトリをグループ化することです。それぞれに**複数のリポジトリ**と**複数のチーム**が含まれる可能性があります。ただし、githubのようにユーザーは組織の外にリポジトリを持つことができることに注意してください。

さらに、**ユーザー**は**異なる組織**の**メンバー**になることができます。組織内では、ユーザーは**各リポジトリに対して異なる権限**を持つことがあります。

ユーザーはまた、異なるリポジトリに対する異なる権限を持つ**異なるチームの一部**にもなり得ます。

最後に、**リポジトリには特別な保護メカニズム**があるかもしれません。

## 権限

### 組織

**組織が作成される**と、**オーナー**と呼ばれるチームが**作成され**、ユーザーはその中に入れられます。このチームは**組織**に対する**管理者アクセス**を提供し、これらの**権限**とチームの**名前**は**変更できません**。

**組織の管理者**（オーナー）は組織の**可視性**を選択できます：

* 公開
* 限定（ログインユーザーのみ）
* プライベート（メンバーのみ）

**組織の管理者**は、**リポジトリの管理者**がチームへのアクセスを**追加または削除できるかどうか**も指示できます。また、リポジトリの最大数も指示できます。

新しいチームを作成するとき、いくつかの重要な設定が選択されます：

* チームのメンバーがアクセスできる**組織のリポジトリ**が指示されます：特定のリポジトリ（チームが追加されたリポジトリ）またはすべて。
* メンバーが**新しいリポジトリを作成できるかどうか**も指示されます（作成者はそれに対する管理者アクセスを取得します）
* リポジトリの**メンバー**が**持つ権限**：
* **管理者**アクセス
* **特定の**アクセス：

![](<../../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1) (1).png>)

### チームとユーザー

リポジトリでは、**組織の管理者**と**リポジトリの管理者**（組織によって許可されている場合）は、コラボレーター（他のユーザー）とチームに与えられた**役割を管理**できます。**3**つの可能な**役割**があります：

* 管理者
* 書き込み
* 読み取り

## Gitea認証

### Webアクセス

**ユーザー名 + パスワード**を使用し、可能であれば（推奨される）2FAを使用します。

### **SSHキー**

アカウントに一つまたは複数の公開キーを設定して、関連する**秘密キーが代わりに行動を実行できるようにします。** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPGキー**

これらのキーでユーザーを偽装することは**できません**が、使用しない場合、署名なしのコミットを送信して**発見される可能性**があります。

### **個人アクセストークン**

アプリケーションがアカウントにアクセスできるように個人アクセストークンを生成できます。個人アクセストークンはアカウントに完全なアクセスを提供します：[http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauthアプリケーション

個人アクセストークンと同様に、**Oauthアプリケーション**はアカウントとアカウントがアクセスできる場所に**完全なアクセス**を持ちます。[ドキュメント](https://docs.gitea.io/en-us/oauth2-provider/#scopes)に示されているように、スコープはまだサポートされていません：

![](<../../.gitbook/assets/image (60).png>)

### デプロイキー

デプロイキーはリポジトリへの読み取り専用または書き込みアクセスを持つ可能性があるため、特定のリポジトリを危険にさらすのに興味深いかもしれません。

## ブランチ保護

ブランチ保護は、ユーザーにリポジトリの完全な制御を与えないように設計されています。目的は、いくつかのブランチ内にコードを書き込む前に、いくつかの保護方法を設置することです。

リポジトリの**ブランチ保護**は _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_ で見つけることができます。

{% hint style="info" %}
組織レベルでブランチ保護を設定することは**できません**。したがって、すべての保護は各リポジトリで宣言する必要があります。
{% endhint %}

ブランチに適用できるさまざまな保護（マスターなど）：

* **プッシュ無効**：このブランチにプッシュすることはできません
* **プッシュ有効**：アクセス権を持つ人は誰でもプッシュできますが、強制プッシュはできません。
* **制限されたプッシュのホワイトリスト**：選択されたユーザー/チームのみがこのブランチにプッシュできます（強制プッシュはできません）
* **マージホワイトリスト有効**：ホワイトリストに登録されたユーザー/チームのみがPRをマージできます。
* **ステータスチェック有効**：マージする前にステータスチェックに合格する必要があります。
* **承認が必要**：PRをマージする前に必要な承認の数を示します。
* **ホワイトリストに登録された承認に制限**：PRを承認できるユーザー/チームを示します。
* **拒否されたレビューでマージをブロック**：変更が要求された場合、他のチェックが合格してもマージできません。
* **公式レビューリクエストでマージをブロック**：公式のレビューリクエストがある場合、マージできません。
* **古い承認を無視**：新しいコミットがある場合、古い承認は無視されます。
* **署名されたコミットが必要**：コミットは署名されている必要があります。
* **プルリクエストが古い場合はマージをブロック**
* **保護/保護解除されたファイルパターン**：変更に対して保護/保護解除するファイルのパターンを示します。

{% hint style="info" %}
ご覧のとおり、ユーザーのいくつかの資格情報を取得することができたとしても、たとえばCI/CDパイプラインを危険にさらすためにマスターにコードをプッシュすることを避けるために、**リポジトリは保護されている可能性があります**。
{% endhint %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)でAWSハッキングをゼロからヒーローまで学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**PEASSファミリー**](https://opensea.io/collection/the-peass-family)を発見する、私たちの独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクション
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォローする**。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有する。

</details>
