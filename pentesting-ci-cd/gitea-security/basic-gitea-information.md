# Informations de base sur Gitea

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

## Structure de base

La structure de base de l'environnement Gitea consiste √† regrouper des d√©p√¥ts par **organisation(s)**, chacune pouvant contenir **plusieurs d√©p√¥ts** et **plusieurs √©quipes**. Cependant, notez que tout comme sur github, les utilisateurs peuvent avoir des d√©p√¥ts en dehors de l'organisation.

De plus, un **utilisateur** peut √™tre **membre** de **diff√©rentes organisations**. Au sein de l'organisation, l'utilisateur peut avoir **diff√©rentes autorisations sur chaque d√©p√¥t**.

Un utilisateur peut √©galement faire **partie de diff√©rentes √©quipes** avec des autorisations diff√©rentes sur diff√©rents d√©p√¥ts.

Enfin, les **d√©p√¥ts peuvent avoir des m√©canismes de protection sp√©ciaux**.

## Autorisations

### Organisations

Lorsqu'une **organisation est cr√©√©e**, une √©quipe appel√©e **Propri√©taires** est **cr√©√©e** et l'utilisateur y est plac√©. Cette √©quipe donnera un **acc√®s administratif** sur l'**organisation**, ces **autorisations** et le **nom** de l'√©quipe **ne peuvent pas √™tre modifi√©s**.

Les **administrateurs de l'org** (propri√©taires) peuvent s√©lectionner la **visibilit√©** de l'organisation :

* Publique
* Limit√©e (utilisateurs connect√©s uniquement)
* Priv√©e (membres uniquement)

Les **administrateurs de l'org** peuvent √©galement indiquer si les **administrateurs de d√©p√¥t** peuvent **ajouter et/ou supprimer l'acc√®s** pour les √©quipes. Ils peuvent √©galement indiquer le nombre maximal de d√©p√¥ts.

Lors de la cr√©ation d'une nouvelle √©quipe, plusieurs param√®tres importants sont s√©lectionn√©s :

* Il est indiqu√© les **d√©p√¥ts de l'org auxquels les membres de l'√©quipe pourront acc√©der** : d√©p√¥ts sp√©cifiques (d√©p√¥ts o√π l'√©quipe est ajout√©e) ou tous.
* Il est √©galement indiqu√© **si les membres peuvent cr√©er de nouveaux d√©p√¥ts** (le cr√©ateur obtiendra un acc√®s administratif).
* Les **autorisations** que les **membres** du d√©p√¥t auront :
* Acc√®s **Administrateur**
* Acc√®s **Sp√©cifique** :

![](<../../.gitbook/assets/image (118).png>)

### √âquipes & Utilisateurs

Dans un d√©p√¥t, l'**administrateur de l'org** et les **administrateurs de d√©p√¥t** (si autoris√© par l'org) peuvent **g√©rer les r√¥les** attribu√©s aux collaborateurs (autres utilisateurs) et aux √©quipes. Il existe **3** r√¥les possibles :

* Administrateur
* √âcriture
* Lecture

## Authentification Gitea

### Acc√®s Web

En utilisant **nom d'utilisateur + mot de passe** et √©ventuellement (et recommand√©) une 2FA.

### **Cl√©s SSH**

Vous pouvez configurer votre compte avec une ou plusieurs cl√©s publiques permettant √† la **cl√© priv√©e associ√©e d'effectuer des actions en votre nom**. [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Cl√©s GPG**

Vous ne pouvez **pas vous faire passer pour l'utilisateur avec ces cl√©s** mais si vous ne les utilisez pas, il pourrait √™tre possible que vous **soyez d√©couvert pour l'envoi de commits sans signature**.

### **Jetons d'acc√®s personnels**

Vous pouvez g√©n√©rer un jeton d'acc√®s personnel pour **donner √† une application l'acc√®s √† votre compte**. Un jeton d'acc√®s personnel donne un acc√®s complet √† votre compte : [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Applications Oauth

Tout comme les jetons d'acc√®s personnels, les **applications Oauth** auront **un acc√®s complet** √† votre compte et aux endroits o√π votre compte a acc√®s car, comme indiqu√© dans la [documentation](https://docs.gitea.io/en-us/oauth2-provider/#scopes), les √©tendues ne sont pas encore prises en charge :

![](<../../.gitbook/assets/image (194).png>)

### Cl√©s de d√©ploiement

Les cl√©s de d√©ploiement peuvent avoir un acc√®s en lecture seule ou en √©criture au d√©p√¥t, il peut donc √™tre int√©ressant de compromettre des d√©p√¥ts sp√©cifiques.

## Protections de branche

Les protections de branche sont con√ßues pour **ne pas donner un contr√¥le complet d'un d√©p√¥t** aux utilisateurs. L'objectif est de **mettre en place plusieurs m√©thodes de protection avant de pouvoir √©crire du code dans une branche**.

Les **protections de branche d'un d√©p√¥t** peuvent √™tre trouv√©es dans _https://localhost:3000/\<nomorg>/\<nomrepo>/settings/branches_

{% hint style="info" %}
Il n'est **pas possible de d√©finir une protection de branche au niveau de l'organisation**. Elles doivent donc toutes √™tre d√©clar√©es sur chaque d√©p√¥t.
{% endhint %}

Diff√©rentes protections peuvent √™tre appliqu√©es √† une branche (comme √† master) :

* **D√©sactiver la pouss√©e** : Personne ne peut pousser sur cette branche
* **Activer la pouss√©e** : Toute personne ayant acc√®s peut pousser, mais pas de force push.
* **Liste blanche de pouss√©e restreinte** : Seuls les utilisateurs/√©quipes s√©lectionn√©s peuvent pousser sur cette branche (mais pas de force push)
* **Activer la liste blanche de fusion** : Seuls les utilisateurs/√©quipes en liste blanche peuvent fusionner les PR.
* **Activer les v√©rifications d'√©tat** : Exiger que les v√©rifications d'√©tat passent avant la fusion.
* **Exiger des approbations** : Indiquer le nombre d'approbations requises avant qu'un PR puisse √™tre fusionn√©.
* **Restreindre les approbations aux personnes en liste blanche** : Indiquer les utilisateurs/√©quipes pouvant approuver les PR.
* **Bloquer la fusion sur les avis rejet√©s** : Si des modifications sont demand√©es, elles ne peuvent pas √™tre fusionn√©es (m√™me si les autres v√©rifications passent)
* **Bloquer la fusion sur les demandes d'avis officiels** : Si des demandes d'avis officiels sont en attente, elles ne peuvent pas √™tre fusionn√©es
* **Rejeter les approbations obsol√®tes** : Avec de nouveaux commits, les anciennes approbations seront rejet√©es.
* **Exiger des commits sign√©s** : Les commits doivent √™tre sign√©s.
* **Bloquer la fusion si la demande de tirage est obsol√®te**
* **Mod√®les de fichiers prot√©g√©s/non prot√©g√©s** : Indiquer les mod√®les de fichiers √† prot√©ger/non prot√©ger contre les modifications

{% hint style="info" %}
Comme vous pouvez le voir, m√™me si vous parvenez √† obtenir les identifiants d'un utilisateur, **les d√©p√¥ts peuvent √™tre prot√©g√©s pour vous emp√™cher de pousser du code sur master** par exemple pour compromettre le pipeline CI/CD.
{% endhint %}

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>
