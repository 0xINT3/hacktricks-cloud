# Informa√ß√µes B√°sicas do Gitea

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no Github.

</details>

## Estrutura B√°sica

A estrutura b√°sica do ambiente do Gitea √© agrupar reposit√≥rios por **organiza√ß√£o(√µes)**, cada uma delas pode conter **v√°rios reposit√≥rios** e **v√°rias equipes**. No entanto, observe que, assim como no Github, os usu√°rios podem ter reposit√≥rios fora da organiza√ß√£o.

Al√©m disso, um **usu√°rio** pode ser **membro** de **diferentes organiza√ß√µes**. Dentro da organiza√ß√£o, o usu√°rio pode ter **diferentes permiss√µes em cada reposit√≥rio**.

Um usu√°rio tamb√©m pode fazer **parte de diferentes equipes** com diferentes permiss√µes em diferentes reposit√≥rios.

E, finalmente, **os reposit√≥rios podem ter mecanismos de prote√ß√£o especiais**.

## Permiss√µes

### Organiza√ß√µes

Quando uma **organiza√ß√£o √© criada**, uma equipe chamada **Owners** √© **criada** e o usu√°rio √© colocado dentro dela. Essa equipe dar√° acesso **administrativo** √† **organiza√ß√£o**, essas **permiss√µes** e o **nome** da equipe **n√£o podem ser modificados**.

Os **administradores da organiza√ß√£o** (propriet√°rios) podem selecionar a **visibilidade** da organiza√ß√£o:

* P√∫blica
* Limitada (somente usu√°rios logados)
* Privada (somente membros)

Os **administradores da organiza√ß√£o** tamb√©m podem indicar se os **administradores do reposit√≥rio** podem **adicionar e/ou remover acesso** para equipes. Eles tamb√©m podem indicar o n√∫mero m√°ximo de reposit√≥rios.

Ao criar uma nova equipe, v√°rias configura√ß√µes importantes s√£o selecionadas:

* √â indicado os **reposit√≥rios da organiza√ß√£o que os membros da equipe poder√£o acessar**: reposit√≥rios espec√≠ficos (reposit√≥rios onde a equipe √© adicionada) ou todos.
* Tamb√©m √© indicado **se os membros podem criar novos reposit√≥rios** (o criador ter√° acesso administrativo a ele)
* As **permiss√µes** que os **membros** do reposit√≥rio ter√£o:
  * Acesso de **Administrador**
  * Acesso **Espec√≠fico**:

![](<../../.gitbook/assets/image (3) (1) (1) (1) (1).png>)

### Equipes e Usu√°rios

Em um reposit√≥rio, o **administrador da organiza√ß√£o** e os **administradores do reposit√≥rio** (se permitido pela organiza√ß√£o) podem **gerenciar as fun√ß√µes** atribu√≠das aos colaboradores (outros usu√°rios) e equipes. Existem **3** poss√≠veis **fun√ß√µes**:

* Administrador
* Escrita
* Leitura

## Autentica√ß√£o do Gitea

### Acesso Web

Usando **nome de usu√°rio + senha** e potencialmente (e recomendado) um 2FA.

### **Chaves SSH**

Voc√™ pode configurar sua conta com uma ou v√°rias chaves p√∫blicas permitindo que a chave privada relacionada **execute a√ß√µes em seu nome**. [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Chaves GPG**

Voc√™ **n√£o pode se passar pelo usu√°rio com essas chaves**, mas se voc√™ n√£o as usar, pode ser poss√≠vel que voc√™ **seja descoberto por enviar commits sem uma assinatura**.

### **Tokens de Acesso Pessoal**

Voc√™ pode gerar um token de acesso pessoal para **dar acesso a uma aplica√ß√£o √† sua conta**. Um token de acesso pessoal d√° acesso total √† sua conta: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Aplica√ß√µes Oauth

Assim como os tokens de acesso pessoal, as **aplica√ß√µes Oauth** ter√£o **acesso completo** √† sua conta e aos lugares em que sua conta tem acesso, porque, como indicado na [documenta√ß√£o](https://docs.gitea.io/en-us/oauth2-provider/#scopes), os escopos ainda n√£o s√£o suportados:

![](<../../.gitbook/assets/image (60).png>)

### Chaves de Implanta√ß√£o

As chaves de implanta√ß√£o podem ter acesso somente leitura ou grava√ß√£o no reposit√≥rio, portanto, podem ser interessantes para comprometer reposit√≥rios espec√≠ficos.

## Prote√ß√µes de Branch

As prote√ß√µes de branch s√£o projetadas para **n√£o dar controle completo de um reposit√≥rio** aos usu√°rios. O objetivo √© **colocar v√°rios m√©todos de prote√ß√£o antes de poder escrever c√≥digo em algum branch**.

As **prote√ß√µes de branch de um reposit√≥rio** podem ser encontradas em _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
N√£o √© poss√≠vel definir uma prote√ß√£o de branch em n√≠vel de organiza√ß√£o. Portanto, todas elas devem ser declaradas em cada reposit√≥rio.
{% endhint %}

Diferentes prote√ß√µes podem ser aplicadas a um branch (como ao master):

* **Desativar Push**: Ningu√©m pode fazer push para este branch
* **Ativar Push**: Qualquer pessoa com acesso pode fazer push, mas n√£o for√ßar push.
* **Lista de Permiss√µes de Push Restrito**: Somente usu√°rios/equipes selecionados podem fazer push para este branch (mas sem for√ßar push)
* **Ativar Lista de Permiss√µes de Merge**: Somente usu√°rios/equipes da lista de permiss√µes podem mesclar PRs.
* **Ativar Verifica√ß√µes de Status**: Exigir que as verifica√ß√µes de status sejam aprovadas antes da mesclagem.
* **Exigir aprova√ß√µes**: Indicar o n√∫mero de aprova√ß√µes necess√°rias antes que um PR possa ser mesclado.
* **Restringir aprova√ß√µes a usu√°rios da lista de permiss√µes**: Indicar usu√°rios/equipes que podem aprovar PRs.
* **Bloquear mesclagem em revis√µes rejeitadas**: Se as altera√ß√µes forem solicitadas, elas n√£o poder√£o ser mescladas (mesmo que as outras verifica√ß√µes passem)
* **Bloquear mesclagem em solicita√ß√µes de revis√£o oficiais**: Se houver solicita√ß√µes de revis√£o oficiais, elas n√£o poder√£o ser mescladas
* **Dispensar aprova√ß√µes obsoletas**: Quando houver novas confirma√ß√µes, as aprova√ß√µes antigas ser√£o dispensadas.
* **Exigir confirma√ß√µes assinadas**: As confirma√ß√µes devem ser assinadas.
* **Bloquear mesclagem se a solicita√ß√£o de pull estiver desatualizada**
* **Padr√µes de arquivo protegidos/n√£o protegidos**: Indicar padr√µes de arquivos para proteger/n√£o proteger contra altera√ß√µes

{% hint style="info" %}
Como voc√™ pode ver, mesmo que tenha conseguido obter algumas credenciais de um usu√°rio, **os reposit√≥rios podem estar protegidos, evitando que voc√™ envie c√≥digo para o master**, por exemplo, para comprometer o pipeline CI/CD.
{% endhint %}

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os re