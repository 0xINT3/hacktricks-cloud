# Gitea基本信息

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS红队专家）</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您想看到您的**公司在HackTricks中做广告**或**下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 探索[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或在**Twitter**上关注我们 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>

## 基本结构

基本的Gitea环境结构是通过**组织**将仓库分组，每个组织可以包含**多个仓库**和**多个团队**。然而，需要注意的是，就像在github中一样，用户可以拥有组织之外的仓库。

此外，**用户**可以是**不同组织的成员**。在组织内，用户可能对每个仓库拥有**不同的权限**。

用户还可以是**不同团队的一部分**，对不同的仓库拥有不同的权限。

最后，**仓库可能具有特殊的保护机制**。

## 权限

### 组织

当**创建组织**时，会创建一个名为**Owners**的团队，并将用户放入其中。该团队将赋予对**组织的管理访问权限**，这些**权限**和**团队的名称**是**无法修改**的。

**组织管理员**（所有者）可以选择组织的**可见性**：

* 公开
* 有限制（仅限登录用户）
* 私有（仅限成员）

**组织管理员**还可以指示**仓库管理员**是否可以**添加或删除团队的访问权限**。他们还可以指定最大仓库数量。

创建新团队时，会选择几个重要的设置：

* 指定团队成员可以访问的**组织仓库**：特定仓库（团队添加的仓库）或全部仓库。
* 还指定**成员是否可以创建新仓库**（创建者将获得管理访问权限）
* 仓库成员将拥有的**权限**：
* **管理员**访问权限
* **特定**访问权限：

![](<../../.gitbook/assets/image (118).png>)

### 团队和用户

在仓库中，**组织管理员**和**仓库管理员**（如果组织允许）可以**管理分配给协作者（其他用户）和团队的角色**。有**3**种可能的**角色**：

* 管理员
* 写入
* 读取

## Gitea身份验证

### 网页访问

使用**用户名 + 密码**，并可能（并建议）使用双因素认证。

### **SSH密钥**

您可以配置您的帐户使用一个或多个公钥，允许相关的**私钥代表您执行操作**。[http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPG密钥**

您**无法使用这些密钥冒充用户**，但如果您不使用它，可能会导致您**发送未签名的提交**而被发现。

### **个人访问令牌**

您可以生成个人访问令牌，以便**让应用程序访问您的帐户**。个人访问令牌可以完全访问您的帐户：[http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauth应用程序

就像个人访问令牌一样，**Oauth应用程序**将对您的帐户和您的帐户具有访问权限的地方具有**完全访问权限**，因为如[文档](https://docs.gitea.io/en-us/oauth2-provider/#scopes)中所指出，尚不支持范围：

![](<../../.gitbook/assets/image (194).png>)

### 部署密钥

部署密钥可能具有对仓库的只读或写入访问权限，因此可能对破坏特定仓库感兴趣。

## 分支保护

分支保护旨在**不将对仓库的完全控制权交给用户**。目标是**在能够在某些分支内编写代码之前设置几种保护方法**。

**仓库的分支保护**可以在_https://localhost:3000/\<orgname>/\<reponame>/settings/branches_中找到

{% hint style="info" %}
**不可能在组织级别设置分支保护**。因此，所有这些保护必须在每个仓库中声明。
{% endhint %}

可以应用不同的保护措施到一个分支（例如主分支）：

* **禁用推送**：无人可以推送到此分支
* **启用推送**：具有访问权限的任何人都可以推送，但不能强制推送。
* **白名单限制推送**：只有选定的用户/团队可以推送到此分支（但不能强制推送）
* **启用合并白名单**：只有白名单中的用户/团队可以合并PR。
* **启用状态检查**：要求状态检查通过才能合并。
* **需要批准**：指示需要批准的数量才能合并PR。
* **限制批准给白名单**：指定可以批准PR的用户/团队。
* **在拒绝审查时阻止合并**：如果请求更改，则无法合并（即使其他检查通过）
* **在官方审查请求上阻止合并**：如果有官方审查请求，则无法合并
* **忽略过时的批准**：有新提交时，旧批准将被忽略。
* **需要签名的提交**：提交必须签名。
* **如果拉取请求已过时则阻止合并**
* **受保护/未受保护的文件模式**：指定要保护/不保护免受更改的文件模式

{% hint style="info" %}
正如您所看到的，即使您成功获取了某个用户的一些凭据，**仓库可能受到保护，避免您向主分支推送代码**，例如破坏CI/CD流水线。
{% endhint %}

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS红队专家）</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您想看到您的**公司在HackTricks中做广告**或**下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 探索[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或在**Twitter**上关注我们 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>
