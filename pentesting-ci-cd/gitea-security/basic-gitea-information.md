# Informations de base sur Gitea

<details>

<summary><strong>Soutenez HackTricks et obtenez des avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**d√©p√¥ts Github HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Structure de base

La structure de base de l'environnement Gitea consiste √† regrouper les d√©p√¥ts par **organisation(s)**, chacune d'entre elles pouvant contenir **plusieurs d√©p√¥ts** et **plusieurs √©quipes**. Cependant, notez que tout comme sur Github, les utilisateurs peuvent avoir des d√©p√¥ts en dehors de l'organisation.

De plus, un **utilisateur** peut √™tre **membre** de **diff√©rentes organisations**. Au sein de l'organisation, l'utilisateur peut avoir **diff√©rentes autorisations sur chaque d√©p√¥t**.

Un utilisateur peut √©galement faire **partie de diff√©rentes √©quipes** avec des autorisations diff√©rentes sur diff√©rents d√©p√¥ts.

Enfin, **les d√©p√¥ts peuvent avoir des m√©canismes de protection sp√©ciaux**.

## Autorisations

### Organisations

Lorsqu'une **organisation est cr√©√©e**, une √©quipe appel√©e **Owners** est **cr√©√©e** et l'utilisateur y est plac√©. Cette √©quipe donnera un acc√®s **administrateur** √† l'**organisation**, ces **autorisations** et le **nom** de l'√©quipe **ne peuvent pas √™tre modifi√©s**.

Les **administrateurs de l'organisation** (propri√©taires) peuvent s√©lectionner la **visibilit√©** de l'organisation :

* Public
* Limit√© (utilisateurs connect√©s uniquement)
* Priv√© (membres uniquement)

Les **administrateurs de l'organisation** peuvent √©galement indiquer si les **administrateurs de d√©p√¥t** peuvent **ajouter et/ou supprimer l'acc√®s** pour les √©quipes. Ils peuvent √©galement indiquer le nombre maximal de d√©p√¥ts.

Lors de la cr√©ation d'une nouvelle √©quipe, plusieurs param√®tres importants sont s√©lectionn√©s :

* Il est indiqu√© les **d√©p√¥ts de l'organisation auxquels les membres de l'√©quipe pourront acc√©der** : d√©p√¥ts sp√©cifiques (d√©p√¥ts o√π l'√©quipe est ajout√©e) ou tous.
* Il est √©galement indiqu√© **si les membres peuvent cr√©er de nouveaux d√©p√¥ts** (le cr√©ateur en aura l'acc√®s administrateur)
* Les **autorisations** que les **membres** du d√©p√¥t auront :
  * Acc√®s **administrateur**
  * Acc√®s **sp√©cifique** :

![](<../../.gitbook/assets/image (3) (1) (1) (1) (1).png>)

### √âquipes et utilisateurs

Dans un d√©p√¥t, l'**administrateur de l'organisation** et les **administrateurs de d√©p√¥t** (si autoris√© par l'organisation) peuvent **g√©rer les r√¥les** attribu√©s aux collaborateurs (autres utilisateurs) et aux √©quipes. Il existe **3** **r√¥les** possibles :

* Administrateur
* √âcriture
* Lecture

## Authentification Gitea

### Acc√®s Web

En utilisant un **nom d'utilisateur + mot de passe** et √©ventuellement (et recommand√©) une 2FA.

### **Cl√©s SSH**

Vous pouvez configurer votre compte avec une ou plusieurs cl√©s publiques permettant √† la **cl√© priv√©e associ√©e d'effectuer des actions en votre nom**. [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Cl√©s GPG**

Vous **ne pouvez pas vous faire passer pour l'utilisateur avec ces cl√©s**, mais si vous ne les utilisez pas, il est possible que vous **soyez d√©couvert pour avoir envoy√© des commits sans signature**.

### **Jetons d'acc√®s personnels**

Vous pouvez g√©n√©rer un jeton d'acc√®s personnel pour **donner √† une application l'acc√®s √† votre compte**. Un jeton d'acc√®s personnel donne un acc√®s complet √† votre compte : [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Applications Oauth

Tout comme les jetons d'acc√®s personnels, les **applications Oauth** auront un **acc√®s complet** √† votre compte et aux endroits o√π votre compte a acc√®s car, comme indiqu√© dans la [documentation](https://docs.gitea.io/en-us/oauth2-provider/#scopes), les port√©es ne sont pas encore prises en charge :

![](<../../.gitbook/assets/image (60).png>)

### Cl√©s de d√©ploiement

Les cl√©s de d√©ploiement peuvent avoir un acc√®s en lecture seule ou en √©criture au d√©p√¥t, il peut donc √™tre int√©ressant de compromettre des d√©p√¥ts sp√©cifiques.

## Protections de branche

Les protections de branche sont con√ßues pour **ne pas donner un contr√¥le complet d'un d√©p√¥t aux utilisateurs**. Le but est de **mettre en place plusieurs m√©thodes de protection avant de pouvoir √©crire du code dans une branche**.

Les **protections de branche d'un d√©p√¥t** se trouvent dans _https://localhost:3000/\<nomorg>/\<nomd√©p√¥t>/settings/branches_

{% hint style="info" %}
Il n'est **pas possible de d√©finir une protection de branche au niveau de l'organisation**. Donc toutes doivent √™tre d√©clar√©es sur chaque d√©p√¥t.
{% endhint %}

Diff√©rentes protections peuvent √™tre appliqu√©es √† une branche (comme pour master) :

* **D√©sactiver la pouss√©e** : personne ne peut pousser sur cette branche
* **Activer la pouss√©e** : toute personne ayant acc√®s peut pousser, mais pas de force push.
* **Liste blanche de pouss√©e restreinte** : seuls les utilisateurs/√©quipes s√©lectionn√©s peuvent pousser sur cette branche (mais pas de force push)
* **Activer la liste blanche de fusion** : seuls les utilisateurs/√©quipes de la liste blanche peuvent fusionner les PR.
* **Activer les v√©rifications d'√©tat** : exiger que les v√©rifications d'√©tat soient r√©ussies avant la fusion.
* **Exiger des approbations** : indiquer le nombre d'approbations requises avant qu'un PR puisse √™tre fusionn√©.
* **Restreindre les approbations √† la liste blanche** : indiquer les utilisateurs/√©quipes qui peuvent approuver les PR.
* **Bloquer la fusion sur les examens rejet√©s** : si des modifications sont demand√©es, elles ne peuvent pas √™tre fusionn√©es (m√™me si les autres v√©rifications passent)
* **Bloquer la fusion sur les demandes d'examen officielles** : si des demandes d'examen officielles sont en cours, elles ne peuvent pas √™tre fusionn√©es
* **Rejeter les approbations obsol√®tes** : lorsque de nouveaux commits sont ajout√©s, les anciennes approbations seront rejet√©es.
* **Exiger des commits sign√©s** : les commits doivent √™tre sign√©s.
* **Bloquer la fusion si la demande de tirage est obsol√®te**
* **Mod√®les de fichiers prot√©g√©s/non prot√©g√©s** : indiquer les mod√®les de fichiers √† prot√©ger/non prot√©ger contre les modifications

{% hint style="info" %}
Comme vous pouvez le voir, m√™me si vous avez r√©ussi √† obtenir des informations d'identification d'un utilisateur, **les d√©p√¥ts peuvent √™tre prot√©g√©s, vous emp√™chant de pousser du code sur master** par exemple pour compromettre le pipeline CI/CD.
{% endhint %}

<details>

<summary><strong>Soutenez HackTricks et obtenez des avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/