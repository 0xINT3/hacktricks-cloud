# Arquitectura de Concourse

<details>

<summary><strong>Aprende hacking en AWS de cero a héroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** revisa los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colección de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Arquitectura

![](<../../.gitbook/assets/image (39) (1).png>)

### ATC: interfaz web y programador de construcciones

El ATC es el corazón de Concourse. Ejecuta la **interfaz web y API** y es responsable de toda la **programación de pipelines**. Se **conecta a PostgreSQL**, que utiliza para almacenar datos de pipelines (incluyendo registros de construcciones).

La responsabilidad del [checker](https://concourse-ci.org/checker.html) es verificar continuamente nuevas versiones de recursos. El [scheduler](https://concourse-ci.org/scheduler.html) es responsable de programar construcciones para un trabajo y el [build tracker](https://concourse-ci.org/build-tracker.html) se encarga de ejecutar cualquier construcción programada. El [garbage collector](https://concourse-ci.org/garbage-collector.html) es el mecanismo de limpieza para eliminar cualquier objeto no utilizado o desactualizado, como contenedores y volúmenes.

### TSA: registro de trabajadores y reenvío

El TSA es un **servidor SSH construido a medida** que se utiliza exclusivamente para **registrar de forma segura** [**trabajadores**](https://concourse-ci.org/internals.html#architecture-worker) con el [ATC](https://concourse-ci.org/internals.html#component-atc).

El TSA **escucha por defecto en el puerto `2222`**, y generalmente está colocado junto con el [ATC](https://concourse-ci.org/internals.html#component-atc) y detrás de un balanceador de carga.

El **TSA implementa CLI sobre la conexión SSH,** soportando [**estos comandos**](https://concourse-ci.org/internals.html#component-tsa).

### Trabajadores

Para ejecutar tareas, Concourse debe tener algunos trabajadores. Estos trabajadores se **registran a sí mismos** a través del [TSA](https://concourse-ci.org/internals.html#component-tsa) y ejecutan los servicios [**Garden**](https://github.com/cloudfoundry-incubator/garden) y [**Baggageclaim**](https://github.com/concourse/baggageclaim).

* **Garden**: Esta es la **API de Gestión de Contenedores**, generalmente ejecutada en el **puerto 7777** vía **HTTP**.
* **Baggageclaim**: Esta es la **API de Gestión de Volúmenes**, generalmente ejecutada en el **puerto 7788** vía **HTTP**.

# Referencias
* [https://concourse-ci.org/internals.html](https://concourse-ci.org/internals.html)


<details>

<summary><strong>Aprende hacking en AWS de cero a héroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** revisa los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colección de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
