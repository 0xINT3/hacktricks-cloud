# Arquitetura do Concourse

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Arquitetura

![](<../../.gitbook/assets/image (39) (1).png>)

### ATC: interface web & agendador de builds

O ATC √© o cora√ß√£o do Concourse. Ele executa a **interface web e API** e √© respons√°vel por todo o **agendamento** de pipelines. Ele **conecta-se ao PostgreSQL**, que √© utilizado para armazenar dados de pipeline (incluindo logs de builds).

A responsabilidade do [checker](https://concourse-ci.org/checker.html) √© verificar continuamente por novas vers√µes de recursos. O [scheduler](https://concourse-ci.org/scheduler.html) √© respons√°vel por agendar builds para um trabalho e o [build tracker](https://concourse-ci.org/build-tracker.html) √© respons√°vel por executar quaisquer builds agendados. O [garbage collector](https://concourse-ci.org/garbage-collector.html) √© o mecanismo de limpeza para remover objetos n√£o utilizados ou desatualizados, como cont√™ineres e volumes.

### TSA: registro de workers & encaminhamento

O TSA √© um **servidor SSH personalizado** que √© usado exclusivamente para **registrar** [**workers**](https://concourse-ci.org/internals.html#architecture-worker) de forma segura com o [ATC](https://concourse-ci.org/internals.html#component-atc).

O TSA **escuta por padr√£o na porta `2222`**, e geralmente est√° localizado junto com o [ATC](https://concourse-ci.org/internals.html#component-atc) e atr√°s de um balanceador de carga.

O **TSA implementa CLI sobre a conex√£o SSH,** suportando [**estes comandos**](https://concourse-ci.org/internals.html#component-tsa).

### Workers

Para executar tarefas, o concourse deve ter alguns workers. Esses workers **registram-se** atrav√©s do [TSA](https://concourse-ci.org/internals.html#component-tsa) e executam os servi√ßos [**Garden**](https://github.com/cloudfoundry-incubator/garden) e [**Baggageclaim**](https://github.com/concourse/baggageclaim).

* **Garden**: Esta √© a **API de Gerenciamento de Cont√™ineres**, geralmente executada na **porta 7777** via **HTTP**.
* **Baggageclaim**: Esta √© a **API de Gerenciamento de Volumes**, geralmente executada na **porta 7788** via **HTTP**.

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
