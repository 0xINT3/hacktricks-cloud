# Concourse架构

## Concourse架构

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS红队专家）</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您想看到您的**公司在HackTricks中做广告**或**下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 探索[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或在**Twitter**上关注我们 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>

[**来自Concourse文档的相关数据：**](https://concourse-ci.org/internals.html)

### 架构

![](<../../.gitbook/assets/image (187).png>)

#### ATC：Web UI和构建调度器

ATC是Concourse的核心。它运行**Web UI和API**，负责所有管道**调度**。它**连接到PostgreSQL**，用于存储管道数据（包括构建日志）。

[检查器](https://concourse-ci.org/checker.html)负责持续检查资源的新版本。[调度器](https://concourse-ci.org/scheduler.html)负责为作业安排构建，[构建跟踪器](https://concourse-ci.org/build-tracker.html)负责运行任何已安排的构建。[垃圾收集器](https://concourse-ci.org/garbage-collector.html)是用于删除任何未使用或过时对象（如容器和卷）的清理机制。

#### TSA：工作人员注册和转发

TSA是一个**定制的SSH服务器**，仅用于安全地与[ATC](https://concourse-ci.org/internals.html#component-atc)注册[**工作人员**](https://concourse-ci.org/internals.html#architecture-worker)。

TSA默认监听端口`2222`，通常与[ATC](https://concourse-ci.org/internals.html#component-atc)共存，并位于负载均衡器后面。

**TSA通过SSH连接实现CLI**，支持[**这些命令**](https://concourse-ci.org/internals.html#component-tsa)。

#### 工作人员

为了执行任务，Concourse必须有一些工作人员。这些工作人员通过[TSA](https://concourse-ci.org/internals.html#component-tsa)注册自己，并运行服务[**Garden**](https://github.com/cloudfoundry-incubator/garden)和[**Baggageclaim**](https://github.com/concourse/baggageclaim)。

* **Garden**：这是**容器管理API**，通常通过**HTTP**在端口7777上运行。
* **Baggageclaim**：这是**卷管理API**，通常通过**HTTP**在端口7788上运行。

## 参考资料

* [https://concourse-ci.org/internals.html](https://concourse-ci.org/internals.html)

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS红队专家）</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您想看到您的**公司在HackTricks中做广告**或**下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 探索[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或在**Twitter**上关注我们 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>
