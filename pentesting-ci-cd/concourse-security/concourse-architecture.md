# Arquitectura de Concourse

<details>

<summary><strong>¬°Apoya a HackTricks y obt√©n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF**, ¬°consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n [**productos oficiales de PEASS y HackTricks**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) en GitHub.

</details>

## Arquitectura

![](<../../.gitbook/assets/image (39) (1).png>)

### ATC: interfaz web y programador de compilaciones

El ATC es el coraz√≥n de Concourse. Ejecuta la **interfaz web y API** y es responsable de toda la **programaci√≥n de las canalizaciones**. Se **conecta a PostgreSQL**, que utiliza para almacenar los datos de las canalizaciones (incluidos los registros de compilaci√≥n).

La responsabilidad del [verificador](https://concourse-ci.org/checker.html) es verificar continuamente las nuevas versiones de los recursos. El [programador](https://concourse-ci.org/scheduler.html) es responsable de programar las compilaciones para un trabajo y el [rastreador de compilaciones](https://concourse-ci.org/build-tracker.html) se encarga de ejecutar las compilaciones programadas. El [recolector de basura](https://concourse-ci.org/garbage-collector.html) es el mecanismo de limpieza para eliminar objetos no utilizados o desactualizados, como contenedores y vol√∫menes.

### TSA: registro de trabajadores y reenv√≠o

El TSA es un **servidor SSH personalizado** que se utiliza √∫nicamente para **registrar de forma segura** los [**trabajadores**](https://concourse-ci.org/internals.html#architecture-worker) en el [ATC](https://concourse-ci.org/internals.html#component-atc).

El TSA, de forma predeterminada, escucha en el puerto `2222` y generalmente se coloca junto al [ATC](https://concourse-ci.org/internals.html#component-atc) y se encuentra detr√°s de un balanceador de carga.

El **TSA implementa la CLI a trav√©s de la conexi√≥n SSH**, admitiendo [**estos comandos**](https://concourse-ci.org/internals.html#component-tsa).

### Trabajadores

Para ejecutar tareas, Concourse debe tener algunos trabajadores. Estos trabajadores **se registran** a trav√©s del [TSA](https://concourse-ci.org/internals.html#component-tsa) y ejecutan los servicios [**Garden**](https://github.com/cloudfoundry-incubator/garden) y [**Baggageclaim**](https://github.com/concourse/baggageclaim).

* **Garden**: Esta es la **API de administraci√≥n de contenedores**, que generalmente se ejecuta en el puerto 7777 a trav√©s de **HTTP**.
* **Baggageclaim**: Esta es la **API de administraci√≥n de vol√∫menes**, que generalmente se ejecuta en el puerto 7788 a trav√©s de **HTTP**.

<details>

<summary><strong>¬°Apoya a HackTricks y obt√©n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF**, ¬°consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n [**productos oficiales de PEASS y HackTricks**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) en GitHub.

</details>
