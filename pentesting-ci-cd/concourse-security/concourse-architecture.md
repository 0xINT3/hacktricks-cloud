# Arquitetura do Concourse

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no Github.

</details>

## Arquitetura

![](<../../.gitbook/assets/image (39).png>)

### ATC: interface de usu√°rio da web e agendador de compila√ß√£o

O ATC √© o cora√ß√£o do Concourse. Ele executa a **interface de usu√°rio da web e API** e √© respons√°vel por todo o **agendamento de pipeline**. Ele se **conecta ao PostgreSQL**, que √© usado para armazenar dados do pipeline (incluindo logs de compila√ß√£o).

A responsabilidade do [verificador](https://concourse-ci.org/checker.html) √© verificar continuamente novas vers√µes de recursos. O [agendador](https://concourse-ci.org/scheduler.html) √© respons√°vel por agendar compila√ß√µes para um trabalho e o [rastreador de compila√ß√£o](https://concourse-ci.org/build-tracker.html) √© respons√°vel por executar quaisquer compila√ß√µes agendadas. O [coletor de lixo](https://concourse-ci.org/garbage-collector.html) √© o mecanismo de limpeza para remover quaisquer objetos n√£o utilizados ou desatualizados, como cont√™ineres e volumes.

### TSA: registro e encaminhamento de trabalhadores

O TSA √© um **servidor SSH personalizado** que √© usado exclusivamente para registrar **trabalhadores** com o [ATC](https://concourse-ci.org/internals.html#component-atc) de forma segura.

O TSA por **padr√£o escuta na porta `2222`**, e geralmente √© colocado junto com o [ATC](https://concourse-ci.org/internals.html#component-atc) e fica atr√°s de um balanceador de carga.

O **TSA implementa CLI sobre a conex√£o SSH**, suportando [**esses comandos**](https://concourse-ci.org/internals.html#component-tsa).

### Trabalhadores

Para executar tarefas, o Concourse deve ter alguns trabalhadores. Esses trabalhadores se **registram** via [TSA](https://concourse-ci.org/internals.html#component-tsa) e executam os servi√ßos [**Garden**](https://github.com/cloudfoundry-incubator/garden) e [**Baggageclaim**](https://github.com/concourse/baggageclaim).

* **Garden**: Esta √© a **API de gerenciamento de cont√™ineres**, geralmente executada na **porta 7777** via **HTTP**.
* **Baggageclaim**: Esta √© a **API de gerenciamento de volumes**, geralmente executada na **porta 7788** via **HTTP**.

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no Github.

</details>