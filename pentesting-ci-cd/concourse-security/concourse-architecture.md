# Arquitectura de Concourse

<details>

<summary><strong>¬°Apoya a HackTricks y obt√©n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF** ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PR a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Arquitectura

![](<../../.gitbook/assets/image (39).png>)

### ATC: interfaz web y programador de compilaci√≥n

El ATC es el coraz√≥n de Concourse. Ejecuta la **interfaz web y API** y es responsable de toda la **programaci√≥n de pipelines**. Se **conecta a PostgreSQL**, que utiliza para almacenar datos de pipelines (incluidos los registros de compilaci√≥n).

La responsabilidad del [verificador](https://concourse-ci.org/checker.html) es verificar continuamente las nuevas versiones de los recursos. El [programador](https://concourse-ci.org/scheduler.html) es responsable de programar compilaciones para un trabajo y el [rastreador de compilaciones](https://concourse-ci.org/build-tracker.html) es responsable de ejecutar cualquier compilaci√≥n programada. El [recolector de basura](https://concourse-ci.org/garbage-collector.html) es el mecanismo de limpieza para eliminar cualquier objeto no utilizado o desactualizado, como contenedores y vol√∫menes.

### TSA: registro y reenv√≠o de trabajadores

El TSA es un **servidor SSH personalizado** que se utiliza √∫nicamente para registrar de forma segura [**trabajadores**](https://concourse-ci.org/internals.html#architecture-worker) con el [ATC](https://concourse-ci.org/internals.html#component-atc).

El TSA por **defecto escucha en el puerto `2222`**, y generalmente se coloca junto con el [ATC](https://concourse-ci.org/internals.html#component-atc) y se encuentra detr√°s de un balanceador de carga.

El **TSA implementa CLI sobre la conexi√≥n SSH**, admitiendo [**estos comandos**](https://concourse-ci.org/internals.html#component-tsa).

### Trabajadores

Para ejecutar tareas, Concourse debe tener algunos trabajadores. Estos trabajadores se **registran a s√≠ mismos** a trav√©s del [TSA](https://concourse-ci.org/internals.html#component-tsa) y ejecutan los servicios [**Garden**](https://github.com/cloudfoundry-incubator/garden) y [**Baggageclaim**](https://github.com/concourse/baggageclaim).

* **Garden**: Esta es la **API de gesti√≥n de contenedores**, que generalmente se ejecuta en el **puerto 7777** a trav√©s de **HTTP**.
* **Baggageclaim**: Esta es la **API de gesti√≥n de vol√∫menes**, que generalmente se ejecuta en el **puerto 7788** a trav√©s de **HTTP**.

<details>

<summary><strong>¬°Apoya a HackTricks y obt√©n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF** ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PR a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>