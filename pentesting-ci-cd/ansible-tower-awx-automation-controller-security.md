# Ασφάλεια Ansible Tower / AWX / Automation controller

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Βασικές Πληροφορίες

Το **Ansible Tower** ή η ανοικτού κώδικα έκδοση του [**AWX**](https://github.com/ansible/awx) είναι γνωστό και ως **διεπαφή χρήστη του Ansible, πίνακας ελέγχου και REST API**. Με τον **έλεγχο πρόσβασης βασισμένο σε ρόλους**, τον προγραμματισμό εργασιών και τη γραφική διαχείριση αποθεμάτων, μπορείτε να διαχειριστείτε την υποδομή Ansible σας από ένα σύγχρονο γραφικό περιβάλλον χρήστη. Το REST API και η διεπαφή γραμμής εντολών του Tower καθιστούν απλή την ενσωμάτωσή του σε τρέχουσες εργαλειοθήκες και ροές εργασίας.

Ο **Automation Controller** είναι μια νεότερη έκδοση του Ansible Tower με περισσότερες δυνατότητες.

### Διαφορές

Σύμφωνα με [**αυτό**](https://blog.devops.dev/ansible-tower-vs-awx-under-the-hood-65cfec78db00), οι κύριες διαφορές μεταξύ του Ansible Tower και του AWX είναι η υποστήριξη που λαμβάνουν και ο Ansible Tower έχει επιπλέον χαρακτηριστικά, όπως έλεγχο πρόσβασης βασισμένο σε ρόλους, υποστήριξη για προσαρμοσμένα APIs και προσαρμοσμένες ροές εργασίας χρηστών.

### Τεχνολογικό Περιβάλλον

* **Γραφική Διεπαφή**: Αυτή είναι η γραφική διεπαφή όπου οι χρήστες μπορούν να διαχειρίζονται αποθέματα, διαπιστευτήρια, πρότυπα και εργασίες. Είναι σχεδιασμένη να είναι ευανάγνωστη και παρέχει οπτικοποιήσεις για να βοηθήσει στην κατανόηση της κατάστασης και των αποτελεσμάτων των αυτοματοποιημένων εργασιών σας.
* **REST API**: Ό,τι μπορείτε να κάνετε στη γραφική διεπαφή, μπορείτε επίσης να το κάνετε μέσω του REST API. Αυτό σημαίνει ότι μπορείτε να ενσωματώσετε το AWX/Tower με άλλα συστήματα ή να εκτελέσετε ενέργειες σε σενάρια που συνήθως θα εκτελούσατε στη διεπαφή.
* **Βάση Δεδομένων**: Το AWX/Tower χρησιμοποιεί μια βάση δεδομένων (συνήθως PostgreSQL) για να αποθηκεύει τη διαμόρφωσή του, τα αποτελέσματα των εργασιών και άλλα απαραίτητα λειτουργικά δεδομένα.
* **RabbitMQ**: Αυτό είναι το σύστημα μηνυμάτων που χρησιμοποιείται από το AWX/Tower για την επικοινωνία μεταξύ των διάφορων συστατικών, ιδιαίτερα μεταξύ της υπηρεσίας ιστού και των εργαλείων εκτέλεσης εργασιών.
* **Redis**: Το Redis λειτουργεί ως μνήμη cache και ως πίσω μέρος της ουράς εργασιών.

### Λογικά Συστατικά
```bash
git clone -b x.y.z https://github.com/ansible/awx.git # Get in x.y.z the latest release version

cd awx

# Build
make docker-compose-build

# Run
make docker-compose

# Or to create a more complex env
MAIN_NODE_TYPE=control EXECUTION_NODE_COUNT=2 COMPOSE_TAG=devel make docker-compose

# Clean and build the UI
docker exec tools_awx_1 make clean-ui ui-devel

# Once migrations are completed and the UI is built, you can begin using AWX. The UI can be reached in your browser at https://localhost:8043/#/home, and the API can be found at https://localhost:8043/api/v2.

# Create an admin user
docker exec -ti tools_awx_1 awx-manage createsuperuser

# Load demo data
docker exec tools_awx_1 awx-manage create_preload_data
```
{% endcode %}

## RBAC

### Υποστηριζόμενοι ρόλοι

Ο πιο προνομιούχος ρόλος ονομάζεται **Διαχειριστής Συστήματος**. Οποιοσδήποτε με αυτόν τον ρόλο μπορεί να **τροποποιήσει οτιδήποτε**.

Από μια ανασκόπηση ασφαλείας **λευκού κουτιού**, θα χρειαζόσασταν τον ρόλο **Ελεγκτή Συστήματος**, ο οποίος επιτρέπει να **προβάλλετε όλα τα δεδομένα του συστήματος** αλλά δεν μπορεί να πραγματοποιήσει καμία αλλαγή. Μια άλλη επιλογή θα ήταν να πάρετε τον ρόλο **Ελεγκτής Οργανισμού**, αλλά θα ήταν καλύτερο να πάρετε τον άλλο.

<details>

<summary>Επεκτείνετε αυτό για να λάβετε λεπτομερή περιγραφή των διαθέσιμων ρόλων</summary>

1. **Διαχειριστής Συστήματος**:
* Αυτός είναι ο ρόλος του υπερχρήστη με δικαιώματα πρόσβασης και τροποποίησης οποιουδήποτε πόρου στο σύστημα.
* Μπορούν να διαχειριστούν όλους τους οργανισμούς, ομάδες, έργα, αποθέματα, πρότυπα εργασιών κ.λπ.
2. **Ελεγκτής Συστήματος**:
* Οι χρήστες με αυτόν τον ρόλο μπορούν να προβάλλουν όλα τα δεδομένα του συστήματος αλλά δεν μπορούν να πραγματοποιήσουν καμία αλλαγή.
* Αυτός ο ρόλος σχεδιάστηκε για συμμόρφωση και εποπτεία.
3. **Ρόλοι Οργανισμού**:
* **Διαχειριστής**: Πλήρης έλεγχος των πόρων του οργανισμού.
* **Ελεγκτής**: Πρόσβαση μόνο για προβολή στους πόρους του οργανισμού.
* **Μέλος**: Βασική συμμετοχή σε έναν οργανισμό χωρίς καμία συγκεκριμένη άδεια.
* **Εκτέλεση**: Μπορεί να εκτελέσει πρότυπα εργασιών εντός του οργανισμού.
* **Ανάγνωση**: Μπορεί να προβάλλει τους πόρους του οργανισμού.
4. **Ρόλοι Έργου**:
* **Διαχειριστής**: Μπορεί να διαχειριστεί και να τροποποιήσει το έργο.
* **Χρήση**: Μπορεί να χρησιμοποιήσει το έργο σε ένα πρότυπο εργασίας.
* **Ενημέρωση**: Μπορεί να ενημερώσει το έργο χρησιμοποιώντας SCM (έλεγχο πηγαίου κώδικα).
5. **Ρόλοι Αποθέματος**:
* **Διαχειριστής**: Μπορεί να διαχειριστεί και να τροποποιήσει το απόθεμα.
* **Ad Hoc**: Μπορεί να εκτελέσει αυθαίρετες εντολές στο απόθεμα.
* **Ενημέρωση**: Μπορεί να ενημερώσει την πηγή του αποθέματος.
* **Χρήση**: Μπορεί να χρησιμοποιήσει το απόθεμα σε ένα πρότυπο εργασίας.
* **Ανάγνωση**: Πρόσβαση μόνο για προβολή.
6. **Ρόλοι Προτύπου Εργασίας**:
* **Διαχειριστής**: Μπορεί να διαχειριστεί και να τροποποιήσει το πρότυπο εργασίας.
* **Εκτέλεση**: Μπορεί να εκτελέσει την εργασία.
* **Ανάγνωση**: Πρόσβαση μόνο για προβολή.
7. **Ρόλοι Διαπιστευτηρίων**:
* **Διαχειριστής**: Μπορεί να διαχειριστεί και να τροποποιήσει τα διαπιστευτήρια.
* **Χρήση**: Μπορεί να χρησιμοποιήσει τα διαπιστευτήρια σε πρότυπα εργασίας ή άλλους σχετικούς πόρους.
* **Ανάγνωση**: Πρόσβαση μόνο για προβολή.
8. **Ρόλοι Ομάδας**:
* **Μέλος**: Μέρος της ομάδας αλλά χωρίς καμία συγκεκριμένη άδεια.
* **Διαχειριστής**: Μπορεί να διαχειριστεί τα μέλη της ομάδας και τους σχετικούς πόρους.
9. **Ρόλοι Ροής Εργασίας**:
* **Διαχειριστής**: Μπορεί να διαχειριστεί και να τροποποιήσει τη ροή εργασίας.
* **Εκτέλεση**: Μπορεί να εκτελέσει τη ροή εργασίας.
* **Ανάγνωση**: Πρόσβαση μόνο για προβολή.

</details>

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlo
