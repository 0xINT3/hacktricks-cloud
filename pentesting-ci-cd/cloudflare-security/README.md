# Usalama wa Cloudflare

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA USAJILI**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

Katika akaunti ya Cloudflare kuna **vipimo vya jumla na huduma** ambavyo vinaweza kusanidiwa. Katika ukurasa huu tutachunguza **vipimo vinavyohusiana na usalama wa kila sehemu:**

<figure><img src="../../.gitbook/assets/image (85) (1).png" alt=""><figcaption></figcaption></figure>

## Tovuti

Pitia kila moja na:

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

### Usajili wa Kikoa

* [ ] Katika **`Hama Viko**` hakikisha haiwezekani kuhama kikoa chochote.

Pitia kila moja na:

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

## Takwimu

_Singeweza kupata chochote cha kuangalia kwa ukaguzi wa usalama wa config._

## Kurasa

Kwenye kila ukurasa wa Cloudflare:

* [ ] Angalia kwa **habari nyeti** kwenye **`Logi ya Kujenga`**.
* [ ] Angalia kwa **habari nyeti** kwenye **repo ya Github** iliyoainishwa kwa kurasa.
* [ ] Angalia kwa uwezekano wa kudukua repo ya github kupitia **kuingiza amri ya kazi** au kudukua `pull_request_target`. Taarifa zaidi kwenye [**Ukurasa wa Usalama wa Github**](../github-security/).
* [ ] Angalia kwa **kazi zenye udhaifu** kwenye saraka ya `/fuctions` (ikiwapo zipo), angalia **urekebishaji** kwenye faili ya `_redirects` (ikiwapo zipo) na **vipimo vilivyopotoshwa** kwenye faili ya `_headers` (ikiwapo zipo).
* [ ] Angalia kwa **udhaifu** kwenye **ukurasa wa wavuti** kupitia **blackbox** au **whitebox** ikiwa unaweza **kufikia nambari**
* [ ] Katika maelezo ya kila ukurasa `/<page_id>/pages/view/blocklist/settings/functions`. Angalia kwa **habari nyeti** kwenye **`Mazingira ya Mazingira`**.
* [ ] Kwenye ukurasa wa maelezo angalia pia **amri ya kujenga** na **saraka kuu** kwa **kuingiza uwezekano** wa kudukua ukurasa.

## **Wafanyikazi**

Kwenye kila wafanyikazi wa Cloudflare angalia:

* [ ] Vichocheo: Nini kinachofanya wafanyikazi kuzindua? Je, **mtumiaji anaweza kutuma data** ambayo itatumika na mfanyikazi?
* [ ] Katika **`Vipimo`**, angalia **`Vipengele`** vinavyo **habari nyeti**
* Angalia **nambari ya mfanyikazi** na utafute **udhaifu** (hasa mahali ambapo mtumiaji anaweza kusimamia kuingia)
* Angalia kwa SSRFs kurudi kwenye ukurasa ulioonyeshwa ambao unaweza kuudhibiti
* Angalia XSSs kutekeleza JS ndani ya picha ya svg

{% hint style="warning" %}
Tambua kwamba kwa chaguo-msingi **Mfanyikazi hupewa URL** kama `<jina-la-mfanyikazi>.<akaunti>.workers.dev`. Mtumiaji anaweza kuweka kama **subdomain** lakini unaweza kila wakati kufikia kwa **URL ya asili** ikiwa unajua.
{% endhint %}

## R2

TODO

## Mtiririko

TODO

## Picha

TODO

## Kituo cha Usalama

* [ ] Ikiwezekana, endesha **`Uchunguzi wa Usalama`** na **`Uchunguzi wa Miundombinu`**, kwani itaonyesha habari ya kuvutia kiusalama.
* [ ] Tu **angalia habari hii** kwa ajili ya makosa ya usalama na habari ya kuvutia

## Turnstile

TODO

## **Zero Trust**

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## Uelekezaji wa Wingi

{% hint style="info" %}
Tofauti na [Uelekezaji wa Kudumu](https://developers.cloudflare.com/rules/url-forwarding/dynamic-redirects/), [**Uelekezaji wa Wingi**](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/) kimsingi ni tuli - hauungi mkono operesheni yoyote ya kubadilisha herufi au taratibu za kawaida. Walakini, unaweza kusanidi vigezo vya uelekezaji wa URL vinavyoathiri tabia yao ya kupatana na URL na tabia yao ya wakati wa uendeshaji.
{% endhint %}

* [ ] Hakikisha **maelezo** na **mahitaji** ya uelekezaji **yanafanya maana**.
* [ ] Angalia pia kwa **vituo vya siri vilivyofichwa** ambavyo vinaweza kuwa na habari ya kuvutia.

## Arifa

* [ ] Angalia **arifa.** Arifa hizi zinapendekezwa kwa usalama:
* `Bili Inayotegemea Matumizi`
* `Onyo la Shambulio la DDoS la HTTP`
* `Onyo la Shambulio la DDoS la Tabaka la 3/4`
* `Onyo la Shambulio la DDoS la HTTP la Juu`
* `Onyo la Shambulio la DDoS la Tabaka la 3/4 la Juu`
* `Ufuatiliaji wa Misingi: Shambulio la Kiasi`
* `Onyo la Uchunguzi wa Kuvuja kwa Njia`
* `Onyo la Muda wa Cheti cha mTLS kwa Upatikanaji`
* `Onyo la Kukarabati SSL kwa Majina ya Desturi ya SaaS`
* `Onyo la SSL la Universal`
* `Onyo la Ufuatiliaji wa Mabadiliko ya Kanuni Mpya ya Msimbo wa Monitor`
* `Onyo la Ufuatiliaji wa Kikoa Kipya cha Msimbo wa Monitor`
* `Onyo la Ufuatiliaji wa Kikoa Kipya cha Msimbo wa Kudhuru`
* `Onyo la Ufuatiliaji wa URL Mpya ya Msimbo wa Kudhuru`
* `Onyo la Ufuatiliaji wa Msimbo Mpya wa Kudhuru wa URL`
* `Onyo la Ufuatiliaji wa Msimbo Mpya wa Kuzidi Urefu wa URL`
* `Onyo la Matukio ya Usalama ya Juu`
* `Onyo la Matukio ya Usalama`
* [ ] Angalia **maeneo yote ya marudio**, kwani kunaweza kuwa na **habari nyeti** (msingi wa http wa msingi) kwenye url za webhook. Hakikisha pia url za webhook zinatumia **HTTPS**
* [ ] Kama ukaguzi wa ziada, unaweza kujaribu **kujifanya kuwa arifa ya cloudflare** kwa mtu wa tatu, labda unaweza kwa njia fulani **kuingiza kitu hatari**

## Simamia Akaunti

* [ ] Niwezekanavyo kuona **nambari za mwisho za kadi ya mkopo**, **muda wa kumalizika** na **anwani ya malipo** katika **`Bili` -> `Maelezo ya Malipo`**.
* [ ] Niwezekanavyo kuona **aina ya mpango** inayotumiwa kwenye akaunti katika **`Bili` -> `Vipindi vya Usajili`**.
* [ ] Katika **`Wanachama`** niwezekanavyo kuona wanachama wote wa akaunti na **jukumu** zao. Kumbuka kwamba ikiwa aina ya mpango si Enterprise, kuna majukumu 2 tu: Msimamizi na Msimamizi Mkuu. Lakini ikiwa **mpango uliotumiwa ni Enterprise**, [**majukumu zaidi**](https://developers.cloudflare.com/fundamentals/account-and-billing/account-setup/account-roles/) yanaweza kutumika kufuata kanuni ya chini ya haki.
* Kwa hivyo, kadri inavyowezekana ni **inashauriwa** kutumia **mpango wa Enterprise**.
* [ ] Katika Wanachama niwezekanavyo kuangalia ni **wanachama gani** wana **2FA imewezeshwa**. **Kila** mtumiaji anapaswa kuwa nayo imewezeshwa.

{% hint style="info" %}
Tambua kwamba bahati nzuri jukumu la **`Msimamizi`** halitoi ruhusa ya kusimamia wanachama (**hawezi kuongeza haki au kuwaalika** wanachama wapya)
{% endhint %}
## Uchunguzi wa DDoS

[Angalia sehemu hii](cloudflare-domains.md#cloudflare-ddos-protection).

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
