# Cloudflare domeni

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** me na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

U svakom TLD-u konfigurisanom u Cloudflare-u postoje neke **opšte postavke i usluge** koje se mogu konfigurisati. Na ovoj stranici ćemo **analizirati postavke vezane za bezbednost svake sekcije:**

<figure><img src="../../.gitbook/assets/image (2) (4).png" alt=""><figcaption></figcaption></figure>

## Pregled

* [ ] Stvorite osećaj **koliko su usluge naloga korišćene**
* [ ] Pronađite takođe **ID zone** i **ID naloga**

## Analitika

* [ ] U **`Bezbednost`** proverite da li postoji **ograničenje brzine**

## DNS

* [ ] Proverite **interesantne** (osetljive?) podatke u DNS **zapisima**
* [ ] Proverite da li postoje **poddomeni** koji mogu sadržati **osetljive informacije** samo na osnovu **imenovanja** (kao što je admin173865324.domin.com)
* [ ] Proverite da li postoje veb stranice koje **nisu** **proksirane**
* [ ] Proverite da li postoje **proksirane veb stranice** do kojih se može **pristupiti direktno** putem CNAME ili IP adrese
* [ ] Proverite da li je **DNSSEC** **omogućen**
* [ ] Proverite da li je **CNAME Flattening** **korišćen** u **svim CNAME-ovima**
* Ovo može biti korisno za **sakrivanje ranjivosti preuzimanja poddomena** i poboljšanje vremena učitavanja
* [ ] Proverite da li domeni [**nisu podložni spoofingu**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)

## **Email**

TODO

## Spectrum

TODO

## SSL/TLS

### **Pregled**

* [ ] **SSL/TLS enkripcija** treba da bude **Puna** ili **Puna (Striktna)**. Bilo koja druga će slati **čist tekst saobraćaj** u nekom trenutku.
* [ ] **SSL/TLS preporučivač** treba da bude omogućen

### Sertifikati na ivici

* [ ] **Uvek koristi HTTPS** treba da bude **omogućeno**
* [ ] **HTTP Strict Transport Security (HSTS)** treba da bude **omogućeno**
* [ ] **Minimalna verzija TLS treba da bude 1.2**
* [ ] **TLS 1.3 treba da bude omogućeno**
* [ ] **Automatsko preusmeravanje HTTPS-a** treba da bude **omogućeno**
* [ ] **Monitoring transparentnosti sertifikata** treba da bude **omogućen**

## **Bezbednost**

* [ ] U sekciji **`WAF`** je interesantno proveriti da li se koriste **Firewall** i **pravila za ograničavanje brzine** kako bi se sprečile zloupotrebe.
* **`Bypass`** akcija će **onemogućiti Cloudflare bezbednosne funkcije** za zahtev. Ne bi trebalo da se koristi.
* [ ] U sekciji **`Page Shield`** se preporučuje provera da li je **omogućeno** ako se koristi bilo koja stranica
* [ ] U sekciji **`API Shield`** se preporučuje provera da li je **omogućeno** ako se bilo koji API izlaže u Cloudflare-u
* [ ] U sekciji **`DDoS`** se preporučuje omogućavanje **DDoS zaštite**
* [ ] U sekciji **`Podešavanja`**:
* [ ] Proverite da li je **`Nivo bezbednosti`** **srednji** ili veći
* [ ] Proverite da li je **`Provera ispravnosti pregledača`** **omogućena**
* [ ] Proverite da li je **`Podrška za Privacy Pass`** **omogućena**

### **CloudFlare DDoS zaštita**

* Ako možete, omogućite **Bot Fight Mode** ili **Super Bot Fight Mode**. Ako štitite neki API koji se pristupa programski (na primer, sa JS front end stranice). Možda nećete moći da omogućite ovo bez prekida pristupa.
* U **WAF-u**: Možete kreirati **ograničenja brzine po putanji URL-a** ili za **verifikovane botove** (pravila za ograničavanje brzine), ili za **blokiranje pristupa** na osnovu IP adrese, kolačića, referera...). Tako možete blokirati zahteve koji ne dolaze sa veb stranice ili nemaju kolačić.
* Ako je napad od strane **verifikovanog bota**, dodajte barem **ograničenje brzine** za botove.
* Ako je napad na **specifičnu putanju**, kao mehanizam prevencije, dodajte **ograničenje brzine** na ovoj putanji.
* Takođe možete **staviti na belu listu** IP adrese, IP opsege, zemlje ili ASNs iz **Alata** u WAF-u.
* Proverite da li **Upravljana pravila** takođe mogu pomoći u sprečavanju iskorišćavanja ranjivosti.
* U sekciji **Alati** možete **blokirati ili izazvati izazov specifičnim IP adresama** i **korisničkim agentima**.
* U DDoS-u možete **zameniti neka pravila da bi bila restriktivnija**.
* **Podešavanja**: Postavite **Nivo bezbednosti** na **Visok** i na **Pod napadom** ako ste pod napadom i proverite da li je **Provera ispravnosti pregledača omogućena**.
* U Cloudflare domenima -> Analitika -> Bezbednost -> Proverite da li je omogućeno **ograničenje brzine**
* U Cloudflare domenima -> Bezbednost -> Događaji -> Proverite da li postoje **detektovani zlonamerni događaji**

## Pristup

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## Brzina

_Nisam mogao da pronađem nijednu opciju koja se odnosi na bezbednost_

## Keširanje

* [ ] U sekciji **`Konfiguracija`** razmotrite omogućavanje **CSAM skeniranja alata**

## **Workers Routes**

_Već ste proverili_ [_cloudflare workers_](./#workers)

## Pravila

TODO

## Mreža

* [ ] Ako je **`HTTP/2`** **omogućen**, **`HTTP/2 to Origin`** treba da bude **omogućeno**
* [ ] **`HTTP/3 (sa QUIC)`** treba da bude **omogućeno**
* [ ] Ako je privatnost vaših korisnika važna, proverite da li je **`Onion Routing`** **omogućen**

## **Saobraćaj**

TODO

## Prilagođene stranice

* [ ] Opciono je konfigurisati prilagođene stranice k
## Aplikacije

TODO

## Scrape Shield

* [ ] Proverite da li je **Obfuskacija adrese e-pošte** **omogućena**
* [ ] Proverite da li je **Isključivanje sa servera** **omogućeno**

## **Zaraz**

TODO

## **Web3**

TODO

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **oglašavanje vaše kompanije u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** me na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
