# Domaini za Cloudflare

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **nifuata** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

Katika kila TLD iliyowekwa katika Cloudflare kuna **vipimo vya jumla na huduma** ambazo zinaweza kusanidiwa. Katika ukurasa huu tutachunguza **vipimo vinavyohusiana na usalama wa kila sehemu:**

<figure><img src="../../.gitbook/assets/image (2) (4).png" alt=""><figcaption></figcaption></figure>

## Muhtasari

* [ ] Pata hisia ya **kiasi gani** cha huduma za akaunti **zilizotumiwa**
* [ ] Pata pia **kitambulisho cha eneo** na **kitambulisho cha akaunti**

## Takwimu za Uchambuzi

* [ ] Katika **`Usalama`** angalia ikiwa kuna **kizuizi cha kiwango**

## DNS

* [ ] Angalia data **ya kuvutia** (nyeti?) katika **rekodi za DNS**
* [ ] Angalia **subdomains** ambazo zinaweza kuwa na **habari nyeti** kulingana na **jina** (kama admin173865324.domin.com)
* [ ] Angalia kurasa za wavuti ambazo **hazijafichwa**
* [ ] Angalia kurasa za wavuti zilizofichwa ambazo zinaweza kupatikana moja kwa moja kupitia CNAME au anwani ya IP
* [ ] Hakikisha **DNSSEC** ime **washa**
* [ ] Hakikisha **CNAME Flattening** ina **tumika** katika **CNAME zote**
* Hii inaweza kuwa na manufaa kuficha **udhaifu wa kuchukua tena kwa subdomain** na kuboresha muda wa kupakia
* [ ] Hakikisha kwamba domaini [**hazina udhaifu wa kughushi**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)

## **Barua pepe**

TODO

## Spectrum

TODO

## SSL/TLS

### **Muhtasari**

* [ ] **Ufichamishaji wa SSL/TLS** unapaswa kuwa **Kamili** au **Kamili (Thabiti)**. Vinginevyo itatuma **trafiki wazi** wakati fulani.
* [ ] **Mshauri wa SSL/TLS** unapaswa kuwa umewezeshwa

### Vyeti vya Edge

* [ ] **Tumia HTTPS Daima** inapaswa kuwa **imewezeshwa**
* [ ] **Usalama Mkali wa Usafirishaji wa HTTP (HSTS)** unapaswa kuwa **umewezeshwa**
* [ ] **Toleo la TLS la Chini linapaswa kuwa 1.2**
* [ ] **TLS 1.3 inapaswa kuwa imewezeshwa**
* [ ] **Uandikishaji wa HTTPS wa Kiotomatiki** unapaswa kuwa **umewezeshwa**
* [ ] **Ufuatiliaji wa Uandikishaji wa Cheti** unapaswa kuwa **umewezeshwa**

## **Usalama**

* [ ] Katika sehemu ya **`WAF`** ni muhimu kuangalia kwamba **Mfumo wa Kizuizi cha Moto** na **kanuni za kizuizi cha kiwango** zinatumika kuzuia matumizi mabaya.
* Hatua ya **`Kupuuza`** ita **lemaza vipengele vya usalama vya Cloudflare** kwa ombi. Haipaswi kutumiwa.
* [ ] Katika sehemu ya **`Kinga ya Ukurasa`** inashauriwa kuangalia kwamba ime **wezeshwa** ikiwa ukurasa wowote unatumika
* [ ] Katika sehemu ya **`Kinga ya API`** inashauriwa kuangalia kwamba ime **wezeshwa** ikiwa API yoyote inafunuliwa katika Cloudflare
* [ ] Katika sehemu ya **`DDoS`** inashauriwa kuwezesha **ulinzi wa DDoS**
* [ ] Katika sehemu ya **`Vipimo`**:
* [ ] Hakikisha kwamba **`Kiwanja cha Usalama`** ni **cha wastani** au zaidi
* [ ] Hakikisha kwamba **`Kupita Changamoto`** ni saa 1 au chini
* [ ] Hakikisha kwamba **`Uchunguzi wa Uadilifu wa Kivinjari`** umewezeshwa
* [ ] Hakikisha kwamba **`Msaada wa Kupita faragha`** umewezeshwa

### **Kinga ya DDoS ya CloudFlare**

* Ikiwezekana, wezesha **Bot Fight Mode** au **Super Bot Fight Mode**. Ikiwa unalinda baadhi ya API zinazoendeshwa kiotomatiki (kutoka kwa ukurasa wa mbele wa JS kwa mfano). Huenda usiweze kuwezesha hii bila kuvunja ufikiaji huo.
* Katika **WAF**: Unaweza kuunda **kizuizi cha kiwango kwa njia ya URL** au kwa **bots zilizothibitishwa** (kanuni za kizuizi cha kiwango), au kwa **kuzuia ufikiaji** kulingana na IP, Cookie, referrer...). Kwa hivyo unaweza kuzuia maombi ambayo hayatoki kwenye ukurasa wa wavuti au ina cookie.
* Ikiwa shambulio linatoka kwa **bot iliyethibitishwa**, angalau **ongeza kizuizi cha kiwango** kwa bots.
* Ikiwa shambulio ni kwa **njia maalum**, kama kinga ya kuzuia, ongeza **kizuizi cha kiwango** kwenye njia hii.
* Unaweza pia **kuweka safi** anwani za IP, safu za IP, nchi au ASNs kutoka kwa **Zana** katika WAF.
* Angalia ikiwa **kanuni zilizosimamiwa** zinaweza pia kusaidia kuzuia utumiaji wa udhaifu.
* Katika sehemu ya **Zana** unaweza **kuzuia au kutoa changamoto kwa anwani za IP** na **wakala wa mtumiaji.**
* Katika DDoS unaweza **kubadilisha baadhi ya kanuni kuwa ngumu zaidi**.
* **Vipimo**: Weka **Kiwanja cha Usalama** kuwa **Cha Juu** na kuwa **Chini ya Shambulio** ikiwa Uko Chini ya Shambulio na kwamba **Uchunguzi wa Uadilifu wa Kivinjari umewezeshwa**.
* Katika Domaini za Cloudflare -> Takwimu -> Usalama -> Angalia ikiwa **kizuizi cha kiwango** kime **wezeshwa**
* Katika Domaini za Cloudflare -> Usalama -> Matukio -> Angalia kwa **Matukio mabaya yaliyogunduliwa**

## Upatikanaji

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## Kasi

_Singeweza kupata chaguo lolote linalohusiana na usalama_

## Kuhifadhi

* [ ] Katika sehemu ya **`Usanidi`** fikiria kuwezesha **Zana ya Uchunguzi wa CSAM**

## **Njia za Wafanyakazi**

_Umechunguza tayari_ [_wafanyakazi wa cloudflare_](./#wafanyakazi)

## Kanuni

TODO

## Mtandao

* [ ] Ikiwa **`HTTP/2`** ime **wezeshwa**, **`HTTP/2 kwa Asili`** inapaswa kuwa **imewezeshwa**
* [ ] **`HTTP/3 (na QUIC)`** inapaswa kuwa **imewezeshwa**
* [ ] Ikiwa **faragha** ya **watumiaji wako** ni muhimu, hakikisha **`Onion Routing`** ime **wezeshwa**

## **Trafiki**

TODO

## Kurasa za Desturi

* [ ] Ni hiari kuweka kurasa za desturi wakati kosa linalohusiana na usalama linapotokea (kama kuzuia, kizuizi cha kiwango au niko chini ya shambulio)
## Programu

TODO

## Scrape Shield

* [ ] Angalia **Ufusaji wa Anwani ya Barua pepe** umewezeshwa
* [ ] Angalia **Viondoleo kwa Upande wa Seva** vimezimwa

## **Zaraz**

TODO

## **Web3**

TODO

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **fuata** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
