# Domaines Cloudflare

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFT exclusifs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **d√©p√¥ts Github.**

</details>

Dans chaque TLD configur√© dans Cloudflare, il y a des **param√®tres et services g√©n√©raux** qui peuvent √™tre configur√©s. Dans cette page, nous allons **analyser les param√®tres de s√©curit√© de chaque section :**

<figure><img src="../../.gitbook/assets/image (2) (4).png" alt=""><figcaption></figcaption></figure>

## Aper√ßu

* [ ] Avoir une id√©e de **combien** les services du compte sont **utilis√©s**
* [ ] Trouver √©galement l'**ID de zone** et l'**ID de compte**

## Analytique

* [ ] Dans **`S√©curit√©`**, v√©rifiez s'il y a une **limitation de taux**

## DNS

* [ ] V√©rifiez les donn√©es **int√©ressantes** (sensibles ?) dans les **enregistrements DNS**
* [ ] V√©rifiez les **sous-domaines** qui pourraient contenir des **informations sensibles** simplement en fonction du **nom** (comme admin173865324.domin.com)
* [ ] V√©rifiez les pages Web qui ne sont **pas** **proxyfi√©es**
* [ ] V√©rifiez les pages Web **proxyfi√©es** qui peuvent √™tre **accessibles directement** par CNAME ou adresse IP
* [ ] V√©rifiez que **DNSSEC** est **activ√©**
* [ ] V√©rifiez que **CNAME Flattening** est **utilis√©** dans **tous les CNAME**
  * Cela pourrait √™tre utile pour **masquer les vuln√©rabilit√©s de prise de contr√¥le de sous-domaine** et am√©liorer les temps de chargement
* [ ] V√©rifiez que les domaines [**ne sont pas vuln√©rables au spoofing**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)\*\*\*\*

## **Email**

TODO

## Spectrum

TODO

## SSL/TLS

### **Aper√ßu**

* [ ] Le chiffrement **SSL/TLS** doit √™tre **Complet** ou **Complet (Strict)**. Tout autre enverra du **trafic en clair** √† un moment donn√©.
* [ ] Le **Recommandateur SSL/TLS** doit √™tre activ√©

### Certificats Edge

* [ ] **Toujours utiliser HTTPS** doit √™tre **activ√©**
* [ ] **HTTP Strict Transport Security (HSTS)** doit √™tre **activ√©**
* [ ] **La version minimale de TLS doit √™tre 1.2**
* [ ] **TLS 1.3 doit √™tre activ√©**
* [ ] **Les r√©√©critures HTTPS automatiques** doivent √™tre **activ√©es**
* [ ] **La surveillance de la transparence des certificats** doit √™tre **activ√©e**

## **S√©curit√©**

* [ ] Dans la section **`WAF`**, il est int√©ressant de v√©rifier que les r√®gles de **pare-feu** et de **limitation de taux sont utilis√©es** pour pr√©venir les abus.
  * L'action **`Bypass`** **d√©sactivera les fonctionnalit√©s de s√©curit√© de Cloudflare** pour une demande. Elle ne doit pas √™tre utilis√©e.
* [ ] Dans la section **`Page Shield`**, il est recommand√© de v√©rifier qu'elle est **activ√©e** si une page est utilis√©e
* [ ] Dans la section **`API Shield`**, il est recommand√© de v√©rifier qu'elle est **activ√©e** si une API est expos√©e dans Cloudflare
* [ ] Dans la section **`DDoS`**, il est recommand√© d'activer les **protections DDoS**
* [ ] Dans la section **`Param√®tres`** :
  * [ ] V√©rifiez que le **`Niveau de s√©curit√©`** est **moyen** ou sup√©rieur
  * [ ] V√©rifiez que le **`Passage de d√©fi`** est d'au maximum 1 heure
  * [ ] V√©rifiez que la **`V√©rification de l'int√©grit√© du navigateur`** est **activ√©e**
  * [ ] V√©rifiez que le **`Support de Privacy Pass`** est **activ√©**

### **Protection DDoS CloudFlare**

* Si vous pouvez activer le **mode Bot Fight**. Si vous prot√©gez une API accessible de mani√®re programmatique (√† partir d'une page frontale JS, par exemple). Vous pourriez ne pas √™tre en mesure d'activer cela sans rompre cet acc√®s.
* Dans **WAF** : Vous pouvez cr√©er des **limites de taux par chemin d'URL** (r√®gles de limitation de taux), ou pour **bloquer l'acc√®s** en fonction de l'adresse IP, du cookie, du r√©f√©rent...). Vous pouvez donc bloquer les demandes qui ne proviennent pas d'une page Web ou qui n'ont pas de cookie.
  * Vous pouvez √©galement **mettre sur liste blanche** les adresses IP, les plages d'adresses IP, les pays ou les ASNs √† partir des **outils** dans WAF.
* Dans DDoS, vous pouvez **outrepasser certaines r√®gles pour les rendre plus restrictives**.
* **Param√®tres** : D√©finissez le **Niveau de s√©curit√©** sur **√âlev√©** et sur **Sous attaque** si vous √™tes sous attaque.

## Acc√®s

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## Vitesse

_Je n'ai trouv√© aucune option li√©e √† la s√©curit√©_

## Mise en cache

* [ ] Dans la section **`Configuration`**, envisagez d'activer l'**outil de num√©risation CSAM**

## **Routes des travailleurs**

_Vous devriez d√©j√† avoir v√©rifi√©_ [_les travailleurs Cloudflare_](./#workers)\_\_

## R√®gles

TODO

## R√©seau

* [ ] Si **`HTTP/2`** est **activ√©**, **`HTTP/2 vers l'origine`** doit √™tre **activ√©**
* [ ] **`HTTP/3 (avec QUIC)`** doit √™tre **activ√©**
* [ ] Si la **vie priv√©e** de vos **utilisateurs** est importante, assurez-vous que **`Onion Routing`** est **activ√©**

## **Trafic**

TODO

## Pages personnalis√©es

* [ ] Il est facultatif de configurer des pages personnalis√©es lorsqu'une erreur li√©e √† la s√©curit√© est d√©clench√©e (comme un blocage, une limitation de taux ou un mode "Je suis sous attaque")

## Applications

TODO

## Scrape Shield

* [ ] V√©rifiez que l'**obscurcissement de l'adresse e-mail** est **activ√©**
* [ ] V√©rifiez que les **exclusions c√¥t√© serveur** sont **activ√©es**

## **Zaraz**

TODO

## **Web3**

TODO

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFT exclusifs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https