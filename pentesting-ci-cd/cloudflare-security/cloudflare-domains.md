# Cloudflare Domains

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Grund auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks im PDF-Format herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Github-Repositorys einreichen.

</details>

In jedem in Cloudflare konfigurierten TLD gibt es einige **allgemeine Einstellungen und Dienste**, die konfiguriert werden k√∂nnen. Auf dieser Seite werden wir die **sicherheitsrelevanten Einstellungen jeder Sektion analysieren:**

<figure><img src="../../.gitbook/assets/image (2) (4).png" alt=""><figcaption></figcaption></figure>

## √úberblick

* [ ] Erhalten Sie ein Gef√ºhl daf√ºr, **wie stark** die Dienste des Kontos **genutzt** werden
* [ ] Finden Sie auch die **Zonen-ID** und die **Kontonummer**

## Analytik

* [ ] √úberpr√ºfen Sie in **`Sicherheit`**, ob **Rate Limiting** aktiviert ist

## DNS

* [ ] √úberpr√ºfen Sie **interessante** (sensible?) Daten in DNS-**Eintr√§gen**
* [ ] √úberpr√ºfen Sie **Subdomains**, die m√∂glicherweise **sensible Informationen** enthalten, basierend nur auf dem **Namen** (wie admin173865324.domin.com)
* [ ] √úberpr√ºfen Sie Webseiten, die **nicht** **geproxied** sind
* [ ] √úberpr√ºfen Sie **geproxiede Webseiten**, die direkt √ºber CNAME oder IP-Adresse **aufgerufen werden k√∂nnen**
* [ ] √úberpr√ºfen Sie, ob **DNSSEC** aktiviert ist
* [ ] √úberpr√ºfen Sie, ob **CNAME-Flattening** in **allen CNAMEs verwendet wird**
* Dies k√∂nnte n√ºtzlich sein, um **Subdomain-Takeover-Schwachstellen zu verbergen** und die Ladezeiten zu verbessern
* [ ] √úberpr√ºfen Sie, ob die Domains [**nicht anf√§llig f√ºr Spoofing sind**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)

## **E-Mail**

TODO

## Spectrum

TODO

## SSL/TLS

### **√úberblick**

* [ ] Die **SSL/TLS-Verschl√ºsselung** sollte **Vollst√§ndig** oder **Vollst√§ndig (Strikt)** sein. Jede andere Einstellung sendet zu einem bestimmten Zeitpunkt **Klartextverkehr**.
* [ ] Der **SSL/TLS-Empfehler** sollte aktiviert sein

### Edge-Zertifikate

* [ ] **Immer HTTPS verwenden** sollte aktiviert sein
* [ ] **HTTP Strict Transport Security (HSTS)** sollte aktiviert sein
* [ ] Die **Mindest-TLS-Version sollte 1.2** sein
* [ ] **TLS 1.3 sollte aktiviert sein**
* [ ] **Automatische HTTPS-Umschreibungen** sollten aktiviert sein
* [ ] Die **Zertifikatstransparenz√ºberwachung** sollte aktiviert sein

## **Sicherheit**

* [ ] Im Abschnitt **`WAF`** ist es interessant zu √ºberpr√ºfen, ob **Firewall**- und **Rate-Limiting-Regeln verwendet werden**, um Missbr√§uche zu verhindern.
* Die **`Bypass`**-Aktion wird die Sicherheitsfunktionen von Cloudflare f√ºr eine Anfrage **deaktivieren**. Sie sollte nicht verwendet werden.
* [ ] Im Abschnitt **`Page Shield`** wird empfohlen zu √ºberpr√ºfen, ob es aktiviert ist, wenn eine Seite verwendet wird
* [ ] Im Abschnitt **`API Shield`** wird empfohlen zu √ºberpr√ºfen, ob es aktiviert ist, wenn eine API in Cloudflare freigegeben ist
* [ ] Im Abschnitt **`DDoS`** wird empfohlen, die **DDoS-Schutzma√ünahmen** zu aktivieren
* [ ] In den **`Einstellungen`** √ºberpr√ºfen:
* [ ] Stellen Sie sicher, dass der **`Sicherheitslevel`** mindestens **mittel** ist
* [ ] Stellen Sie sicher, dass die **`Challenge-Passage`** maximal 1 Stunde betr√§gt
* [ ] Stellen Sie sicher, dass die **`Browser-Integrit√§tspr√ºfung`** aktiviert ist
* [ ] Stellen Sie sicher, dass die **`Privacy Pass-Unterst√ºtzung`** aktiviert ist

### **CloudFlare DDoS-Schutz**

* Wenn m√∂glich, aktivieren Sie den **Bot Fight Mode** oder den **Super Bot Fight Mode**. Wenn Sie eine API sch√ºtzen, die programmgesteuert (z. B. von einer JS-Frontend-Seite) aufgerufen wird, k√∂nnen Sie dies m√∂glicherweise nicht ohne Unterbrechung dieses Zugriffs aktivieren.
* Im **WAF**: Sie k√∂nnen **Rate-Limits nach URL-Pfad** oder f√ºr **verifizierte Bots** (Rate-Limiting-Regeln) erstellen oder den Zugriff basierend auf IP, Cookie, Referrer... blockieren). So k√∂nnten Sie Anfragen blockieren, die nicht von einer Webseite stammen oder kein Cookie haben.
* Wenn der Angriff von einem **verifizierten Bot** ausgeht, f√ºgen Sie zumindest **Rate-Limits f√ºr Bots** hinzu.
* Wenn der Angriff auf einen **spezifischen Pfad** erfolgt, f√ºgen Sie als Pr√§ventionsmechanismus ein **Rate-Limit** in diesem Pfad hinzu.
* Sie k√∂nnen IP-Adressen, IP-Bereiche, L√§nder oder ASNs aus den **Tools** im WAF **whitelisten**.
* √úberpr√ºfen Sie, ob **Managed Rules** auch dazu beitragen k√∂nnten, Schwachstellen-Exploits zu verhindern.
* Im Abschnitt **Tools** k√∂nnen Sie **bestimmten IPs** und **User Agents** den **Zugriff blockieren oder eine Herausforderung geben**.
* Im DDoS k√∂nnen Sie einige Regeln **√ºberschreiben, um sie restriktiver zu gestalten**.
* **Einstellungen**: Setzen Sie den **Sicherheitslevel** auf **Hoch** und auf **Unter Angriff**, wenn Sie unter Angriff stehen, und stellen Sie sicher, dass die **Browser-Integrit√§tspr√ºfung aktiviert ist**.
* In Cloudflare-Domains -> Analytik -> Sicherheit -> √úberpr√ºfen Sie, ob **Rate Limiting** aktiviert ist
* In Cloudflare-Domains -> Sicherheit -> Ereignisse -> √úberpr√ºfen Sie auf **erkannte b√∂sartige Ereignisse**

## Zugriff

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## Geschwindigkeit

_Ich konnte keine Option finden, die mit Sicherheit in Verbindung steht_

## Caching

* [ ] In der **`Konfiguration`**-Sektion erw√§gen Sie die Aktivierung des **CSAM-Scanning-Tools**

## **Worker-Routen**

_Sie sollten bereits_ [_Cloudflare-Worker_](./#workers) _√ºberpr√ºft haben_

## Regeln

TODO

## Netzwerk

* [ ] Wenn **`HTTP/2` aktiviert ist**, sollte **`HTTP/2 to Origin` aktiviert sein**
* [ ] **`HTTP/3 (mit QUIC)` sollte aktiviert sein**
* [ ] Wenn die **Privatsph√§re** Ihrer **Benutzer** wichtig ist, stellen Sie sicher, dass **`Onion Routing` aktiviert ist**

## **Traffic**

TODO

## Benutzerdefinierte Seiten

* [ ] Es ist optional, benutzerdefinierte Seiten zu konfigurieren, wenn ein Fehler im Zusammenhang mit Sicherheit ausgel√∂st wird (wie Blockierung, Rate-Limiting oder Ich stehe unter Angriffsmodus)
## Apps

TODO

## Scrape Shield

* [ ] √úberpr√ºfen Sie, ob die **E-Mail-Adressen-Verschleierung** aktiviert ist
* [ ] √úberpr√ºfen Sie, ob die **Server-seitige Ausschl√ºsse** aktiviert sind

## **Zaraz**

TODO

## **Web3**

TODO

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks im PDF-Format herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>
