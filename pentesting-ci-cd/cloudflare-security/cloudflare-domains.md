# Cloudflare 域名

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass)，或者在 **Twitter** 上 **关注**我 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub 仓库提交 PR 来分享您的黑客技巧。

</details>

在 Cloudflare 中配置的每个顶级域名（TLD）都可以配置一些**常规设置和服务**。在本页面中，我们将**分析每个部分的安全相关设置**：

<figure><img src="../../.gitbook/assets/image (2) (4).png" alt=""><figcaption></figcaption></figure>

## 概述

* [ ] 了解账户的服务使用情况
* [ ] 查找**区域 ID**和**账户 ID**

## 分析

* [ ] 在**`安全`**中检查是否有任何**速率限制**

## DNS

* [ ] 检查 DNS **记录**中的**有趣**（敏感？）数据
* [ ] 根据**名称**（例如 admin173865324.domin.com）检查可能包含**敏感信息**的**子域**
* [ ] 检查**未代理**的网页
* [ ] 检查可以通过 CNAME 或 IP 地址**直接访问**的**代理网页**
* [ ] 检查是否启用了**DNSSEC**
* [ ] 检查是否在**所有 CNAME**中使用了**CNAME 扁平化**
* 这可能对**隐藏子域接管漏洞**和提高加载时间有用
* [ ] 检查域名是否**容易受到欺骗**的漏洞

## **电子邮件**

待办事项

## Spectrum

待办事项

## SSL/TLS

### **概述**

* [ ] **SSL/TLS 加密**应为**完全**或**完全（严格）**。其他任何选项都会在某个时候发送**明文流量**。
* [ ] 应启用**SSL/TLS 推荐器**

### 边缘证书

* [ ] 应启用**始终使用 HTTPS**
* [ ] 应启用**HTTP 严格传输安全（HSTS）**
* [ ] **最低 TLS 版本**应为 1.2
* [ ] 应启用**TLS 1.3**
* [ ] 应启用**自动 HTTPS 重写**
* [ ] 应启用**证书透明度监控**

## **安全**

* [ ] 在**`WAF`**部分，有必要检查是否使用了**防火墙**和**速率限制规则**以防止滥用。
* **`Bypass`** 操作将为请求**禁用 Cloudflare 安全**功能。不应使用此操作。
* [ ] 在**`页面防护`**部分，建议检查是否启用了该功能（如果使用了任何页面）。
* [ ] 在**`API 防护`**部分，建议检查是否启用了该功能（如果在 Cloudflare 中公开了任何 API）。
* [ ] 在**`DDoS`**部分，建议启用**DDoS 保护**
* [ ] 在**`设置`**部分：
* [ ] 检查**`安全级别`**是否为**中等**或更高
* [ ] 检查**`挑战通过时间`**是否最多为 1 小时
* [ ] 检查是否启用了**`浏览器完整性检查`**
* [ ] 检查是否启用了**`Privacy Pass Support`**

### **CloudFlare DDoS 保护**

* 如果可以，启用**Bot Fight Mode**。如果您正在保护一些以编程方式访问的 API（例如来自 JS 前端页面），您可能无法在不中断该访问的情况下启用此功能。
* 在**WAF**中：您可以通过 URL 路径（速率限制规则）创建**速率限制**，或者根据 IP、Cookie、引荐来源等**阻止访问**。因此，您可以阻止不来自网页或没有 Cookie 的请求。
* 您还可以在 WAF 的**工具**中将 IP 地址、IP 范围、国家或 ASNs 加入**白名单**。
* 在 DDoS 中，您可以**覆盖某些规则以使其更严格**。
* **设置**：将**安全级别**设置为**高**，如果您正在受到攻击，则设置为**受到攻击**。

## 访问

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## 速度

_我找不到与安全相关的任何选项_

## 缓存

* [ ] 在**`配置`**部分，考虑启用**CSAM 扫描工具**

## **Workers 路由**

_您应该已经检查过_ [_cloudflare workers_](./#workers)\_\_

## 规则

待办事项

## 网络

* [ ] 如果已启用**`HTTP/2`**，应启用**`HTTP/2 到源站`**
* [ ] 应启用**`HTTP/3（使用 QUIC）`**
* [ ] 如果您的**用户**的**隐私**很重要，请确保启用**`Onion Routing`**

## **流量**

待办事项

## 自定义页面

* [ ] 当触发与安全相关的错误（如阻止、速率限制或我正在受到攻击模式）时，配置自定义页面是可选的。
## 应用程序

待办事项

## 网络爬虫保护

* [ ] 检查**电子邮件地址混淆**是否已**启用**
* [ ] 检查**服务器端排除**是否已**启用**

## **Zaraz**

待办事项

## **Web3**

待办事项

<details>

<summary><strong>支持HackTricks并获得福利！</strong></summary>

* 如果您想在HackTricks中看到您的**公司广告**，或者如果您想访问**PEASS的最新版本或下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获得[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram群组**](https://t.me/peass) 或 **关注**我在**Twitter**上的🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来**分享您的黑客技巧**。

</details>
