# AWS - Lightsail Persistence

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* **HackTricksで会社を宣伝したい**場合や、**最新バージョンのPEASSを入手したい**場合、またはHackTricksをPDFでダウンロードしたい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを発見しましょう
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしてください 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ハッキングのトリックを共有するには、PRを** [**HackTricks**](https://github.com/carlospolop/hacktricks) **および** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **のGitHubリポジトリに提出してください。**

</details>

## Lightsail

詳細については、以下を参照してください：

{% content-ref url="../../aws-security/aws-services/aws-lightsail-enum.md" %}
[aws-lightsail-enum.md](../../aws-security/aws-services/aws-lightsail-enum.md)
{% endcontent-ref %}

### インスタンスのSSHキーとDBパスワードのダウンロード

おそらく変更されないため、それらを持っているだけで永続化の良いオプションです。

### インスタンスへのバックドア

攻撃者はインスタンスにアクセスし、バックドアを設置することができます：

* 例えば、従来の**ルートキット**を使用する
* 新しい**公開SSHキー**を追加する
* バックドアを持つポートを**ポートノッキング**で公開する

### DNS永続化

ドメインが設定されている場合：

* IPを指すサブドメインを作成し、**サブドメインの乗っ取り**を行います
* ドメインから**メール**を送信できるようにするために**SPF**レコードを作成する
* **メインドメインのIPを自分のIPに設定**し、自分のIPから正規のIPへの**MitM**を実行する
