# AWS - рд▓реИрдореНрдмрдбрд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рдЬреАрд░реЛ рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>!</strong></a></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдЕрдЧрд░ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** рджреНрд╡рд╛рд░рд╛ **PRs рд╕рдмрдорд┐рдЯ** рдХрд░рдХреЗ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

## рд▓реИрдореНрдмрдбрд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕

рд▓реИрдореНрдмрдбрд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ **рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ, рд╡рд┐рд╢реНрд▓реЗрд╖рдг, рд╕реБрд░рдХреНрд╖рд╛, рдФрд░ рдЧрд╡рд░реНрдиреЗрдВрд╕ рдЙрдкрдХрд░рдгреЛрдВ** рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рдХрд░рдХреЗ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рддреЗ рд╣реИрдВред рдпреЗ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕, [.zip рдЕрднрд┐рд▓реЗрдЦреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓реИрдореНрдмрдбрд╛ рд▓реЗрдпрд░реНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬреЛрдбрд╝реЗ рдЬрд╛рддреЗ рд╣реИрдВ](https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html) рдпрд╛ [рдХрдВрдЯреЗрдирд░ рдЗрдореЗрдЬ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ](https://aws.amazon.com/blogs/compute/working-with-lambda-layers-and-extensions-in-container-images/), рджреЛ рдореЛрдб рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ: **рдЖрдВрддрд░рд┐рдХ** рдФрд░ **рдмрд╛рд╣реНрдп**ред

* **рдЖрдВрддрд░рд┐рдХ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕** рд░рдирдЯрд╛рдЗрдо рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рднрд╛рд╖рд╛-рд╡рд┐рд╢реЗрд╖ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░рдгреЛрдВ рдФрд░ рд░реИрдкрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕рдХреА рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рддреЗ рд╣реИрдВред рдпрд╣ рд╕рд╛рдпрдВрддреНрд░рд┐рдХ рд░рдирдЯрд╛рдЗрдореНрд╕, рдЬреИрд╕реЗ рдХрд┐ **Java Correto 8 рдФрд░ 11, Node.js 10 рдФрд░ 12, рдФрд░ .NET Core 3.1** рдХреЗ рд▓рд┐рдП рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред
* **рдмрд╛рд╣реНрдп рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕** рдЕрд▓рдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рддреЗ рд╣реИрдВ, рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЬреАрд╡рдирдХрд╛рд▓ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд▓рди рд╕рдВрд░реЗрдЦрд┐рдд рд░рд╣рддреЗ рд╣реИрдВред рдпреЗ **Node.js 10 рдФрд░ 12, Python 3.7 рдФрд░ 3.8, Ruby 2.5 рдФрд░ 2.7, Java Corretto 8 рдФрд░ 11, .NET Core 3.1**, рдФрд░ **рдХрд╕реНрдЯрдо рд░рдирдЯрд╛рдЗрдореНрд╕** рдХреЗ рд╕рд╛рде рд╕рдВрдЧрдд рд╣реИрдВред

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП [**рд▓реИрдореНрдмрдбрд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рдХрд╛рдо рдХреИрд╕реЗ рдХрд░рддреЗ рд╣реИрдВ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рджреЗрдЦреЗрдВ**](https://docs.aws.amazon.com/lambda/latest/dg/runtimes-extensions-api.html)ред

### рдкрд░рд┐рд╕реНрдерд┐рддрд┐, рдЕрдиреБрд░реЛрдз рдЪреЛрд░реА рдФрд░ рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рд╕рдВрд╢реЛрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рд╣реНрдп рдПрдХреНрд╕рдЯреЗрдВрд╢рди

рдпрд╣ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢ рд╣реИ рдЬреЛ рдЗрд╕ рдкреЛрд╕реНрдЯ рдореЗрдВ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: [https://www.clearvector.com/blog/lambda-spy/](https://www.clearvector.com/blog/lambda-spy/)

рдкрд╛рдпрд╛ рдЧрдпрд╛ рдХрд┐ рд▓реИрдореНрдмрдбрд╛ рд░рдирдЯрд╛рдЗрдо рдкрд░рд┐рд╡реЗрд╢ рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ "process\_vm\_readv" рдФрд░ "process\_vm\_writev" рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓реНрд╕ рдХреЗ рд╕рд╛рде рдХрдВрдкрд╛рдЗрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдФрд░ рд╕рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рдПрдХ рд╣реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЖрдИрдбреА рдХреЗ рд╕рд╛рде рдЪрд▓рддреА рд╣реИрдВ, рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдмрд╛рд╣реНрдп рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рд▓рд┐рдП рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рдИ рдЧрдИред **рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдмрд╛рд╣реНрдп рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЛ рд░реИрдкрд┐рдб рдХреА рд╣реАрдк рдореЗрдореЛрд░реА рдХрд╛ рдкреВрд░рд╛ рд░реАрдб рдФрд░ рд░рд╛рдЗрдЯ рдПрдХреНрд╕реЗрд╕ рд╣реЛрддрд╛ рд╣реИ, рдбрд┐рдЬрд╝рд╛рдЗрди рдХреЗ рдЕрдиреБрд╕рд╛рд░ред**

рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдЬрдмрдХрд┐ рд▓реИрдореНрдмрдбрд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рдХреЛ **рдЗрдирд╡реЛрдХреЗрд╢рди рдЗрд╡реЗрдВрдЯреНрд╕ рдХреА рд╕рджрд╕реНрдпрддрд╛ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛** рд╣реЛрддреА рд╣реИ, AWS рдЗрди рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рдХреЛ рдХрдЪреНрдЪреЗ рдбреЗрдЯрд╛ рдХреЛ рдирд╣реАрдВ рджрд┐рдЦрд╛рддрд╛ред рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ **рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ HTTP рдЕрдиреБрд░реЛрдз рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рднреЗрдЬреА рдЧрдИ рд╕рдВрдПрдЬрдиреАрдп рдЬрд╛рдирдХрд╛рд░реА рддрдХ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рдкрд╛рддреЗ**ред

рдЗрдирд┐рдЯ (рд░реИрдкрд┐рдб) рдкреНрд░рдХреНрд░рд┐рдпрд╛ [http://127.0.0.1:9001](http://127.0.0.1:9001/) рдкрд░ рд╕рднреА API рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдореЙрдирд┐рдЯрд░ рдХрд░рддреА рд╣реИ рдЬрдмрдХрд┐ рд▓реИрдореНрдмрдбрд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдХрд┐рд╕реА рднреА рд░рдирдЯрд╛рдЗрдо рдХреЛрдб рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рд╕реЗ рдкрд╣рд▓реЗ рдЪрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд░реИрдкрд┐рдб рдХреЗ рдмрд╛рджред

<figure><img src="../../../../.gitbook/assets/image (90).png" alt=""><figcaption><p><a href="https://www.clearvector.com/blog/content/images/size/w1000/2022/11/2022110801.rapid.default.png">https://www.clearvector.com/blog/content/images/size/w1000/2022/11/2022110801.rapid.default.png</a></p></figcaption></figure>

рдЪрд░ **`AWS_LAMBDA_RUNTIME_API`** рдмрдЪреНрдЪреЗ рд░рдирдЯрд╛рдЗрдо рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдФрд░ рдЕрддрд┐рд░рд┐рдХреНрдд рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рдХреЛ рд░реИрдкрд┐рдб API рдХреЗ **IP** рдкрддреЗ рдФрд░ **рдкреЛрд░реНрдЯ** рд╕рдВрдЦреНрдпрд╛ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред

{% hint style="warning" %}
**`AWS_LAMBDA_RUNTIME_API`** рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЛ рдПрдХ **`рдкреЛрд░реНрдЯ`** рдЬрд┐рд╕рдХрд╛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд╣реБрдВрдЪ рд╣реИ, рдмрджрд▓рдХрд░, рд▓реИрдореНрдмрдбрд╛ рд░рдирдЯрд╛рдЗрдо рдХреЗ рднреАрддрд░ рд╕рднреА рдХреНрд░рд┐рдпрд╛рдПрдБ рдЕрдВрддрд░реНрджреГрд╖реНрдЯрд┐ рд╕реЗ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ (**рдореИрди-рдЗрди-рдж-рдорд┐рдбрд▓**ред рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рд░реИрдкрд┐рдб рдЗрдирд┐рдЯ рдХреЗ рд╕рд╛рде рд╣реА рдЙрдиреНрдирддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдЪрд▓рддрд╛ рд╣реИ, рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХрд░реНрдиреЗрд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдореЛрд░реА рдХрд╛ **рд╕рдВрд╢реЛрдзрди** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдкреЛрд░реНрдЯ рдирдВрдмрд░ рдХрд╛ рд╕рдВрд╢реЛрдзрди рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рджреЗрддрд╛ рд╣реИред
{% endhint %}

рдХреНрдпреЛрдВрдХрд┐ **рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕** **рдХрд┐рд╕реА рднреА рд░рдирдЯрд╛рдЗрдо рдХреЛрдб рд╕реЗ рдкрд╣рд▓реЗ рдЪрд▓рддреЗ рд╣реИрдВ**, рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╕реЗ рд░рдирдЯрд╛рдЗрдо рдкреНрд░рдХреНрд░рд┐рдпрд╛ (рдЬреИрд╕реЗ, Python, Java, Node, Ruby) рдкреНрд░рднрд╛рд╡рд┐рдд рд╣реЛрдЧреАред рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рд╣рдорд╛рд░реЗ рдмрд╛рдж рд▓реЛрдб рдХрд┐рдП рдЧрдП **рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕**, рдЬреЛ рдЗрд╕ рдЪрд░ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИрдВ, рднреА рд╣рдорд╛рд░реЗ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдХрд░реЗрдВрдЧреЗред рдпрд╣ рд╕реЗрдЯрдЕрдк рдореИрд▓рд╡реЗрдпрд░ рдХреЛ рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ рдпрд╛ рд▓реЙрдЧрд┐рдВрдЧ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рдХреЛ рд╕реАрдзреЗ рд░рдирдЯрд╛рдЗрдо рдкрд░рд┐рд╡реЗрд╢ рдореЗрдВ рдЫрд▓рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рджреЗрддрд╛ рд╣реИред

<figure><img src="../../../../.gitbook/assets/image (3) (4).png" alt=""><figcaption><p><a href="https://www.clearvector.com/blog/content/images/size/w1000/2022/11/2022110801.rapid.mitm.png">https://www.clearvector.com/blog/content/images/size/w1000/2022/11/2022110801.rapid.mitm.png</a></p></figcaption></figure>

рдЙрдкрдХрд░рдг [**lambda-spy**](https://github.com/clearvector/lambda-spy) рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ рддрд╛рдХрд┐ рд▓реИрдореНрдмрдбрд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рд╕реЗ **рдореЗрдореЛрд░реА рд░рд╛рдЗрдЯ** рдХрд░реЗрдВ рдФрд░ рд▓реИрдореНрдмрдбрд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рд╕реЗ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдЪреБрд░рд╛ рд▓реЗрдВ**, рдЕрдиреНрдп **рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ** рдХреЛ рднреА **рд╕рдВрд╢реЛрдзрд┐рдд** рдХрд░реЗрдВред

## рд╕рдВрджрд░реНрдн

* [https://aws.amazon.com/blogs/compute/building-extensions-for-aws-lambda-in-preview/](https://aws.amazon.com/blogs/compute/building-extensions-for-aws-lambda-in-preview/)
* [https://www.clearvector.com/blog/lambda-spy/](https://www.clearvector.com/blog/lambda-spy/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рдЬреАрд░реЛ рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>!</strong></a></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдЕрдЧрд░ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://
