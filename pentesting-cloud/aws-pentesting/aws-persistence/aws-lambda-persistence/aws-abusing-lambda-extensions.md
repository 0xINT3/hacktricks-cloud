# AWS - Κατάχρηση των Lambda Extensions

<details>

<summary><strong>Μάθετε το hacking στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας στο hacking υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) στο GitHub.

</details>

## Επεκτάσεις Lambda

Οι επεκτάσεις Lambda ενισχύουν τις λειτουργίες με την ενσωμάτωσή τους σε διάφορα εργαλεία **παρακολούθησης, παρατήρησης, ασφάλειας και διακυβέρνησης**. Αυτές οι επεκτάσεις, προστίθενται μέσω [.zip αρχείων χρησιμοποιώντας τα επίπεδα Lambda](https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html) ή περιλαμβάνονται σε [αναπτύξεις εικόνων εμπορευματοκιβωτίου](https://aws.amazon.com/blogs/compute/working-with-lambda-layers-and-extensions-in-container-images/), λειτουργούν σε δύο λειτουργίες: **εσωτερικές** και **εξωτερικές**.

* Οι **εσωτερικές επεκτάσεις** συγχωνεύονται με τη διαδικασία εκτέλεσης, παραμορφώνοντας την εκκίνησή της χρησιμοποιώντας **μεταβλητές περιβάλλοντος που είναι ειδικές για τη γλώσσα** και **σενάρια περιτυλίγματος**. Αυτή η προσαρμογή ισχύει για μια σειρά από χρόνους εκτέλεσης, συμπεριλαμβανομένων των **Java Correto 8 και 11, Node.js 10 και 12, και .NET Core 3.1**.

* Οι **εξωτερικές επεκτάσεις** εκτελούνται ως ξεχωριστές διεργασίες, διατηρώντας τη συμμόρφωση λειτουργίας με τον κύκλο ζωής της συνάρτησης Lambda. Είναι συμβατές με διάφορους χρόνους εκτέλεσης όπως **Node.js 10 και 12, Python 3.7 και 3.8, Ruby 2.5 και 2.7, Java Corretto 8 και 11, .NET Core 3.1**, και **προσαρμοσμένους χρόνους εκτέλεσης**.

Για περισσότερες πληροφορίες σχετικά με το [**πώς λειτουργούν οι επεκτάσεις Lambda, ελέγξτε την τεκμηρίωση**](https://docs.aws.amazon.com/lambda/latest/dg/runtimes-extensions-api.html).

### Εξωτερική Επέκταση για Μόνιμη Αποθήκευση, Κλοπή Αιτημάτων & Τροποποίηση Αιτημάτων

**Αυτό θα είναι ένας περίληπτος οδηγός για την τεχνική που προτείνεται σε αυτήν την ανάρτηση:** [**https://www.clearvector.com/blog/lambda-spy/**](https://www.clearvector.com/blog/lambda-spy/)

Οι ερευνητές ανακάλυψαν ότι το προεπιλεγμένο πυρήνα του Linux στο περιβάλλον εκτέλεσης του Lambda έχει συνταχθεί με τις κλήσεις συστήματος "**process\_vm\_readv**" και "**process\_vm\_writev**". Και όλες οι διεργασίες εκτελούνται με τον ίδιο αναγνωριστικό χρήστη, ακόμη και η νέα διεργασία που δημιουργείται για την εξωτερική επέκταση. **Αυτό σημαίνει ότι μια εξωτερική επέκταση έχει πλήρη πρόσβαση ανάγνωσης και εγγραφής στη μνήμη στοίβας του Rapid, κατά σχεδιασμό.**

Επιπλέον, οι **επεκτάσεις** του Lambda μπορούν να **εγγραφούν** σε **συμβάντα κλήσης**. Ωστόσο, η AWS δεν αποκαλύπτει τα ακατέργαστα δεδομένα στην επέκταση. Έτσι,
