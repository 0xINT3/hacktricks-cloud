# AWS - рд▓реИрдореНрдмрдбрд╛ рд╕реНрдерд╛рдпрд┐рддреНрд╡

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

## рд▓реИрдореНрдмрдбрд╛

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{% content-ref url="../../../aws-security/aws-services/aws-lambda-enum.md" %}
[aws-lambda-enum.md](../../../aws-security/aws-services/aws-lambda-enum.md)
{% endcontent-ref %}

### рд▓реИрдореНрдмрдбрд╛ рд▓реЗрдпрд░ рд╕реНрдерд╛рдпрд┐рддреНрд╡

рд▓реИрдореНрдмрдбрд╛ рдХреЛ рдПрдХ рдЫрд┐рдкреА рд╣реБрдИ рддрд░реАрдХреЗ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдПрдХ рд▓реЗрдпрд░ рдХреЛ рдкреНрд░рд╡реЗрд╢/рдмреИрдХрдбреЛрд░ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ** рдЬрдм рд▓реИрдореНрдмрдбрд╛ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:

{% content-ref url="aws-lambda-layers-persistence.md" %}
[aws-lambda-layers-persistence.md](aws-lambda-layers-persistence.md)
{% endcontent-ref %}

### рд▓реИрдореНрдмрдбрд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рд╕реНрдерд╛рдпрд┐рддреНрд╡

рд▓реИрдореНрдмрдбрд╛ рд▓реЗрдпрд░ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдФрд░ рд▓реИрдореНрдмрдбрд╛ рдореЗрдВ рд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдмрдиреЗ рд░рд╣рдиреЗ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдЪреЛрд░реА рдФрд░ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рднреА рд╕рдВрднрд╡ рд╣реИред

{% content-ref url="aws-abusing-lambda-extensions.md" %}
[aws-abusing-lambda-extensions.md](aws-abusing-lambda-extensions.md)
{% endcontent-ref %}

### рд╕рдВрд╕рд╛рдзрди рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ

рдмрд╛рд╣рд░реА рдЦрд╛рддреЛрдВ рдХреЛ рд▓реИрдореНрдмрдбрд╛ рдХреНрд░рд┐рдпрд╛рдУрдВ (рдЬреИрд╕реЗ рдХрд┐ рдирд┐рдордВрддреНрд░рдг рдпрд╛ рдХреЛрдб рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛) рдХрд╛ рдкрд╣реБрдВрдЪ рджреЗрдирд╛ рд╕рдВрднрд╡ рд╣реИ:

<figure><img src="../../../../.gitbook/assets/image (2) (1) (2).png" alt=""><figcaption></figcaption></figure>

### рд╕рдВрд╕реНрдХрд░рдг, рдЙрдкрдирд╛рдо рдФрд░ рд╡реЗрдЯ

рд▓реИрдореНрдмрдбрд╛ рдХреЗ рдкрд╛рд╕ **рд╡рд┐рднрд┐рдиреНрди рд╕рдВрд╕реНрдХрд░рдг** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ (рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рдЕрд▓рдЧ рдХреЛрдб)ред\
рдлрд┐рд░, рдЖрдк **рд▓реИрдореНрдмрдбрд╛ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдирд╛рдо рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрд╕реНрдХрд░рдг** рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡реЗрдЯ рджреЗрдиреЗ рдХреЗ рд╕рдХреНрд╖рдо рд╣реЛрддреЗ рд╣реИрдВред\
рдЗрд╕ рддрд░рд╣ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдПрдХ **рдмреИрдХрдбреЛрд░ рд╡рд░реНрдЬрди 1** рдФрд░ **рдХреЗрд╡рд▓ рд╡реИрдз рдХреЛрдб рд╡рд╛рд▓рд╛ рд╡рд░реНрдЬрди 2** рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ **рдХреЗрд╡рд▓ 1% рдЕрдиреБрд░реЛрдзреЛрдВ рдореЗрдВ рд╡рд░реНрдЬрди 1 рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП**ред

<figure><img src="../../../../.gitbook/assets/image (2) (2).png" alt=""><figcaption></figcaption></figure>

### рд╕рдВрд╕реНрдХрд░рдг рдмреИрдХрдбреЛрд░ + API рдЧреЗрдЯрд╡реЗ

1. рд▓реИрдореНрдмрдбрд╛ рдХреЗ рдореВрд▓ рдХреЛрдб рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдПрдВ
2. рдореВрд▓ рдХреЛрдб рдХреЛ рдмреИрдХрдбреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдирдпрд╛ рд╕рдВрд╕реНрдХрд░рдг рдмрдирд╛рдПрдВ** (рдпрд╛ рдХреЗрд╡рд▓ рджреБрд░рд╛рдЪрд╛рд░реА рдХреЛрдб рдХреЗ рд╕рд╛рде)ред рдЙрд╕ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ $LATEST рдкрд░ рдкреНрд░рдХрд╛рд╢рд┐рдд рдФрд░ **рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ**
1. рд▓реИрдореНрдмрдбрд╛ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд API рдЧреЗрдЯрд╡реЗ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП
3. рдореВрд▓ рдХреЛрдб рдХреЗ рд╕рд╛рде **рдирдпрд╛ рд╕рдВрд╕реНрдХрд░рдг рдмрдирд╛рдПрдВ**, рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░реЗрдВ рдФрд░ рдЙрд╕ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ $LATEST рдкрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВред
1. рдЗрд╕рд╕реЗ рдкрд┐рдЫрд▓реЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдмреИрдХрдбреЛрд░ рдХреЛрдб рдЫрд┐рдкрд╛ рдЬрд╛рдПрдЧрд╛
4. API рдЧреЗрдЯрд╡реЗ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ **рдирдпрд╛ POST рдореЗрдердб рдмрдирд╛рдПрдВ** (рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдореЗрдердб рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ) рдЬреЛ рд▓реИрдореНрдмрдбрд╛ рдХреЗ рдмреИрдХрдбреЛрд░ рд╡рд░реНрдЬрди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдЧрд╛: `arn:aws:lambda:us-east-1:<acc_id>:function:<func_name>:1`
1. рдлрд╝рдВрджрд╛ рдХреЗ рдЕрдВрдд рдореЗрдВ :1 рдХреЛ рдзреНрдпрд╛рди рджреЗрдВ **рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ** (рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рдВрд╕реНрдХрд░рдг 1 рдмреИрдХрдбреЛрд░ рд╡рд░реНрдЬрди рд╣реЛрдЧрд╛)ред
5. рдмрдирд╛рдП рдЧрдП POST рдореЗрдердб рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдФрд░ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдореЗрдВ **`API рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ`** рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ
6. рдЕрдм, рдЬрдм рдЖрдк **POST рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВрдЧреЗ рддреЛ рдЖрдкрдХрд╛ рдмреИрдХрдбреЛрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдЧрд╛

### рдХреНрд░реЙрди/рдЗрд╡реЗрдВрдЯ рдПрдХреНрдЪреБрдПрдЯрд░

рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЛ **рдХреБрдЫ рд╣реЛрдиреЗ рдкрд░ рдпрд╛ рдХреБрдЫ рд╕рдордп рдмрд┐рддрдиреЗ рдкрд░ рдЪрд▓рд╛рдиреЗ** рдХреА рдХреНрд╖рдорддрд╛ рдЙрдиреНрд╣реЗрдВ рд╕реНрдерд╛рдпрд┐рддреНрд╡ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ рдкрд╣рдЪрд╛рди рд╕реЗ рдмрдЪрдиреЗ рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рдФрд░ рд╕рд╛рдорд╛рди
