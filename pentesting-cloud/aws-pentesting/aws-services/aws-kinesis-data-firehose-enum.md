# AWS - Enumera√ß√£o do Kinesis Data Firehose

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **vers√£o mais recente do PEASS ou baixar o HackTricks em PDF**, verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do Telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no GitHub.

</details>

## Kinesis Data Firehose

O Amazon Kinesis Data Firehose √© um **servi√ßo totalmente gerenciado para entrega de dados de streaming em tempo real** [**para destinos**](http://www.amazonaws.cn/streaming-data/) **como Amazon Simple Storage Service (Amazon S3), Amazon Redshift, Amazon OpenSearch Service, Splunk e qualquer ponto de extremidade HTTP personalizado**.\
Com o Kinesis Data Firehose, voc√™ n√£o precisa escrever aplicativos ou gerenciar recursos. Voc√™ **configura seus produtores de dados** para enviar dados para o Kinesis Data Firehose, e ele **entrega automaticamente os dados para o destino** que voc√™ especificou. Voc√™ tamb√©m pode configurar o Kinesis Data Firehose **para transformar seus dados antes de entreg√°-los**.

### Enumera√ß√£o
```bash
# Get delivery streams
aws firehose list-delivery-streams

#¬†Get stream info
aws firehose describe-delivery-stream --delivery-stream-name <name>
## Get roles
aws firehose describe-delivery-stream --delivery-stream-name <name> | grep -i RoleARN
```
## P√≥s-explora√ß√£o / Bypass de Defesa

Caso o firehose seja usado para enviar logs ou insights de defesa, usando essas funcionalidades, um atacante poderia impedir que ele funcione corretamente.

### firehose:DeleteDeliveryStream
```
aws firehose delete-delivery-stream --delivery-stream-name <value> --allow-force-delete
```
### firehose:UpdateDestination

A a√ß√£o `firehose:UpdateDestination` permite atualizar as configura√ß√µes de um destino existente no servi√ßo Amazon Kinesis Data Firehose. Essa a√ß√£o √© √∫til para modificar as configura√ß√µes de entrega de dados, como o nome do destino, a configura√ß√£o de transforma√ß√£o de dados e as configura√ß√µes de backup.

#### Sintaxe

```
aws firehose update-destination --delivery-stream-name <delivery-stream-name> --current-delivery-stream-version-id <current-delivery-stream-version-id> --destination-id <destination-id> [--s3-destination-update <value>] [--extended-s3-destination-update <value>] [--redshift-destination-update <value>] [--elasticsearch-destination-update <value>] [--splunk-destination-update <value>] [--http-destination-update <value>] [--open-xray-destination-update <value>] [--cloudwatch-logs-destination-update <value>] [--http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--kinesis-stream-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--extended-kinesis-stream-destination-update <value>] [--extended-redshift-destination-update <value>] [--extended-elasticsearch-destination-update <value>] [--extended-splunk-destination-update <value>] [--extended-cloudwatch-logs-destination-update <value>] [--extended-http-endpoint-destination-update <value>] [--extended-http-destination-update <value>] [--
```
aws firehose update-destination --delivery-stream-name <value> --current-delivery-stream-version-id <value> --destination-id <value>
```
### firehose:PutRecord | firehose:PutRecordBatch

O servi√ßo AWS Kinesis Data Firehose permite que voc√™ envie dados em tempo real para destinos de armazenamento, como Amazon S3, Amazon Redshift e Amazon Elasticsearch Service. Para realizar essa a√ß√£o, voc√™ precisa das permiss√µes firehose:PutRecord e firehose:PutRecordBatch.

A permiss√£o firehose:PutRecord permite que voc√™ envie um √∫nico registro de dados para o Firehose. J√° a permiss√£o firehose:PutRecordBatch permite que voc√™ envie v√°rios registros de dados em lote para o Firehose.

Essas permiss√µes s√£o essenciais para o funcionamento adequado do servi√ßo AWS Kinesis Data Firehose e devem ser configuradas corretamente para garantir o envio eficiente e seguro dos dados em tempo real.
```
aws firehose put-record --delivery-stream-name my-stream --record '{"Data":"SGVsbG8gd29ybGQ="}'

aws firehose put-record-batch --delivery-stream-name my-stream --records file://records.json
```
## Refer√™ncias

* [https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html](https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html)

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **vers√£o mais recente do PEASS ou baixar o HackTricks em PDF**, verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github.

</details>
