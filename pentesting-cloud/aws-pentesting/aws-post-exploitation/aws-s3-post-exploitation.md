# AWS - Εκμετάλλευση μετά την παραβίαση του S3

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## S3

Για περισσότερες πληροφορίες, ελέγξτε:

{% content-ref url="../aws-services/aws-s3-athena-and-glacier-enum.md" %}
[aws-s3-athena-and-glacier-enum.md](../aws-services/aws-s3-athena-and-glacier-enum.md)
{% endcontent-ref %}

### Ευαίσθητες Πληροφορίες

Μερικές φορές θα μπορείτε να βρείτε ευαίσθητες πληροφορίες που είναι αναγνώσιμες στα καδράκια. Για παράδειγμα, μυστικά καταστάσεων terraform.

### Περιστροφή

Διάφορες πλατφόρμες μπορεί να χρησιμοποιούν το S3 για να αποθηκεύουν ευαίσθητα αγαθά. Για παράδειγμα, η **airflow** μπορεί να αποθηκεύει τον **κώδικα DAGs** εκεί, ή **ιστοσελίδες** μπορεί να εξυπηρετούνται απευθείας από το S3. Ένας επιτιθέμενος με δικαιώματα εγγραφής μπορεί να **τροποποιήσει τον κώδικα** από το καδράκι για να **περιστραφεί** σε άλλες πλατφόρμες, ή να **αναλάβει τον έλεγχο των λογαριασμών** τροποποιώντας αρχεία JS.

### S3 Ransomware

Σε αυτό το σενάριο, ο **επιτιθέμενος δημιουργεί ένα κλειδί KMS (Key Management Service) στο δικό του AWS λογαριασμό** ή σε έναν άλλο παραβιασμένο λογαριασμό. Στη συνέχεια, καθιστά αυτό το **κλειδί προσβάσιμο σε οποιονδήποτε στον κόσμο**, επιτρέποντας σε οποιονδήποτε χρήστη, ρόλο ή λογαριασμό AWS να κρυπτογραφήσει αντικείμενα χρησιμοποιώντας αυτό το κλειδί. Ωστόσο, τα αντικείμενα δεν μπορούν να αποκρυπτογραφηθούν.

Ο επιτιθέμενος εντοπίζει ένα στόχο **καδράκι S3 και αποκτά πρόσβαση επιπέδου εγγραφής** σε αυτό χρησιμοποιώντας διάφορες μεθόδους. Αυτό μπορεί να οφείλεται σε κακή διαμόρφωση του καδρακίου που το αποκαλύπτει δημόσια ή στον επιτιθέμενο που αποκτά πρόσβαση στο περιβάλλον AWS ίδιο. Ο επιτιθέμενος συνήθως επικεντρώνεται σε καδράκια που περιέχουν ευαίσθητες πληροφορίες, όπως προσωπικά αναγνωρίσιμες πληροφορίες (PII), προστατευμένες πληροφορίες υγείας (PHI), αρχεία καταγραφής, αντίγραφα ασφαλείας και άλλα.

Για να προσδιορίσει εάν το καδράκι μπορεί να είναι στόχος για ransomware, ο επιτιθέμενος ελέγχει τη διαμόρφωσή του. Αυτό περιλαμβάνει τον έλεγχο εάν η **Εκδοχή Αντικειμένου S3** είναι ενεργοποιημένη και εάν η **διαγραφή με πολλαπλούς παράγοντες επαλήθευσης (MFA delete) είναι ενεργοποιημένη**. Εάν η Εκδοχή Αντικειμένου δεν είναι ενεργοποιημένη, ο επιτιθέμενος μπορεί να προχωρήσει. Εάν η Εκδοχή Αντικειμένου είναι ενεργοποιημένη, αλλά η διαγραφή με πολλαπλούς παράγοντες επαλήθευσης είναι απενεργοποιημένη, ο επιτιθέμενος μπορεί να **απενεργοποιήσει την Εκδοχή Αντικειμένου**. Εάν και η Εκδοχή Αντικειμένου και η διαγραφή με πολλαπλούς παράγοντες επαλήθευσης είναι ε
