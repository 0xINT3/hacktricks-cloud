# Az - рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **рддреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ **PR рдЬрдорд╛ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

## рд╕рдВрдЧрдарди рд╡реНрдпрд╡рд╕реНрдерд╛

<figure><img src="../../.gitbook/assets/image (62).png" alt=""><figcaption></figcaption></figure>

### рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣

рдпрджрд┐ рдЖрдкрдХреЗ рд╕рдВрдЧрдарди рдореЗрдВ **рдХрдИ Azure рд╕рджрд╕реНрдпрддрд╛рдПрдВ** рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЙрди **рд╕рджрд╕реНрдпрддрд╛рдУрдВ** рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд░реВрдк рд╕реЗ **рдкрд╣реБрдВрдЪ**, рдиреАрддрд┐рдпрд╛рдБ рдФрд░ рдЕрдиреБрдкрд╛рд▓рди рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред **рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣** рд╕рджрд╕реНрдпрддрд╛рдУрдВ рдХреЗ рдКрдкрд░ рдПрдХ **рд╢рд╛рд╕рди рд╕реНрддрд░** рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдПрдХ рдПрдХрд▓ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ **10,000 рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣** рдХрд╛ рд╕рдорд░реНрдерди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдПрдХ рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдкреЗрдбрд╝ рдореЗрдВ **рдЫрд╣ рд╕реНрддрд░реЛрдВ рддрдХ рдХрд╛ рдЧрд╣рд░рд╛рдкрди рд╕рдорд░реНрдерд┐рдд** рдХрд░ рд╕рдХрддрд╛ рд╣реИред

<figure><img src="../../.gitbook/assets/image (76).png" alt=""><figcaption></figcaption></figure>

рдкреНрд░рддреНрдпреЗрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рдПрдХрд▓ **рд╢реАрд░реНрд╖-рд╕реНрддрд░ рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдЬрд┐рд╕реЗ рдореВрд▓ рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ** рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдореВрд▓ рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдХреЛ рд╣рд┐рдпрд░рд╛рд░реНрдХреА рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рддрд╛рдХрд┐ рдЗрд╕рдореЗрдВ **рд╕рднреА рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдФрд░ рд╕рджрд╕реНрдпрддрд╛рдПрдВ рдлреЛрд▓реНрдб рдЕрдк рдХрд░ рд╕рдХреЗрдВ**ред рдпрд╣ рдореВрд▓ рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реНрддрд░ рдкрд░ **рд╡реИрд╢реНрд╡рд┐рдХ рдиреАрддрд┐рдпрд╛рдБ рдФрд░ Azure рднреВрдорд┐рдХрд╛ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ** рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред [Azure AD **рд╡реИрд╢реНрд╡рд┐рдХ рдкреНрд░рд╢рд╛рд╕рдХ** рдХреЛ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдЙрдЪреНрдЪрддрдо рдкрд╣реБрдВрдЪ рджреЗрдиреА рд╣реЛрдЧреА](https://learn.microsoft.com/en-us/azure/role-based-access-control/elevate-access-global-admin) рдЗрд╕ рдореВрд▓ рд╕рдореВрд╣ рдХреА **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд╣реБрдВрдЪ рдкреНрд░рд╢рд╛рд╕рдХ рднреВрдорд┐рдХрд╛** рдХреЛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд░реВрдк рд╕реЗред рдкрд╣реБрдВрдЪ рдХреЛ рдЙрдЪреНрдЪрддрдо рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдкреНрд░рд╢рд╛рд╕рдХ **рдЕрдиреНрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдпрд╛ рд╕рдореВрд╣реЛрдВ рдХреЛ Azure рднреВрдорд┐рдХрд╛ рдЕрд╕рд╛рдЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ, рдЖрдк **рдореВрд▓** рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдХреЗ рдорд╛рд▓рд┐рдХ рдХреЗ рд░реВрдк рдореЗрдВ **рдЕрдкрдиреЗ рдЦрд╛рддреЗ рдХреЛ рдирд┐рдпреБрдХреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред

рдореВрд▓ рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдХреЛ **рд╣рдЯрд╛рдпрд╛ рдпрд╛ рд╣рдЯрд╛рдпрд╛ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**, рдЕрдиреНрдп рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣реЛрдВ рдХреА рддрд░рд╣ред

рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдЖрдкрдХреЛ рдЙрджреНрдпрдо-рдЧреНрд░реЗрдб рдкреНрд░рдмрдВрдзрди рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЪрд╛рд╣реЗ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреМрди рд╕реА рднреВрдорд┐рдХрд╛ рдХреА рд╕рджрд╕реНрдпрддрд╛рдПрдВ рд╣реЛрдВред рд╣рд╛рд▓рд╛рдВрдХрд┐, **рдПрдХ рд╣реА рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣ рдХреЗ рд╕рднреА рд╕рджрд╕реНрдпрддрд╛рдПрдВ** рдХреЛ **рдПрдХ рд╣реА Azure Active Directory (Azure AD) рдХрд┐рд░рд╛рдпреЗрджрд╛рд░** рдкрд░ рднрд░реЛрд╕рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред

<figure><img src="../../.gitbook/assets/image (1) (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

### Azure рд╕рджрд╕реНрдпрддрд╛рдПрдВ

Azure рд╕рджрд╕реНрдпрддрд╛ рдПрдХ **рддрд╛рд░реНрдХрд┐рдХ рдХрдВрдЯреЗрдирд░** рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ Azure рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдпрд╛ рддрдХрдиреАрдХреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ **рдкреНрд░реЛрд╡рд┐рдЬрди** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдЖрдкрдХреЗ рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рд╡рд┐рд╡рд░рдг рдЬреИрд╕реЗ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди (VMs), рдбреЗрдЯрд╛рдмреЗрд╕ рдЖрджрд┐ рдХреЛ рд░рдЦрддрд╛ рд╣реИред рдЬрдм рдЖрдк рдПрдХ Azure рд╕рдВрд╕рд╛рдзрди рдЬреИрд╕реЗ рдПрдХ VM рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЙрд╕реЗ **рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣
## рднреВрдорд┐рдХрд╛рдПрдБ рдФрд░ рдЕрдиреБрдорддрд┐рдпрд╛рдБ

**рднреВрдорд┐рдХрд╛рдПрдБ** рдХреЛ **рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд** рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ **рдкреНрд░рдореБрдЦреЛрдВ** рдХреЛ **рджрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ** рдПрдХ **рджрд╛рдпрд░рд╛** рдкрд░: `рдкреНрд░рдореБрдЦ -[рднреВрдорд┐рдХрд╛ рд╣реИ]->(рджрд╛рдпрд░рд╛)`

**рд╕рдореВрд╣реЛрдВ** рдХреЛ рджрд┐рдП рдЧрдП **рднреВрдорд┐рдХрд╛рдПрдБ** рд╕рдореВрд╣ рдХреЗ рд╕рднреА рд╕рджрд╕реНрдпреЛрдВ рджреНрд╡рд╛рд░рд╛ **рдЕрдиреБрдЧреНрд░рд╣рд┐рдд** рдХреА рдЬрд╛рддреА рд╣реИрдВред

рднреВрдорд┐рдХрд╛ рдХреЛ рджрд┐рдП рдЬрд╛рдиреЗ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдпрджрд┐ рднреВрдорд┐рдХрд╛ рдХреЛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдпрд╣ рднреВрдорд┐рдХрд╛ рджрд╛рдпрд░рд╛ рдХрдВрдЯреЗрдирд░ рдХреЗ рднреАрддрд░ **рдЕрдиреНрдп рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдХреЛ **рдЕрдиреБрдЧреНрд░рд╣рд┐рдд** рдХрд░ рд╕рдХрддреА рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ A рдХреЛ **рд╕рджрд╕реНрдпрддрд╛ рдкрд░ рднреВрдорд┐рдХрд╛ рд╣реИ**, рддреЛ рдЙрд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рд╕рднреА рд╕рдВрд╕рд╛рдзрди рд╕рдореВрд╣реЛрдВ рдкрд░ рд╡рд╣реА рднреВрдорд┐рдХрд╛ рд╣реЛрдЧреА рдФрд░ рд╕рдВрд╕рд╛рдзрди рд╕рдореВрд╣ рдХреЗ рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ рднреАред

### **рдХреНрд▓рд╛рд╕рд┐рдХ рднреВрдорд┐рдХрд╛рдПрдБ**

| **рдорд╛рд▓рд┐рдХ**                     | <ul><li>рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рдкрд╣реБрдВрдЪ</li><li>рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</li></ul> | рд╕рднреА рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдХрд╛рд░ |
| ----------------------------- | ---------------------------------------------------------------------------------------- | ------------------ |
| **рдпреЛрдЧрджрд╛рдирдХрд░реНрддрд╛**               | <ul><li>рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рдкрд╣реБрдВрдЪ</li><li>рдкрд╣реБрдВрдЪ рдкреНрд░рдмрдВрдзрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ</li></ul>              | рд╕рднреА рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдХрд╛рд░ |
| **рдкрд╛рдардХ**                    | тАв рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рджреЗрдЦреЗрдВ                                                                     | рд╕рднреА рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдХрд╛рд░ |
| **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд╣реБрдВрдЪ рдкреНрд░рд╢рд╛рд╕рдХ** | <ul><li>рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рджреЗрдЦреЗрдВ</li><li>рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</li></ul>           | рд╕рднреА рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдХрд╛рд░ |

### рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рднреВрдорд┐рдХрд╛рдПрдБ

[Azure рднреВрдорд┐рдХрд╛-рдЖрдзрд╛рд░рд┐рдд рдкрд╣реБрдВрдЪ рдирд┐рдпрдВрддреНрд░рдг (Azure RBAC)](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview) рдХрдИ Azure **рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рднреВрдорд┐рдХрд╛рдПрдБ** рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ, рд╕рдореВрд╣реЛрдВ, рд╕реЗрд╡рд╛ рдкреНрд░рдзрд╛рдиреЛрдВ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдкрд╣рдЪрд╛рдиреЛрдВ** рдХреЛ **рджреЗ рд╕рдХрддреЗ рд╣реИрдВ**ред рднреВрдорд┐рдХрд╛ рдирд┐рдпреБрдХреНрддрд┐рдпрд╛рдБ рд╡реЗ рддрд░реАрдХрд╛ рд╣реИрдВ рдЬрд┐рд╕рд╕реЗ рдЖрдк **Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд** рдХрд░рддреЗ рд╣реИрдВред рдпрджрд┐ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рднреВрдорд┐рдХрд╛рдПрдБ рдЖрдкрдХреЗ рд╕рдВрдЧрдарди рдХреА рд╡рд┐рд╢реЗрд╖ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдирд╣реАрдВ рдХрд░рддреА рд╣реИрдВ, рддреЛ рдЖрдк рдЕрдкрдиреА рдЦреБрдж рдХреА [**Azure рдЕрдиреБрдХреВрд▓ рднреВрдорд┐рдХрд╛рдПрдБ**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles) рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

**рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд** рднреВрдорд┐рдХрд╛рдПрдБ рдХреЗрд╡рд▓ рдЙрди **рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдХреЗ рд▓рд┐рдП рд▓рд╛рдЧреВ рд╣реЛрддреА рд╣реИрдВ рдЬрд┐рдирдХреЗ рд▓рд┐рдП рд╡реЗ **рдорд╛рдВрдЧреА рдЧрдИ рд╣реИрдВ**, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреЗ 2 рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ **Compute** рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ **рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рднреВрдорд┐рдХрд╛рдПрдБ**:

| [рдбрд┐рд╕реНрдХ рдмреИрдХрдЕрдк рдкрд╛рдардХ](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#disk-backup-reader)                 | рдбрд┐рд╕реНрдХ рдмреИрдХрдЕрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреИрдХрдЕрдк рдЦрдЬрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред      | 3e5e47e6-65f7-47ef-90b5-e5dd4d455f24 |
| ----------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- | ------------------------------------ |
| [рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд▓реЙрдЧрд┐рди](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#virtual-machine-user-login) | рдкреЛрд░реНрдЯрд▓ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЗрдВ рджреЗрдЦреЗрдВ рдФрд░ рдПрдХ рд╕рд╛рдзрд╛рд░рд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВред | fb879df8-f326-4884-b1cf-06f3ad86be52 |

рдпреЗ рднреВрдорд┐рдХрд╛рдПрдБ **рддрд╛рд░реНрдХрд┐рдХ рдХрдВрдЯреЗрдирд░** (рдЬреИрд╕реЗ рдкреНрд░рдмрдВрдзрди рд╕рдореВрд╣, рд╕рджрд╕реНрдпрддрд╛ рдФрд░ рд╕рдВрд╕рд╛рдзрди рд╕рдореВрд╣) рдкрд░ рднреА **рдирд┐рдпреБрдХреНрдд** рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ рдФрд░ рдкреНрд░рдореБрдЦреЛрдВ рдХреЛ рдЙрди **рдХрдВрдЯреЗрдирд░ рдХреЗ рднреАрддрд░ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░** рдЙрдиреНрд╣реЗрдВ рд╣реЛрдЧреАред

* рдпрд╣рд╛рдВ [**рд╕рднреА Azure рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рднреВрдорд┐рдХрд╛рдУрдВ**](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles) рдХреА рд╕реВрдЪреА рджреЗрдЦреЗрдВред
* рдпрд╣рд╛рдВ [**рд╕рднреА Azure AD рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рднреВрдорд┐рдХрд╛рдУрдВ**](https://learn.microsoft.com/en-us/azure/active-directory/roles/permissions-reference) рдХреА рд╕реВрдЪреА рджреЗрдЦреЗрдВред

### рдЕрдиреБрдХреВрд▓ рднреВрдорд┐рдХрд╛рдПрдБ

Azure рдЕрдиреБрдХреВрд▓ рднреВрдорд┐рдХрд╛рдПрдБ
## MFA рдмрд╛рдИрдкрд╛рд╕

MFA (Multi-Factor Authentication) рдПрдХ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рдпрд╛рд╕ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЕрдкрдиреА рдкрд╣рдЪрд╛рди рд╕рддреНрдпрд╛рдкрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХрд╛рдзрд┐рдХ рдХрд╛рд░рдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рд╣реИ рдХрд┐ рдпрджрд┐ рдХреЛрдИ рдЕрдирдзрд┐рдХреГрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рдЪреЛрд░реА рдХрд░ рд▓реЗрддрд╛ рд╣реИ, рддреЛ рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдкрд╣рдЪрд╛рди рд╕рддреНрдпрд╛рдкрди рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреВрд░реА рдирд╣реАрдВ рд╣реЛ рдкрд╛рдПрдЧреАред

MFA рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рддрдХрдиреАрдХреЗрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐:

- **рдлрд┐рд╢рд┐рдВрдЧ**: рдЗрд╕рдореЗрдВ рд╣рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдзреЛрдЦреЗ рд╕реЗ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреА рдкрд╣рдЪрд╛рди рдЬрд╛рдирдХрд╛рд░реА рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рдЙрдирдХреА рдкрд╣рдЪрд╛рди рд╕рддреНрдпрд╛рдкрди рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдХреЗ рдЙрдирдХреЗ рдЦрд╛рддреЗ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
- **рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрдорддрд┐ рд▓реЗрдирд╛**: рдХрдИ рдмрд╛рд░ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдореЗрдВ MFA рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╣рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рд▓рд┐рдП, рд╣рдо рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрдорддрд┐ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕реЗ MFA рдХреА рдЬрд░реВрд░рдд рдХреЗ рдмрд┐рдирд╛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддреЗ рд╣реИрдВред
- **рд╡реЗрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛**: рдХрдИ рдмрд╛рд░ рд╡реЗрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЗ рддреНрд░реБрдЯрд┐ рдпрд╛ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рдо MFA рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рд▓рд┐рдП, рд╣рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЦрд╛рддреЗ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡реЗрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ MFA рдХреА рдЬрд░реВрд░рдд рдХреЗ рдмрд┐рдирд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдкрд╣рдЪрд╛рди рд╕рддреНрдпрд╛рдкрди рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВред

рдпрд╣рд╛рдВ рджрд┐рдП рдЧрдП рддрдХрдиреАрдХреЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛ рднреА рдЕрдиреНрдп MFA рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдЖрдкрдХреЛ рдЕрд╡рд╢реНрдп рдЬрд╛рдирдиреЗ рдЪрд╛рд╣рд┐рдПред
```powershell
Import-Module 'C:\Users\Administrador\Desktop\Azure\Modulos ps1\donkeytoken' -Force
```
**рдкреНрд░рддреНрдпреЗрдХ рдкреЛрд░реНрдЯрд▓ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ** рдпрджрд┐ рдпрд╣ рд╕рдВрднрд╡ рд╣реЛ рддреЛ **MFA рдХреЗ рдмрд┐рдирд╛ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ**:
```powershell
Test-MFA -credential $cred -Verbose -Debug -InformationAction Continue
```
<figure><img src="../../.gitbook/assets/2023-03-06 17_02_47-.png" alt=""><figcaption></figcaption></figure>

рдХреНрдпреЛрдВрдХрд┐ **Azure** **рдкреЛрд░реНрдЯрд▓** **рд╕реАрдорд┐рдд рдирд╣реАрдВ рд╣реИ**, рдЗрд╕рд▓рд┐рдП рдкрд┐рдЫрд▓реЗ рдирд┐рд╖реНрдкрд╛рджрди рд╕реЗ рдХрд┐рд╕реА рднреА рд╕реЗрд╡рд╛ рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рдкреЛрд░реНрдЯрд▓ рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╕реЗ рдЯреЛрдХрди рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ Sharepoint рдХреА рдкрд╣рдЪрд╛рди рдХреА рдЧрдИ рдереА, рдФрд░ рдЗрд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯреЛрдХрди рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:
```powershell
$token = Get-DelegationTokenFromAzurePortal -credential $cred -token_type microsoft.graph -extension_type Microsoft_Intune Read-JWTtoken -token $token.access_token
```
<figure><img src="../../.gitbook/assets/2023-03-06 17_11_28-Window.png" alt=""><figcaption></figcaption></figure>

рдЯреЛрдХрди рдХреЗ рдкрд╛рд╕ Sharepoint рд╕реЗ рдкрд░реНрдорд┐рд╢рди Sites.Read.All рд╣реИ:

<figure><img src="../../.gitbook/assets/2023-03-06 17_11_43-Window.png" alt=""><figcaption></figcaption></figure>

рдпрджрд┐ рдЖрдк MFA рдХреЗ рдХрд╛рд░рдг рд╡реЗрдм рд╕реЗ Sharepoint рддрдХ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЙрддреНрдкрдиреНрди рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рд╛рдЗрд▓реЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ:
```powershell
$data = Get-SharePointFilesFromGraph -authentication $token $data[0].downloadUrl
```
<figure><img src="../../.gitbook/assets/2023-03-06 17_28_26-Window.png" alt=""><figcaption></figcaption></figure>

рдлрд╝рд╛рдЗрд▓реЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП URL рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:

<figure><img src="../../.gitbook/assets/2023-03-06 17_28_50-Window.png" alt=""><figcaption></figcaption></figure>

## рд╕рдВрджрд░реНрдн

* [https://learn.microsoft.com/en-us/azure/governance/management-groups/overview](https://learn.microsoft.com/en-us/azure/governance/management-groups/overview)
* [https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions)
* [https://abouttmc.com/glossary/azure-subscription/#:\~:text=An%20Azure%20subscription%20is%20a,the%20subscription%20it%20belongs%20to.](https://abouttmc.com/glossary/azure-subscription/)
* [https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред**

</details>
