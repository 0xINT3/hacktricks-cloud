# Az - Grundlegende Informationen

<details>

<summary><strong>Erlernen Sie das Hacken von AWS von Grund auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegramm-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>

## Organisationshierarchie

<figure><img src="../../.gitbook/assets/image (271).png" alt=""><figcaption></figcaption></figure>

### Verwaltungsgruppen

Wenn Ihre Organisation **viele Azure-Abonnements** hat, ben√∂tigen Sie m√∂glicherweise eine M√∂glichkeit, den **Zugriff**, Richtlinien und die Einhaltung dieser **Abonnements** effizient zu **verwalten**. **Verwaltungsgruppen** bieten einen **Governance-Bereich √ºber Abonnements**.

Beachten Sie, dass in einem einzigen Verzeichnis **10.000 Verwaltungsgruppen** unterst√ºtzt werden k√∂nnen und ein Verwaltungsgruppenbaum **bis zu sechs Ebenen Tiefe** unterst√ºtzen kann.

<figure><img src="../../.gitbook/assets/image (147).png" alt=""><figcaption></figcaption></figure>

[Aus den Dokumenten](https://learn.microsoft.com/en-us/azure/governance/management-groups/overview#root-management-group-for-each-directory): Jedes Verzeichnis erh√§lt eine einzige **oberste Verwaltungsgruppe namens Root-Verwaltungsgruppe**. Die Root-Verwaltungsgruppe ist in die Hierarchie integriert, um **alle Verwaltungsgruppen und Abonnements zusammenzufassen**. Diese Root-Verwaltungsgruppe erm√∂glicht die Anwendung von **globalen Richtlinien und Azure-Rollenzuweisungen** auf Verzeichnisebene. Der [Azure AD **Global Administrator muss sich selbst erh√∂hen](https://learn.microsoft.com/en-us/azure/role-based-access-control/elevate-access-global-admin) zur **Benutzerzugriffsadministratorrolle dieser Root-Gruppe** zuerst. Nach der Erh√∂hung des Zugriffs kann der Administrator **jedem Azure-Benutzer oder -Gruppe eine Azure-Rolle zuweisen, um die Hierarchie zu verwalten**. Als Administrator k√∂nnen Sie **Ihr eigenes Konto als Besitzer der Root-Verwaltungsgruppe festlegen**.

Die Root-Verwaltungsgruppe **kann nicht verschoben oder gel√∂scht** werden, im Gegensatz zu anderen Verwaltungsgruppen.

Verwaltungsgruppen bieten Ihnen ein Management auf Unternehmensebene in gro√üem Ma√üstab, unabh√§ngig von der Art der Abonnements, die Sie m√∂glicherweise haben. Alle Abonnements innerhalb einer einzigen Verwaltungsgruppe m√ºssen jedoch dem **gleichen Azure Active Directory (Azure AD) Mandanten** vertrauen.

<figure><img src="../../.gitbook/assets/image (157).png" alt=""><figcaption></figcaption></figure>

### Azure-Abonnements

In Azure dient ein Abonnement als **logischer Container** zum Zweck der **Bereitstellung** von gesch√§ftlichen oder technischen **Ressourcen**. Dieser Container enth√§lt die **Details von Ressourcen** wie virtuelle Maschinen (VMs), Datenbanken und andere. Bei der Erstellung einer Azure-Ressource, wie einer VM, wird das **damit verbundene Abonnement** angegeben. Diese Struktur erleichtert die Delegation von Zugriffen unter Verwendung von rollenbasierten Zugriffskontrollmechanismen.

### Ressourcengruppen

[Aus den Dokumenten:](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-python?tabs=macos#what-is-a-resource-group) Eine Ressourcengruppe ist ein **Container**, der **zusammenh√§ngende Ressourcen** f√ºr eine Azure-L√∂sung enth√§lt. Die Ressourcengruppe kann alle Ressourcen f√ºr die L√∂sung enthalten oder nur die **Ressourcen, die Sie als Gruppe verwalten m√∂chten**. F√ºgen Sie im Allgemeinen **Ressourcen**, die den **gleichen Lebenszyklus** teilen, der gleichen Ressourcengruppe hinzu, damit Sie sie leicht als Gruppe bereitstellen, aktualisieren und l√∂schen k√∂nnen.

Alle **Ressourcen** m√ºssen **innerhalb einer Ressourcengruppe** liegen und k√∂nnen nur zu einer Gruppe geh√∂ren. Wenn eine Ressourcengruppe gel√∂scht wird, werden auch alle darin enthaltenen Ressourcen gel√∂scht.

### Administrativgruppen

[Aus den Dokumenten:](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/admin-units-manage) Administrativgruppen erm√∂glichen es Ihnen, Ihre Organisation in **beliebige Einheiten** zu **unterteilen**, und dann **spezifische Administratoren zuzuweisen**, die nur die **Mitglieder** dieser Einheit **verwalten k√∂nnen**. Sie k√∂nnten beispielsweise Administrativgruppen verwenden, um Berechtigungen an Administratoren jeder Fakult√§t an einer gro√üen Universit√§t zu delegieren, damit sie den Zugriff steuern, Benutzer verwalten und Richtlinien nur in der Fakult√§t f√ºr Ingenieurwissenschaften festlegen k√∂nnen.

Nur **Benutzer**, **Gruppen** und **Ger√§te** k√∂nnen **Mitglieder** einer **Administrativgruppe** sein.

Daher wird eine **Administrativgruppe** einige **Mitglieder** enthalten und anderen **Prinzipalen** werden **Berechtigungen √ºber diese** administrativen **Einheit zugewiesen**, die sie verwenden k√∂nnen, um die Mitglieder der administrativen Einheit zu **verwalten**.

## Azure vs Azure AD vs Azure AD-Dom√§nendienste

Es ist wichtig zu beachten, dass **Azure AD** ein Dienst **innerhalb von Azure** ist. **Azure** ist Microsofts **Cloud-Plattform**, w√§hrend **Azure AD** ein Unternehmens-**Identit√§tsdienst** in Azure ist.\
Dar√ºber hinaus ist **Azure AD nicht wie Windows Active Directory**, es handelt sich um einen Identit√§tsdienst, der auf eine v√∂llig andere Weise funktioniert. Wenn Sie einen **Dom√§nencontroller in Azure** f√ºr Ihre Windows Active Directory-Umgebung ausf√ºhren m√∂chten, m√ºssen Sie **Azure AD-Dom√§nendienste** verwenden.

## Prinzipale

Azure unterst√ºtzt verschiedene Arten von Prinzipalen:

* **Benutzer**: Eine regul√§re **Person** mit Anmeldeinformationen zum Zugriff.
* **Gruppe**: Eine **Gruppe von Prinzipalen**, die gemeinsam verwaltet werden. **Berechtigungen**, die Gruppen erteilt werden, werden von ihren **Mitgliedern** **geerbt**.
*   **Dienstprinzipal/Unternehmensanwendungen**: Es handelt sich um eine **Identit√§t**, die f√ºr die **Verwendung** mit **Anwendungen**, gehosteten Diensten und automatisierten Tools zum Zugriff auf Azure-Ressourcen erstellt wurde. Dieser Zugriff ist durch die zugewiesenen Rollen eingeschr√§nkt, wodurch Sie die Kontrolle dar√ºber haben, **auf welche Ressourcen zugegriffen werden kann** und auf welcher Ebene. Aus Sicherheitsgr√ºnden wird immer empfohlen, **Dienstprinzipale mit automatisierten Tools zu verwenden**, anstatt ihnen das Einloggen mit einer Benutzeridentit√§t zu erm√∂glichen.

Beim Erstellen eines **Dienstprinzips** k√∂nnen Sie zwischen **Passwortauthentifizierung** oder **Zertifikatauthentifizierung** w√§hlen.

* Wenn Sie die **Passwort**-Authentifizierung w√§hlen (standardm√§√üig), **speichern Sie das generierte Passwort**, da Sie nicht mehr darauf zugreifen k√∂nnen.
* Wenn Sie die Zertifikatauthentifizierung w√§hlen, stellen Sie sicher, dass die **Anwendung Zugriff auf den privaten Schl√ºssel hat**.
* **Verwaltete Identit√§t (Metadatenanmeldeinformationen)**: Verwaltete Identit√§ten in Azure Active Directory bieten eine L√∂sung f√ºr das **automatische Verwalten der Identit√§t** von Anwendungen. Diese Identit√§ten werden von Anwendungen genutzt, um eine Verbindung zu **Ressourcen** herzustellen, die mit der Azure Active Directory (**Azure AD**) Authentifizierung kompatibel sind. Durch die Verwendung von verwalteten Identit√§ten k√∂nnen Anwendungen **Azure AD-Token sicher** speichern, ohne direkt mit Anmeldeinformationen umgehen zu m√ºssen. Es gibt zwei Arten von verwalteten Identit√§ten:
* **Systemzuweisung**. Einige Azure-Dienste erm√∂glichen es Ihnen, eine verwaltete Identit√§t direkt auf einer Dienstinstanz zu **aktivieren**. Wenn Sie eine systemzuwiesene verwaltete Identit√§t aktivieren, wird eine Identit√§t in Azure AD erstellt. Die Identit√§t ist an den **Lebenszyklus dieser Dienstinstanz** gebunden. Wenn die **Ressource** **gel√∂scht** wird, l√∂scht Azure automatisch die Identit√§t f√ºr Sie. Nur diese Azure-Ressource kann diese Identit√§t verwenden, um Token von Azure AD anzufordern.
* **Benutzerzuweisung**. Sie k√∂nnen auch eine verwaltete Identit√§t als eigenst√§ndige Azure-Ressource erstellen. Sie k√∂nnen [eine benutzerzuwiesene verwaltete Identit√§t erstellen](https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/how-to-manage-ua-identity-portal) und sie einer oder **mehreren Instanzen** eines Azure-Dienstes (mehrere Ressourcen) zuweisen. F√ºr benutzerzuwiesene verwaltete Identit√§ten wird die **Identit√§t separat von den Ressourcen verwaltet, die sie verwenden**.
## Rollen & Berechtigungen

**Rollen** werden **Prinzipalen** auf einem **Bereich** zugewiesen: `Prinzipal -[HAT ROLLE]->(Bereich)`

**Rollen**, die an **Gruppen** zugewiesen sind, werden von allen **Mitgliedern** der Gruppe **vererbt**.

Je nachdem, auf welchem Bereich die Rolle zugewiesen wurde, kann die **Rolle** auf **andere Ressourcen** innerhalb des Bereichscontainers **vererbt** werden. Wenn beispielsweise ein Benutzer A eine **Rolle auf das Abonnement** hat, wird er diese **Rolle auf alle Ressourcengruppen** im Abonnement und auf **alle Ressourcen** innerhalb der Ressourcengruppe haben.

### **Klassische Rollen**

| **Besitzer**                  | <ul><li>Voller Zugriff auf alle Ressourcen</li><li>Kann den Zugriff f√ºr andere Benutzer verwalten</li></ul> | Alle Arten von Ressourcen |
| ----------------------------- | ---------------------------------------------------------------------------------------- | ------------------ |
| **Mitwirkender**              | <ul><li>Voller Zugriff auf alle Ressourcen</li><li>Kann den Zugriff nicht verwalten</li></ul> | Alle Arten von Ressourcen |
| **Leser**                     | ‚Ä¢ Alle Ressourcen anzeigen                                                             | Alle Arten von Ressourcen |
| **Benutzerzugriffsadministrator** | <ul><li>Alle Ressourcen anzeigen</li><li>Kann den Zugriff f√ºr andere Benutzer verwalten</li></ul> | Alle Arten von Ressourcen |

### Eingebaute Rollen

[Aus den Dokumenten: ](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles)[Azure rollenbasierte Zugriffssteuerung (Azure RBAC)](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview) verf√ºgt √ºber mehrere Azure **eingebaute Rollen**, die Sie **Benutzern, Gruppen, Dienstprinzipalen und verwalteten Identit√§ten** zuweisen k√∂nnen. Rollenzuweisungen sind der Weg, wie Sie den **Zugriff auf Azure-Ressourcen** steuern. Wenn die eingebauten Rollen nicht den spezifischen Anforderungen Ihrer Organisation entsprechen, k√∂nnen Sie Ihre eigenen [**Azure-Benutzerdefinierten Rollen**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles)** erstellen**.

**Eingebaute** Rollen gelten nur f√ºr die **Ressourcen**, f√ºr die sie **vorgesehen** sind. √úberpr√ºfen Sie beispielsweise diese 2 Beispiele von **eingebauten Rollen √ºber Compute**-Ressourcen:

| [Datentr√§ger-Backup-Leser](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#disk-backup-reader)                 | Erm√∂glicht die Berechtigung zum Durchf√ºhren eines Datentr√§gerbackups im Backup-Tresor.      | 3e5e47e6-65f7-47ef-90b5-e5dd4d455f24 |
| ----------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- | ------------------------------------ |
| [Benutzeranmeldung f√ºr virtuelle Maschinen](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#virtual-machine-user-login) | Anzeigen von virtuellen Maschinen im Portal und Anmelden als regul√§rer Benutzer. | fb879df8-f326-4884-b1cf-06f3ad86be52 |

Diese Rollen k√∂nnen auch √ºber Logikcontainer (wie Verwaltungsgruppen, Abonnements und Ressourcengruppen) zugewiesen werden, und die betroffenen Prinzipale haben sie **√ºber die Ressourcen innerhalb dieser Container**.

* Hier finden Sie eine Liste mit [**allen Azure eingebauten Rollen**](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles).
* Hier finden Sie eine Liste mit [**allen Azure AD eingebauten Rollen**](https://learn.microsoft.com/en-us/azure/active-directory/roles/permissions-reference).

### Benutzerdefinierte Rollen

Azure erm√∂glicht auch die Erstellung von [**benutzerdefinierten Rollen**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles) mit den Berechtigungen, die der Benutzer ben√∂tigt.

### Berechtigung verweigert

* Damit ein **Prinzipal Zugriff auf eine Ressource hat**, ben√∂tigt er eine explizite Rolle, die ihm (auf irgendeine Weise) **diese Berechtigung gew√§hrt**.
* Eine explizite **Verweigerungsrollenzuweisung hat Vorrang** vor der Rolle, die die Berechtigung gew√§hrt.

<figure><img src="../../.gitbook/assets/image (191).png" alt=""><figcaption></figcaption></figure>

### Globaler Administrator

Benutzer mit der Rolle des Globalen Administrators haben die M√∂glichkeit, sich zum Benutzerzugriffsadministrator der Azure-Rolle in der Stammverwaltungsgruppe '**hochzustufen**'. Dies bedeutet, dass ein Globaler Administrator in der Lage sein wird, den Zugriff auf **alle Azure-Abonnements und Verwaltungsgruppen zu verwalten**.\
Diese Hochstufung kann am Ende der Seite durchgef√ºhrt werden: [https://portal.azure.com/#view/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/\~/Properties](https://portal.azure.com/#view/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/\~/Properties)

<figure><img src="../../.gitbook/assets/image (162).png" alt=""><figcaption></figcaption></figure>

### Azure-Richtlinien

Azure-Richtlinien sind eine Reihe von **Regeln und Vorschriften in Microsoft Azure**, einem Cloud-Computing-Dienst, die dabei helfen, organisatorische Standards zu verwalten und durchzusetzen sowie die Einhaltung im gro√üen Ma√üstab zu bewerten. Diese Richtlinien setzen verschiedene Regeln √ºber Ihre **Azure-Ressourcen** durch, um sicherzustellen, dass diese Ressourcen mit den Unternehmensstandards und Service Level Agreements konform bleiben.

Azure-Richtlinien sind entscheidend f√ºr die Cloud-Governance und Sicherheit, um sicherzustellen, dass Ressourcen ordnungsgem√§√ü und effizient genutzt werden und dass sie externen Vorschriften und internen Richtlinien entsprechen.\
Einige Beispiele:

1. **Sicherstellung der Einhaltung bestimmter Azure-Regionen**: Diese Richtlinie stellt sicher, dass alle Ressourcen in bestimmten Azure-Regionen bereitgestellt werden. Beispielsweise m√∂chte ein Unternehmen sicherstellen, dass alle seine Daten in Europa gespeichert sind, um die DSGVO-Konformit√§t zu gew√§hrleisten.
2. **Durchsetzung von Namensstandards**: Richtlinien k√∂nnen Namenskonventionen f√ºr Azure-Ressourcen durchsetzen. Dies hilft bei der Organisation und der einfachen Identifizierung von Ressourcen anhand ihrer Namen, was in gro√üen Umgebungen hilfreich ist.
3. **Einschr√§nkung bestimmter Ressourcentypen**: Diese Richtlinie kann die Erstellung bestimmter Arten von Ressourcen einschr√§nken. Beispielsweise k√∂nnte eine Richtlinie festgelegt werden, um die Erstellung teurer Ressourcentypen wie bestimmter VM-Gr√∂√üen zu verhindern, um die Kosten zu kontrollieren.
4. **Durchsetzung von Tagging-Richtlinien**: Tags sind Schl√ºssel-Wert-Paare, die mit Azure-Ressourcen verbunden sind und f√ºr das Ressourcenmanagement verwendet werden. Richtlinien k√∂nnen durchsetzen, dass bestimmte Tags vorhanden sein m√ºssen oder bestimmte Werte f√ºr alle Ressourcen haben m√ºssen. Dies ist n√ºtzlich f√ºr die Kostenverfolgung, Eigentum oder Kategorisierung von Ressourcen.
5. **Beschr√§nkung des √∂ffentlichen Zugriffs auf Ressourcen**: Richtlinien k√∂nnen durchsetzen, dass bestimmte Ressourcen wie Speicherkonten oder Datenbanken keine √∂ffentlichen Endpunkte haben, um sicherzustellen, dass sie nur innerhalb des Netzwerks der Organisation zug√§nglich sind.
6. **Automatische Anwendung von Sicherheitseinstellungen**: Richtlinien k√∂nnen verwendet werden, um automatisch Sicherheitseinstellungen auf Ressourcen anzuwenden, z. B. das Anwenden einer bestimmten Netzwerksicherheitsgruppe auf alle VMs oder das Sicherstellen, dass alle Speicherkonten Verschl√ºsselung verwenden.

Beachten Sie, dass Azure-Richtlinien an jedem Level der Azure-Hierarchie angeh√§ngt werden k√∂nnen, aber sie werden **√ºblicherweise in der Stammverwaltungsgruppe** oder in anderen Verwaltungsgruppen verwendet.

### Berechtigungsbereich

In Azure k√∂nnen **Berechtigungen einem beliebigen Teil der Hierarchie** zugewiesen werden. Dazu geh√∂ren Verwaltungsgruppen, Abonnements, Ressourcengruppen und einzelne Ressourcen. Berechtigungen werden von enthaltenen **Ressourcen** der Entit√§t, an der sie zugewiesen wurden, **vererbt**.

Diese hierarchische Struktur erm√∂glicht eine effiziente und skalierbare Verwaltung von Zugriffsberechtigungen.

<figure><img src="../../.gitbook/assets/image (26).png" alt=""><figcaption></figcaption></figure>

### Azure RBAC vs ABAC

**RBAC** (rollenbasierte Zugriffssteuerung) ist das, was wir bereits in den vorherigen Abschnitten gesehen haben: **Zuweisen einer Rolle an einen Prinzipal, um ihm Zugriff zu gew√§hren**.\
In einigen F√§llen m√∂chten Sie jedoch eine **feiner abgestimmte Zugriffsverwaltung** bereitstellen oder die Verwaltung von **Hunderten** von Rollenzuweisungen **vereinfachen**.

Azure **ABAC** (attributbasierte Zugriffssteuerung) baut auf Azure RBAC auf, indem **Rollenzuweisungsbedingungen basierend auf Attributen** im Kontext spezifischer Aktionen hinzugef√ºgt werden. Eine _Rollenzuweisungsbedingung_ ist eine **zus√§tzliche √úberpr√ºfung, die Sie optional zu Ihrer Rollenzuweisung hinzuf√ºgen k√∂nnen**, um eine feiner abgestimmte Zugriffssteuerung bereitzustellen. Eine Bedingung filtert die gew√§hrten Berechtigungen als Teil der Rollendefinition und Rollenzuweisung herunter. Beispielsweise k√∂nnen Sie **eine Bedingung hinzuf√ºgen, die erfordert, dass ein Objekt ein bestimmtes Tag haben muss, um das Objekt lesen zu k√∂nnen**.\
Sie **k√∂nnen** keinen **Zugriff auf bestimmte Ressourcen mithilfe von Bedingungen explizit verweigern**.
### Standardbenutzerberechtigungen

Ein Standardbenutzer hat einige **Standardberechtigungen**, um einige Teile von AzureAD aufzulisten:

- Lesen aller Benutzer, Gruppen, Anwendungen, Ger√§te, Rollen, Abonnements und ihrer √∂ffentlichen Eigenschaften
- G√§ste einladen (_kann deaktiviert werden_)
- Sicherheitsgruppen erstellen
- Lesen von nicht versteckten Gruppenmitgliedschaften
- G√§ste zu eigenen Gruppen hinzuf√ºgen
- Neue Anwendung erstellen (_kann deaktiviert werden_)
- Bis zu 50 Ger√§te zu Azure hinzuf√ºgen (_kann deaktiviert werden_)

Die vollst√§ndige [Liste der **Standardberechtigungen von Benutzern** finden Sie in der Dokumentation](https://learn.microsoft.com/en-us/azure/active-directory/fundamentals/users-default-permissions). Beachten Sie au√üerdem, dass in dieser Liste auch die **Standardberechtigungsliste f√ºr G√§ste** enthalten ist.

{% hint style="info" %}
Denken Sie daran, dass der Benutzer eine explizite Genehmigung der Berechtigung ben√∂tigt, um Azure-Ressourcen aufzulisten.
{% endhint %}

### Privileged Identity Management (PIM)

Privileged Identity Management (PIM) in Azure ist ein Tool, das den **privilegierten Zugriff in Azure Active Directory und Azure verwaltet, steuert und √ºberwacht**. Es verbessert die Sicherheit, indem es **zeitlich begrenzten privilegierten Zugriff** bietet, **Genehmigungsworkflows durchsetzt und zus√§tzliche Authentifizierung erfordert**. Dieser Ansatz minimiert das Risiko eines unbefugten Zugriffs, indem sichergestellt wird, dass erh√∂hte Berechtigungen nur gew√§hrt werden, wenn sie erforderlich sind und f√ºr eine bestimmte Dauer gelten.

## Authentifizierungstoken

Es gibt **drei Arten von Tokens**, die in OIDC verwendet werden:

- [**Zugriffstoken**](https://learn.microsoft.com/en-us/azure/active-directory/develop/access-tokens)**:** Der Client pr√§sentiert dieses Token dem Ressourcenserver, um **Ressourcen abzurufen**. Es kann nur f√ºr eine bestimmte Kombination von Benutzer, Client und Ressource verwendet werden und **kann nicht widerrufen werden**, bis es abl√§uft - standardm√§√üig nach 1 Stunde. Die Erkennung ist bei der Verwendung dieses Tokens gering.
- **ID-Token**: Der Client erh√§lt dieses **Token vom Autorisierungsserver**. Es enth√§lt grundlegende Informationen √ºber den Benutzer. Es ist **an eine bestimmte Kombination von Benutzer und Client gebunden**.
- **Auffrischungstoken**: Wird dem Client mit dem Zugriffstoken bereitgestellt. Wird verwendet, um **neue Zugriffs- und ID-Tokens zu erhalten**. Es ist an eine bestimmte Kombination von Benutzer und Client gebunden und kann widerrufen werden. Die Standardablaufzeit betr√§gt **90 Tage** f√ºr inaktive Auffrischungstoken und **kein Ablauf f√ºr aktive Tokens**.

{% hint style="warning" %}
Informationen f√ºr **bedingten Zugriff** werden im **JWT** gespeichert. Wenn Sie also das **Token von einer erlaubten IP-Adresse anfordern**, wird diese **IP-Adresse im Token gespeichert** und Sie k√∂nnen dann dieses Token von einer **nicht erlaubten IP-Adresse aus verwenden, um auf die Ressourcen zuzugreifen**.
{% endhint %}

√úberpr√ºfen Sie die folgende Seite, um verschiedene M√∂glichkeiten zu erlernen, **Zugriffstoken anzufordern** und sich damit anzumelden:

{% content-ref url="az-azuread/" %}
[az-azuread](az-azuread/)
{% endcontent-ref %}

Die h√§ufigsten API-Endpunkte sind:

- **Azure Resource Manager** (ARM): management.azure.com
- **Microsoft Graph**: graph.microsoft.com (Azure AD Graph, der veraltet ist, ist graph.windows.net)

## Referenzen

- [https://learn.microsoft.com/en-us/azure/governance/management-groups/overview](https://learn.microsoft.com/en-us/azure/governance/management-groups/overview)
- [https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions)
- [https://abouttmc.com/glossary/azure-subscription/#:\~:text=An%20Azure%20subscription%20is%20a,the%20subscription%20it%20belongs%20to.](https://abouttmc.com/glossary/azure-subscription/)
- [https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource)
