# Az - рдЕрдкреНрд░рдорд╛рдгрд┐рдд рдЬрд╛рдБрдЪ рдФрд░ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдкреНрд░рд╡реЗрд╢

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣ рдЕрдирдиреНрдп [**NFTs**](https://opensea.io/collection/the-peass-family)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **рддрдХ** рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдХреЛ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## Azure Tenant

### Tenant рдЬрд╛рдБрдЪ

рдХреБрдЫ **рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ Azure APIs** рд╣реИрдВ рдЬрд┐рдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЗрд╡рд▓ **рдЯреЗрдиреЗрдВрдЯ рдХреЗ рдбреЛрдореЗрди** рдХреЛ рдЬрд╛рдирддреЗ рд╣реБрдП рдкреВрдЫрддрд╛рдЫ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЙрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХреЗред\
рдЖрдк рд╕реАрдзреЗ API рдХреЛ рдХреНрд╡реЗрд░реА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ PowerShell рдкреБрд╕реНрддрдХрд╛рд▓рдп [**AADInternals**](https://github.com/Gerenios/AADInternals)** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**:

| API                                                                  | рдЬрд╛рдирдХрд╛рд░реА                                                                                   | AADInternals рдХрд╛рд░реНрдп                             |
| -------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- | ------------------------------------------------- |
| login.microsoftonline.com/\<domain>/.well-known/openid-configuration | **рд▓реЙрдЧрд┐рди рдЬрд╛рдирдХрд╛рд░реА**, рдЯреЗрдиреЗрдВрдЯ ID рд╕рд╣рд┐рдд                                                    | `Get-AADIntTenantID -Domain <domain>`             |
| autodiscover.s.outlook.com/autodiscover/autodiscover.svc             | рдЯреЗрдиреЗрдВрдЯ рдХреЗ **рд╕рднреА рдбреЛрдореЗрди**                                                                 | `Get-AADIntTenantDomains -Domain <domain>`        |
| login.microsoftonline.com/GetUserRealm.srf?login=\<UserName>         | рдЯреЗрдиреЗрдВрдЯ рдХреА **рд▓реЙрдЧрд┐рди рдЬрд╛рдирдХрд╛рд░реА**, рдЯреЗрдиреЗрдВрдЯ рдирд╛рдо рдФрд░ рдбреЛрдореЗрди **рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдкреНрд░рдХрд╛рд░** рд╕рд╣рд┐рдд | `Get-AADIntLoginInformation -UserName <UserName>` |
| login.microsoftonline.com/common/GetCredentialType                   | рд▓реЙрдЧрд┐рди рдЬрд╛рдирдХрд╛рд░реА, рдЬрд┐рд╕рдореЗрдВ **рдбреЗрд╕реНрдХрдЯреЙрдк SSO рдЬрд╛рдирдХрд╛рд░реА** рд╢рд╛рдорд┐рд▓ рд╣реИ                                 | `Get-AADIntLoginInformation -UserName <UserName>` |

рдЖрдк **рдПрдХ рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде** [**AADInternals**](https://github.com/Gerenios/AADInternals) **рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ** рдПрдХ Azure tenant рдХреА рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдХреНрд╡реЗрд░реА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```powershell
Invoke-AADIntReconAsOutsider -DomainName corp.onmicrosoft.com | Format-Table
```
рдПрдЬрд╝реНрдпреВрд░ рдЯреЗрдиреЗрдВрдЯ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдЖрдЙрдЯрдкреБрдЯ:
```
Tenant brand:       Company Ltd
Tenant name:        company
Tenant id:          05aea22e-32f3-4c35-831b-52735704feb3
DesktopSSO enabled: True

Name                           DNS   MX    SPF  Type      STS
----                           ---   --    ---  ----      ---
company.com                   True  True  True  Federated sts.company.com
company.mail.onmicrosoft.com  True  True  True  Managed
company.onmicrosoft.com       True  True  True  Managed
int.company.com              False False False  Managed
```
рдЖрдЙрдЯрдкреБрдЯ рд╕реЗ рд╣рдо рд▓рдХреНрд╖рд┐рдд рд╕рдВрдЧрдарди рдХреА рдЯреЗрдиреЗрдВрдЯ рдЬрд╛рдирдХрд╛рд░реА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдЯреЗрдиреЗрдВрдЯ рдХрд╛ рдирд╛рдо, рдЖрдИрдбреА рдФрд░ "рдмреНрд░рд╛рдВрдб" рдирд╛рдо рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рд╣рдо рдпрд╣ рднреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ **рдХреНрдпрд╛ рдбреЗрд╕реНрдХрдЯреЙрдк рдПрд╕рдПрд╕рдУ (рдЬрд┐рд╕реЗ** [**рд╕рд╣рдЬ рдПрд╕рдПрд╕рдУ**](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-sso)** рднреА рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ) рд╕рдХреНрд╖рдо рд╣реИ**ред рдпрджрд┐ рд╕рдХреНрд╖рдо рд╣реИ, рддреЛ рд╣рдо рдпрд╣ рдЬрд╛рди рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд▓рдХреНрд╖рд┐рдд рд╕рдВрдЧрдарди рдореЗрдВ рджрд┐рдП рдЧрдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдореМрдЬреВрдж рд╣реИрдВ рдпрд╛ рдирд╣реАрдВ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЧрдгрдирд╛)ред

рд╣рдо рд▓рдХреНрд╖рд┐рдд рдЯреЗрдиреЗрдВрдЯ рдХреЗ рд╕рднреА (рд╕рддреНрдпрд╛рдкрд┐рдд) рдбреЛрдореЗрдиреЛрдВ рдХреЗ рдирд╛рдо рдФрд░ рдЙрдирдХреЗ рдкрд╣рдЪрд╛рди рдкреНрд░рдХрд╛рд░ рднреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред рд╕рдВрдШрдЯрд┐рдд рдбреЛрдореЗрдиреЛрдВ рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ (рдЖрдорддреМрд░ рдкрд░ ADFS рд╕рд░реНрд╡рд░) рдХрд╛ FQDN рднреА рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред MX рд╕реНрддрдВрдн рдпрд╣ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдИрдореЗрд▓ Exchange рдСрдирд▓рд╛рдЗрди рдкрд░ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред SPF рд╕реНрддрдВрдн рдпрд╣ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ Exchange рдСрдирд▓рд╛рдЗрди рдИрдореЗрд▓ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рдХреЗ рд░реВрдк рдореЗрдВ рджрд░реНрдЬ рд╣реИред **рдиреЛрдЯ!** рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдпрд╣ рд░рд┐рдХреЙрди рдлрд╝рдВрдХреНрд╢рди SPF рд░рд┐рдХреЙрд░реНрдб рдХреЗ рд╕рдорд╛рд╡реЗрд╢ рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдХрд╛ рдкрд╛рд▓рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣рд╛рдВ рдЧрд▓рдд-рдирдХрд╛рд░рд╛рддреНрдордХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

### рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЧрдгрдирд╛

рдЯреЗрдиреЗрдВрдЯ рдХреЗ рдЕрдВрджрд░ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдореМрдЬреВрдж рд╣реЛрдиреЗ рдХреА **рдЬрд╛рдВрдЪ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ**ред рдЗрд╕рдореЗрдВ **рдореЗрд╣рдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдПрдВ** рднреА рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдЗрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ:
```
<email>#EXT#@<tenant name>.onmicrosoft.com
```
рдИрдореЗрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдИрдореЗрд▓ рдкрддрд╛ рд╣реИ рдЬрд╣рд╛рдВ "рдПрдЯ" рдХреЛ рдЕрдВрдбрд░рд╕реНрдХреЛрд░ "_" рд╕реЗ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

[**AADInternals**](https://github.com/Gerenios/AADInternals) рдХреЗ рд╕рд╛рде, рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рдпрд╣ рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдореМрдЬреВрдж рд╣реИ рдпрд╛ рдирд╣реАрдВ:
```powershell
# Check does the user exist
Invoke-AADIntUserEnumerationAsOutsider -UserName "user@company.com"
```
# Az Unauthenticated Enum and Initial Entry

## Introduction

This document provides a step-by-step guide on how to perform unauthenticated enumeration and gain initial entry in an Azure environment. It covers various techniques and tools that can be used to identify vulnerabilities and exploit them to gain unauthorized access.

## Table of Contents

- [Enumeration Techniques](#enumeration-techniques)
- [Exploitation Techniques](#exploitation-techniques)
- [Post-Exploitation Techniques](#post-exploitation-techniques)
- [Conclusion](#conclusion)

## Enumeration Techniques

### 1. DNS Enumeration

DNS enumeration involves gathering information about the DNS infrastructure of the target Azure environment. This can be done using tools like `dnsrecon` or `dnsenum`. The goal is to identify subdomains, DNS records, and potential misconfigurations that can be exploited.

### 2. Service Enumeration

Service enumeration involves identifying the services running in the target Azure environment. This can be done using tools like `nmap` or `masscan`. The goal is to identify open ports, services, and potential vulnerabilities that can be exploited.

### 3. Web Application Enumeration

Web application enumeration involves identifying web applications hosted in the target Azure environment. This can be done using tools like `dirb` or `gobuster`. The goal is to identify hidden directories, files, and potential vulnerabilities that can be exploited.

## Exploitation Techniques

### 1. Default Credentials

Default credentials are often used by administrators during the initial setup of Azure services. Exploiting default credentials involves trying common username/password combinations to gain unauthorized access. Tools like `Hydra` or `Medusa` can be used for this purpose.

### 2. Brute-Force Attacks

Brute-force attacks involve systematically trying all possible combinations of usernames and passwords to gain unauthorized access. Tools like `Hydra` or `Medusa` can be used for this purpose. It is important to use a strong password list and implement rate limiting to avoid detection.

### 3. Vulnerability Exploitation

Vulnerability exploitation involves identifying and exploiting vulnerabilities in the target Azure environment. This can be done using tools like `Metasploit` or `ExploitDB`. It is important to keep the tools and exploits up to date to ensure maximum effectiveness.

## Post-Exploitation Techniques

### 1. Privilege Escalation

Privilege escalation involves gaining higher privileges in the target Azure environment. This can be done by exploiting misconfigurations, vulnerabilities, or weak access controls. Tools like `PowerUp` or `Windows Exploit Suggester` can be used for this purpose.

### 2. Persistence

Persistence involves maintaining access to the target Azure environment even after a successful exploitation. This can be done by creating backdoors, adding new user accounts, or modifying existing configurations. Tools like `Mimikatz` or `Empire` can be used for this purpose.

### 3. Data Exfiltration

Data exfiltration involves stealing sensitive data from the target Azure environment. This can be done by accessing and copying files, extracting database contents, or capturing network traffic. Tools like `Rsync` or `Wireshark` can be used for this purpose.

## Conclusion

Unauthenticated enumeration and initial entry in an Azure environment can be achieved by following the techniques and tools mentioned in this document. It is important to perform these activities responsibly and with proper authorization.
```
UserName         Exists
--------         ------
user@company.com True
```
рдЖрдк рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдПрдХ рдИрдореЗрд▓ рдкрддрд╛ рд░рдЦрдиреЗ рд╡рд╛рд▓реЗ рдПрдХ рдкрд╛рда рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
user@company.com
user2@company.com
admin@company.com
admin2@company.com
external.user_gmail.com#EXT#@company.onmicrosoft.com
external.user_outlook.com#EXT#@company.onmicrosoft.com
```

```powershell
# Invoke user enumeration
Get-Content .\users.txt | Invoke-AADIntUserEnumerationAsOutsider -Method Normal
```
рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП **рддреАрди рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЬрд╛рдБрдЪ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ** рд╣реИрдВ:

| рддрд░реАрдХрд╛    | рд╡рд┐рд╡рд░рдг                                                                                                                                                                                             |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| рд╕рд╛рдорд╛рдиреНрдп    | рдпрд╣ рдЙрдкрд░реЛрдХреНрдд GetCredentialType API рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рддрд░реАрдХрд╛ред                                                                                                                           |
| рд▓реЙрдЧрд┐рди     | <p>рдпрд╣ рддрд░реАрдХрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧ рдЗрди рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИред<br><strong>рдиреЛрдЯ:</strong> рдХреНрд╡реЗрд░реА рд╕рд╛рдЗрди-рдЗрди рд▓реЙрдЧ рдореЗрдВ рд▓реЙрдЧ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред</p>                                                                                       |
| рдСрдЯреЛрд▓реЙрдЧрд┐рди | <p>рдпрд╣ рддрд░реАрдХрд╛ рдСрдЯреЛрд▓реЙрдЧрд┐рди рдЕрдВрдд рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧ рдЗрди рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИред<br><strong>рдХреНрд╡реЗрд░реА рд╕рд╛рдЗрди-рдЗрди рд▓реЙрдЧ рдореЗрдВ рд▓реЙрдЧ рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ</strong>! рдЗрд╕рд▓рд┐рдП, рдпрд╣ рдкрд╛рд╕рд╡рд░реНрдб рд╕реНрдкреНрд░реЗ рдФрд░ рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕ рд╣рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рднреА рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред</p> |

рдорд╛рдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦреЛрдЬрдиреЗ рдХреЗ рдмрд╛рдж рдЖрдк **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА** рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```powershell
Get-AADIntLoginInformation -UserName root@corp.onmicrosoft.com
```
рд╕реНрдХреНрд░рд┐рдкреНрдЯ [**o365creeper**](https://github.com/LMGsec/o365creeper) рдЖрдкрдХреЛ рдпрд╣ рднреА рдЦреЛрдЬрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдХрд┐ **рдПрдХ рдИрдореЗрд▓ рдорд╛рдиреНрдп рд╣реИ рдпрд╛ рдирд╣реАрдВ**ред
```powershell
# Put in emails.txt emails such as:
# - root@corp.onmicrosoft.com
python.exe .\o365creeper\o365creeper.py -f .\emails.txt -o validemails.txt
```
## рдПрдЬрд╝реНрдпреВрд░ рд╕реЗрд╡рд╛рдПрдВ

рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдПрдЬрд╝реНрдпреВрд░ рдЯреЗрдиреЗрдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ **рдбреЛрдореЗрди** рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, рдЕрдм рд╣рдореЗрдВ **рдПрдЬрд╝реНрдпреВрд░ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдвреВрдВрдврдиреЗ** рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреА рд╣реИред

рдЖрдк [**MicroBurst**](https://github.com/NetSPI/MicroBurst) рдХреЗ рдПрдХ рддрд░реАрдХреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЗрд╕ рд▓рдХреНрд╖реНрдп рдХреЗ рд▓рд┐рдПред рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдХрдИ **рдПрдЬрд╝реНрдпреВрд░ рд╕реЗрд╡рд╛ рдбреЛрдореЗрдиреЛрдВ** рдореЗрдВ рдмреЗрд╕ рдбреЛрдореЗрди рдирд╛рдо (рдФрд░ рдХреБрдЫ рдкрд░рд┐рд╡рд░реНрддрди) рдХреА рдЦреЛрдЬ рдХрд░реЗрдЧрд╛:
```powershell
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
## рдЦреБрд▓реА рд╕рдВрдЧреНрд░рд╣рдг

рдЖрдк рдРрд╕реЗ рдЙрдкрдХрд░рдг рдХреЗ рд╕рд╛рде рдЦреБрд▓реА рд╕рдВрдЧреНрд░рд╣рдг рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ [**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1) рдЬреЛ рдлрд╝рд╛рдЗрд▓ **`Microburst/Misc/permitations.txt`** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ рддрд╛рдХрд┐ рдкрд░рд┐рд╡рд░реНрддрди (рдмрд╣реБрдд рд╕рд░рд▓) рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХреЗрдВ рдФрд░ рдЦреЛрд▓реЗ рдЧрдП рд╕рдВрдЧреНрд░рд╣рдг рдЦрд╛рддреЛрдВ рдХреА рдЦреЛрдЬ рдХрд░реЗрдВред
```powershell
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
### SAS URLs

рдПрдХ _**рд╕рд╛рдЭрд╛ рдкрд╣реБрдВрдЪ рд╕рдВрдХреЗрдд**_ (SAS) URL рдПрдХ URL рд╣реИ рдЬреЛ рдХрд┐рд╕реА рд╕рдВрдЧреНрд░рд╣рдг рдЦрд╛рддреЗ рдХреЗ рдирд┐рд╢реНрдЪрд┐рдд рд╣рд┐рд╕реНрд╕реЗ (рдкреВрд░реЗ рд╕рдВрдЧреНрд░рд╣рдг, рдПрдХ рдлрд╝рд╛рдЗрд▓...) рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХреБрдЫ рд╡рд┐рд╢реЗрд╖ рдЕрдиреБрдорддрд┐рдпрд╛рдБ (рдкрдврд╝рдирд╛, рд▓рд┐рдЦрдирд╛...) рд╣реЛрддреА рд╣реИрдВред рдпрджрд┐ рдЖрдкрдХреЛ рдПрдХ рд▓реАрдХ рдорд┐рд▓ рдЬрд╛рддреА рд╣реИ рддреЛ рдЖрдк рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рд╡реЗ рдЗрд╕ рддрд░рд╣ рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ (рдпрд╣ рдПрдХ рд╕рдВрдЧреНрд░рд╣рдг рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рд╣реИ, рдпрджрд┐ рдпрд╣ рдХреЗрд╡рд▓ рдПрдХ рдлрд╝рд╛рдЗрд▓ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░ рд░рд╣рд╛ рд╣реЛрддрд╛ рддреЛ URL рдХрд╛ рдкрде рдЙрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЛ рднреА рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдЧрд╛):

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП [**рд╕рдВрдЧреНрд░рд╣рдг рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░**](https://azure.microsoft.com/en-us/features/storage-explorer/) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

## рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рд╣рд╛рдирд┐ рдкрд╣реБрдВрдЪрд╛рдПрдВ

### рдлрд┐рд╢рд┐рдВрдЧ

* [**рд╕рд╛рдорд╛рдиреНрдп рдлрд┐рд╢рд┐рдВрдЧ**](https://book.hacktricks.xyz/generic-methodologies-and-resources/phishing-methodology) (рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдпрд╛ OAuth рдРрдк -[рдЕрд╡реИрдз рд╕рд╣рдорддрд┐ рдЕрдиреБрджрд╛рди рд╣рдорд▓рд╛](az-illicit-consent-grant.md)-)
* [**рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛрдб рдкреНрд░рдорд╛рдгреАрдХрд░рдг** рдлрд┐рд╢рд┐рдВрдЧ](az-device-code-authentication-phishing.md)

### рдкрд╛рд╕рд╡рд░реНрдб рд╕реНрдкреНрд░реЗрдЗрдВрдЧ / рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕

{% content-ref url="az-password-spraying.md" %}
[az-password-spraying.md](az-password-spraying.md)
{% endcontent-ref %}

## рд╕рдВрджрд░реНрдн

* [https://o365blog.com/post/just-looking/](https://o365blog.com/post/just-looking/)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣](https://discord.gg/hRep4RUj7f) рдпрд╛ [рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдХреЛред

</details>
