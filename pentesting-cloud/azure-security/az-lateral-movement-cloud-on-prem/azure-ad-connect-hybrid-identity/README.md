# Az AD Connect - Kitambulisho cha Mchanganyiko

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana katika HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## Taarifa Msingi

Ushirikiano kati ya **Active Directory (AD) ya On-premises** na **Azure AD** unarahisishwa na **Azure AD Connect**, ukitumia njia mbalimbali zinazosaidia **Single Sign-on (SSO)**. Kila njia, ingawa ni muhimu, inaweza kuwa na mapungufu ya usalama yanayoweza kutumiwa kudhoofisha mazingira ya wingu au ya on-premises:

* **Uthibitishaji wa Kupitia (PTA)**:
- Uwezekano wa kudhoofisha wakala kwenye AD ya on-prem, kuruhusu uthibitishaji wa nywila za watumiaji kwa ajili ya mawasiliano ya Azure (on-prem hadi Wingu).
- Uwezekano wa kujiandikisha wakala mpya kwa ajili ya kuthibitisha uthibitisho mahali mpya (Wingu hadi on-prem).

{% content-ref url="pta-pass-through-authentication.md" %}
[pta-pass-through-authentication.md](pta-pass-through-authentication.md)
{% endcontent-ref %}

* **Sawazisha Nywila (PHS)**:
- Uwezekano wa kutoa nywila za maandishi wazi za watumiaji wenye mamlaka kutoka kwenye AD, ikiwa ni pamoja na vyeti vya mtumiaji wa AzureAD aliye na mamlaka ya juu, yanayojengwa kiotomatiki.

{% content-ref url="phs-password-hash-sync.md" %}
[phs-password-hash-sync.md](phs-password-hash-sync.md)
{% endcontent-ref %}

* **Muungano**:
- Wizi wa ufunguo binafsi unaotumiwa kwa ajili ya kusaini SAML, kuruhusu udanganyifu wa utambulisho wa on-prem na vitambulisho vya wingu.

{% content-ref url="federation.md" %}
[federation.md](federation.md)
{% endcontent-ref %}

* **SSO Isiyokuwa na Vikwazo:**
- Wizi wa nywila ya mtumiaji wa `AZUREADSSOACC`, inayotumiwa kwa ajili ya kusaini tiketi za fedha za Kerberos, kuruhusu udanganyifu wa mtumiaji yeyote wa wingu.

{% content-ref url="seamless-sso.md" %}
[seamless-sso.md](seamless-sso.md)
{% endcontent-ref %}

* **Uaminifu wa Kerberos wa Wingu**:
- Uwezekano wa kujiongezea kutoka kwa Msimamizi Mkuu hadi kwa Msimamizi wa Domain wa on-prem kwa kubadilisha majina ya watumiaji na SIDs wa AzureAD na kuomba TGT kutoka AzureAD.

{% content-ref url="az-cloud-kerberos-trust.md" %}
[az-cloud-kerberos-trust.md](az-cloud-kerberos-trust.md)
{% endcontent-ref %}

* **Programu za Chaguo-msingi**:
- Kudhoofisha akaunti ya Msimamizi wa Programu au Akaunti ya Usawazishaji wa On-premise kunaruhusu mabadiliko ya mipangilio ya saraka, uanachama wa vikundi, akaunti za watumiaji, tovuti za SharePoint, na faili za OneDrive.

{% content-ref url="az-default-applications.md" %}
[az-default-applications.md](az-default-applications.md)
{% endcontent-ref %}

Kwa kila njia ya ushirikiano, usawazishaji wa watumiaji unafanywa, na akaunti ya `MSOL_<kitambulisho cha usakinishaji>` inaundwa kwenye AD ya on-prem. Kwa umuhimu, njia zote za **PHS** na **PTA** zinarahisisha **SSO Isiyokuwa na Vikwazo**, kuruhusu kuingia moja kwa moja kwa kompyuta za Azure AD zilizounganishwa kwenye kikoa cha on-prem.

Ili kuthibitisha usakinishaji wa **Azure AD Connect**, amri ifuatayo ya PowerShell, ikitumia moduli ya **AzureADConnectHealthSync** (iliyosakinishwa kiotomatiki na Azure AD Connect), inaweza kutumika:
```powershell
Get-ADSyncConnector
```
<details>

<summary><strong>Jifunze AWS hacking kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kuhack kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
