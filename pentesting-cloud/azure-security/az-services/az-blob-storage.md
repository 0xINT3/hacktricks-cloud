# Az - рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

## рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

рдПрдЬрд╝реНрдпреВрд░ рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ рдорд╛рдЗрдХреНрд░реЛрд╕реЙрдлреНрдЯ рдХрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ **рд╕реНрдЯреЛрд░реЗрдЬ рд╕рдорд╛рдзрд╛рди** рд╣реИред рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ рд╡рд┐рд╢рд╛рд▓ рдорд╛рддреНрд░рд╛ рдореЗрдВ рдЕрд╕рдВрд░рдЪрд┐рдд рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рд╣реИред рдЕрд╕рдВрд░рдЪрд┐рдд рдбреЗрдЯрд╛ рд╡рд╣ рдбреЗрдЯрд╛ рд╣реИ рдЬреЛ рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖ рдбреЗрдЯрд╛ рдореЙрдбрд▓ рдпрд╛ рдкрд░рд┐рднрд╛рд╖рд╛ рдХрд╛ рдкрд╛рд▓рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдкрд╛рда рдпрд╛ рдмрд╛рдЗрдирд░реА рдбреЗрдЯрд╛ред

рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ рддреАрди рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:

* **рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддрд╛** (рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рдо)
* рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рдореЗрдВ рдПрдХ **рдХрдВрдЯреЗрдирд░** (рдлрд╝реЛрд▓реНрдбрд░)
* рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдПрдХ **рдмреНрд▓реЙрдм**

<figure><img src="../../../.gitbook/assets/image (6) (2).png" alt=""><figcaption></figcaption></figure>

### рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рд╕рдВрдЧреНрд░рд╣рдг

| **рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ**                 | <p><code>https://&#x3C;storage-account>.blob.core.windows.net</code><br><br><code>https://&#x3C;stg-acc>.blob.core.windows.net/&#x3C;container-name>?restype=container&#x26;comp=list</code></p> |
| -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **рдПрдЬрд╝реНрдпреВрд░ рдбреЗрдЯрд╛ рд▓реЗрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдЬреЗрди2** | `https://<storage-account>.dfs.core.windows.net`                                                                                                                                                 |
| **рдПрдЬрд╝реНрдпреВрд░ рдлрд╝рд╛рдЗрд▓реЗрдВ**                  | `https://<storage-account>.file.core.windows.net`                                                                                                                                                |
| **рдХрддрд╛рд░ рд╕рдВрдЧреНрд░рд╣рдг**                | `https://<storage-account>.queue.core.windows.net`                                                                                                                                               |
| **рдЯреЗрдмрд▓ рд╕рдВрдЧреНрд░рд╣рдг**                | `https://<storage-account>.table.core.windows.net`                                                                                                                                               |

### рд╕рдВрдЧреНрд░рд╣рдг рддрдХ рдкрд╣реБрдВрдЪ <a href="#about-blob-storage" id="about-blob-storage"></a>

* **RBAC рднреВрдорд┐рдХрд╛рдУрдВ** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдЬрд╝реНрдпреВрд░ рдПрдбреА рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА**: рд╕рдВрдЧреНрд░рд╣рдг рдЦрд╛рддреЗ рдХреА рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред рдЗрд╕рд╕реЗ рд╕рдВрдЧреНрд░рд╣рдг рдЦрд╛рддреЗ рдХрд╛ рдкреВрд░реНрдг рдЙрдкрдпреЛрдЧ рд╣реЛрддрд╛ рд╣реИред
* **рд╕рд╛рдЭрд╛ рдЙрдкрдпреЛрдЧ рд╕рдВрдХреЗрддрд╛рдВрдХ** (SAS): рд╕рдордп **рд╕реАрдорд┐рдд** рдФрд░ рд╡рд┐рд╢реЗрд╖ рдЕрдиреБрдорддрд┐рдпрд╛рдБред
* рдЖрдк рдПрдХ рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рде рдПрдХ SAS URL рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдкрддрд╛ рд▓рдЧрд╛рдирд╛ рдереЛрдбрд╝рд╛ рдХрдард┐рди рд╣реЛрддрд╛ рд╣реИ)ред

### рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкреНрд░рдХрдЯрддрд╛

рдпрджрд┐ "рдмреНрд▓реЙрдм рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкрд╣реБрдВрдЪ" рд╕рдХреНрд╖рдо рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдХреНрд╖рдо), рддреЛ рдирд┐рдореНрди рдХрд╛рд░реНрд░рд╡рд╛рдИ рд╕рдВрднрд╡ рд╣реИ:

* **рдмреНрд▓реЙрдм рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкрд╣реБрдВрдЪ рджреЗрдирд╛** (рдЖрдкрдХреЛ рдирд╛рдо рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП)ред
* **рдХрдВрдЯреЗрдирд░ рдмреНрд▓реЙрдмреНрд╕ рдХреА рд╕реВрдЪреА** рдФрд░ рдЙрдиреНрд╣реЗрдВ **рдкрдврд╝рдирд╛**ред

### рд╕рдВрдЧреНрд░рд╣рдг рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ

рдпрджрд┐ рдЖрдкрдХреЛ рдХреЛрдИ **рд╕рдВрдЧреНрд░рд╣рдг** рдорд┐рд▓рддрд╛ рд╣реИ рддреЛ рдЖрдк рдЙрдкрдХрд░рдг [**Microsoft Azure Storage Explorer**](https://azure.microsoft.com/es-es/products/storage/storage-explorer/) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрд╕рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

## SAS URLs

рд╕рд╛рдЭрд╛ рдЙрдкрдпреЛрдЧ рд╕рдВрдХреЗрддрд╛рдВрдХ (SAS) рдЖрдкрдХреЗ рд╕рдВрдЧреНрд░рд╣рдг рдЦрд╛рддреЗ рдореЗрдВ рд╕рдВрд╕рд╛рдзрд┐рдд рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реБрд░рдХреНрд╖рд┐рдд рдЕрдзрд┐рдХреГрдд рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред SAS рдХреЗ рд╕рд╛рде, рдЖрдкрдХреЗ рдкрд╛рд╕ рдбреЗрдЯрд╛ рддрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреА рдХреИрд╕реЗ рдкрд╣реБрдВрдЪ рд╣реЛрдЧреА рдкрд░ рд╡рд┐рд╕реНрддреГрдд рдирд┐рдпрдВрддреНрд░рдг рд╣реЛрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:

* рдХреНрд▓рд╛рдЗрдВрдЯ рдХрд┐рди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИред
* рдЙрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдирдХреА рдХреНрдпрд╛ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВред
* SAS рдХрд┐рддрдирд╛ рд╕рдордп рддрдХ рдорд╛рдиреНрдп рд╣реИред

SAS URL рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: **`https://<container_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`**

рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП [**рд╕реНрдЯреЛрд░реЗрдЬ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░**](https://azure.microsoft.com/en-us/features/storage-explorer/) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдпрд╛ рдкрд╛рдпрдерди:

{% code overflow="wrap" %}
```python
#pip3 install azure-storage-blob
from azure.storage.blob import BlobServiceClient

# List containers
conn_str="<SAS URL>"
svc = BlobServiceClient.from_connection_string(conn_str=conn_str)
for c in svc.list_containers():
print(c['name']

# List blobs inside conteiner
container = svc.get_container_client(container="<container_name>")
for b in container.list_blobs():
print(b['name']

# Download file
blob = svc.get_blob_client(container="<container_name>",blob="<blob_name>")
with open("download.out","wb") as f:
f.write(blob.download_blob().readall())
```
{% endcode %}

### рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдзрд┐рдХрд╛рд░ рд╕рдорд░реНрдкрдг SAS <a href="#user-delegation-sas" id="user-delegation-sas"></a>

рдЖрдк рдпрд╛ рддреЛ Azure Active Directory (Azure AD) рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдпрд╛ рдЦрд╛рддрд╛ рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдХрдВрдЯреЗрдирд░, рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдпрд╛ рдмреНрд▓реЙрдм рдХреЗ рд▓рд┐рдП **рд╕рд╛рдЭрд╛ рдкрд╣реБрдВрдЪ рдЪрд┐рд╣реНрди (SAS)** рдЯреЛрдХрди рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд░реНрдкрдг SAS рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд░реНрдкрдг рдХреБрдВрдЬреА** рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬрд┐рд╕реЗ рдЖрдк рдлрд┐рд░ SAS рдХреЛ рд╕рд╛рдЗрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред

рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд░реНрдкрдг SAS рдХреЛ **Azure Blob Storage** рдФрд░ **Azure Data Lake Storage Gen2** рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд░реНрдкрдг SAS рдХреЗ рд▓рд┐рдП **рд╕рдВрдЧреНрд░рд╣рд┐рдд рдкрд╣реБрдВрдЪ рдиреАрддрд┐рдпрд╛рдБ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИрдВ**ред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд░реНрдкрдг SAS **рд╕рдВрдЧреНрд░рд╣рд┐рдд рдкрд╣реБрдВрдЪ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдмрдЬрд╛рдп Azure AD рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реЛрддрд╛ рд╣реИ**ред рдЗрд╕рд╕реЗ рдпрд╣ рд░реЛрдХрддрд╛ рд╣реИ рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ/рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХреБрдВрдЬреА рд╕реНрдЯреЛрд░/рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд░рдХреЗ SAS рдмрдирд╛рдПрдВред

### рд╕реЗрд╡рд╛ SAS

рд╕реЗрд╡рд╛ SAS рдХреЛ **рд╕рдВрдЧреНрд░рд╣рд┐рдд рдЦрд╛рддрд╛ рдХреБрдВрдЬреА** рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд╕реЗрд╡рд╛ SAS рдПрдХрдорд╛рддреНрд░ рдПрдХ Azure Storage рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ (рдмреНрд▓реЙрдм рд╕рдВрдЧреНрд░рд╣рдг, рдХрддрд╛рд░ рд╕рдВрдЧреНрд░рд╣рдг, рд╕рд╛рд░рдгреА рд╕рдВрдЧреНрд░рд╣рдг рдпрд╛ Azure рдлрд╝рд╛рдЗрд▓реЗрдВ) рдореЗрдВ рд╕рдВрд╕рд╛рдзрд┐рдд рдкрд╣реБрдВрдЪ рдХрд░рд╛рддрд╛ рд╣реИред рд╕реЗрд╡рд╛ рд╕реНрддрд░ рдХреЗ SAS рдХреЗ рд▓рд┐рдП URI рдореЗрдВ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдХреА URI, рдЙрд╕ SAS рдЯреЛрдХрди рдХреЗ рдмрд╛рдж рдЖрддрд╛ рд╣реИред

рдПрдХ **рдХрдВрдЯреЗрдирд░** рдпрд╛ **рдмреНрд▓реЙрдм** рдХреЗ рд▓рд┐рдП SAS рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Azure Active Directory (Azure AD) рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд░реНрдкрдг SAS** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

### рдЦрд╛рддрд╛ SAS

рдЦрд╛рддрд╛ SAS рдХреЛ рджреЛ рдореЗрдВ рд╕реЗ рдПрдХ **рд╕рдВрдЧреНрд░рд╣рд┐рдд рдЦрд╛рддрд╛ рдХреБрдВрдЬреА** рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдпрд╣рд╛рдВ 2 рд╣реЛрддреА рд╣реИрдВ)ред рдЦрд╛рддрд╛ SAS рдПрдХ рдпрд╛ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрдЧреНрд░рд╣ рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд╕рдВрд╕рд╛рдзрд┐рдд рдкрд╣реБрдВрдЪ рдХрд░рд╛рддрд╛ рд╣реИред рд╕реЗрд╡рд╛ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд░реНрдкрдг SAS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╕рднреА рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпрд╛рдБ рдПрдХ рдЦрд╛рддрд╛ SAS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рднреА рдЙрдкрд▓рдмреНрдз рд╣реЛрддреА рд╣реИрдВред

рдПрдХ рдЦрд╛рддрд╛ SAS рдмрдирд╛рдХрд░, рдЖрдк:

* рд╕реЗрд╡рд╛-рд╕реНрддрд░ рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпреЛрдВ рдХреЛ рд╕рдорд░реНрдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд╕реЗрд╡рд╛-рд╡рд┐рд╢реЗрд╖рд┐рдд SAS рдХреЗ рд╕рд╛рде рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВ, рдЬреИрд╕реЗ `Get/Set Service Properties` рдФрд░ `Get Service Stats` рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпрд╛рдБред
* рдПрдХ рд╕рдВрдЧреНрд░рд╣ рдЦрд╛рддреЗ рдореЗрдВ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╕реЗрд╡рд╛ рдореЗрдВ рдкрд╣реБрдВрдЪ рд╕рдорд░реНрдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ рдЦрд╛рддрд╛ SAS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╕рд╛рде Azure Blob Storage рдФрд░ Azure Files рдореЗрдВ рд╕рдВрд╕рд╛рдзрд┐рдд рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рд╕рдорд░реНрдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рдХрдВрдЯреЗрдирд░, рдХрддрд╛рд░, рд╕рд╛рд░рдгреА рдФрд░ рдлрд╝рд╛рдЗрд▓ рд╢реЗрдпрд░ рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦрдиреЗ рдФрд░ рд╣рдЯрд╛рдиреЗ рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рд╕рдорд░реНрдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдПрдХ рд╡рд╕реНрддреБ-рд╡рд┐рд╢реЗрд╖рд┐рдд SAS рдХреЗ рд╕рд╛рде рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред
* рдПрдХ IP рдкрддрд╛ рдпрд╛ IP рдкрддреЗ рдХреА рд╢реНрд░реЗрдгреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЕрдиреБрд░реЛрдз рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред
* рдЕрдиреБрд░реЛрдз рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП HTTP рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (HTTPS рдпрд╛ HTTP/HTTPS рдХреЗ рд░реВрдк рдореЗрдВ)ред

## рдЧрдгрдирд╛

{% tabs %}
{% tab title="az cli" %}
{% code overflow="wrap" %}
```bash
# Get storage accounts
az storage account list #Get the account name from here

# Get keys to authenticate
az storage account keys list --account-name <name>

# Get shares
az storage share list --account-name <name> --account-key <key>

# Get dirs/files inside the share
az storage file list --account-name <name> --share-name <share-name> --account-key <key>
## If type is "dir", you can continue enumerationg files inside of it
az storage file list --account-name <name> --share-name <prev_dir/share-name> --account-key <key>

# Download a complete share (with directories and files inside of them)
az storage file download-batch -d . --source <share-name> --account-name <name> --account-key <key>
```
{% endcode %}
{% endtab %}

{% tab title="Az PowerShell" %}
{% code overflow="wrap" %}
```powershell
# Get storage accounts
Get-AzStorageAccount | fl
# Get rules to access the storage account
Get-AzStorageAccount | select -ExpandProperty NetworkRuleSet
# Get IPs
(Get-AzStorageAccount | select -ExpandProperty NetworkRuleSet).IPRules
# Get containers of a storage account
Get-AzStorageContainer -Context (Get-AzStorageAccount -name <NAME> -ResourceGroupName <NAME>).context
# Get blobs inside container
Get-AzStorageBlob -Container epbackup-planetary -Context (Get-AzStorageAccount -name <name> -ResourceGroupName <name>).context
# Get a blob from a container
Get-AzStorageBlobContent -Container <NAME> -Context (Get-AzStorageAccount -name <NAME> -ResourceGroupName <NAME>).context -Blob <blob_name> -Destination .\Desktop\filename.txt
```
{% endcode %}
{% endtab %}
{% endtabs %}

## рд╕рдВрджрд░реНрдн

* [https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction)
* [https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview](https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред**

</details>
