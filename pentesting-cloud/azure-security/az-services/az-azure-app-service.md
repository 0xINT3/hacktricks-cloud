# Az - рдПрдЬрд╝реНрдпреВрд░ рдРрдк рд╕реЗрд╡рд╛ рдФрд░ рдлрд╝рдВрдХреНрд╢рди рдРрдкреНрд╕

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ рдкреАрдбреАрдПрдлрд╝ рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**рдж рдкреАрдПрд╕ рдлреИрдорд┐рд▓реА**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## рдРрдк рд╕реЗрд╡рд╛ рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

_рдПрдЬрд╝реНрдпреВрд░ рдРрдк рд╕реЗрд╡рд╛_ рдПрдХ рдПрдЪрдЯреАрдЯреАрдкреА-рдЖрдзрд╛рд░рд┐рдд рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рд╡реЗрдм рдРрдкреНрд▓рд┐рдХреЗрд╢рди, REST API рдФрд░ рдореЛрдмрд╛рдЗрд▓ рдмреИрдХ рдПрдВрдбреНрд╕ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред рдЖрдк рдЕрдкрдиреА рдкрд╕рдВрджреАрджрд╛ рднрд╛рд╖рд╛ рдореЗрдВ рд╡рд┐рдХрд╕рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЪрд╛рд╣реЗ рд╡рд╣ .NET, .NET Core, Java, Ruby, Node.js, PHP рдпрд╛ Python рд╣реЛред рдРрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдВрдбреЛрдЬ рдФрд░ рд▓рд┐рдирдХреНрд╕ рдЖрдзрд╛рд░рд┐рдд рд╡рд╛рддрд╛рд╡рд░рдгреЛрдВ рдкрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдЪрд▓рддреЗ рд╣реИрдВ рдФрд░ рд╕реНрдХреЗрд▓ рдХрд░рддреЗ рд╣реИрдВред

рдкреНрд░рддреНрдпреЗрдХ рдРрдк рдПрдХ рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдореЗрдВ рдЪрд▓рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрд▓рдЧрд╛рд╡ рдРрдк рд╕реЗрд╡рд╛ рдпреЛрдЬрдирд╛рдУрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ

* рдирд┐: рд╢реБрд▓реНрдХ рдФрд░ рд╕рд╛рдЭрд╛ рдЯрд┐рдпрд░ рдореЗрдВ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдРрдк рд╕рд╛рдЭрд╛ VM рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ
* рдорд╛рдирдХ рдФрд░ рдкреНрд░реАрдорд┐рдпрдо рдЯрд┐рдпрд░ рдореЗрдВ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдРрдк рдирд┐рд░реНрдзрд╛рд░рд┐рдд VM рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ

{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЗрди рдЕрд▓рдЧрд╛рд╡реЛрдВ рдореЗрдВ рд╕реЗ **рдХреЛрдИ рднреА** рдЕрдиреНрдп рд╕рд╛рдорд╛рдиреНрдп **рд╡реЗрдм рд╕реБрд░рдХреНрд╖рд╛ рд╕рдорд╕реНрдпрд╛рдПрдВ** (рдЬреИрд╕реЗ рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдпрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди) **рд░реЛрдХрдиреЗ** рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реИрдВред рдФрд░ рдпрджрд┐ рдПрдХ **рдкреНрд░рдмрдВрдзрди рдкрд╣рдЪрд╛рди** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕реЗ рдЕрдкрдиреА **рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдХреНрд╖рддрд┐ рдкрд╣реБрдВрдЪрд╛ рд╕рдХрддрд╛ рд╣реИ**ред
{% endhint %}

### рдЬрд╛рдБрдЪ

{% tabs %}
{% tab title="az" %}
{% code overflow="wrap" %}
```bash
# List webapps
az webapp list

## Less information
az webapp list --query "[].{hostName: defaultHostName, state: state, name: name, resourcegroup: resourceGroup}"

# Get access restrictions
az webapp config access-restriction show --resource-group <res-group> -n <name>

# Remove access restrictions
az webapp config access-restriction remove --resource-group <res-group> -n <name> --rule-name <rule-name>

# Get snapshots
az webapp config snapshot list --resource-group <res-group> -n <name>

# Restore snapshot
az webapp config snapshot restore -g <res-group> -n <name> --time 2018-12-11T23:34:16.8388367

# Restart webapp
az webapp restart --name <name> --resource-group <res-group>
```
{% endcode %}
{% endtab %}

{% tab title="Az Powershell" %}
```powershell
# Get App Services and Function Apps
Get-AzWebApp
# Get only App Services
Get-AzWebApp | ?{$_.Kind -notmatch "functionapp"}
```
#### рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ рдФрд░ рд╡реЗрдмрдРрдк рдХреЛрдб рддрдХ рдкрд╣реБрдВрдЪреЗрдВ

To obtain credentials and get access to the webapp code, follow these steps:

1. рд╡реЗрдмрдРрдк рдХреЗ рд▓рд┐рдП рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╡реЗрдмрдРрдк рдХреЗ рдкреНрд░рд╢рд╛рд╕рди рдХрдВрд╕реЛрд▓ рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред
2. рд╡реЗрдмрдРрдк рдХреЗ рдкреНрд░рд╢рд╛рд╕рди рдХрдВрд╕реЛрд▓ рдореЗрдВ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ "рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕" рдпрд╛ "рд╕реБрд░рдХреНрд╖рд╛" рд╡рд┐рднрд╛рдЧ рдореЗрдВ рдЬрд╛рдирд╛ рд╣реЛрдЧрд╛ред
3. рд╡рд╣рд╛рдВ, рдЖрдкрдХреЛ рд╡реЗрдмрдРрдк рдХреЗ рд▓рд┐рдП рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдпрд╛ рдПрдХреНрд╕реЗрд╕ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдвреВрдВрдврдирд╛ рд╣реЛрдЧрд╛ред
4. рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдпрд╛ рдПрдХреНрд╕реЗрд╕ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдиреЛрдЯ рдХрд░реЗрдВ рдпрд╛ рдХреЙрдкреА рдХрд░реЗрдВред
5. рдЗрд╕рдХреЗ рдмрд╛рдж, рдЖрдк рд╡реЗрдмрдРрдк рдХреЗ рдХреЛрдб рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕реЗ рдЕрдкрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрди рдЪрд░рдгреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдХреЗ, рдЖрдк рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╡реЗрдмрдРрдк рдХреЛрдб рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред
```bash
# Get connection strings that could contain credentials (with DBs for example)
az webapp config connection-string list --name <name> --resource-group <res-group>
## Check how to use the DBs connection strings in the SQL page

# Get credentials to access the code and DB credentials if configured.
az webapp deployment list-publishing-profiles --resource-group <res-group> -n <name>


# Get git URL to access the code
az webapp deployment source config-local-git --resource-group <res-group> -n <name>

# Access/Modify the code via git
git clone 'https://<username>:<password>@name.scm.azurewebsites.net/repo-name.git'
## In my case the username was: $nameofthewebapp and the password some random chars
## If you change the code and do a push, the app is automatically redeployed
```
#### рдПрд╕рдПрд╕рдПрдЪ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡реЗрдмрдРрдк рдХреЗ рд╕рд╛рде рдбреЙрдХрд░ рдХрдВрдЯреЗрдирд░ рддрдХ рдкрд╣реБрдВрдЪ:

```bash
ssh -p <port> <username>@<ip>
```

рдпрд╣рд╛рдВ `<port>` рдХреЛ рдбреЙрдХрд░ рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдкреЛрд░реНрдЯ рдирдВрдмрд░ рд╕реЗ рдмрджрд▓реЗрдВ, `<username>` рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВ рдФрд░ `<ip>` рдХреЛ рд╡реЗрдмрдРрдк рдХреЗ рдбреЙрдХрд░ рдХрдВрдЯреЗрдирд░ рдХреЗ рдЖрдИрдкреА рдкрддреЗ рд╕реЗ рдмрджрд▓реЗрдВред
```bash
# Get ssh session
az webapp create-remote-connection --subscription <SUBSCRIPTION-ID> --resource-group <RG-NAME> -n <APP-SERVICE-NAME>

## If successfull you will get a message such as:
#Verifying if app is running....
#App is running. Trying to establish tunnel connection...
#Opening tunnel on port: 39895
#SSH is available { username: root, password: Docker! }

## So from that machine ssh into that port (you might need generate a new ssh session to the jump host)
ssh root@127.0.0.1 -p 39895

```
## рдлрдВрдХреНрд╢рди рдРрдкреНрд╕ рдХреА рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

Azure Functions рдПрдХ **рд╕рд░реНрд╡рд░рд▓реЗрд╕** рд╕рдорд╛рдзрд╛рди рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдХрдо рдХреЛрдб рд▓рд┐рдЦрдиреЗ, рдХрдо рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рд░рдЦрдиреЗ рдФрд░ рдЦрд░реНрдЪреЛрдВ рдХреА рдмрдЪрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд╕рд░реНрд╡рд░реНрд╕ рдХреЛ рдбрд┐рдкреНрд▓реЙрдп рдФрд░ рд░рдЦрдиреЗ рдХреА рдЪрд┐рдВрддрд╛ рдХрд░рдиреЗ рдХреА рдмрдЬрд╛рдп, рдХреНрд▓рд╛рдЙрдб рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛрддреЗ рд╣реИрдВред

Azure Functions Azure API Management рдХреЗ рд╕рд╛рде рдкреЛрд░реНрдЯрд▓ рдореЗрдВ рдПрдХреАрдХреГрдд рд╣реЛрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЖрдк рдЕрдкрдиреЗ HTTP рдЯреНрд░рд┐рдЧрд░ рдлрдВрдХреНрд╢рди **рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдХреЛ REST API рдХреЗ рд░реВрдк рдореЗрдВ рдЙрднрд╛рд░ рд╕рдХреЗрдВ**ред рдЗрди API рдХреЛ рдПрдХ OpenAPI рдкрд░рд┐рднрд╛рд╖рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

**рдлрдВрдХреНрд╢рди рдРрдкреНрд╕ рдореИрдиреЗрдЬреНрдб рдЖрдИрдбреЗрдВрдЯрд┐рдЯреА рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВред**

### рдЬрд╛рдВрдЪ
```powershell
# Get only Function Apps
Get-AzFunctionApp
```
## рд╕рдВрджрд░реНрдн

* [https://learn.microsoft.com/en-in/azure/app-service/overview](https://learn.microsoft.com/en-in/azure/app-service/overview)
* [https://app.gitbook.com/s/5uvPQhxNCPYYTqpRwsuS/\~/changes/en8rTJy7DsFQXWyNeiqE/pentesting-cloud/azure-security/az-services/az-function-apps#references](https://app.gitbook.com/s/5uvPQhxNCPYYTqpRwsuS/\~/changes/en8rTJy7DsFQXWyNeiqE/pentesting-cloud/azure-security/az-services/az-function-apps#references)
* [https://learn.microsoft.com/en-us/azure/azure-functions/functions-openapi-definition](https://learn.microsoft.com/en-us/azure/azure-functions/functions-openapi-definition)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВ**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред**

</details>
