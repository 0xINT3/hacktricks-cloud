# Az - ACR

<details>

<summary><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricks をサポートする他の方法:

- **HackTricks で企業を宣伝したい** または **HackTricks をPDFでダウンロードしたい** 場合は [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な [**NFTs**](https://opensea.io/collection/the-peass-family) のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)** に参加するか、[telegramグループ](https://t.me/peass) に参加するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live) をフォローする
- **ハッキングテクニックを共有するために、PRを** [**HackTricks**](https://github.com/carlospolop/hacktricks) **と** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **のGitHubリポジトリに提出してください。**

</details>

## 基本情報

Azure Container Registry（ACR）は、Microsoft Azureによって提供される **Dockerコンテナイメージやその他のアーティファクトを保存および管理する** マネージドサービスです。 統合開発者ツール、ジオレプリケーション、ロールベースのアクセス制御やイメージスキャンなどのセキュリティ対策、自動ビルド、Webhookとトリガー、ネットワーク分離などの機能を提供します。 一般的なツールであるDocker CLIやKubernetesと連携し、他のAzureサービスともうまく統合されています。

### 列挙

サービスを列挙するには、スクリプト [**Get-AzACR.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Get-AzACR.ps1) を使用できます：

{% code overflow="wrap" %}
```bash
# List Docker images inside the registry
IEX (New-Object Net.Webclient).downloadstring("https://raw.githubusercontent.com/NetSPI/MicroBurst/master/Misc/Get-AzACR.ps1")

Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Internet Explorer\Main" -Name "DisableFirstRunCustomize" -Value 2

Get-AzACR -username <username> -password <password> -registry <corp-name>.azurecr.io
```
## Azure Container Registry (ACR)

Azure Container Registry (ACR) is a managed Docker registry service based on the open-source Docker Registry 2.0. It allows you to store and manage container images for all types of container deployments.

### Key Features:

- **Private Repositories:** ACR allows you to create private repositories to store your container images securely.
- **Role-Based Access Control (RBAC):** You can control access to your container registry using Azure RBAC.
- **Webhooks:** ACR supports webhooks to trigger events when images are pushed or deleted.
- **Geo-Replication:** You can replicate your container images across multiple Azure regions for better availability.
- **Vulnerability Scanning:** ACR integrates with Azure Security Center to scan container images for vulnerabilities.

### az acr Commands:

- `az acr create`: Create a new container registry.
- `az acr login`: Log in to a container registry.
- `az acr repository list`: List repositories in a container registry.
- `az acr build`: Build a container image using an Azure Container Registry build task.

ACR is a critical component in managing containerized applications in Azure, providing a secure and reliable way to store and deploy container images.
```bash
az acr list --output table
az acr show --name MyRegistry --resource-group MyResourceGroup
```
{% endtab %}

{% tab title="Az Powershell" %}Azure PowerShellを使用して、Azure Container Registry（ACR）を監査および管理できます。以下は、ACRに関連する一般的な操作です。

### ACRへの接続
```powershell
Connect-AzAccount
Select-AzSubscription -SubscriptionId <SubscriptionId>
```

### ACRリソースの取得
```powershell
Get-AzContainerRegistry -ResourceGroupName <ResourceGroupName> -Name <RegistryName>
```

### ACRイメージのリスト
```powershell
Get-AzContainerRegistryRepository -Registry <RegistryName>
```

### ACRログの取得
```powershell
Get-AzContainerRegistryLog -Registry <RegistryName>
```

### ACRアクセスキーの取得
```powershell
$registry = Get-AzContainerRegistry -ResourceGroupName <ResourceGroupName> -Name <RegistryName>
$registry.Passwords
```

これらのコマンドを使用して、ACRを効果的に管理し、セキュリティを強化できます。{% endtab %}
```powershell
# List all ACRs in your subscription
Get-AzContainerRegistry

# Get a specific ACR
Get-AzContainerRegistry -ResourceGroupName "MyResourceGroup" -Name "MyRegistry"
```
ログインしてレジストリからプルします
```bash
docker login <corp-name>.azurecr.io --username <username> --password <password>
docker pull <corp-name>.azurecr.io/<image>:<tag>
```
<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でAWSハッキングをゼロからヒーローまで学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

* **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksスワッグ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)コレクションをご覧ください
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)を**フォロー**してください**。**
* **ハッキングトリックを共有するために、[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のgithubリポジトリにPRを提出してください。

</details>
