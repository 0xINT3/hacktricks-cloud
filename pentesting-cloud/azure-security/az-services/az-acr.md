# Az - ACR

<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>

## Informa√ß√µes B√°sicas

Azure Container Registry (ACR) √© um servi√ßo gerenciado fornecido pela Microsoft Azure para **armazenar e gerenciar imagens de cont√™ineres Docker e outros artefatos**. Ele oferece recursos como ferramentas integradas para desenvolvedores, geo-replica√ß√£o, medidas de seguran√ßa como controle de acesso baseado em fun√ß√µes e verifica√ß√£o de imagens, compila√ß√µes automatizadas, webhooks e gatilhos, e isolamento de rede. Ele funciona com ferramentas populares como Docker CLI e Kubernetes, e se integra bem com outros servi√ßos Azure.

### Enumerar

Para enumerar o servi√ßo, voc√™ pode usar o script [**Get-AzACR.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Get-AzACR.ps1):

{% code overflow="wrap" %}
```bash
# List Docker images inside the registry
IEX (New-Object Net.Webclient).downloadstring("https://raw.githubusercontent.com/NetSPI/MicroBurst/master/Misc/Get-AzACR.ps1")

Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Internet Explorer\Main" -Name "DisableFirstRunCustomize" -Value 2

Get-AzACR -username <username> -password <password> -registry <corp-name>.azurecr.io
```
{% endcode %}

{% tabs %}
{% tab title="az cli" %}

### List all ACRs

```bash
az acr list
```

### Show ACR details

```bash
az acr show --name myregistry
```

### Show ACR credentials

```bash
az acr credential show --name myregistry
```

### Regenerate ACR credentials

```bash
az acr credential renew --name myregistry
```

### List ACR webhooks

```bash
az acr webhook list --registry myregistry
```

### Show ACR webhook details

```bash
az acr webhook show --registry myregistry --name mywebhook
```

### Regenerate ACR webhook credentials

```bash
az acr webhook get-config --registry myregistry --name mywebhook
```

### Trigger ACR webhook

```bash
az acr webhook ping --registry myregistry --name mywebhook
```

{% endtab %}
{% endtabs %}
```bash
az acr list --output table
az acr show --name MyRegistry --resource-group MyResourceGroup
```
{% endtab %}

{% tab title="Az Powershell" %} 

## Az Powershell

O Azure CLI √© uma ferramenta de linha de comando que fornece uma maneira f√°cil de gerenciar recursos do Azure. Ele √© compat√≠vel com Windows, macOS e Linux. Aqui est√£o alguns comandos √∫teis do Azure CLI para interagir com o Azure Container Registry (ACR):

### Autentica√ß√£o

Para autenticar-se no ACR usando o Azure CLI, voc√™ pode usar o comando `az acr login`.

```bash
az acr login --name <acrName>
```

### Listar Registries

Para listar todos os registros em uma assinatura do Azure, voc√™ pode usar o comando `az acr list`.

```bash
az acr list --resource-group <resourceGroupName> --query "[].{Name:name, LoginServer:loginServer}" --output table
```

### Exibir Detalhes do Registro

Para exibir detalhes espec√≠ficos de um registro, como as credenciais de autentica√ß√£o, voc√™ pode usar o comando `az acr show`.

```bash
az acr show --name <acrName> --resource-group <resourceGroupName>
```

### Gerenciar Acessos

Para adicionar ou remover usu√°rios e suas permiss√µes em um registro, voc√™ pode usar os comandos `az acr update` e `az acr credential`.

```bash
az acr update --name <acrName> --resource-group <resourceGroupName> --default-action Allow
az acr credential show --name <acrName> --resource-group <resourceGroupName>
```

Esses s√£o apenas alguns dos comandos √∫teis do Azure CLI para trabalhar com o Azure Container Registry. Certifique-se de consultar a documenta√ß√£o oficial para obter mais informa√ß√µes e op√ß√µes de comando. 

{% endtab %}
```powershell
# List all ACRs in your subscription
Get-AzContainerRegistry

# Get a specific ACR
Get-AzContainerRegistry -ResourceGroupName "MyResourceGroup" -Name "MyRegistry"
```
{% endtab %}
{% endtabs %}

Login & Pull from the registry
```bash
docker login <corp-name>.azurecr.io --username <username> --password <password>
docker pull <corp-name>.azurecr.io/<image>:<tag>
```
<details>

<summary><strong>Aprenda hacking na AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ quiser ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
