# Az - ACR

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**를** **팔로우**하세요.
* **Hacking 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하세요.

</details>

## 기본 정보

Azure Container Registry (ACR)는 Microsoft Azure에서 제공하는 관리형 서비스로, **Docker 컨테이너 이미지 및 기타 아티팩트를 저장하고 관리**하는 데 사용됩니다. 통합 개발자 도구, 지리적 복제, 역할 기반 액세스 제어 및 이미지 스캐닝과 같은 보안 기능, 자동 빌드, 웹훅 및 트리거, 네트워크 격리와 같은 기능을 제공합니다. Docker CLI 및 Kubernetes와 같은 인기있는 도구와 함께 작동하며 다른 Azure 서비스와 원활하게 통합됩니다.

### 열거

서비스를 열거하기 위해 [**Get-AzACR.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Get-AzACR.ps1) 스크립트를 사용할 수 있습니다:

{% code overflow="wrap" %}
```bash
# List Docker images inside the registry
IEX (New-Object Net.Webclient).downloadstring("https://raw.githubusercontent.com/NetSPI/MicroBurst/master/Misc/Get-AzACR.ps1")

Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Internet Explorer\Main" -Name "DisableFirstRunCustomize" -Value 2

Get-AzACR -username <username> -password <password> -registry <corp-name>.azurecr.io
```
{% tab title="az cli" %}az acr create --name <acrName> --resource-group <resourceGroupName> --sku Basic

az acr login --name <acrName>

az acr repository list --name <acrName> --output table

az acr repository show-tags --name <acrName> --repository <repositoryName> --output table

az acr repository show-manifests --name <acrName> --repository <repositoryName> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest>

az acr repository delete --name <acrName> --repository <repositoryName> --manifest <manifestDigest>

az acr repository untag --name <acrName> --repository <repositoryName> --tag <tag>

az acr repository delete --name <acrName> --repository <repositoryName> --tag <tag>

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag>

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag> --output table

az acr repository show --name <acrName> --repository <repositoryName> --manifest <manifestDigest> --output table

az acr repository show --name <acrName> --repository <repositoryName> --tag <tag
```bash
az acr list --output table
az acr show --name MyRegistry --resource-group MyResourceGroup
```
{% tab title="Az Powershell" %}

Azure Container Registry (ACR)는 Azure에서 Docker 이미지를 저장, 관리 및 배포하기 위한 서비스입니다. ACR은 개발자 및 운영팀이 이미지를 쉽게 공유하고 사용할 수 있도록 도와줍니다.

ACR을 사용하여 이미지를 관리하려면 다음 단계를 따르십시오.

1. ACR 인스턴스 만들기: `New-AzContainerRegistry` cmdlet을 사용하여 ACR 인스턴스를 만듭니다. 인스턴스에는 고유한 이름과 리소스 그룹, 위치 등이 필요합니다.

2. 이미지 업로드: `az acr build` 명령을 사용하여 로컬 머신에서 이미지를 빌드하고 ACR에 업로드할 수 있습니다.

3. 이미지 다운로드: `az acr login` 명령을 사용하여 ACR에 로그인한 후, `docker pull` 명령을 사용하여 이미지를 다운로드할 수 있습니다.

4. 이미지 삭제: `az acr repository delete` 명령을 사용하여 ACR에서 이미지를 삭제할 수 있습니다.

ACR을 보안하기 위해 다음 사항을 고려해야 합니다.

1. 액세스 제어: ACR에 대한 액세스를 제한하기 위해 RBAC(역할 기반 액세스 제어)를 사용할 수 있습니다. 필요한 권한만 부여하여 보안을 강화할 수 있습니다.

2. 네트워크 보안: ACR은 가상 네트워크에 연결하여 액세스를 제한할 수 있습니다. 네트워크 보안 그룹을 사용하여 허용되는 IP 주소 범위를 지정할 수 있습니다.

3. 이미지 스캔: ACR은 이미지에 대한 취약점 스캔을 제공합니다. 이미지를 업로드하기 전에 스캔하여 보안 문제를 식별하고 해결할 수 있습니다.

4. 로깅 및 감사: ACR은 로깅 및 감사 기능을 제공하여 이미지에 대한 액세스 및 변경 내역을 추적할 수 있습니다. 이를 통해 보안 이슈를 식별하고 대응할 수 있습니다.

ACR은 Docker 이미지를 안전하게 관리하고 배포하기 위한 강력한 도구입니다. 이러한 보안 기능을 활용하여 ACR을 안전하게 유지할 수 있습니다.

{% endtab %}
```powershell
# List all ACRs in your subscription
Get-AzContainerRegistry

# Get a specific ACR
Get-AzContainerRegistry -ResourceGroupName "MyResourceGroup" -Name "MyRegistry"
```
{% tabs %}
{% tab title="Azure CLI" %}
1. Azure CLI를 사용하여 Azure Container Registry(ACR)에 로그인합니다.
```plaintext
az acr login --name <acr_name>
```
2. ACR에서 이미지를 가져옵니다.
```plaintext
docker pull <acr_name>.azurecr.io/<image_name>:<tag>
```
{% endtab %}

{% tab title="Docker CLI" %}
1. Docker CLI를 사용하여 ACR에 로그인합니다.
```plaintext
docker login <acr_name>.azurecr.io
```
2. ACR에서 이미지를 가져옵니다.
```plaintext
docker pull <acr_name>.azurecr.io/<image_name>:<tag>
```
{% endtab %}
{% endtabs %}
```bash
docker login <corp-name>.azurecr.io --username <username> --password <password>
docker pull <corp-name>.azurecr.io/<image>:<tag>
```
<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스왑 상품**](https://peass.creator-spring.com)을 구매하세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **Hacking 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하세요.

</details>
