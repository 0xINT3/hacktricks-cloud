# Az - Azure рдиреЗрдЯрд╡рд░реНрдХ

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) **рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВ**.
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ.

</details>

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

Azure рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЗрд╕рдХреЗ рдХреНрд▓рд╛рдЙрдб рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХрд╛ рдПрдХ рдЕрднрд┐рдиреНрди рднрд╛рдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ **рд╡рд┐рднрд┐рдиреНрди Azure рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдмрдВрдз рдФрд░ рд╕рдВрдЪрд╛рд░ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рддреЗ рд╣реИрдВ**ред Azure рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЛ рдЕрддреНрдпрдзрд┐рдХ рд╕реНрдХреЗрд▓реЗрдмрд▓, рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рдЕрдиреБрдХреВрд▓рдиреАрдп рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдореВрд▓ рдореЗрдВ, Azure рдПрдХ **рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNet)** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ Azure рдХреНрд▓рд╛рдЙрдб рдХреЗ рднреАрддрд░ **рдЕрд▓рдЧ-рдерд▓рдЧ** **рдиреЗрдЯрд╡рд░реНрдХ** рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдЗрди VNets рдХреЗ рднреАрддрд░, рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЗрдВ, рдПрдкреНрд▓рд┐рдХреЗрд╢рди, рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдЬреИрд╕реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рд╣реЛрд╕реНрдЯ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред Azure рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдмрд╛рджрд▓ рдХреЗ рднреАрддрд░ рд╕рдВрдЪрд╛рд░ (Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмреАрдЪ) рдФрд░ рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИред

**рд╕реБрд░рдХреНрд╖рд╛** Azure рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХрд╛ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкрд╣рд▓реВ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдбреЗрдЯрд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛, рдкрд╣реБрдВрдЪ рдкреНрд░рдмрдВрдзрди, рдФрд░ рдЕрдиреБрдкрд╛рд▓рди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдХрд░рдг рдФрд░ рд╕реЗрд╡рд╛рдПрдВ рдЙрдкрд▓рдмреНрдз рд╣реИрдВред рдЗрди рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ рдореЗрдВ **рдлрд╛рдпрд░рд╡реЙрд▓**, **рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣**, рдФрд░ **рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди** рдХреНрд╖рдорддрд╛рдПрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ рдЯреНрд░реИрдлрд┐рдХ рдФрд░ рдкрд╣реБрдВрдЪ рдкрд░ рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХрд╛ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВред

рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, Azure рдХреА рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдПрдВ рд▓рдЪреАрд▓рд╛рдкрди рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╛рдЗрди рдХреА рдЧрдИ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдкрдиреА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рд╡рд░реНрдХрд▓реЛрдб рдЬрд░реВрд░рддреЛрдВ рдХреЗ рдЕрдиреБрд░реВрдк рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд╛рддрд╛рд╡рд░рдг рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рд╛рде рд╣реА рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдкрд░ рдордЬрдмреВрдд рдЬреЛрд░ рджреЗрддреЗ рд╣реБрдПред

## рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNET) рдФрд░ рд╕рдмрдиреЗрдЯреНрд╕

Azure рдореЗрдВ рдПрдХ VNet рдореВрд▓ рд░реВрдк рд╕реЗ рдмрд╛рджрд▓ рдореЗрдВ рдЖрдкрдХреЗ рдЕрдкрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рд╣реИред рдпрд╣ рдЖрдкрдХреЗ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рд▓рд┐рдП Azure рдХреНрд▓рд╛рдЙрдб рдХрд╛ **рддрд╛рд░реНрдХрд┐рдХ рдЕрд▓рдЧрд╛рд╡** рд╣реИред рдПрдХ VNet рдЖрдкрдХреЛ Azure рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдиреЗрдЯрд╡рд░реНрдХреНрд╕ (VPNs) рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЗрдВ (VMs), рдбреЗрдЯрд╛рдмреЗрд╕, рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрд╡рд╛рдУрдВ рдЬреИрд╕реЗ **рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рдиреЗ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

VNets рдЖрдкрдХреЛ рдЖрдкрдХреА рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ **рдкреВрд░реНрдг рдирд┐рдпрдВрддреНрд░рдг** рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ **IP рдкрддреЗ** рдХреА рд░реЗрдВрдЬ, рд╕рдмрдиреЗрдЯ рдирд┐рд░реНрдорд╛рдг, рд░реВрдЯ рдЯреЗрдмрд▓реНрд╕, рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЧреЗрдЯрд╡реЗ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

рдПрдХ **рд╕рдмрдиреЗрдЯ** рдЖрдкрдХреЗ VNet рдореЗрдВ **IP рдкрддреЛрдВ рдХреА рдПрдХ рд░реЗрдВрдЬ** рд╣реИред рдЖрдк рдПрдХ VNet рдХреЛ рд╕рдВрдЧрдарди рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдХрдИ рд╕рдмрдиреЗрдЯреНрд╕ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдПрдХ VNet рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рд╕рдмрдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдФрд░ рд╕рдореВрд╣рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рдмрдиреЗрдЯреНрд╕ рдЖрдкрдХреЛ рдЕрдкрдиреЗ VNet рдХреЛ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рдЙрдк-рдиреЗрдЯрд╡рд░реНрдХреЛрдВ рдореЗрдВ **рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ**, рдЬреЛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ IP рдкрддреЛрдВ рдХреА рдПрдХ рд░реЗрдВрдЬ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред

### **рдЙрджрд╛рд╣рд░рдг**

* рдорд╛рди рд▓реАрдЬрд┐рдП рдЖрдкрдХреЗ рдкрд╛рд╕ `10.0.0.0/16` рдХреА IP рдкрддреЗ рдХреА рд░реЗрдВрдЬ рдХреЗ рд╕рд╛рде `MyVNet` рдирд╛рдордХ рдПрдХ VNet рд╣реИред рдЖрдк рдЗрд╕ VNet рдХреЗ рднреАрддрд░ рдПрдХ рд╕рдмрдиреЗрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП `Subnet-1`, `10.0.0.0/24` рдХреА IP рдкрддреЗ рдХреА рд░реЗрдВрдЬ рдХреЗ рд╕рд╛рде рдЬрд┐рд╕рдореЗрдВ рдЖрдк рдЕрдкрдиреЗ рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдПрдХ рдЕрдиреНрдп рд╕рдмрдиреЗрдЯ, `Subnet-2` `10.0.1.0/24` рдХреА рд░реЗрдВрдЬ рдХреЗ рд╕рд╛рде, рдЖрдкрдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рд╡рд┐рднрд╛рдЬрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдХреБрд╢рд▓ рдкреНрд░рдмрдВрдзрди рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

### рд╕реВрдЪреАрдХрд░рдг

Azure рдЦрд╛рддреЗ рдореЗрдВ рд╕рднреА VNets рдФрд░ рд╕рдмрдиреЗрдЯреНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк Azure Command-Line Interface (CLI) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣рд╛рдБ рдХрджрдо рд╣реИрдВ:

{% code overflow="wrap" %}
```bash
# List VNets
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List subnets of a VNet
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, addressPrefix:addressPrefix}" -o table
```
{% endcode %}

## рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣ (NSG)

Azure рдореЗрдВ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣ (NSG) рдХрд╛ рдЙрдкрдпреЛрдЧ **Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдПрдХ Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (**VNet**) рдореЗрдВ рд╣реЛрддреЗ рд╣реИрдВред рдПрдХ NSG рдореЗрдВ **рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдпрдо** рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЗрдирдмрд╛рдЙрдВрдб рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ рдпрд╛ рдЙрд╕реЗ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддреЗ рд╣реИрдВред

NSG рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдирд┐рдпрдо рдПрдХ **рдлрд╝рд┐рд▓реНрдЯрд░ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╕реНрд░реЛрдд/рдЧрдВрддрд╡реНрдп IP рдкрддреЗ, рдкреЛрд░реНрдЯ, рдФрд░ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ**ред рдпрд╣ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдкрд░ рдмрд╛рд░реАрдХреА рд╕реЗ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рдХреЗрд╡рд▓ рдЕрдзрд┐рдХреГрдд рдЯреНрд░реИрдлрд┐рдХ рд╣реА рдЖрдкрдХреЗ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХреЗ рдпрд╛ рдЙрдирд╕реЗ рдмрд╛рд╣рд░ рдЬрд╛ рд╕рдХреЗред

### **рдЙрджрд╛рд╣рд░рдг**

* рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ `MyNSG` рдирд╛рдордХ рдПрдХ NSG рд╣реИ рдЬреЛ рдЖрдкрдХреЗ VNet рдХреЗ рдПрдХ рд╕рдмрдиреЗрдЯ рдпрд╛ рд╡рд┐рд╢реЗрд╖ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред рдЖрдк рдирд┐рдпрдо рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ:
* рдПрдХ рдЗрдирдмрд╛рдЙрдВрдб рдирд┐рдпрдо рдЬреЛ рдХрд┐рд╕реА рднреА рд╕реНрд░реЛрдд рд╕реЗ рдЖрдкрдХреЗ рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП HTTP рдЯреНрд░реИрдлрд┐рдХ (рдкреЛрд░реНрдЯ 80) рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред
* рдПрдХ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдирд┐рдпрдо рдЬреЛ рдХреЗрд╡рд▓ SQL рдЯреНрд░реИрдлрд┐рдХ (рдкреЛрд░реНрдЯ 1433) рдХреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЧрдВрддрд╡реНрдп IP рдкрддрд╛ рд░реЗрдВрдЬ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

### рд╕реВрдЪреАрдХрд░рдг

{% code overflow="wrap" %}
```bash
# List NSGs
az network nsg list --query "[].{name:name, location:location}" -o table

# Get NSG rules
az network nsg rule list --nsg-name <NSGName> --resource-group <ResourceGroupName> --query "[].{name:name, priority:priority, direction:direction, access:access, protocol:protocol, sourceAddressPrefix:sourceAddressPrefix, destinationAddressPrefix:destinationAddressPrefix, sourcePortRange:sourcePortRange, destinationPortRange:destinationPortRange}" -o table
```
{% endcode %}

## Azure Firewall

Azure Firewall рдПрдХ рдкреНрд░рдмрдВрдзрд┐рдд, рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд **рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ Azure Virtual Network рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рд░рдХреНрд╖рд╛ рдХрд░рддреА рд╣реИ**ред рдпрд╣ рдПрдХ рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рд╕реНрдерд┐рддрд┐рдЬрдиреНрдп рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрд╡рд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдирд┐рд░реНрдорд┐рдд рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдФрд░ рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВред

Azure Firewall **NSGs** рдХреА рддреБрд▓рдирд╛ рдореЗрдВ **рдЕрдзрд┐рдХ рдЙрдиреНрдирдд** рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ**, рдиреЗрдЯрд╡рд░реНрдХ-рд╕реНрддрд░реАрдп рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдзрдордХреА рдЦреБрдлрд┐рдпрд╛-рдЖрдзрд╛рд░рд┐рдд рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдФрд░ Azure Monitor рдХреЗ рд╕рд╛рде рд▓реЙрдЧрд┐рдВрдЧ рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдПрдХреАрдХрд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИред\
рдпрд╣ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб, рдЗрдирдмрд╛рдЙрдВрдб, рд╕реНрдкреЛрдХ-рдЯреВ-рд╕реНрдкреЛрдХ, VPN, рдФрд░ ExpressRoute рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИред **рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо FQDN (Fully Qualified Domain Name), IP рдкрддреЗ, рдФрд░ рдкреЛрд░реНрдЯреНрд╕ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрдирд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ**ред

### Azure Firewall рдФрд░ NSGs рдХреЗ рдмреАрдЪ рдХреЗ рдЕрдВрддрд░&#x20;

1. **рдкрд░рд┐рдзрд┐:**
* **NSG:** рд╕рдмрдиреЗрдЯ рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╕реНрддрд░ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ (NIC), VMs, рдпрд╛ рд╕рдмрдиреЗрдЯреНрд╕ рд╕реЗ рдЗрдирдмрд╛рдЙрдВрдб рдФрд░ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдореВрд▓ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред
* **Azure Firewall:** VNet рд╕реНрддрд░ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд╡реНрдпрд╛рдкрдХ рдкрд░рд┐рдзрд┐ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЖрдкрдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ VNet рдореЗрдВ рдФрд░ рдмрд╛рд╣рд░ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
2. **рдХреНрд╖рдорддрд╛рдПрдВ:**
* **NSG:** IP рдкрддреЗ, рдкреЛрд░реНрдЯ, рдФрд░ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдореВрд▓ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдирд┐рд░реАрдХреНрд╖рдг рдпрд╛ рдзрдордХреА рдЦреБрдлрд┐рдпрд╛ рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред
* **Azure Firewall:** рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп (Layer 7) рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдзрдордХреА рдЦреБрдлрд┐рдпрд╛-рдЖрдзрд╛рд░рд┐рдд рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдФрд░ рдЕрдзрд┐рдХ рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдХрдИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ IP рдкрддреЛрдВ рдХрд╛ рднреА рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред
3. **рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:**
* **NSG:** рдореВрд▓ рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрддрд░ рдХреА рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЖрджрд░реНрд╢ред
* **Azure Firewall:** рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдЬрд╣рд╛рдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдирд┐рдпрдВрддреНрд░рдг, рд▓реЙрдЧрд┐рдВрдЧ, рдФрд░ рдзрдордХреА рдЦреБрдлрд┐рдпрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
4. **рдкреНрд░рдмрдВрдзрди рдФрд░ рдирд┐рдЧрд░рд╛рдиреА:**
* **NSG:** рдореВрд▓ рд▓реЙрдЧрд┐рдВрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдФрд░ Azure Monitor рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рдХрд░рддрд╛ рд╣реИред
* **Azure Firewall:** Azure Monitor рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдиреНрдирдд рд▓реЙрдЧрд┐рдВрдЧ рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреНрд╖рдорддрд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдкреНрд░рдХреГрддрд┐ рдФрд░ рдкреИрдЯрд░реНрди рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред

### рдЧрдгрдирд╛

{% code overflow="wrap" %}
```bash
# List Azure Firewalls
az network firewall list --query "[].{name:name, location:location, subnet:subnet, publicIp:publicIp}" -o table

# Get network rules of a firewall
az network firewall network-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get application rules of a firewall
az network firewall application-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get nat rules of a firewall
az network firewall nat-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table
```
{% endcode %}

## рдиреЗрдЯрд╡рд░реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдЕрдкреНрд▓рд╛рдпрдВрд╕ (NVA)

Azure рдореЗрдВ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдЕрдкреНрд▓рд╛рдпрдВрд╕ (**NVA**) рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдЕрдкреНрд▓рд╛рдпрдВрд╕ рд╣реИ рдЬреЛ **рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ**ред NVAs рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдорддреМрд░ рдкрд░ рдЙрди рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ **Azure рдореЗрдВ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВ** рдпрд╛ рдЬрдм рдЕрдзрд┐рдХ рдЕрдиреБрдХреВрд▓рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рд╡реЗ рдореВрд▓ рд░реВрдк рд╕реЗ **VMs рд╣реИрдВ рдЬреЛ рдиреЗрдЯрд╡рд░реНрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╛ рд╕реЗрд╡рд╛рдПрдВ рдЪрд▓рд╛рддреЗ рд╣реИрдВ**, рдЬреИрд╕реЗ рдХрд┐ рдлрд╛рдпрд░рд╡реЙрд▓, WAN рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░, рдпрд╛ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ред

NVAs рдХрд╛ рдЙрдкрдпреЛрдЧ рдЬрдЯрд┐рд▓ рд░реВрдЯрд┐рдВрдЧ, **рд╕реБрд░рдХреНрд╖рд╛**, рдФрд░ **рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдкреНрд░рдмрдВрдзрди** рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд╡реЗ Azure **Marketplace** рд╕реЗ рддреИрдирд╛рдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ рдХрдИ рддреГрддреАрдп-рдкрдХреНрд╖ рд╡рд┐рдХреНрд░реЗрддрд╛ рдЕрдкрдиреЗ рдЕрдкреНрд▓рд╛рдпрдВрд╕реЗрдЬ рдХреЛ Azure рдкрд░реНрдпрд╛рд╡рд░рдг рдореЗрдВ рдПрдХреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рд╕рдВрдЧрдарди Azure рдореЗрдВ NVA рдХреЛ рддреИрдирд╛рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдПрдХ **рдХрд╕реНрдЯрдо рдлрд╛рдпрд░рд╡реЙрд▓ рд╕рдорд╛рдзрд╛рди** рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред рдпрд╣ NVA **рддреГрддреАрдп-рдкрдХреНрд╖ рдлрд╛рдпрд░рд╡реЙрд▓ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░** рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рдШреБрд╕рдкреИрда рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ, рдкреИрдХреЗрдЯ рдирд┐рд░реАрдХреНрд╖рдг, рдпрд╛ VPN рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред NVA рдХреЛ рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЧреБрдЬрд░рдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд┐рдХ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдФрд░ рдлрд┐рд▓реНрдЯрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╕рдВрдЧрдарди рдХреА рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдмрдврд╝реА рд╣реБрдИ рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдп рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрддреЗ рд╣реИрдВред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# Usually NVAs are named or tagged in a way to distinguish them from other VMs
az vm list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# For a specific VM identified as an NVA, list its network interfaces
az vm nic list --vm-name <VMName> --resource-group <ResourceGroupName> --query "[].{id:id}" -o table
```
## Azure рдорд╛рд░реНрдЧ рддрд╛рд▓рд┐рдХрд╛рдПрдБ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдорд╛рд░реНрдЧ (UDR)

**Azure рдорд╛рд░реНрдЧ рддрд╛рд▓рд┐рдХрд╛рдПрдБ** Microsoft Azure рдХреЗ рднреАрддрд░ рдПрдХ рд╕реБрд╡рд┐рдзрд╛ рд╣реИрдВ рдЬреЛ **Azure Virtual Networks (VNets) рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рд░реВрдЯрд┐рдВрдЧ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИрдВ**ред рдореВрд▓ рд░реВрдк рд╕реЗ, рд╡реЗ рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ **рдкреИрдХреЗрдЯреНрд╕** VNets рдХреЗ рднреАрддрд░ рд╕рдмрдиреЗрдЯреНрд╕ рдХреЗ рдмреАрдЪ, VNets рдХреЗ рдмреАрдЪ, рдпрд╛ рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХреЛрдВ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ **рдЕрдЧреНрд░реЗрд╖рд┐рдд** рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдкреНрд░рддреНрдпреЗрдХ рдорд╛рд░реНрдЧ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдирд┐рдпрдореЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рдиреНрд╣реЗрдВ рдорд╛рд░реНрдЧ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдкреИрдХреЗрдЯреНрд╕ рдХреЛ рдЙрдирдХреЗ рдЧрдВрддрд╡реНрдп IP рдкрддреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреИрд╕реЗ рд░реВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

**рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдорд╛рд░реНрдЧ (UDR)** Azure рдореЗрдВ **рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ Azure рдорд╛рд░реНрдЧ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рднреАрддрд░ рдмрдирд╛рдП рдЧрдП рдХрд╕реНрдЯрдо рдорд╛рд░реНрдЧ рд╣реИрдВ** рдЬреЛ Azure Virtual Networks (VNets) рдХреЗ рднреАрддрд░ рдФрд░ рдмреАрдЪ, рдФрд░ рдмрд╛рд╣рд░реА рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП **рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ**ред UDRs рдЖрдкрдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрдкрдиреА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рд▓рдЪреАрд▓рд╛рдкрди рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, Azure рдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдЯрд┐рдВрдЧ рдирд┐рд░реНрдгрдпреЛрдВ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рддреЗ рд╣реБрдПред

рдпреЗ рдорд╛рд░реНрдЧ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрди рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИрдВ рдЬрд╣рд╛рдВ рдЖрдкрдХреЛ **рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рд░реВрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ**, рд╕реБрд░рдХреНрд╖рд╛ рдпрд╛ рдиреАрддрд┐ рдЕрдиреБрдкрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдорд╛рд░реНрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИ, рдпрд╛ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдиреЗрдЯрд╡рд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИред

### **рдЙрджрд╛рд╣рд░рдг**

* рдорд╛рди рд▓реАрдЬрд┐рдП рдЖрдкрдиреЗ рдПрдХ Network Virtual Appliance (NVA) рдХреЛ VNet рдХреЗ рднреАрддрд░ рд╕рдмрдиреЗрдЯреНрд╕ рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЬрд╛рдВрдЪ рдХреЗ рд▓рд┐рдП рддреИрдирд╛рдд рдХрд┐рдпрд╛ рд╣реИред рдЖрдк рдПрдХ UDR рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ рд╕рдмрдиреЗрдЯ рд╕реЗ рджреВрд╕рд░реЗ рд╕рдмрдиреЗрдЯ рдХреЛ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ NVA рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред рдпрд╣ UDR рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ NVA рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдпрд╣ рдЕрдкрдиреЗ рдЧрдВрддрд╡реНрдп рддрдХ рдкрд╣реБрдБрдЪреЗред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# List Route Tables
az network route-table list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List UDRs for a table
az network route-table route list --route-table-name <RouteTableName> --resource-group <ResourceGroupName> --query "[].{name:name, addressPrefix:addressPrefix, nextHopType:nextHopType, nextHopIpAddress:nextHopIpAddress}" -o table
```
{% endcode %}

## Azure Private Link

Azure Private Link рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ Azure рдореЗрдВ рдЬреЛ **Azure рд╕реЗрд╡рд╛рдУрдВ рддрдХ рдирд┐рдЬреА рдкрд╣реБрдБрдЪ рд╕рдХреНрд╖рдо рдХрд░рддреА рд╣реИ** рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдХреЗ рдХрд┐ **рдЖрдкрдХреЗ Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNet) рдФрд░ рд╕реЗрд╡рд╛ рдХреЗ рдмреАрдЪ рдХрд╛ рдЯреНрд░реИрдлрд┐рдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ Microsoft рдХреЗ Azure рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдпрд╛рддреНрд░рд╛ рдХрд░рддрд╛ рд╣реИ**ред рдпрд╣ рдкреНрд░рднрд╛рд╡реА рд░реВрдк рд╕реЗ рд╕реЗрд╡рд╛ рдХреЛ рдЖрдкрдХреЗ VNet рдореЗрдВ рд▓рд╛рддрд╛ рд╣реИред рдпрд╣ рд╕реЗрдЯрдЕрдк рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдбреЗрдЯрд╛ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред

Private Link рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рднрд┐рдиреНрди Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ Azure Storage, Azure SQL Database, рдФрд░ рдХрд╕реНрдЯрдо рд╕реЗрд╡рд╛рдПрдБ рдЬреЛ Private Link рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рд╛рдЭрд╛ рдХреА рдЬрд╛рддреА рд╣реИрдВред рдпрд╣ рдЖрдкрдХреЗ рдЕрдкрдиреЗ VNet рдХреЗ рднреАрддрд░ рд╕реЗ рдпрд╛ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдЕрд▓рдЧ Azure рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд╕реЗ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХреЗ рд╕реЗ рдЙрдкрднреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

{% hint style="danger" %}
NSGs рдХрд╛ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ Private Link рд╡рд╛рд▓реЗ рд╕рдмрдиреЗрдЯ рдХреЗ рд╕рд╛рде NSG рдХреЛ рдЬреЛрдбрд╝рдиреЗ рд╕реЗ рдХреЛрдИ рдкреНрд░рднрд╛рд╡ рдирд╣реАрдВ рдкрдбрд╝реЗрдЧрд╛ред
{% endhint %}

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рдкрд░рд┐рджреГрд╢реНрдп рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдЬрд╣рд╛рдБ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ **Azure SQL Database рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рдЕрдкрдиреЗ VNet рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдкрд╣реБрдБрдЪрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**ред рд╕рд╛рдорд╛рдиреНрдпрддрдГ, рдЗрд╕рдореЗрдВ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдкрд╛рд░ рдХрд░рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред Private Link рдХреЗ рд╕рд╛рде, рдЖрдк рдЕрдкрдиреЗ VNet рдореЗрдВ рдПрдХ **рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ рд╕реАрдзреЗ Azure SQL Database рд╕реЗрд╡рд╛ рд╕реЗ рдЬреБрдбрд╝рддрд╛ рд╣реИред рдпрд╣ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдРрд╕рд╛ рдкреНрд░рддреАрдд рдХрд░рд╛рддрд╛ рд╣реИ рдЬреИрд╕реЗ рд╡рд╣ рдЖрдкрдХреЗ рдЕрдкрдиреЗ VNet рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ, рдПрдХ рдирд┐рдЬреА IP рдкрддреЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрд▓рдн рд╣реИ, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рдирд┐рдЬреА рдкрд╣реБрдБрдЪ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# List Private Link Services
z network private-link-service list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List Private Endpoints
az network private-endpoint list --query "[].{name:name, location:location, resourceGroup:resourceGroup, privateLinkServiceConnections:privateLinkServiceConnections}" -o table
```
{% endcode %}

## Azure рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕

Azure рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдЖрдкрдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдирд┐рдЬреА рдкрддреЗ рдХреА рдЬрдЧрд╣ рдФрд░ рдЖрдкрдХреЗ VNet рдХреА рдкрд╣рдЪрд╛рди рдХреЛ Azure рд╕реЗрд╡рд╛рдУрдВ рддрдХ рд╕реАрдзреЗ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдХреЗ, **рдЖрдкрдХреЗ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрди Azure рд╕реЗрд╡рд╛рдУрдВ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЬреБрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ**, рдЬреИрд╕реЗ рдХрд┐ Azure Storage рдФрд░ Azure SQL Database, Azure рдХреЗ рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдПред рдЗрд╕рд╕реЗ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ **VNet рд╕реЗ Azure рд╕реЗрд╡рд╛ рддрдХ рдХрд╛ рдЯреНрд░реИрдлрд┐рдХ Azure рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рд╣реА рд░рд╣рддрд╛ рд╣реИ**, рдЬреЛ рдПрдХ рдЕрдзрд┐рдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдорд╛рд░реНрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

### **рдЙрджрд╛рд╣рд░рдг**

* рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ **Azure Storage** рдЦрд╛рддрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рд╕реБрд▓рдн рд╣реЛрддрд╛ рд╣реИред рдЕрдкрдиреЗ VNet рдХреЗ рднреАрддрд░ **Azure Storage рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╕рдХреНрд╖рдо рдХрд░рдХреЗ**, рдЖрдк рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рд╕реЗ рдЯреНрд░реИрдлрд┐рдХ рд╣реА рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХреЗред рдлрд┐рд░ рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рдХреА рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рд╕реЗ рдЯреНрд░реИрдлрд┐рдХ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# List Virtual Networks with Service Endpoints
az network vnet list --query "[].{name:name, location:location, serviceEndpoints:serviceEndpoints}" -o table

# List Subnets with Service Endpoints
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, serviceEndpoints:serviceEndpoints}" -o table
```
### рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдФрд░ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдВрдХреНрд╕ рдХреЗ рдмреАрдЪ рдХреЗ рдЕрдВрддрд░

Microsoft [**рдбреЙрдХреНрд╕**](https://learn.microsoft.com/en-us/azure/virtual-network/vnet-integration-for-azure-services#compare-private-endpoints-and-service-endpoints) рдореЗрдВ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдВрдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рддрд╛ рд╣реИ:\

<figure><img src="../../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

**рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕:**

* рдЖрдкрдХреЗ VNet рд╕реЗ Azure рд╕рд░реНрд╡рд┐рд╕ рддрдХ рдХрд╛ рдЯреНрд░реИрдлрд┐рдХ Microsoft Azure рдХреЗ рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдЬрд░рд┐рдП рдЪрд▓рддрд╛ рд╣реИ, рдкрдмреНрд▓рд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рддреЗ рд╣реБрдПред
* рдПрдВрдбрдкреЙрдЗрдВрдЯ Azure рд╕рд░реНрд╡рд┐рд╕ рд╕реЗ рд╕реАрдзрд╛ рдХрдиреЗрдХреНрд╢рди рд╣реИ рдФрд░ VNet рдХреЗ рднреАрддрд░ рд╕рд░реНрд╡рд┐рд╕ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рдЗрд╡реЗрдЯ IP рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред
* рд╕рд░реНрд╡рд┐рд╕ рдЕрднреА рднреА рдЕрдкрдиреЗ рдкрдмреНрд▓рд┐рдХ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЖрдкрдХреЗ VNet рдХреЗ рдмрд╛рд╣рд░ рд╕реЗ рд╕реБрд▓рдн рд╣реИ, рдЬрдм рддрдХ рдХрд┐ рдЖрдк рд╕рд░реНрд╡рд┐рд╕ рдлрд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдРрд╕реЗ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдирд╣реАрдВ рдХрд░рддреЗред
* рдпрд╣ рд╕рдмрдиреЗрдЯ рдФрд░ Azure рд╕рд░реНрд╡рд┐рд╕ рдХреЗ рдмреАрдЪ рдПрдХ-рд╕реЗ-рдПрдХ рд╕рдВрдмрдВрдз рд╣реИред
* рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдВрдХреНрд╕ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХрдо рдЦрд░реНрдЪреАрд▓рд╛ рд╣реИред

**рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдВрдХреНрд╕:**

* рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдВрдХ рдЖрдкрдХреЗ VNet рдореЗрдВ рдПрдХ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ Azure рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рдХреЛ рдореИрдк рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ VNet рдХреЗ рднреАрддрд░ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рдкреНрд░рд╛рдЗрд╡реЗрдЯ IP рдПрдбреНрд░реЗрд╕ рд╣реИред
* Azure рд╕рд░реНрд╡рд┐рд╕ рдХреЛ рдЗрд╕ рдкреНрд░рд╛рдЗрд╡реЗрдЯ IP рдПрдбреНрд░реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдпрд╣ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИред
* рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдВрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреБрдбрд╝реА рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рдХреЛ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рдпрд╛ рдЬреБрдбрд╝реЗ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рд╣реА рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ; рд╕рд░реНрд╡рд┐рд╕ рдХреЗ рд▓рд┐рдП рдкрдмреНрд▓рд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рд╣реИред
* рдпрд╣ Azure рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рдпрд╛ рдЖрдкрдХреА рдЕрдкрдиреА Azure рдореЗрдВ рд╣реЛрд╕реНрдЯ рдХреА рдЧрдИ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрдиреЗрдХреНрд╢рди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рджреВрд╕рд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЭрд╛ рдХреА рдЧрдИ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдХреЛ рднреАред
* рдпрд╣ рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдХреЗ рд╕рд╛рде рд╕рдмрдиреЗрдЯ рд╕реНрддрд░ рдкрд░ рд╡реНрдпрд╛рдкрдХ рдПрдХреНрд╕реЗрд╕ рдХрдВрдЯреНрд░реЛрд▓ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЖрдкрдХреЗ VNet рдореЗрдВ рдПрдХ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдзрд┐рдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдХреНрд╕реЗрд╕ рдХрдВрдЯреНрд░реЛрд▓ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

рд╕рд╛рд░рд╛рдВрд╢ рдореЗрдВ, рдЬрдмрдХрд┐ рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдФрд░ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдВрдХреНрд╕ рджреЛрдиреЛрдВ Azure рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, **рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдВрдХреНрд╕ рдПрдХ рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХреА рдЕрд▓рдЧрд╛рд╡ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдХреЗ рдХрд┐ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рдХреЛ рдирд┐рдЬреА рддреМрд░ рдкрд░ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдмрд┐рдирд╛ рдЙрдиреНрд╣реЗрдВ рдкрдмреНрд▓рд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рдХрд┐рдП**ред рджреВрд╕рд░реА рдУрд░, рд╕рд░реНрд╡рд┐рд╕ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдЖрдо рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЖрд╕рд╛рдиреА рд╕реЗ рд╕реЗрдЯрдЕрдк рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ Azure рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рддрдХ рд╕рд░рд▓, рд╕реБрд░рдХреНрд╖рд┐рдд рдПрдХреНрд╕реЗрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдмрд┐рдирд╛ VNet рдореЗрдВ рдкреНрд░рд╛рдЗрд╡реЗрдЯ IP рдХреА рдЬрд░реВрд░рдд рдХреЗред

## Azure Front Door (AFD) & AFD WAF

**Azure Front Door** рдЖрдкрдХреЗ рд╡реИрд╢реНрд╡рд┐рдХ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдХреЗрд▓реЗрдмрд▓ рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░рд╡реЗрд╢ рджреНрд╡рд╛рд░ рд╣реИред рдпрд╣ рд╡рд┐рднрд┐рдиреНрди рд╕реЗрд╡рд╛рдУрдВ рдЬреИрд╕реЗ рдХрд┐ рд╡реИрд╢реНрд╡рд┐рдХ **рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ, рд╕рд╛рдЗрдЯ рддреНрд╡рд░рдг, SSL рдСрдлрд▓реЛрдбрд┐рдВрдЧ, рдФрд░ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдлрд╛рдпрд░рд╡реЙрд▓ (WAF)** рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдПрдХ рд╣реА рд╕реЗрд╡рд╛ рдореЗрдВ **рд╕рдВрдпреЛрдЬрд┐рдд** рдХрд░рддрд╛ рд╣реИред Azure Front Door рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ **рд╕рдмрд╕реЗ рдирдЬрджреАрдХреА рдПрдЬ рд╕реНрдерд╛рди** рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмреБрджреНрдзрд┐рдорд╛рди рд░реВрдЯрд┐рдВрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрддреНрдХреГрд╖реНрдЯ рдкреНрд░рджрд░реНрд╢рди рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддреА рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ URL-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧ, рдорд▓реНрдЯреА-рд╕рд╛рдЗрдЯ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ, рд╕рддреНрд░ рд╕рдВрдмрдВрдзреАрддрд╛, рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкрд░рдд рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

**Azure Front Door WAF** рд╡реЗрдм-рдЖрдзрд╛рд░рд┐рдд рд╣рдорд▓реЛрдВ рд╕реЗ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рд░рдХреНрд╖рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдмрд┐рдирд╛ рдмреИрдХ-рдПрдВрдб рдХреЛрдб рдореЗрдВ рд╕рдВрд╢реЛрдзрди рдХреЗред рдЗрд╕рдореЗрдВ рдХрд╕реНрдЯрдо рдирд┐рдпрдо рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдирд┐рдпрдо рд╕реЗрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдЬреЛ SQL рдЗрдВрдЬреЗрдХреНрд╢рди, рдХреНрд░реЙрд╕-рд╕рд╛рдЗрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯрд┐рдВрдЧ, рдФрд░ рдЕрдиреНрдп рд╕рд╛рдорд╛рдиреНрдп рд╣рдорд▓реЛрдВ рдЬреИрд╕реЗ рдЦрддрд░реЛрдВ рд╕реЗ рдмрдЪрд╛рд╡ рдХрд░рддреЗ рд╣реИрдВред

### **рдЙрджрд╛рд╣рд░рдг**

* рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рджреБрдирд┐рдпрд╛ рднрд░ рдореЗрдВ рдлреИрд▓рд╛ рд╣реБрдЖ рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рд╡рд┐рддрд░рд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИред рдЖрдк Azure Front Door рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдирд┐рдХрдЯрддрдо рдХреНрд╖реЗрддреНрд░реАрдп рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдХреА рдУрд░ рд░реВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ рдЖрдкрдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░ рд░рд╣рд╛ рд╣реИ, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЛ рдХрдо рдХрд░рддреЗ рд╣реБрдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрднрд╡ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░рддреЗ рд╣реБрдП рдФрд░ **WAF рдХреНрд╖рдорддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╡реЗрдм рд╣рдорд▓реЛрдВ рд╕реЗ рдЗрд╕рдХреА рд░рдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реБрдП**ред рдпрджрд┐ рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдХреНрд╖реЗрддреНрд░ рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдХрд╛ рдЕрдиреБрднрд╡ рдХрд░рддрд╛ рд╣реИ, рддреЛ Azure Front Door рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдЕрдЧрд▓реЗ рд╕рд░реНрд╡реЛрддреНрддрдо рд╕реНрдерд╛рди рдкрд░ рдкреБрдирдГ рд░реВрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддреА рд╣реИред

### рд╕реВрдЪреАрдХрд░рдг

{% code overflow="wrap" %}
```bash
# List Azure Front Door Instances
az network front-door list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List Front Door WAF Policies
az network front-door waf-policy list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table
```
{% endcode %}

## Azure Application Gateway рдФрд░ Azure Application Gateway WAF

Azure Application Gateway рдПрдХ **рд╡реЗрдм рдЯреНрд░реИрдлрд┐рдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░** рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ **рд╡реЗрдм** рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рджреЗрддрд╛ рд╣реИред рдпрд╣ **Layer 7 рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ, SSL рдЯрд░реНрдорд┐рдиреЗрд╢рди, рдФрд░ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдлрд╝рд╛рдпрд░рд╡реЙрд▓ (WAF) рдХреНрд╖рдорддрд╛рдПрдВ** Application Delivery Controller (ADC) рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрд╡рд╛ рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рдореЗрдВ URL-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧ, рдХреБрдХреА-рдЖрдзрд╛рд░рд┐рдд рд╕рддреНрд░ рд╕рдВрдмрдВрдзреАрддрд╛, рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рд╕реЙрдХреЗрдЯреНрд╕ рд▓реЗрдпрд░ (SSL) рдСрдлрд▓реЛрдбрд┐рдВрдЧ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдЯрд┐рдВрдЧ рдФрд░ рдкрде-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧ рдЬреИрд╕реА рдЬрдЯрд┐рд▓ рд▓реЛрдб-рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╡рд╛рд▓реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВред

### рдЙрджрд╛рд╣рд░рдг

* рдПрдХ рдкрд░рд┐рджреГрд╢реНрдп рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдЬрд╣рд╛рдВ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдИ-рдХреЙрдорд░реНрд╕ рд╡реЗрдмрд╕рд╛рдЗрдЯ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрдИ рдЙрдкрдбреЛрдореЗрди рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЗ рдФрд░ рднреБрдЧрддрд╛рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ред Azure Application Gateway **URL рдкрде рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЙрдЪрд┐рдд рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рдХреЛ рдЯреНрд░реИрдлрд┐рдХ рд░реВрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `example.com/accounts` рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддрд╛ рд╕реЗрд╡рд╛ рдХреА рдУрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ `example.com/pay` рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рднреБрдЧрддрд╛рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реЗрд╡рд╛ рдХреА рдУрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
рдФрд░ **WAF рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреЛ рд╣рдорд▓реЛрдВ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦреЗрдВред**

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# List the Web Application Firewall configurations for your Application Gateways
az network application-gateway waf-config list --gateway-name <AppGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, firewallMode:firewallMode, ruleSetType:ruleSetType, ruleSetVersion:ruleSetVersion}" -o table
```
{% endcode %}

## Azure Hub, Spoke рдФрд░ VNet Peering

**VNet Peering** Azure рдореЗрдВ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕реБрд╡рд┐рдзрд╛ рд╣реИ рдЬреЛ **рд╡рд┐рднрд┐рдиреНрди Virtual Networks (VNets) рдХреЛ рд╕реАрдзреЗ рдФрд░ рд╕рд╣рдЬрддрд╛ рд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ**ред VNet peering рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдПрдХ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рджреВрд╕рд░реЗ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдирд┐рдЬреА IP рдкрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, **рдорд╛рдиреЛ рд╡реЗ рдПрдХ рд╣реА рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╣реЛрдВ**ред\
**VNet Peering рдХрд╛ рдЙрдкрдпреЛрдЧ рдСрди-рдкреНрд░реЗрдо рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд╕рд╛рде рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** рдПрдХ рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рдпрд╛ Azure ExpressRoute рд╕реЗрдЯрдЕрдк рдХрд░рдХреЗред

**Azure Hub рдФрд░ Spoke** Azure рдореЗрдВ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдЯреЛрдкреЛрд▓реЙрдЬреА рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред **"рд╣рдм" рдПрдХ рдХреЗрдВрджреНрд░реАрдп рдмрд┐рдВрджреБ рд╣реИ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди "рд╕реНрдкреЛрдХреНрд╕" рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдФрд░ рд░реВрдЯ рдХрд░рддрд╛ рд╣реИ**ред рд╣рдм рдореЗрдВ рдЖрдорддреМрд░ рдкрд░ рд╕рд╛рдЭрд╛ рд╕реЗрд╡рд╛рдПрдВ рдЬреИрд╕реЗ рдХрд┐ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕реЗрдЬ (NVAs), Azure VPN Gateway, Azure Firewall, рдпрд╛ Azure Bastion рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред **"рд╕реНрдкреЛрдХреНрд╕" VNets рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рд╡рд░реНрдХрд▓реЛрдбреНрд╕ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ VNet peering рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рдм рд╕реЗ рдЬреБрдбрд╝рддреЗ рд╣реИрдВ**, рдЬрд┐рд╕рд╕реЗ рд╡реЗ рд╣рдм рдХреЗ рднреАрддрд░ рд╕рд╛рдЭрд╛ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рд▓рд╛рдн рдЙрдард╛ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдореЙрдбрд▓ рд╕рд╛рдл рдиреЗрдЯрд╡рд░реНрдХ рд▓реЗрдЖрдЙрдЯ рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрддрд╛ рд╣реИ, рд╡рд┐рднрд┐рдиреНрди VNets рдореЗрдВ рдлреИрд▓реЗ рдХрдИ рд╡рд░реНрдХрд▓реЛрдбреНрд╕ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕рд╛рдорд╛рдиреНрдп рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдХреЗрдВрджреНрд░реАрдХреГрдд рдХрд░рдХреЗ рдЬрдЯрд┐рд▓рддрд╛ рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред

{% hint style="danger" %}
**Azure рдореЗрдВ VNET рдкреАрдпрд░рд┐рдВрдЧ рдЧреИрд░-рдкрд╛рд░рдЧрдореНрдп рд╣реИ**, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдпрджрд┐ рд╕реНрдкреЛрдХ 1 рд╕реНрдкреЛрдХ 2 рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ рдФрд░ рд╕реНрдкреЛрдХ 2 рд╕реНрдкреЛрдХ 3 рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ рддреЛ рд╕реНрдкреЛрдХ 1 рд╕реАрдзреЗ рд╕реНрдкреЛрдХ 3 рд╕реЗ рдмрд╛рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред
{% endhint %}

### рдЙрджрд╛рд╣рд░рдг

* рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП рдПрдХ рдХрдВрдкрдиреА рдЬрд┐рд╕рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рднрд╛рдЧ рд╣реИрдВ рдЬреИрд╕реЗ рдХрд┐ Sales, HR, рдФрд░ Development, **рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рдкрд╛рд╕ рдЕрдкрдирд╛ VNet рд╣реИ (рд╕реНрдкреЛрдХреНрд╕)**ред рдпреЗ VNets **рд╕рд╛рдЭрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд░рдЦрддреЗ рд╣реИрдВ** рдЬреИрд╕реЗ рдХрд┐ рдПрдХ рдХреЗрдВрджреНрд░реАрдп рдбреЗрдЯрд╛рдмреЗрд╕, рдПрдХ рдлрд╛рдпрд░рд╡реЙрд▓, рдФрд░ рдПрдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдЧреЗрдЯрд╡реЗ, рдЬреЛ рд╕рднреА **рдПрдХ рдЕрдиреНрдп VNet рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИрдВ (рд╣рдм)**ред Hub рдФрд░ Spoke рдореЙрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рднрд╛рдЧ **рд╕рд╛рдЭрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рд╣рдм VNet рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреБрдбрд╝ рд╕рдХрддрд╛ рд╣реИ рдмрд┐рдирд╛ рдЙрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рдХрд┐рдП рдмрд┐рдирд╛** рдпрд╛ рдЕрдиреЗрдХ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдЬрдЯрд┐рд▓ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдП рдмрд┐рдирд╛ред

### Enumeration

{% code overflow="wrap" %}
```bash
# List all VNets in your subscription
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List VNet peering connections for a given VNet
az network vnet peering list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, peeringState:peeringState, remoteVnetId:remoteVnetId}" -o table

# List Shared Resources (e.g., Azure Firewall) in the Hub
az network firewall list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table
```
{% endcode %}

## рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN

Azure рдореЗрдВ рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рдЖрдкрдХреЛ рдЕрдкрдиреЗ **рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдЖрдкрдХреЗ Azure Virtual Network (VNet) рд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ**, рдЬрд┐рд╕рд╕реЗ Azure рдХреЗ рднреАрддрд░ рдХреЗ рд╕рдВрд╕рд╛рдзрди рдЬреИрд╕реЗ рдХрд┐ VMs рдРрд╕реЗ рдкреНрд░рддреАрдд рд╣реЛрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ рдХрд┐ рд╡реЗ рдЖрдкрдХреЗ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╣реИрдВред рдпрд╣ рдХрдиреЗрдХреНрд╢рди рдПрдХ **VPN рдЧреЗрдЯрд╡реЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рджреЛрдиреЛрдВ рдиреЗрдЯрд╡рд░реНрдХреЛрдВ рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рддрд╛ рд╣реИ**ред

### **рдЙрджрд╛рд╣рд░рдг**

* рдиреНрдпреВ рдпреЙрд░реНрдХ рдореЗрдВ рд╕реНрдерд┐рдд рдЕрдкрдиреЗ рдореБрдЦреНрдп рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреЗ рд╕рд╛рде рдПрдХ рд╡реНрдпрд╛рдкрд╛рд░ рдЬрд┐рд╕рдХрд╛ рдПрдХ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рд╣реИ рдЬрд┐рд╕реЗ Azure рдореЗрдВ рдЕрдкрдиреЗ VNet рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЬреБрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕рдХреЗ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреНрдб рд╡рд░реНрдХрд▓реЛрдбреНрд╕ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИред **рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдХреЗ, рдХрдВрдкрдиреА рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рд╕рд░реНрд╡рд░реЛрдВ рдФрд░ Azure VMs рдХреЗ рдмреАрдЪ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд╕рдХрддреА рд╣реИ**, рдЬрд┐рд╕рд╕реЗ рджреЛрдиреЛрдВ рдкрд░реНрдпрд╛рд╡рд░рдгреЛрдВ рдореЗрдВ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рд╡реЗ рдПрдХ рд╣реА рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╣реЛрдВред

### **рдПрдиреНрдпреБрдорд░реЗрд╢рди**

{% code overflow="wrap" %}
```bash
# List VPN Gateways
az network vnet-gateway list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List VPN Connections
az network vpn-connection list --gateway-name <VpnGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, connectionType:connectionType, connectionStatus:connectionStatus}" -o table
```
{% endcode %}

## Azure ExpressRoute

Azure ExpressRoute рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдФрд░ Azure рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░реНрд╕ рдХреЗ рдмреАрдЪ **рдирд┐рдЬреА, рд╕рдорд░реНрдкрд┐рдд, рдЙрдЪреНрдЪ-рдЧрддрд┐ рдХрдиреЗрдХреНрд╢рди рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ**ред рдпрд╣ рдХрдиреЗрдХреНрд╢рди рдПрдХ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рддреЗ рд╣реБрдП рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рдЗрдВрдЯрд░рдиреЗрдЯ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛, рддреЗрдЬ рдЧрддрд┐, рдХрдо рд▓реЗрдЯреЗрдВрд╕реА, рдФрд░ рдЙрдЪреНрдЪ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реБрдПред

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рдмрд╣реБрд░рд╛рд╖реНрдЯреНрд░реАрдп рдХрдВрдкрдиреА рдХреЛ рдЕрдкрдиреА Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП **рдирд┐рд░рдВрддрд░ рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдХрдиреЗрдХреНрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдбреЗрдЯрд╛ рдХреА рдЙрдЪреНрдЪ рдорд╛рддреНрд░рд╛** рдФрд░ рдЙрдЪреНрдЪ рдереНрд░реВрдкреБрдЯ рдХреА рдЬрд░реВрд░рдд рд╣реЛрддреА рд╣реИред рдХрдВрдкрдиреА Azure ExpressRoute рдХрд╛ рдЪрдпрди рдХрд░рддреА рд╣реИ рддрд╛рдХрд┐ рд╡рд╣ рдЕрдкрдиреЗ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдХреЛ рд╕реАрдзреЗ Azure рд╕реЗ рдЬреЛрдбрд╝ рд╕рдХреЗ, рдЬрд┐рд╕рд╕реЗ рдмрдбрд╝реЗ рдкреИрдорд╛рдиреЗ рдкрд░ рдбреЗрдЯрд╛ рдЯреНрд░рд╛рдВрд╕рдлрд░, рдЬреИрд╕реЗ рдХрд┐ рджреИрдирд┐рдХ рдмреИрдХрдЕрдк рдФрд░ рд░рд┐рдпрд▓-рдЯрд╛рдЗрдо рдбреЗрдЯрд╛ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕, рдмрдврд╝реА рд╣реБрдИ рдЧреЛрдкрдиреАрдпрддрд╛ рдФрд░ рдЧрддрд┐ рдХреЗ рд╕рд╛рде рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реЛ рд╕рдХреЗред

### **рдПрдиреНрдпреБрдорд░реЗрд╢рди**

{% code overflow="wrap" %}
```bash
# List ExpressRoute Circuits
az network express-route list --query "[].{name:name, location:location, resourceGroup:resourceGroup, serviceProviderName:serviceProviderName, peeringLocation:peeringLocation}" -o table
```
<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ **рдореБрдЭреЗ рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>
