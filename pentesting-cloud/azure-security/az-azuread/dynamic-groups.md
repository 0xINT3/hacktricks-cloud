# Az - Προνομιούχοι Δυναμικές Ομάδες

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) στο GitHub.

</details>

## Βασικές Πληροφορίες

Οι **δυναμικές ομάδες** είναι ομάδες που έχουν διαμορφωθεί με ένα σύνολο **κανόνων** και όλοι οι **χρήστες ή συσκευές** που ταιριάζουν στους κανόνες προστίθενται στην ομάδα. Κάθε φορά που ένας χρήστης ή μια συσκευή έχει το **γνώρισμα** του **αλλάξει**, οι δυναμικοί κανόνες ελέγχονται ξανά. Και όταν δημιουργείται ένας **νέος κανόνας**, ελέγχονται όλες οι συσκευές και οι χρήστες.

Οι δυναμικές ομάδες μπορούν να έχουν αντιστοιχισμένους **ρόλους Azure RBAC**, αλλά δεν είναι δυνατή η προσθήκη **ρόλων AzureAD** σε δυναμικές ομάδες.

Αυτή η δυνατότητα απαιτεί άδεια Azure AD premium P1.

## Προνομιούχοι Δυναμικές Ομάδες

Σημειώστε ότι από προεπιλογή οποιοσδήποτε χρήστης μπορεί να προσκαλέσει επισκέπτες στο Azure AD, οπότε, εάν ένας κανόνας δυναμικής ομάδας δίνει **δικαιώματα** σε χρήστες με βάση τα **γνωρίσματα** που μπορούν να **οριστούν** σε έναν **νέο επισκέπτη**, είναι δυνατόν να **δημιουργηθεί ένας επισκέπτης** με αυτά τα γνωρίσματα και να **αναβαθμιστούν τα δικαιώματα**. Είναι επίσης δυνατό για έναν επισκέπτη να διαχειριστεί το δικό του προφίλ και να αλλάξει αυτά τα γνωρίσματα.

Λάβετε τις ομάδες που επιτρέπουν τη Δυναμική συμμετοχή: `Get-AzureADMSGroup | ?{$_.GroupTypes -eq 'DynamicMembership'}`

### Παράδειγμα

* **Παράδειγμα κανόνα**: `(user.otherMails -any (_ -contains "tester")) -and (user.userType -eq "guest")`
* **Περιγραφή κανόνα**: Οποιοσδήποτε επισκέπτης χρήστης με δευτερεύουσα ηλεκτρονική διεύθυνση που περιέχει τον όρο 'tester' θα προστεθεί στην ομάδα

1. Πηγαίνετε στο **Azure Active Directory** -> **Χρήστες** και **κάντε κλικ** στο `Θέλετε να επιστρέψετε στην προηγούμενη εμπειρία λίστας χρηστών; Κάντε κλικ εδώ για να αποχωρήσετε από την προεπισκόπηση`
2. Κάντε κλικ στο **`Νέος επισκέπτης χρήστης`** και **προσκαλέστε** ένα email
3. Το **προφίλ του χρήστη** θα προστεθεί στο Azure AD αμέσως μόλις αποσταλεί η πρόσκληση. Ανοίξτε το προφίλ του χρήστη και **κάντε κλικ στο (διαχείριση) κάτω από Αποδεκτή πρόσκληση**.
* ![](<../../../.gitbook/assets/image (87) (1).png>)
4. Αλλάξτε το **`Επανάληψη αποστολής πρόσκλησης;`** σε **Ναι** και θα λάβετε ένα URL πρόσκλησης:
* ![](<../../../.gitbook/assets/image (11) (1) (2) (1).png>)
5. Αντιγράψτε το **URL** και **ανοίξτε** το, **συνδεθείτε** ως ο προσκεκλημένος χρήστης και **αποδεχθείτε** την πρόσκληση
6. **Συνδεθείτε** στο cli ως ο χρήστης και ορίστε τη δευτερεύουσα ηλεκτρονική διεύθυνση

{% code overflow="wrap" %}
```powershell
# Σύνδεση
$password = ConvertTo-SecureString 'password' - AsPlainText -Force
$creds = New-Object
System.Management.Automation.PSCredential('externaltester@somedomain.onmicrosoft.com', $Password)
Connect-Azure
