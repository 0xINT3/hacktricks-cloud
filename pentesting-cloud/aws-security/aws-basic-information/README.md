# AWS - рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## рд╕рдВрдЧрдарди рд╡реНрдпрд╡рд╕реНрдерд╛

![](<../../../.gitbook/assets/image (54).png>)

### рдЦрд╛рддреЗ

AWS рдореЗрдВ рдПрдХ **рдореВрд▓ рдЦрд╛рддрд╛** рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ рд╕рдВрдЧрдарди рдХреЗ рд╕рднреА рдЦрд╛рддреЛрдВ рдХреЗ **рдорд╛рддрд╛ рдкреНрд░рддрд┐рд╖реНрдард╛рди** рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдкрдХреЛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрд╕ рдЦрд╛рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдЖрдк **рдЕрд▓рдЧ-рдЕрд▓рдЧ AWS рдЕрд╡рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреНрдп рдЦрд╛рддреЗ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ**ред

рдЗрд╕рдХрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдмрд╣реБрдд рдорд╣рддреНрд╡ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ **рдПрдХ рдЦрд╛рддрд╛ рджреВрд╕рд░реЗ рдЦрд╛рддреЗ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдЧрд╛** (рдХреЗрд╡рд▓ рдЬрдм рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдмреНрд░рд┐рдЬ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ), рдЗрд╕ рддрд░рд╣ рдЖрдк рд╕реАрдорд╛рдУрдВ рдХреЛ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рдмреАрдЪ рдореЗрдВ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕рд▓рд┐рдП, рдПрдХ рд╕рдВрдЧрдарди рдореЗрдВ **рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЦрд╛рддреЗ рд╣реЛрддреЗ рд╣реИрдВ** (рд╣рдо AWS рдЦрд╛рддреЛрдВ рдХреА рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдирд╣реАрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЛрдВ рдХреА): рдПрдХ рдПрдХрд▓ рдЦрд╛рддрд╛ рдЬреЛ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдПрдХ рдпрд╛ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╕рджрд╕реНрдп рдЦрд╛рддреЗред

*   **рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ (рдореВрд▓ рдЦрд╛рддрд╛)** рд╕рдВрдЧрдарди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдЦрд╛рддрд╛ рд╣реИред рд╕рдВрдЧрдарди рдХреЗ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ рд╕реЗ, рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* рд╕рдВрдЧрдарди рдореЗрдВ рдЦрд╛рддреЗ рдмрдирд╛рдПрдВ
* рд╕рдВрдЧрдарди рдореЗрдВ рдЕрдиреНрдп рдореМрдЬреВрджрд╛ рдЦрд╛рддреЛрдВ рдХреЛ рдЖрдордВрддреНрд░рд┐рдд рдХрд░реЗрдВ
* рд╕рдВрдЧрдарди рд╕реЗ рдЦрд╛рддреЗ рд╣рдЯрд╛рдПрдВ
* рдЖрдордВрддреНрд░рдг рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдВ
* рд╕рдВрдЧрдарди рдХреЗ рднреАрддрд░ рд╕рдВрдШ, OU рдпрд╛ рдЦрд╛рддреЛрдВ рдХреЛ рдиреАрддрд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░реЗрдВ
* рд╕рдорд░реНрдерд┐рдд AWS рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рд╕рдХреНрд╖рдо рдХрд░реЗрдВ рддрд╛рдХрд┐ рд╕рдВрдЧрдарди рдХреЗ рд╕рднреА рдЦрд╛рддреЛрдВ рдкрд░ рд╕реЗрд╡рд╛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛ рд╕рдХреЗред
* рдЗрд╕ рдореВрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдИрдореЗрд▓ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ рдореЗрдВ **рднреБрдЧрддрд╛рди рдХрд░рдиреЗ рдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░реА** рд╣реЛрддреА рд╣реИ рдФрд░ рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЙрдард╛рдП рдЧрдП рд╕рднреА рд╢реБрд▓реНрдХреЛрдВ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддрд╛ рд╣реИред рдЖрдк рдПрдХ рд╕рдВрдЧрдарди рдХреЗ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ рдХреЛ рдмрджрд▓ рдирд╣реАрдВ рд╕рдХрддреЗ рд╣реИрдВред
* **рд╕рджрд╕реНрдп рдЦрд╛рддреЗ** рд╕рдВрдЧрдарди рдореЗрдВ рд╢реЗрд╖ рд╕рднреА рдЦрд╛рддреЗ рдмрдирд╛рддреЗ рд╣реИрдВред рдПрдХ рдЦрд╛рддрд╛ рдХреЗрд╡рд▓ рдПрдХ рд╕рдВрдЧрдарди рдХрд╛ рд╕рджрд╕реНрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдЖрдк рдПрдХ рдЦрд╛рддреЗ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдиреАрддрд┐ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред
* рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рдХреЛ **рдПрдХ рдорд╛рдиреНрдп рдИрдореЗрд▓ рдкрддрд╛** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдПрдХ **рдирд╛рдо** рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╕рд╛рдорд╛рдиреНрдпрддрдГ рд╡реЗ рдмрд┐рд▓рд┐рдВрдЧ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ (рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдЗрд╕рдХрд╛ рдкрд╣реБрдВрдЪ рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ)ред
```
aws organizations create-account --account-name testingaccount --email testingaccount@lalala1233fr.com
```
### **рд╕рдВрдЧрдардирд┐рдХ рдЗрдХрд╛рдЗрдпрд╛рдБ**

рдЦрд╛рддреЛрдВ рдХреЛ **рд╕рдВрдЧрдардирд┐рдХ рдЗрдХрд╛рдЗрдпреЛрдВ (OU)** рдореЗрдВ рд╕рдореВрд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕ рддрд░реАрдХреЗ рд╕реЗ, рдЖрдк рд╕рдВрдЧрдардирд┐рдХ рдЗрдХрд╛рдИ рдХреЗ рд▓рд┐рдП **рдиреАрддрд┐рдпрд╛рдБ** рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╕рднреА рдмрдЪреНрдЪреЗ рдЦрд╛рддреЛрдВ рдкрд░ **рд▓рд╛рдЧреВ рд╣реЛрдВрдЧреА**ред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдПрдХ OU рдХреЗ рдЕрдиреНрдп OU рднреА рдмрдЪреНрдЪреЗ рдХреЗ рд░реВрдк рдореЗрдВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред
```bash
# You can get the root id from aws organizations list-roots
aws organizations create-organizational-unit --parent-id r-lalala --name TestOU
```
### рд╕реЗрд╡рд╛ рдирд┐рдпрдВрддреНрд░рдг рдиреАрддрд┐ (SCP)

рдПрдХ **рд╕реЗрд╡рд╛ рдирд┐рдпрдВрддреНрд░рдг рдиреАрддрд┐ (SCP)** рдПрдХ рдиреАрддрд┐ рд╣реИ рдЬреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреА рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рднреВрдорд┐рдХрд╛рдПрдБ SCP рдХреЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдЦрд╛рддреЛрдВ рдореЗрдВ рдХреМрди рд╕реА рд╕реЗрд╡рд╛рдПрдВ рдФрд░ рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпрд╛рдБ рдХрд░ рд╕рдХрддреА рд╣реИрдВред SCPs **IAM** рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рд╣реЛрддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрдирдореЗрдВ рдХреЛрдИ рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреА рдЬрд╛рддреА рд╣реИред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, SCPs рд╕рдВрдЧрдарди, рд╕рдВрдЧрдардирд┐рдХ рдЗрдХрд╛рдИ (OU) рдпрд╛ рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП **рдЕрдзрд┐рдХрддрдо рдЕрдиреБрдорддрд┐рдпреЛрдВ** рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреА рд╣реИрдВред рдЬрдм рдЖрдк рдЕрдкрдиреЗ рд╕рдВрдЧрдарди рдХреЗ рд░реВрдЯ рдпрд╛ OU рдореЗрдВ рдПрдХ SCP рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рддреЛ SCPs рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рдореЗрдВ рдЗрдХрд╛рдЗрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рд╕реАрдорд╛ рддрдп рдХрд░рддреА рд╣реИрдВред

рдпрд╣реА рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ **рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рднреА рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** рдХреБрдЫ рдХрд░рдиреЗ рд╕реЗред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрд▓рд╛рдЙрдбрдЯреНрд░реЗрд▓ рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдпрд╛ рдмреИрдХрдЕрдк рд╣рдЯрд╛рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
рдЗрд╕реЗ рдЕрдирджреЗрдЦрд╛ рдХрд░рдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рд╣реИ рдХрд┐ SCPs рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ **рдорд╛рд╕реНрдЯрд░ рдЦрд╛рддреЗ** рдХреЛ рднреА рд╣рдорд▓рд╛ рдХрд┐рдпрд╛ рдЬрд╛рдП (рдорд╛рд╕реНрдЯрд░ рдЦрд╛рддрд╛ рдмреНрд▓реЙрдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ)ред

{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **SCP рдХреЗрд╡рд▓ рдЦрд╛рддреЗ рдореЗрдВ рд╕реАрдорд┐рдд рдХрд░рддреЗ рд╣реИрдВ**, рдЗрд╕рд▓рд┐рдП рдЕрдиреНрдп рдЦрд╛рддреЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ SCP рджреНрд╡рд╛рд░рд╛ `s3:GetObject` рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рд╕реЗ рд▓реЛрдЧ рдЖрдкрдХреЗ рдЦрд╛рддреЗ рдореЗрдВ **рдПрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ S3 рдмрдХреЗрдЯ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рд╕реЗ рд░реЛрдХрд╛ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред
{% endhint %}

SCP рдЙрджрд╛рд╣рд░рдг:

* рд░реВрдЯ рдЦрд╛рддрд╛ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ
* рдХреЗрд╡рд▓ рд╡рд┐рд╢реЗрд╖ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ
* рдХреЗрд╡рд▓ рд╕рдлреЗрдж-рд╕реВрдЪреАрдд рд╕реЗрд╡рд╛рдПрдВ рдЕрдиреБрдорддрд┐ рджреЗрдВ
*   рдЧрд╛рд░реНрдбрдбреНрдпреВрдЯреА, рдХреНрд▓рд╛рдЙрдбрдЯреНрд░реЗрд▓ рдФрд░ S3 рдкрдмреНрд▓рд┐рдХ рдмреНрд▓реЙрдХ рдПрдХреНрд╕реЗрд╕ рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХреЗрдВ
*   рд╕реБрд░рдХреНрд╖рд╛/рд╣рд╛рджрд╕рд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдпрд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВред
* рдмреИрдХрдЕрдк рд╣рдЯрд╛рдиреЗ рд╕реЗ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВред
* IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдПрдХреНрд╕реЗрд╕ рдХреА рдирд┐рд░реНрдорд╛рдг рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ

[https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_manage\_policies\_scps\_examples.html](https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_manage\_policies\_scps\_examples.html) рдореЗрдВ **JSON рдЙрджрд╛рд╣рд░рдг** рдвреВрдВрдвреЗрдВ
```
arn:partition:service:region:account-id:resource-type/resource-id
arn:aws:elasticbeanstalk:us-west-1:123456789098:environment/App/Env
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ AWS рдореЗрдВ 4 рдкрд╛рд░реНрдЯреАрд╢рди рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ 3 рддрд░реАрдХреЗ рд╣реИрдВ рдЙрдиреНрд╣реЗрдВ рдмреБрд▓рд╛рдиреЗ рдХреЗ:

* AWS рдорд╛рдирдХ: `aws`
* AWS рдЪреАрди: `aws-cn`
* AWS рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ (GovCloud): `aws-us-gov`
* AWS рд╕реАрдХреНрд░реЗрдЯ (US Classified): `aws`

## IAM - рдкрд╣рдЪрд╛рди рдФрд░ рдкрд╣реБрдВрдЪ рдкреНрд░рдмрдВрдзрди

IAM рд╕реЗрд╡рд╛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ AWS рдЦрд╛рддреЗ рдХреЗ рднреАрддрд░ **рдкреНрд░рдорд╛рдгреАрдХрд░рдг**, **рдЕрдзрд┐рдХреГрддрддрд╛** рдФрд░ **рдкрд╣реБрдВрдЪ рдирд┐рдпрдВрддреНрд░рдг** рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧреАред

* **рдкреНрд░рдорд╛рдгреАрдХрд░рдг** - рдПрдХ рдкрд╣рдЪрд╛рди рдФрд░ рдЙрд╕ рдкрд╣рдЪрд╛рди рдХреА рд╕рддреНрдпрд╛рдкрди рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ред рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЙрдкрд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рдкрд╣рдЪрд╛рди рдФрд░ рд╕рддреНрдпрд╛рдкрдиред
* **рдЕрдзрд┐рдХреГрддрддрд╛** - рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдкрд╣рдЪрд╛рди рдХреЗ рдмрд╛рдж рдПрдХ рдкрд╣рдЪрд╛рди рдХреНрдпрд╛ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рднреАрддрд░ рдкрд╣реБрдВрдЪ рдХрд░ рд╕рдХрддреА рд╣реИред
* **рдкрд╣реБрдВрдЪ рдирд┐рдпрдВрддреНрд░рдг** - рд╕реБрд░рдХреНрд╖рд┐рдд рд╕рдВрд╕рд╛рдзрди рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдХреИрд╕реЗ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИ рдХрд╛ рддрд░реАрдХрд╛ рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛

IAM рдЖрдкрдХреЗ AWS рдЦрд╛рддреЗ рдХреЗ рднреАрддрд░ рдЖрдкрдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдкреНрд░рддрд┐ рдкрд╣рдЪрд╛рди, рдЕрдзрд┐рдХреГрддрддрд╛ рдФрд░ рдкрд╣реБрдВрдЪ рдирд┐рдпрдВрддреНрд░рдг рддрдВрддреНрд░реЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди, рдирд┐рдпрдВрддреНрд░рдг рдФрд░ рд╢рд╛рд╕рди рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЗ рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### [AWS рдЦрд╛рддрд╛ рдореВрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_root-user.html) <a href="#id_root" id="id_root"></a>

рдЬрдм рдЖрдк рдкрд╣рд▓реА рдмрд╛рд░ рдПрдХ рдЕрдореЗрдЬрд╝реЕрди рд╡реЗрдм рд╕реЗрд╡рд╛ (AWS) рдЦрд╛рддрд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдПрдХрд▓ рд╕рд╛рдЗрди-рдЗрди рдкрд╣рдЪрд╛рди рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдХреЗ рдкрд╛рд╕ рдЦрд╛рддреЗ рдореЗрдВ рд╕рднреА AWS рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ **рдкреВрд░рд╛ рдкрд╣реБрдВрдЪ рд╣реЛрддрд╛ рд╣реИ**ред рдпрд╣ AWS рдЦрд╛рддрд╛ _**рдореВрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛**_ рд╣реИ рдФрд░ рдЗрд╕реЗ **рдЦрд╛рддрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рдИрдореЗрд▓ рдкрддрд╛ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рд╕рд╛рдЗрди рдЗрди рдХрд░рдХреЗ рдкрд╣реБрдВрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИ**ред

рдПрдХ рдирдИ **рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рдЗрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдмрдЬрд╛рдп рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдмрдирд╛рдиреЗ рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред

### [IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_users.html) <a href="#id_iam-users" id="id_iam-users"></a>

IAM _рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛_ рдПрдХ рдРрд╕рд╛ рдЗрдХрд╛рдИ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк AWS рдореЗрдВ рдмрдирд╛рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдЗрд╕реЗ AWS рдХреЗ рд╕рд╛рде **рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╡реНрдпрдХреНрддрд┐ рдпрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдХреЛ рдкреНрд░рддрд┐рд╖реНрдард┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред AWS рдореЗрдВ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдирд╛рдо рдФрд░ рдкреНрд░рдорд╛рдг (рдкрд╛рд╕рд╡рд░реНрдб рдФрд░ рджреЛ рддрдХ рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА) рд╕реЗ рдорд┐рд▓рддрд╛ рд╣реИред

рдЬрдм рдЖрдк рдПрдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЙрд╕реЗ **рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдкреНрд░рджрд╛рди рдХрд░рдХреЗ рдЙрд╕реЗ рдЙрдЪрд┐рдд рдЕрдиреБрдорддрд┐ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рдХрд╛ рд╕рджрд╕реНрдп** рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ (рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ), рдпрд╛ **рд╕реАрдзреЗ рдиреАрддрд┐рдпреЛрдВ рдХреЛ рд╕рдВрд▓рдЧреНрди** рдХрд░рдХреЗред

рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ **рдХрдВрд╕реЛрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП MFA рд╕рдХреНрд╖рдо** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред MFA рд╕рдХреНрд╖рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ API рдЯреЛрдХрди MFA рджреНрд╡рд╛рд░рд╛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред рдпрджрд┐ рдЖрдк рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА API рдХреБрдВрдЬреАрдпреЛрдВ рдХреА рдкрд╣реБрдВрдЪ рдХреЛ MFA рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **рд╕реАрдорд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**, рддреЛ рдЖрдкрдХреЛ рдиреАрддрд┐ рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреБрдЫ рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпреЛрдВ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП MFA рдореМрдЬреВрдж рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдЙрджрд╛рд╣рд░рдг [**рдпрд╣рд╛рдВ**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_mfa\_configure-api-require.html))ред

#### CLI

* **рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА рдЖрдИрдбреА**: AKHDNAPO86BSHKDIRYT рдЬреИрд╕реЗ 20 рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЕрдкрд░рдХреЗрд╕ рдЕрд▓реНрдлрд╛рдиреНрдпреВрдореЗрд░рд┐рдХ рд╡рд░реНрдг
* **рдЧреБрдкреНрдд рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА рдЖрдИрдбреА**: S836fh/J73yHSb64Ag3Rkdi/jaD6sPl6/antFtU рдЬреИрд╕реЗ 40 рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЕрдкрд░рдХреЗрд╕ рдФрд░ рд▓реЛрдЕрд░рдХреЗрд╕ рд╡рд░реНрдг: (рдЦреЛрдП рдЧрдП рдЧреБрдкреНрдд рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА рдЖрдИрдбреА рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИ)ред

рдЬрдм рдЖрдкрдХреЛ **рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА рдмрджрд▓рдиреА** рд╣реЛрддреА рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП:\
_рдирдИ рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА рдмрдирд╛рдПрдВ -> рдирдП рдХреБрдВрдЬреА рдХреЛ рд╕рд┐рд╕реНрдЯрдо/рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░реЗрдВ -> рдореВрд▓ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдВ -> рдирдИ рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА рдХрд╛рдо рдХрд░ рд░рд╣реА рд╣реИ рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ -> рдкреБрд░рд╛рдиреА рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА рдХреЛ рд╣рдЯрд╛рдПрдВ_

### MFA - рдмрд╣реБ-рдХрд╛рд░рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг

рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЗ рдореМрдЬреВрджрд╛ рддрд░реАрдХреЛрдВ рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░рдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдкрд╛рд╕рд╡рд░реНрдб, рдЗрд╕рд▓рд┐рдП, рдПрдХ рдмрд╣реБ-рдХрд╛рд░рдХ рд╕реНрддрд░ рдХрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдмрдирд╛рддреЗ рд╣реИрдВред\
рдЖрдк рдПрдХ **рдореБрдлреНрдд рдЖрднрд╛рд╕реА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╛ рд╢рд╛рд░реАрд░рд┐рдХ рдЙрдкрдХрд░рдг** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк рдореБрдлреНрдд рдореЗрдВ рдПрдкреНрд╕ рдЬреИрд╕реЗ рдЧреВрдЧрд▓ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ AWS рдореЗрдВ MFA рдХреЛ рд╕рдХреНрд░рд┐рдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

MFA рд╢рд░реНрддреЛрдВ рд╡рд╛рд▓реА рдиреАрддрд┐рдпреЛрдВ рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЗ рд╕рд╛рде рд╕рдВрд▓рдЧреНрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

* IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рд╕рдореВрд╣
* рдПрдХ рд╕рдВрд╕рд╛рдзрди рдЬреИрд╕реЗ рдПрдХ рдЕрдореЗрдЬрд╝
```bash
aws sts get-session-token --serial-number <arn_device> --token-code <code>
```
[**рдпрд╣рд╛рдВ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_mfa\_configure-api-require.html) рдХреЗ рдЕрдиреБрд╕рд╛рд░, **MFA рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛** рд╣реИ рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдорд╛рдорд▓реЛрдВ рдореЗрдВред

### [IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_groups.html) <a href="#id_iam-groups" id="id_iam-groups"></a>

IAM [рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_groups.html) рдПрдХ рддрд░реАрдХрд╛ рд╣реИ **рдПрдХ рд╕рдордп рдореЗрдВ рдХрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдиреАрддрд┐рдпреЛрдВ рд╕реЗ рдЬреЛрдбрд╝рдиреЗ** рдХрд╛, рдЬреЛ рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред **рднреВрдорд┐рдХрд╛рдПрдБ рдФрд░ рд╕рдореВрд╣ рд╕рдореВрд╣ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ** рд╣реИрдВред

рдЖрдк рдПрдХ **рдкрд╣рдЪрд╛рди-рдЖрдзрд╛рд░рд┐рдд рдиреАрддрд┐ рдХреЛ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣** рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╕рднреА **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рд╕рдореВрд╣ **рдиреАрддрд┐ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**ред рдЖрдк рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣** рдХреЛ рдПрдХ **рдиреАрддрд┐** (рдЬреИрд╕реЗ рдХрд┐ рд╕рдВрд╕рд╛рдзрди-рдЖрдзрд╛рд░рд┐рдд рдиреАрддрд┐) рдореЗрдВ **`рдкреНрд░рдореБрдЦ`** рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣рдЪрд╛рди рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рд╕рдореВрд╣ рдЕрдиреБрдорддрд┐рдпреЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдкреНрд░рдореБрдЦ рддреЛ рдкреНрд░рдорд╛рдгрд┐рдд IAM рд╕рддреНрддрд╛рдзрд╛рд░реА рд╣реЛрддреЗ рд╣реИрдВред

рдпрд╣рд╛рдВ рдХреБрдЫ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ:

* рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ **рд╕рдореВрд╣** рдореЗрдВ **рдХрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ**, рдФрд░ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХрдИ рд╕рдореВрд╣реЛрдВ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдмрди рд╕рдХрддрд╛ рд╣реИред
* **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣реЛрдВ рдХреЛ рдиреЗрд╕реНрдЯреЗрдб рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛** рд╣реИ; рд╡реЗ рдХреЗрд╡рд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╣реА рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рджреВрд╕рд░реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣реЛрдВ рдХреЛ рдирд╣реАрдВред
* **AWS рдЦрд╛рддреЗ рдореЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рдирд╣реАрдВ рд╣реИ**ред рдпрджрд┐ рдЖрдк рдРрд╕рд╛ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЙрд╕реЗ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рд╣рд░ рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЙрд╕рдореЗрдВ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред
* AWS рдЦрд╛рддреЗ рдореЗрдВ IAM рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЖрдХрд╛рд░, рдЬреИрд╕реЗ рдХрд┐ рд╕рдореВрд╣реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рд╕рджрд╕реНрдп рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╕рдореВрд╣реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛, рд╕реАрдорд┐рдд рд╣реЛрддреА рд╣реИрдВред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, [IAM рдФрд░ AWS STS рдХреЛрдЯрд╛](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference\_iam-quotas.html) рджреЗрдЦреЗрдВред

### [IAM рднреВрдорд┐рдХрд╛рдПрдБ](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_roles.html) <a href="#id_iam-roles" id="id_iam-roles"></a>

IAM **рднреВрдорд┐рдХрд╛** рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреЗ рд╕рдорд╛рди рд╣реИ, рдЗрд╕рдХреЗ рдЕрд░реНрде рд╣реИ рдХрд┐ рдпрд╣ рдПрдХ **рдкрд╣рдЪрд╛рди рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЕрдиреБрдорддрд┐ рдиреАрддрд┐рдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИрдВ рдХрд┐** рдпрд╣ AWS рдореЗрдВ рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреА рд╣реИ рдФрд░ рдХреНрдпрд╛ рдирд╣реАрдВред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рднреВрдорд┐рдХрд╛ рдХреЗ рд╕рд╛рде рдХреЛрдИ **рдкреНрд░рдорд╛рдг рдкрддреНрд░** (рдкрд╛рд╕рд╡рд░реНрдб рдпрд╛ рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА) рдЬреБрдбрд╝рд╛ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред рдЗрд╕реЗ рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдХреЗ рд╕рд╛рде рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдиреЗ рдХреА рдмрдЬрд╛рдп, рдПрдХ рднреВрдорд┐рдХрд╛ рдХрд┐рд╕реА рднреА рд╡реНрдпрдХреНрддрд┐ рджреНрд╡рд╛рд░рд╛ **рдЕрд╕реНрд╕реБрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдЗрд╕реЗ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ (рдФрд░ рдкрд░реНрдорд┐рд╢рди рдХрд╛рдлреА рд╣реЛрддреА рд╣реИ)**ред рдПрдХ **IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдЕрд╕реНрд╕реБрдо рдХрд░ рд╕рдХрддрд╛ рд╣реИ**ред рдПрдХ рднреВрдорд┐рдХрд╛ рдХреЛ рдПрдХ [**рдлреЗрдбрд░реЗрдЯреЗрдб рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_roles\_providers.html) рдХреЛ рдЖрд╡рдВрдЯрд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ рдЬреЛ IAM рдХреЗ рдмрдЬрд╛рдп рдПрдХ рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд╛рдЗрди рдЗрди рдХрд░рддрд╛ рд╣реИред

IAM рднреВрдорд┐рдХрд╛ рдореЗрдВ **рджреЛ рдкреНрд░рдХрд╛рд░ рдХреА рдиреАрддрд┐рдпрд╛рдБ** рд╣реЛрддреА рд╣реИрдВ: рдПрдХ **рд╡рд┐рд╢реНрд╡рд╛рд╕ рдиреАрддрд┐**, рдЬреЛ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ, рдЬреЛ **рдХреМрди рднреВрдорд┐рдХрд╛ рдЕрд╕реНрд╕реБрдо рдХрд░ рд╕рдХрддрд╛ рд╣реИ** рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИ, рдФрд░ рдПрдХ **рдЕрдиреБрдорддрд┐ рдиреАрддрд┐**, рдЬреЛ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ, рдЬреЛ **рдЗрд╕реЗ рдХреНрдпрд╛ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреА рд╣реИ** рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИред

#### AWS рд╕реБрд░рдХреНрд╖рд╛ рдЯреЛрдХрди рд╕реЗрд╡рд╛ (STS)

рдпрд╣ рдПрдХ рд╡реЗрдм рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ AWS рдкрд╣рдЪрд╛рди рдФрд░ рдкрд╣реБрдБрдЪ рдкреНрд░рдмрдВрдзрди (IAM) рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП **рдЕрд╕реНрдерд╛рдпреА, рд╕реАрдорд┐рдд-рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рдорд╛рдг рдкрддреНрд░** рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рддреА рд╣реИ (рдлреЗрдбрд░реЗрдЯреЗрдб рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛)ред

### [IAM рдореЗрдВ рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдг рдкрддреНрд░](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_temp.html) <a href="#id_temp-creds" id="id_temp-creds"></a>

**рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдкреНрд░рд╛рдердорд┐рдХ рд░реВрдк рд╕реЗ IAM рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ**, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рднреА рдЕрдиреНрдп рдЙрдкрдпреЛрдЧ рд╣реЛрддреЗ рд╣реИрдВред рдЖрдк рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рдЖрдкрдХреЗ рдорд╛рдирдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рд╕реАрдорд┐рдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВред рдпрд╣ рдЖрдкрдХреЛ рдЕрдзрд┐рдХ рд╕реАрдорд┐рдд рдкреНрд░рдорд╛рдг рдкрддреНрд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрдорддрд┐рдд рдирд╣реАрдВ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдЕрдХреНрд╕рд░ рдирд╣реАрдВ рдХрд░рдиреЗ рд╕реЗ рдмрдЪрд╛рддрд╛ рд╣реИред рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдг рдкрддреНрд░реЛрдВ рдХрд╛ рдПрдХ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐ рд╡реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдПрдХ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╕рдордпрд╛рд╡рдзрд┐ рдХреЗ рдмрд╛рдж рд╕рдорд╛рдк
```javascript
{
"Version": "2012-10-17",  //Version of the policy
"Statement": [  //Main element, there can be more than 1 entry in this array
{
"Sid": "Stmt32894y234276923" //Unique identifier (optional)
"Effect": "Allow", //Allow or deny
"Action": [  //Actions that will be allowed or denied
"ec2:AttachVolume",
"ec2:DetachVolume"
],
"Resource": [ //Resource the action and effect will be applied to
"arn:aws:ec2:*:*:volume/*",
"arn:aws:ec2:*:*:instance/*"
],
"Condition": { //Optional element that allow to control when the permission will be effective
"ArnEquals": {"ec2:SourceInstanceARN": "arn:aws:ec2:*:*:instance/instance-id"}
}
}
]
}
```
[рдпрд╣рд╛рдБ](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference\_policies\_condition-keys.html#condition-keys-resourceaccount) рдХрд┐рд╕реА рднреА рд╕реЗрд╡рд╛ рдореЗрдВ рд╢рд░реНрддреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ рд╡реИрд╢реНрд╡рд┐рдХ рдлрд╝реАрд▓реНрдб рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХреГрдд рд╣реИрдВред\
[рдпрд╣рд╛рдБ](https://docs.aws.amazon.com/service-authorization/latest/reference/reference\_policies\_actions-resources-contextkeys.html) рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рд╢рд░реНрддреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдлрд╝реАрд▓реНрдб рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХреГрдд рд╣реИрдВред

#### рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐рдпрд╛рдБ

рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдиреАрддрд┐рдпрд╛рдБ **рд╕реАрдзреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рд╕рдореВрд╣ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреЛ рд╕реМрдВрдкреА рдЬрд╛рддреА рд╣реИрдВ**ред рдлрд┐рд░, рд╡реЗ рдиреАрддрд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА рдореЗрдВ рдХрд┐рд╕реА рдЕрдиреНрдп рдХреЗ рд░реВрдк рдореЗрдВ рдирд╣реАрдВ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИрдВред\
рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐рдпрд╛рдБ рдЙрдкрдпреЛрдЧреА рд╣реЛрддреА рд╣реИрдВ рдЕрдЧрд░ рдЖрдк рдПрдХ рдиреАрддрд┐ рдФрд░ рдЙрд╕реЗ рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдкрд╣рдЪрд╛рди рдХреЗ рдмреАрдЪ рдПрдХ рд╕рдЦреНрдд рдПрдХ-рд╕реЗ-рдПрдХ рд╕рдВрдмрдВрдз рдмрдирд╛рдП рд░рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рдиреАрддрд┐ рдореЗрдВ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЕрдиреБрдЪрд┐рдд рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдкрд╣рдЪрд╛рди рдХреЛ рд╕реМрдВрдкреА рдирд╣реАрдВ рдЬрд╛рддреА рд╣реИрдВред рдЬрдм рдЖрдк рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдиреАрддрд┐ рдореЗрдВ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЕрдиреБрдЪрд┐рдд рд░реВрдк рд╕реЗ рдЧрд▓рдд рдкрд╣рдЪрд╛рди рдХреЗ рд╕рд╛рде рд╕рдВрд▓рдЧреНрди рдирд╣реАрдВ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм рдЖрдк AWS рдкреНрд░рдмрдВрдзрди рдХрдВрд╕реЛрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрд╕ рдкрд╣рдЪрд╛рди рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ, рдкрд╣рдЪрд╛рди рдореЗрдВ рд╕рдВрд▓рдЧреНрди рдиреАрддрд┐рдпрд╛рдБ рднреА рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИрдВред рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдкреНрд░рдореБрдЦ рдЗрдХрд╛рдИ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрддреА рд╣реИрдВред

#### рд╕рдВрд╕рд╛рдзрди рдмрдХреЗрдЯ рдиреАрддрд┐рдпрд╛рдБ

рдпреЗ рдиреАрддрд┐рдпрд╛рдБ рд╣реИрдВ рдЬреЛ **рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред **AWS рдХреЗ рд╕рднреА рд╕рдВрд╕рд╛рдзрди рдЙрдиреНрд╣реЗрдВ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ**ред

рдпрджрд┐ рдХрд┐рд╕реА рдкреНрд░рдореБрдЦ рдХреЛ рдЙрди рдкрд░ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдирд╣реАрдВ рд╣реИ рдФрд░ рдХреЛрдИ рд╕рдВрд╕рд╛рдзрди рдиреАрддрд┐ рдЙрдиреНрд╣реЗрдВ рдкрд╣реБрдВрдЪ рджреЗрддреА рд╣реИ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдЕрдиреБрдорддрд┐ рд╣реЛрддреА рд╣реИред

### IAM рд╕реАрдорд╛рдПрдБ

IAM рд╕реАрдорд╛рдПрдБ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреЛ **рдкрд╣реБрдВрдЪ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП** рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред рдЗрд╕ рддрд░реАрдХреЗ рд╕реЗ, рдпрджрд┐ рдПрдХ рдЕрд▓рдЧ рдиреАрддрд┐ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдПрдХ **рдЕрд▓рдЧ рд╕реЗрдЯ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИрдВ, рддреЛ рдпрджрд┐ рд╡рд╣ рдЙрдиреНрд╣реЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИ рддреЛ рдХрд╛рд░реНрдп рд╣реЛ рдЬрд╛рдПрдЧрд╛ред

рд╕реАрдорд╛ рдмрд╕ рдПрдХ рдиреАрддрд┐ рд╣реЛрддреА рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рд╛рде рд╕рдВрд▓рдЧреНрди рдХреА рдЬрд╛рддреА рд╣реИ рдФрд░ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреА рдЕрдзрд┐рдХрддрдо рд╕реНрддрд░ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИред рдЗрд╕рд▓рд┐рдП, **рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ рдкреНрд░рд╢рд╛рд╕рдХ рдкрд╣реБрдВрдЪ рд╣реЛрддреА рд╣реИ**, рддреЛ рдпрджрд┐ рд╕реАрдорд╛ рдЗрд╕рдХрд╛ рдЗрдВрдбрд┐рдХреЗрдЯ рдХрд░рддреА рд╣реИ рдХрд┐ рд╡рд╣ рдХреЗрд╡рд▓ S3 рдмрдХреЗрдЯ рдкрдврд╝ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рд╡рд╣реА рд╡рд╣ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

**рдпрд╣**, **SCPs** рдФрд░ **рдиреНрдпреВрдирддрдо рдЕрдзрд┐рдХрд╛рд░** рдХреЗ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рдЙрди рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рд╣реИ рдЬрд┐рдирд╕реЗ рдпрд╣ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдкрд╛рд╕ рдЙрдирд╕реЗ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рдЙрдиреНрд╣реЗрдВ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрддреА рд╣реИрдВред

### рд╕рддреНрд░ рдиреАрддрд┐рдпрд╛рдБ

рдПрдХ рд╕рддреНрд░ рдиреАрддрд┐ рдПрдХ рдиреАрддрд┐ рд╣реЛрддреА рд╣реИ рдЬреЛ рдХрд┐рд╕реА рднреВрдорд┐рдХрд╛ рдХреЛ **рдЕрдиреБрдорд╛рдирд┐рдд рдХрд░рдиреЗ рдкрд░ рд╕реЗрдЯ рдХреА рдЬрд╛рддреА рд╣реИ**ред рдпрд╣ рдЙрд╕ рд╕рддреНрд░ рдХреЗ рд▓рд┐рдП рдПрдХ **IAM рд╕реАрдорд╛ рдХреА рддрд░рд╣ рд╣реЛрддреА рд╣реИ**: рдЗрд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд╕рддреНрд░ рдиреАрддрд┐ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддреА рд╣реИрдВ рдмрд▓реНрдХрд┐ рдЙрдиреНрд╣реЗрдВ рдиреАрддрд┐ рдореЗрдВ рджрд┐рдЦрд╛рдИ рдЧрдИ рдЕрдзрд┐рдХрддрдо рдЕрдиреБрдорддрд┐рдпреЛрдВ рддрдХ рд╕реАрдорд┐рдд рдХрд░рддреА рд╣реИрдВред

рдпрд╣ **рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ** рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрддреА рд╣реИ: рдЬрдм рдПрдХ рдкреНрд░рд╢рд╛рд╕рдХ рдПрдХ рдмрд╣реБрдд рдЕрдзрд┐рдХрд╛рдзрд┐рдХрд╛рд░реА рднреВрдорд┐рдХрд╛ рдХрд╛ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдиреЗ рдЬрд╛ рд░рд╣рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рд╕рддреНрд░ рдиреАрддрд┐ рдореЗрдВ рджрд┐рдЦрд╛рдИ рдЧрдИ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╣реА рд╕реАрдорд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдпрджрд┐ рд╕рддреНрд░ рдХреЛ рдХрдВрдкреНрд░реЛрдорд╛рдЗрдЬрд╝ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
```bash
aws sts assume-role \
--role-arn <value> \
--role-session-name <value> \
[--policy-arns <arn_custom_policy1> <arn_custom_policy2>]
[--policy <file://policy.json>]
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ **AWS рд╕рддреНрд░ рдиреАрддрд┐рдпреЛрдВ рдХреЛ рд╕рддреНрд░реЛрдВ рдореЗрдВ рдЬреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реИ** рдЬреЛ рддреАрд╕рд░реЗ рдХрд╛рд░рдгреЛрдВ рдХреЗ рдХрд╛рд░рдг рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╣реЛрдВрдЧреЗред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, [рдЕрдирд╡реИрдзрд┐рдХреГрдд рдХреЛрдЧреНрдирд┐рддреЛ рдЕрд╕реНрдорд┐рдд рднреВрдорд┐рдХрд╛рдУрдВ](../aws-services/aws-cognito-enum/cognito-identity-pools.md#accessing-iam-roles) рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ (рдЙрдиреНрдирдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ), AWS рд╡рд╣ рд╕рддреНрд░ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде **рд╕рддреНрд░ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╢реНрд░реЗрдгреА рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛** рдЬреЛ рд╕рддреНрд░ рдХреЛ рдкрд╣реБрдБрдЪ рджреЗрдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░реЗрдЧреА [**рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реВрдЪреА рддрдХ**](https://docs.aws.amazon.com/cognito/latest/developerguide/iam-roles.html#access-policies-scope-down-services)ред

рдЗрд╕рд▓рд┐рдП, рдЕрдЧрд░ рдХрднреА рдЖрдкрдХреЛ рддреНрд░реБрдЯрд┐ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ "... рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рд╕рддреНрд░ рдиреАрддрд┐ рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддреА рд╣реИ ...", рдФрд░ рднреВрдорд┐рдХрд╛ рдХреЗ рдкрд╛рд╕ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ **рд╡рд╣рд╛рдВ рдПрдХ рд╕рддреНрд░ рдиреАрддрд┐ рд╣реИ рдЬреЛ рдЗрд╕реЗ рд░реЛрдХ рд░рд╣реА рд╣реИ**ред

### рдкрд╣рдЪрд╛рди рдлреЗрдбрд░реЗрд╢рди

рдкрд╣рдЪрд╛рди рдлреЗрдбрд░реЗрд╢рди **рд╡рд┐рджреЗрд╢реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛рдУрдВ рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ AWS рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдкрд╣реБрдБрдЪрдиреЗ рджреЗрддрд╛ рд╣реИ** рдмрд┐рдирд╛ рд╡реИрдз IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЗ рд╕реЗ AWS рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред\
рдПрдХ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдЖрдкрдХреА рдЦреБрдж рдХреА рдХреЙрд░реНрдкреЛрд░реЗрдЯ **рдорд╛рдЗрдХреНрд░реЛрд╕реЙрдлреНрдЯ рдПрдХреНрдЯрд┐рд╡ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА** (SAML рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ) рдпрд╛ **OpenID** рд╕реЗрд╡рд╛рдПрдВ (рдЬреИрд╕реЗ **Google**) рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдлреЗрдбрд░реЗрдЯреЗрдб рдкрд╣реБрдБрдЪ рдЙрд╕реЗ рдлрд┐рд░ рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ AWS рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рджреЗрддреА рд╣реИред

рдЗрд╕ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ **IAM рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (SAML рдпрд╛ OAuth)** рдЬреЛ **рджреВрд╕рд░реЗ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЛ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░реЗрдЧрд╛**ред рдлрд┐рд░, рдХрдо рд╕реЗ рдХрдо рдПрдХ **IAM рднреВрдорд┐рдХрд╛ рдХреЛ рдЖрд╡рдВрдЯрд┐рдд (рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рдиреЗ) рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХреЛ**ред рдпрджрд┐ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рд╕реЗ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ AWS рддрдХ рдкрд╣реБрдБрдЪрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рднреВрдорд┐рдХрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣реБрдБрдЪ рд░рд╣рд╛ рд╣реЛрдЧрд╛ред

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдк рдЖрдорддреМрд░ рдкрд░ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рдореВрд╣ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ **рдЕрд▓рдЧ-рдЕрд▓рдЧ рднреВрдорд┐рдХрд╛ рджреЗрдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ**ред рдлрд┐рд░, рдХрдИ **IAM рднреВрдорд┐рдХрд╛рдПрдВ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХреЛ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░ рд╕рдХрддреА рд╣реИрдВ рдФрд░ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рднреВрдорд┐рдХрд╛ рдпрд╛ рджреВрд╕рд░реА рднреВрдорд┐рдХрд╛ рдХреЛ рдЕрд╕реНрд╕реБрдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧреА**ред

<figure><img src="../../../.gitbook/assets/image (1) (2).png" alt=""><figcaption></figcaption></figure>

### IAM рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░

AWS IAM рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ (AWS Single Sign-On рдХрд╛ рдЙрддреНрддрд░рд╛рдзрд┐рдХрд╛рд░реА) AWS рдкрд╣рдЪрд╛рди рдФрд░ рдкрд╣реБрдБрдЪ рдкреНрд░рдмрдВрдзрди (IAM) рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдПрдХ **рдХреЗрдВрджреНрд░реАрдп рд╕реНрдерд╛рди** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ AWS рдЦрд╛рддреЛрдВ рдФрд░ рдХреНрд▓рд╛рдЙрдб рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдкреНрд░рд╢рд╛рд╕рди рдФрд░ рдЙрдирдХреА рдкрд╣реБрдБрдЪ рдХреЛ рдПрдХрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ**ред

рд▓реЙрдЧрд┐рди рдбреЛрдореЗрди рдХреБрдЫ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реЛрдЧрд╛ `<user_input>.awsapps.com`ред

рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, 3 рдкрд╣рдЪрд╛рди рд╕реНрд░реЛрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

* рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛: рдирд┐рдпрдорд┐рдд AWS рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛
* рд╕рдХреНрд░рд┐рдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛: рд╡рд┐рднрд┐рдиреНрди рдХрдиреЗрдХреНрдЯрд░ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ
* рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛: рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рд╕рдореВрд╣ рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рд╕реЗ рдЖрддреЗ рд╣реИрдВ (IdP)

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (3) (1) (1).png" alt=""><figcaption></figcaption></figure>

рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд╕рд░рд▓рддрдо рдорд╛рдорд▓реЗ рдореЗрдВ, **рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдФрд░ рд╕рдореВрд╣реЛрдВ рдХреА рд╕реВрдЪреА рд╣реЛрдЧреА** рдФрд░ рд╡рд╣ рдЙрдиреНрд╣реЗрдВ рд╕рдВрдЧрдарди рдХреЗ рдХрд┐рд╕реА рднреА рдЦрд╛рддреЗ рдореЗрдВ рдиреАрддрд┐рдпреЛрдВ рдХреЛ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛ред

рдПрдХ рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ / рд╕рдореВрд╣ рдХреЛ рдЦрд╛рддреЗ рдореЗрдВ рдкрд╣реБрдБрдЪ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ **SAML рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛**, рдФрд░ рдЧрдВрдд
## рд╡рд┐рд╡рд┐рдз

### CLI рдкреНрд░рдорд╛рдгреАрдХрд░рдг

AWS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ CLI рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рд╕рд╛рдзрд╛рд░рд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ **рд╕реНрдерд╛рдиреАрдп рдкреНрд░рдорд╛рдгрдкрддреНрд░** рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЖрдк рдЗрдиреНрд╣реЗрдВ `~/.aws/credentials` рдореЗрдВ **рдореИрдиреНрдпреБрдЕрд▓** рд░реВрдк рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ **рдЪрд▓рд╛ рдХрд░** `aws configure` рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред\
рдЙрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдпрджрд┐ **рдХреЛрдИ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ **aws cli** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЙрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╡рд╣ рдЬреЛ рдирд╛рдордХ **`[default]`** рд╣реЛрдЧрд╛, рдЙрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред\
рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рд╡рд╛рд▓реА рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрджрд╛рд╣рд░рдг:
```
[default]
aws_access_key_id = AKIA5ZDCUJHF83HDTYUT
aws_secret_access_key = uOcdhof683fbOUGFYEQug8fUGIf68greoihef

[Admin]
aws_access_key_id = AKIA8YDCu7TGTR356SHYT
aws_secret_access_key = uOcdhof683fbOUGFYEQuR2EIHG34UY987g6ff7
region = eu-west-2
```
рдпрджрд┐ рдЖрдкрдХреЛ **рд╡рд┐рднрд┐рдиреНрди AWS рдЦрд╛рддреЛрдВ** рддрдХ рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рдФрд░ рдЖрдкрдХреЗ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ **рдЙрди рдЦрд╛рддреЛрдВ рдХреЗ рднреАрддрд░ рдПрдХ рднреВрдорд┐рдХрд╛ рдЕрднрд┐рдЧрдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐** рджреА рдЧрдИ рд╣реЛ, рддреЛ рдЖрдкрдХреЛ рд╣рд░ рдмрд╛рд░ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ STS рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА (`aws sts assume-role --role-arn <role-arn> --role-session-name sessname`) рдФрд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред

рдЖрдк `~/.aws/config` рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ [**рдЗрдВрдЧрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреМрди рд╕реА рднреВрдорд┐рдХрд╛рдПрдВ рдЕрднрд┐рдЧрдо рдХрд░рдиреА рд╣реИрдВ**](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html), рдФрд░ рдлрд┐рд░ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ `--profile` рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП `assume-role` рдПрдХ рдкрд╛рд░рджрд░реНрд╢реА рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛)ред\
рдПрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓ рдЙрджрд╛рд╣рд░рдг:
```
[profile acc2]
region=eu-west-2
role_arn=arn:aws:iam::<account-id>:role/<role-path>
role_session_name = <session_name>
source_profile = <profile_with_assume_role>
sts_regional_endpoints = regional
```
рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдЖрдк рдлрд┐рд░ aws cli рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
aws --profile acc2 ...
```
рдпрджрд┐ рдЖрдк рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреБрдЫ **рд╕рдорд╛рди** рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЗ рд▓рд┐рдП рдвреВрдВрдврд╝ рд░рд╣реЗ рд╣реИрдВ рддреЛ рдЖрдк **рдПрдХреНрд╕рдЯреЗрдВрд╢рди** [**AWS Extend Switch Roles**](https://chrome.google.com/webstore/detail/aws-extend-switch-roles/jpmkfafbacpgapdghgdpembnojdlgkdl?hl=en) рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## рд╕рдВрджрд░реНрдн

* [https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_getting-started\_concepts.html](https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_getting-started\_concepts.html)
* [https://aws.amazon.com/iam/](https://aws.amazon.com/iam/)
* [https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html](https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>
