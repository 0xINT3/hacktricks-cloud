# AWS - рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реБрд░реБрдЖрдд рд╕реЗ рд▓реЗрдХрд░ рдПрдХреНрд╕рдкрд░реНрдЯ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ.

</details>

## рд╕рдВрдЧрдарди рдХреА рдкрджрд╛рдиреБрдХреНрд░рдо

![](<../../../.gitbook/assets/image (54).png>)

### рдЦрд╛рддреЗ

AWS рдореЗрдВ рдПрдХ **рд░реВрдЯ рдЦрд╛рддрд╛** рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ **рд╕рдВрдЧрдарди** рдХреЗ рд╕рднреА рдЦрд╛рддреЛрдВ рдХреЗ рд▓рд┐рдП **рдореВрд▓ рдХрдВрдЯреЗрдирд░** рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрд╕ рдЦрд╛рддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЖрдк **рдЕрд▓рдЧ-рдЕрд▓рдЧ AWS** рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдХреЛ рдЙрдирдХреЗ рдмреАрдЪ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдЕрдиреНрдп рдЦрд╛рддреЗ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ**ред

рдпрд╣ **рд╕реБрд░рдХреНрд╖рд╛** рдХреА рджреГрд╖реНрдЯрд┐ рд╕реЗ рдмрд╣реБрдд рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ **рдПрдХ рдЦрд╛рддрд╛ рджреВрд╕рд░реЗ рдЦрд╛рддреЗ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдЧрд╛** (рдЬрдм рддрдХ рдХрд┐ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдкреБрд▓ рдирд╣реАрдВ рдмрдирд╛рдП рдЧрдП рд╣реЛрдВ), рдЗрд╕ рддрд░рд╣ рдЖрдк рддреИрдирд╛рддрд┐рдпреЛрдВ рдХреЗ рдмреАрдЪ рд╕реАрдорд╛рдПрдВ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕рд▓рд┐рдП, рдПрдХ рд╕рдВрдЧрдарди рдореЗрдВ **рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЦрд╛рддреЗ рд╣реЛрддреЗ рд╣реИрдВ** (рд╣рдо AWS рдЦрд╛рддреЛрдВ рдХреА рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рди рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЛрдВ рдХреА): рдПрдХ рдПрдХрд▓ рдЦрд╛рддрд╛ рдЬрд┐рд╕реЗ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдирд╛рдорд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рд╕рджрд╕реНрдп рдЦрд╛рддреЗред

*   **рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ (рд░реВрдЯ рдЦрд╛рддрд╛)** рд╡рд╣ рдЦрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдк рд╕рдВрдЧрдарди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВред рд╕рдВрдЧрдарди рдХреЗ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддреЗ рд╕реЗ, рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* рд╕рдВрдЧрдарди рдореЗрдВ рдЦрд╛рддреЗ рдмрдирд╛рдПрдВ
* рдЕрдиреНрдп рдореМрдЬреВрджрд╛ рдЦрд╛рддреЛрдВ рдХреЛ рд╕рдВрдЧрдарди рдореЗрдВ рдЖрдордВрддреНрд░рд┐рдд рдХрд░реЗрдВ
* рд╕рдВрдЧрдарди рд╕реЗ рдЦрд╛рддреЛрдВ рдХреЛ рд╣рдЯрд╛рдПрдВ
* рдЖрдордВрддреНрд░рдг рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдВ
* рд╕рдВрдЧрдарди рдХреЗ рднреАрддрд░ рдЗрдХрд╛рдЗрдпреЛрдВ (рд░реВрдЯреНрд╕, OUs, рдпрд╛ рдЦрд╛рддреЗ) рдкрд░ рдиреАрддрд┐рдпрд╛рдВ рд▓рд╛рдЧреВ рдХрд░реЗрдВ
* рд╕рдВрдЧрдарди рдХреЗ рд╕рднреА рдЦрд╛рддреЛрдВ рдореЗрдВ рд╕реЗрд╡рд╛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерд┐рдд AWS рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рд╕рдХреНрд╖рдо рдХрд░реЗрдВред
* рдЗрд╕ рд░реВрдЯ рдЦрд╛рддреЗ/рд╕рдВрдЧрдарди рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдИрдореЗрд▓ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред

рдкреНрд░рдмрдВрдзрди рдЦрд╛рддреЗ рдХреА рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЕрд░реНрдЬрд┐рдд рд╕рднреА рд╢реБрд▓реНрдХреЛрдВ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд░рдиреЗ рдХреА **рдЬрд┐рдореНрдореЗрджрд╛рд░рд┐рдпрд╛рдВ рд╣реЛрддреА рд╣реИрдВ**ред рдЖрдк рдПрдХ рд╕рдВрдЧрдарди рдХреЗ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддреЗ рдХреЛ рдмрджрд▓ рдирд╣реАрдВ рд╕рдХрддреЗред
* **рд╕рджрд╕реНрдп рдЦрд╛рддреЗ** рдПрдХ рд╕рдВрдЧрдарди рдореЗрдВ рдмрд╛рдХреА рд╕рднреА рдЦрд╛рддреЛрдВ рдХреЛ рдмрдирд╛рддреЗ рд╣реИрдВред рдПрдХ рдЦрд╛рддрд╛ рдПрдХ рд╕рдордп рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рд╕рдВрдЧрдарди рдХрд╛ рд╕рджрд╕реНрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдЖрдк рдХреЗрд╡рд▓ рдЙрд╕ рдПрдХ рдЦрд╛рддреЗ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЦрд╛рддреЗ рдкрд░ рдиреАрддрд┐ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВред
* рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рдХреЛ рдПрдХ **рдорд╛рдиреНрдп рдИрдореЗрд▓ рдкрддрд╛** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдЙрдирдХрд╛ рдПрдХ **рдирд╛рдо** рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╕рд╛рдорд╛рдиреНрдпрддрдГ рд╡реЗ рдмрд┐рд▓рд┐рдВрдЧ рдкреНрд░рдмрдВрдзрд┐рдд рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ (рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдЗрд╕рдХреА рдкрд╣реБрдВрдЪ рджреА рдЬрд╛ рд╕рдХрддреА рд╣реИ)ред
```
aws organizations create-account --account-name testingaccount --email testingaccount@lalala1233fr.com
```
### **рд╕рдВрдЧрдарди рдЗрдХрд╛рдЗрдпрд╛рдБ**

рдЦрд╛рддреЛрдВ рдХреЛ **рд╕рдВрдЧрдарди рдЗрдХрд╛рдЗрдпреЛрдВ (OU)** рдореЗрдВ рд╕рдореВрд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рд╕реЗ рдЖрдк рд╕рдВрдЧрдарди рдЗрдХрд╛рдИ рдХреЗ рд▓рд┐рдП **рдиреАрддрд┐рдпрд╛рдБ** рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ **рд╕рднреА рдмрдЪреНрдЪреЗ рдЦрд╛рддреЛрдВ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рд╡рд╛рд▓реА рд╣реИрдВ**ред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдПрдХ OU рдХреЗ рдмрдЪреНрдЪреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдиреНрдп OUs рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред
```bash
# You can get the root id from aws organizations list-roots
aws organizations create-organizational-unit --parent-id r-lalala --name TestOU
```
### рд╕рд░реНрд╡рд┐рд╕ рдХрдВрдЯреНрд░реЛрд▓ рдкреЙрд▓рд┐рд╕реА (SCP)

**рд╕рд░реНрд╡рд┐рд╕ рдХрдВрдЯреНрд░реЛрд▓ рдкреЙрд▓рд┐рд╕реА (SCP)** рдПрдХ рдкреЙрд▓рд┐рд╕реА рд╣реИ рдЬреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреА рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рднреВрдорд┐рдХрд╛рдПрдБ рдХрд┐рди рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рди рдЦрд╛рддреЛрдВ рдкрд░ SCP рдкреНрд░рднрд╛рд╡ рдбрд╛рд▓рддреА рд╣реИред SCPs **IAM рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдкреЙрд▓рд┐рд╕рд┐рдпреЛрдВ рдХреЗ рд╕рдорд╛рди рд╣реИрдВ** рд▓реЗрдХрд┐рди рд╡реЗ **рдХреЛрдИ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддреАрдВ**ред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, SCPs рдПрдХ рд╕рдВрдЧрдарди, рд╕рдВрдЧрдардирд╛рддреНрдордХ рдЗрдХрд╛рдИ (OU), рдпрд╛ рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП **рдЕрдзрд┐рдХрддрдо рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреА рд╣реИрдВред рдЬрдм рдЖрдк рдЕрдкрдиреЗ рд╕рдВрдЧрдарди рдХреА рд░реВрдЯ рдпрд╛ OU рдореЗрдВ SCP рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рддреЛ **SCP рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рдореЗрдВ рд╕рдВрд╕реНрдерд╛рдУрдВ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рддреА рд╣реИ**ред

рдпрд╣ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ **рдпрд╣рд╛рдБ рддрдХ рдХрд┐ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рднреА рдХреБрдЫ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ CloudTrail рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдпрд╛ рдмреИрдХрдЕрдк рдХреЛ рд╣рдЯрд╛рдиреЗ рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
рдЗрд╕реЗ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ **рдорд╛рд╕реНрдЯрд░ рдЦрд╛рддреЗ** рдХреЛ рднреА рд╕рдордЭреМрддрд╛ рдХрд░рдирд╛ рд╣реИ рдЬреЛ SCPs рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ (рдорд╛рд╕реНрдЯрд░ рдЦрд╛рддреЗ рдХреЛ рдмреНрд▓реЙрдХ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛)ред

{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **SCPs рдХреЗрд╡рд▓ рдЦрд╛рддреЗ рдореЗрдВ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рддреА рд╣реИрдВ**, рдЗрд╕рд▓рд┐рдП рдЕрдиреНрдп рдЦрд╛рддреЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ SCP рджреНрд╡рд╛рд░рд╛ `s3:GetObject` рдХреЛ рдирдХрд╛рд░рдиреЗ рд╕реЗ рд▓реЛрдЧреЛрдВ рдХреЛ рдЖрдкрдХреЗ рдЦрд╛рддреЗ рдореЗрдВ **рдПрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ S3 рдмрдХреЗрдЯ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рд╕реЗ рдирд╣реАрдВ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛**ред
{% endhint %}

SCP рдЙрджрд╛рд╣рд░рдг:

* рд░реВрдЯ рдЦрд╛рддреЗ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдирдХрд╛рд░реЗрдВ
* рдХреЗрд╡рд▓ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ
* рдХреЗрд╡рд▓ рд╕рдлреЗрдж-рд╕реВрдЪреАрдмрджреНрдз рд╕реЗрд╡рд╛рдУрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ
*   GuardDuty, CloudTrail, рдФрд░ S3 рдкрдмреНрд▓рд┐рдХ рдмреНрд▓реЙрдХ рдПрдХреНрд╕реЗрд╕ рдХреЛ

рдЕрдХреНрд╖рдо рд╣реЛрдиреЗ рд╕реЗ рдирдХрд╛рд░реЗрдВ
*   рд╕реБрд░рдХреНрд╖рд╛/рдШрдЯрдирд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рд╣рдЯрд╛рдП рдЬрд╛рдиреЗ рдпрд╛

рд╕рдВрд╢реЛрдзрд┐рдд рд╣реЛрдиреЗ рд╕реЗ рдирдХрд╛рд░реЗрдВред
* рдмреИрдХрдЕрдк рдХреЛ рд╣рдЯрд╛рдП рдЬрд╛рдиреЗ рд╕реЗ рдирдХрд╛рд░реЗрдВред
* IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдФрд░ рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рдмрдирд╛рдиреЗ рд╕реЗ рдирдХрд╛рд░реЗрдВред

**JSON рдЙрджрд╛рд╣рд░рдг** [https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html](https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html) рдореЗрдВ рдвреВрдБрдвреЗрдВред

### ARN

**Amazon Resource Name** AWS рдХреЗ рдЕрдВрджрд░ рд╣рд░ рд╕рдВрд╕рд╛рдзрди рдХрд╛ **рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рдо** рд╣реИ, рдпрд╣ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдмрдирд╛ рд╣реЛрддрд╛ рд╣реИ:
```
arn:partition:service:region:account-id:resource-type/resource-id
arn:aws:elasticbeanstalk:us-west-1:123456789098:environment/App/Env
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ AWS рдореЗрдВ 4 рд╡рд┐рднрд╛рдЬрди рд╣реИрдВ рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рдХреЗрд╡рд▓ 3 рддрд░реАрдХреЗ рд╣реИрдВ:

* AWS рдорд╛рдирдХ: `aws`
* AWS рдЪреАрди: `aws-cn`
* AWS рдЕрдореЗрд░рд┐рдХрд╛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ (GovCloud): `aws-us-gov`
* AWS рдЧреБрдкреНрдд (US рд╡рд░реНрдЧреАрдХреГрдд): `aws`

## IAM - рдкрд╣рдЪрд╛рди рдФрд░ рдкрд╣реБрдБрдЪ рдкреНрд░рдмрдВрдзрди

IAM рд╡рд╣ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ AWS рдЦрд╛рддреЗ рдХреЗ рднреАрддрд░ **рдкреНрд░рдорд╛рдгреАрдХрд░рдг**, **рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рджрд╛рди рдХрд░рдирд╛** рдФрд░ **рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг** рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧреАред

* **рдкреНрд░рдорд╛рдгреАрдХрд░рдг** - рдПрдХ рдкрд╣рдЪрд╛рди рдХреА рдкрд░рд┐рднрд╛рд╖рд╛ рдФрд░ рдЙрд╕ рдкрд╣рдЪрд╛рди рдХрд╛ рд╕рддреНрдпрд╛рдкрдиред рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рдкрд╣рдЪрд╛рди рдФрд░ рд╕рддреНрдпрд╛рдкрди рдореЗрдВред
* **рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рджрд╛рди рдХрд░рдирд╛** - рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдПрдХ рдкрд╣рдЪрд╛рди рдХрд┐рд╕реА рдкреНрд░рдгрд╛рд▓реА рдХреЗ рднреАрддрд░ рдХреНрдпрд╛ рдкрд╣реБрдБрдЪ рд╕рдХрддреА рд╣реИ рдПрдХ рдмрд╛рд░ рдЬрдм рд╡рд╣ рдЙрд╕рд╕реЗ рдкреНрд░рдорд╛рдгрд┐рдд рд╣реЛ рдЬрд╛рддреА рд╣реИред
* **рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг** - рд╡рд╣ рд╡рд┐рдзрд┐ рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЬрд┐рд╕рдХреЗ рджреНрд╡рд╛рд░рд╛ рдкрд╣реБрдБрдЪ рдХреЛ рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд╕рдВрд╕рд╛рдзрди рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИ

IAM рдХреЛ рдЙрд╕рдХреА рдХреНрд╖рдорддрд╛ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг, рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рдФрд░ рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг рддрдВрддреНрд░реЛрдВ рдХреЛ рдЖрдкрдХреЗ AWS рдЦрд╛рддреЗ рдХреЗ рднреАрддрд░ рдЖрдкрдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рдмрдВрдзрд┐рдд, рдирд┐рдпрдВрддреНрд░рд┐рдд рдФрд░ рд╢рд╛рд╕рди рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИред

### [AWS рдЦрд╛рддрд╛ рдореВрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_root-user.html) <a href="#id_root" id="id_root"></a>

рдЬрдм рдЖрдк рдкрд╣рд▓реА рдмрд╛рд░ рдПрдХ Amazon Web Services (AWS) рдЦрд╛рддрд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдПрдХ рдПрдХрд▓ рд╕рд╛рдЗрди-рдЗрди рдкрд╣рдЪрд╛рди рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдЦрд╛рддреЗ рдореЗрдВ рд╕рднреА AWS рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП **рдкреВрд░реНрдг рдкрд╣реБрдБрдЪ** рд╣реЛрддреА рд╣реИред рдпрд╣ AWS рдЦрд╛рддрд╛ _**рдореВрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛**_ рд╣реИ рдФрд░ рдЗрд╕реЗ **рдИрдореЗрд▓ рдкрддрд╛ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рд╕рд╛рдЗрди рдЗрди рдХрд░рдХреЗ рдкрд╣реБрдБрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рдЦрд╛рддрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдерд╛**ред

рдиреЛрдЯ рдХрд░реЗрдВ рдХрд┐ рдПрдХ рдирдпрд╛ **рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреЗ рдкрд╛рд╕ **рдореВрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХрдо рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рд╣реЛрдВрдЧреАред

рд╕реБрд░рдХреНрд╖рд╛ рдХреА рджреГрд╖реНрдЯрд┐ рд╕реЗ, рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдмрдирд╛рдиреЗ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред

### [IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users.html) <a href="#id_iam-users" id="id_iam-users"></a>

рдПрдХ IAM _рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛_ рдПрдХ рдЗрдХрд╛рдИ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк AWS рдореЗрдВ рдмрдирд╛рддреЗ рд╣реИрдВ рдЬреЛ **рд╡реНрдпрдХреНрддрд┐ рдпрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИ** рдЬреЛ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ AWS рдХреЗ рд╕рд╛рде **рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддрд╛ рд╣реИ**ред AWS рдореЗрдВ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдореЗрдВ рдПрдХ рдирд╛рдо рдФрд░ рдкреНрд░рдорд╛рдг-рдкрддреНрд░ (рдкрд╛рд╕рд╡рд░реНрдб рдФрд░ рджреЛ рддрдХ рдкрд╣реБрдБрдЪ рдХреБрдВрдЬрд┐рдпрд╛рдБ) рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред

рдЬрдм рдЖрдк рдПрдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕реЗ **рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рдЙрдкрдпреБрдХреНрдд рдЕрдиреБрдорддрд┐ рдиреАрддрд┐рдпреЛрдВ рд╕реЗ рдЬреБрдбрд╝реЗ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рдХрд╛ рд╕рджрд╕реНрдп рдмрдирд╛рдХрд░** (рдЕрдиреБрд╢рдВрд╕рд┐рдд), рдпрд╛ **рд╕реАрдзреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдиреАрддрд┐рдпрд╛рдБ рдЬреЛрдбрд╝рдХрд░** рдЕрдиреБрджрд╛рди рдХрд░рддреЗ рд╣реИрдВред

рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ **MFA рд╕рдХреНрд╖рдо рдХрд░рдХреЗ рдХрдВрд╕реЛрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реЙрдЧрд┐рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред MFA рд╕рдХреНрд╖рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ API рдЯреЛрдХрди MFA рджреНрд╡рд╛рд░рд╛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред рдпрджрд┐ рдЖрдк MFA рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА API рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреА рдкрд╣реБрдБрдЪ рдХреЛ **рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ рдЖрдкрдХреЛ рдиреАрддрд┐ рдореЗрдВ рдпрд╣ рд╕рдВрдХреЗрдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП MFA рдореМрдЬреВрдж рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдЙрджрд╛рд╣рд░рдг [**рдпрд╣рд╛рдБ**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_configure-api-require.html))ред

#### CLI

* **рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА ID**: 20 рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЕрдкрд░рдХреЗрд╕ рдЕрд▓реНрдлрд╝рд╛рдиреНрдпреВрдореЗрд░рд┐рдХ рдЕрдХреНрд╖рд░ рдЬреИрд╕реЗ AKHDNAPO86BSHKDIRYT
* **рдЧреБрдкреНрдд рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА ID**: 40 рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЕрдкрд░ рдФрд░ рд▓реЛрдЕрд░рдХреЗрд╕ рдЕрдХреНрд╖рд░: S836fh/J73yHSb64Ag3Rkdi/jaD6sPl6/antFtU (рдЦреЛрдИ рд╣реБрдИ рдЧреБрдкреНрдд рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА ID рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИ)ред

рдЬрдм рднреА рдЖрдкрдХреЛ **рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ** рддреЛ рдЖрдкрдХреЛ рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП:\
_рдирдИ рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА рдмрдирд╛рдПрдБ -> рд╕рд┐рд╕реНрдЯрдо/рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдирдИ рдХреБрдВрдЬреА рд▓рд╛рдЧреВ рдХрд░реЗрдВ -> рдореВрд▓ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдВ -> рдирдИ рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА рдХрд╛рдо рдХрд░ рд░рд╣реА рд╣реИ рдЗрд╕рдХреА рдЬрд╛рдБрдЪ рдФрд░ рд╕рддреНрдпрд╛рдкрди рдХрд░реЗрдВ -> рдкреБрд░рд╛рдиреА рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА рд╣рдЯрд╛ рджреЗрдВ_

### MFA - рдмрд╣реБ рдХрд╛рд░рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг

рдпрд╣ рдЖрдкрдХреЗ рдореМрдЬреВрджрд╛ рддрд░реАрдХреЛрдВ, рдЬреИрд╕реЗ рдХрд┐ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░рдХ **рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**, рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рдмрд╣реБ-рдХрд╛рд░рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╕реНрддрд░ рдмрдирд╛рддрд╛ рд╣реИред\
рдЖрдк рдПрдХ **рдирд┐рдГрд╢реБрд▓реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╛ рдПрдХ рднреМрддрд┐рдХ рдЙрдкрдХрд░рдг** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк AWS рдореЗрдВ MFA рд╕рдХреНрд░рд┐рдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП google рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЬреИрд╕реЗ рдПрдкреНрд╕ рдХрд╛ рдирд┐рдГрд╢реБрд▓реНрдХ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

MFA рд╢рд░реНрддреЛрдВ рд╡рд╛рд▓реА рдиреАрддрд┐рдпрд╛рдБ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗ рдЬреБрдбрд╝реА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ:

* рдПрдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рд╕рдореВрд╣
* рдПрдХ рд╕рдВрд╕рд╛рдзрди рдЬреИрд╕реЗ рдХрд┐ рдПрдХ Amazon S3 рдмрдХреЗрдЯ, Amazon SQS рдХрддрд╛рд░, рдпрд╛ Amazon SNS рд╡рд┐рд╖рдп
* рдПрдХ IAM рднреВрдорд┐рдХрд╛ рдХреА рд╡рд┐рд╢реНрд╡рд╛рд╕ рдиреАрддрд┐ рдЬрд┐рд╕реЗ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдорд╛рди рд▓рд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ

рдпрджрд┐ рдЖрдк **CLI рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╣реБрдБрдЪрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдПрдХ рд╕рдВрд╕рд╛рдзрди рдЬреЛ **MFA рдХреА рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИ** рддреЛ рдЖрдкрдХреЛ **`GetSessionToken`** рдХреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рд╡рд╣ рдЖрдкрдХреЛ MFA рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде рдПрдХ рдЯреЛрдХрди рджреЗрдЧрд╛ред\
рдиреЛрдЯ рдХрд░реЗрдВ рдХрд┐ **`AssumeRole` рдкреНрд░рдорд╛рдг-рдкрддреНрд░ рдореЗрдВ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ**ред
```bash
aws sts get-session-token --serial-number <arn_device> --token-code <code>
```
### [IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups.html) <a href="#id_iam-groups" id="id_iam-groups"></a>

IAM [рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups.html) рдПрдХ рддрд░реАрдХрд╛ рд╣реИ **рдХрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рд╕рд╛рде рдиреАрддрд┐рдпрд╛рдБ рд╕рдВрд▓рдЧреНрди рдХрд░рдиреЗ рдХрд╛**, рдЬрд┐рд╕рд╕реЗ рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛ рд╕рдХрддрд╛ рд╣реИред **рд░реЛрд▓реНрд╕ рдФрд░ рд╕рдореВрд╣ рдХрд┐рд╕реА рд╕рдореВрд╣ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ**ред

рдЖрдк рдПрдХ **рдЖрдзрд╛рд░рд┐рдд-рдкрд╣рдЪрд╛рди рдиреАрддрд┐ рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рд╕реЗ рд╕рдВрд▓рдЧреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рддрд╛рдХрд┐ рд╕рдореВрд╣ рдореЗрдВ рд╕рднреА **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдиреАрддрд┐ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ **рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**ред рдЖрдк **рдирд╣реАрдВ** рдкрд╣рдЪрд╛рди рд╕рдХрддреЗ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣** рдХреЛ рдПрдХ **`Principal`** рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ **рдиреАрддрд┐ рдореЗрдВ** (рдЬреИрд╕реЗ рдХрд┐ рдПрдХ рд╕рдВрд╕рд╛рдзрди-рдЖрдзрд╛рд░рд┐рдд рдиреАрддрд┐) рдХреНрдпреЛрдВрдХрд┐ рд╕рдореВрд╣ рдЕрдиреБрдорддрд┐рдпреЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдирд╣реАрдВ, рдФрд░ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдкреНрд░рдорд╛рдгрд┐рдд IAM рдЗрдХрд╛рдЗрдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВред

рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣реЛрдВ рдХреА рдХреБрдЫ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ:

* рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ **рд╕рдореВрд╣** рдореЗрдВ **рдХрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ**, рдФрд░ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** **рдХрдИ рд╕рдореВрд╣реЛрдВ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ**ред
* **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣реЛрдВ рдХреЛ рдиреЗрд╕реНрдЯреЗрдб рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛**; рд╡реЗ рдХреЗрд╡рд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╣реА рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣реЛрдВ рдХреЛ рдирд╣реАрдВред
* AWS рдЦрд╛рддреЗ рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ **рдХреЛрдИ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рдирд╣реАрдВ рд╣реИ**ред рдпрджрд┐ рдЖрдк рдРрд╕рд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЗрд╕реЗ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЗрд╕рдореЗрдВ рдЕрд╕рд╛рдЗрди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред
* AWS рдЦрд╛рддреЗ рдореЗрдВ IAM рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЖрдХрд╛рд░, рдЬреИрд╕реЗ рдХрд┐ рд╕рдореВрд╣реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛, рдФрд░ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рджрд╕реНрдп рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╕рдореВрд╣реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛, рд╕реАрдорд┐рдд рд╣реИрдВред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, [IAM рдФрд░ AWS STS рдХреЛрдЯрд╛](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html) рджреЗрдЦреЗрдВред

### [IAM рд░реЛрд▓реНрд╕](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html) <a href="#id_iam-roles" id="id_iam-roles"></a>

рдПрдХ IAM **рд░реЛрд▓** рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреЗ рд╕рдорд╛рди **рд╕рдорд╛рди** рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕ рдЕрд░реНрде рдореЗрдВ рдХрд┐ рдпрд╣ рдПрдХ **рдкрд╣рдЪрд╛рди рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдХреА рдЕрдиреБрдорддрд┐ рдиреАрддрд┐рдпрд╛рдБ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИрдВ рдХрд┐** рдпрд╣ AWS рдореЗрдВ рдХреНрдпрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдХреНрдпрд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рд░реЛрд▓ рдХреЗ рд╕рд╛рде рдХреЛрдИ рднреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг (рдкрд╛рд╕рд╡рд░реНрдб рдпрд╛ рдкрд╣реБрдБрдЪ рдХреБрдВрдЬрд┐рдпрд╛рдБ) рдЬреБрдбрд╝рд╛ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдХреЗ рд╕рд╛рде рдЕрджреНрд╡рд┐рддреАрдп рд░реВрдк рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдПрдХ рд░реЛрд▓ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рд╣реЛрддрд╛ рд╣реИ **рдХрд┐рд╕реА рднреА рд╡реНрдпрдХреНрддрд┐ рджреНрд╡рд╛рд░рд╛ рдзрд╛рд░рдг рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЬрд┐рд╕реЗ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ (рдФрд░ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдВ)**ред рдПрдХ **IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рд░реЛрд▓ рдХреЛ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдзрд╛рд░рдг рдХрд░ рд╕рдХрддрд╛ рд╣реИ** рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдПред рдПрдХ рд░реЛрд▓ рдХреЛ рдПрдХ [**рд╕рдВрдШреАрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers.html) рдХреЛ рд╕реМрдВрдкрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ IAM рдХреЗ рдмрдЬрд╛рдп рдПрдХ рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд╛рдЗрди рдЗрди рдХрд░рддрд╛ рд╣реИред

рдПрдХ IAM рд░реЛрд▓ рдореЗрдВ **рджреЛ рдкреНрд░рдХрд╛рд░ рдХреА рдиреАрддрд┐рдпрд╛рдБ** рд╣реЛрддреА рд╣реИрдВ: рдПрдХ **рд╡рд┐рд╢реНрд╡рд╛рд╕ рдиреАрддрд┐**, рдЬреЛ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА, рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИ **рдХреМрди рд░реЛрд▓ рдХреЛ рдзрд╛рд░рдг рдХрд░ рд╕рдХрддрд╛ рд╣реИ**, рдФрд░ рдПрдХ **рдЕрдиреБрдорддрд┐ рдиреАрддрд┐**, рдЬреЛ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА, рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИ **рдпрд╣ рдХреНрдпрд╛ рдкрд╣реБрдБрдЪ рд╕рдХрддрд╛ рд╣реИ**ред

#### AWS Security Token Service (STS)

AWS Security Token Service (STS) рдПрдХ рд╡реЗрдм рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ **рдЕрд╕реНрдерд╛рдпреА, рд╕реАрдорд┐рдд-рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рдорд╛рдгреАрдХрд░рдгреЛрдВ рдХреЗ рдЬрд╛рд░реА рдХрд░рдиреЗ рдореЗрдВ рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ**ред рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЗрд╕рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХреА рдЧрдИ рд╣реИ:

### [IAM рдореЗрдВ рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html) <a href="#id_temp-creds" id="id_temp-creds"></a>

**рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдореБрдЦреНрдп рд░реВрдк рд╕реЗ IAM рд░реЛрд▓реНрд╕ рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ**, рд▓реЗрдХрд┐рди рдЕрдиреНрдп рдЙрдкрдпреЛрдЧ рднреА рд╣реИрдВред рдЖрдк рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдирдХреЗ рдкрд╛рд╕ рдЖрдкрдХреЗ рдорд╛рдирдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рд╕реЗрдЯ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВред рдпрд╣ **рдЖрдкрдХреЛ рдЙрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдЧрд▓рддреА рд╕реЗ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ рдЬреЛ рдЕрдзрд┐рдХ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдкреНрд░рдорд╛рдгреАрдХрд░рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрдордд рдирд╣реАрдВ рд╣реИрдВ**ред рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдгреАрдХрд░рдгреЛрдВ рдХрд╛ рдПрдХ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐ рд╡реЗ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдордп рдХреЗ рдмрд╛рдж рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред рдЖрдкрдХреЗ рдкрд╛рд╕ рдЙрд╕ рдЕрд╡рдзрд┐ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдорд╛рдиреНрдп рд╣реЛрддреЗ рд╣реИрдВред

### рдиреАрддрд┐рдпрд╛рдБ

#### рдиреАрддрд┐ рдЕрдиреБрдорддрд┐рдпрд╛рдБ

рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╕реМрдВрдкрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИрдВред рджреЛ рдкреНрд░рдХрд╛рд░ рд╣реИрдВ:

* AWS рдкреНрд░рдмрдВрдзрд┐рдд рдиреАрддрд┐рдпрд╛рдБ (AWS рджреНрд╡рд╛рд░рд╛ рдкреВрд░реНрд╡-рдХреЙрдиреНрдлрд╝рд┐рдЧрд░)
* рдЧреНрд░рд╛рд╣рдХ рдкреНрд░рдмрдВрдзрд┐рдд рдиреАрддрд┐рдпрд╛рдБ: рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИред рдЖрдк AWS рдкреНрд░рдмрдВрдзрд┐рдд рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдиреАрддрд┐рдпрд╛рдБ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ рдФрд░ рдЕрдкрдиреА рдЦреБрдж рдХреА рдмрдирд╛рдХрд░), рдиреАрддрд┐ рдЬрдирд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ (рдПрдХ GUI рджреГрд╢реНрдп рдЬреЛ рдЖрдкрдХреЛ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЗрдиреЗ рдФрд░ рдЗрдирдХрд╛рд░ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ) рдпрд╛ рдЕрдкрдиреА рдЦреБрдж рдХреА рд▓рд┐рдЦрдХрд░ред

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдХреНрд╕реЗрд╕** **рдЗрдирдХрд╛рд░** рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдПрдХреНрд╕реЗрд╕ рддрдм рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдЬрдм рдПрдХ рд╕реНрдкрд╖реНрдЯ рд░реЛрд▓ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛред\
рдпрджрд┐ **рдПрдХрд▓ "рдЗрдирдХрд╛рд░" рдореМрдЬреВрдж рд╣реИ, рддреЛ рдпрд╣ "рдЕрдиреБрдорддрд┐" рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░ рджреЗрдЧрд╛**, AWS рдЦрд╛рддреЗ рдХреА рд░реВрдЯ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░ (рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдиреБрдордд рд╣реИрдВ)ред
```javascript
{
"Version": "2012-10-17",  //Version of the policy
"Statement": [  //Main element, there can be more than 1 entry in this array
{
"Sid": "Stmt32894y234276923" //Unique identifier (optional)
"Effect": "Allow", //Allow or deny
"Action": [  //Actions that will be allowed or denied
"ec2:AttachVolume",
"ec2:DetachVolume"
],
"Resource": [ //Resource the action and effect will be applied to
"arn:aws:ec2:*:*:volume/*",
"arn:aws:ec2:*:*:instance/*"
],
"Condition": { //Optional element that allow to control when the permission will be effective
"ArnEquals": {"ec2:SourceInstanceARN": "arn:aws:ec2:*:*:instance/instance-id"}
}
}
]
}
```
#### рдЗрдирд▓рд╛рдЗрди рдкреЙрд▓рд┐рд╕реАрдЬ

рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдкреЙрд▓рд┐рд╕реАрдЬ **рд╕реАрдзреЗ рддреМрд░ рдкрд░ рдПрдХ рдпреВрдЬрд░, рд╕рдореВрд╣ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреЛ рдЕрд╕рд╛рдЗрди рдХреА рдЬрд╛рддреА рд╣реИрдВ**ред рдЗрд╕рд▓рд┐рдП, рд╡реЗ рдкреЙрд▓рд┐рд╕реАрдЬ рдХреА рд╕реВрдЪреА рдореЗрдВ рдирд╣реАрдВ рджрд┐рдЦрд╛рдИ рджреЗрддреАрдВ рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рдЕрдиреНрдп рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред\
рдЗрдирд▓рд╛рдЗрди рдкреЙрд▓рд┐рд╕реАрдЬ рдЙрдкрдпреЛрдЧреА рд╣реЛрддреА рд╣реИрдВ рдпрджрд┐ рдЖрдк **рдПрдХ рд╕рдЦреНрдд рдПрдХ-рд╕реЗ-рдПрдХ рд╕рдВрдмрдВрдз рдмрдирд╛рдП рд░рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдмреАрдЪ рдкреЙрд▓рд┐рд╕реА рдФрд░ рдЙрд╕ рдкрд╣рдЪрд╛рди рдХреЗ рдЬрд┐рд╕ рдкрд░ рд╡рд╣ рд▓рд╛рдЧреВ рд╣реЛрддреА рд╣реИ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдкреЙрд▓рд┐рд╕реА рдореЗрдВ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЧрд▓рддреА рд╕реЗ рдХрд┐рд╕реА рдЕрдиреНрдп рдкрд╣рдЪрд╛рди рдХреЛ рдирд╣реАрдВ рджреА рдЬрд╛рдПрдВ рдЬрд┐рдирдХреЗ рд▓рд┐рдП рд╡реЗ рдЗрд░рд╛рджрд╛ рдХреА рдЧрдИ рд╣реИрдВред рдЬрдм рдЖрдк рдПрдХ рдЗрдирд▓рд╛рдЗрди рдкреЙрд▓рд┐рд╕реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдкреЙрд▓рд┐рд╕реА рдореЗрдВ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЧрд▓рддреА рд╕реЗ рдЧрд▓рдд рдкрд╣рдЪрд╛рди рд╕реЗ рдЬреБрдбрд╝реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреАрдВред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм рдЖрдк AWS рдореИрдиреЗрдЬрдореЗрдВрдЯ рдХрдВрд╕реЛрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрд╕ рдкрд╣рдЪрд╛рди рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ, рддреЛ рдкрд╣рдЪрд╛рди рдореЗрдВ рдирд┐рд╣рд┐рдд рдкреЙрд▓рд┐рд╕реАрдЬ рднреА рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИрдВред рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдореБрдЦреНрдп рдЗрдХрд╛рдИ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрддреА рд╣реИрдВред

#### рд░рд┐рд╕реЛрд░реНрд╕ рдмрдХреЗрдЯ рдкреЙрд▓рд┐рд╕реАрдЬ

рдпреЗ **рдкреЙрд▓рд┐рд╕реАрдЬ** рд╣реЛрддреА рд╣реИрдВ рдЬреЛ **рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ** рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред **AWS рдХреЗ рд╕рднреА рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ рдЗрдиреНрд╣реЗрдВ рд╕рдкреЛрд░реНрдЯ рдирд╣реАрдВ рдХрд░рддреЗ**ред

рдпрджрд┐ рдХрд┐рд╕реА рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЗ рдкрд╛рд╕ рдЙрди рдкрд░ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдирдХрд╛рд░ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдПрдХ рд░рд┐рд╕реЛрд░реНрд╕ рдкреЙрд▓рд┐рд╕реА рдЙрдиреНрд╣реЗрдВ рдПрдХреНрд╕реЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИред

### IAM рдмрд╛рдЙрдВрдбреНрд░реАрдЬ

IAM рдмрд╛рдЙрдВрдбреНрд░реАрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ **рдЙрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рди рддрдХ рдПрдХ рдпреВрдЬрд░ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреЛ рдкрд╣реБрдБрдЪ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП**ред рдЗрд╕ рддрд░рд╣, рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдЕрдЧрд░ рдПрдХ рдЕрд▓рдЧ рд╕реЗрдЯ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдпреВрдЬрд░ рдХреЛ **рдЕрд▓рдЧ рдкреЙрд▓рд┐рд╕реА** рджреНрд╡рд╛рд░рд╛ рджреА рдЬрд╛рддреА рд╣реИрдВ, рддреЛ рднреА рдСрдкрд░реЗрд╢рди **рдЕрд╕рдлрд▓** рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдЕрдЧрд░ рд╡рд╣ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИред

рдПрдХ рдмрд╛рдЙрдВрдбреНрд░реА рд╕рд┐рд░реНрдл рдПрдХ рдкреЙрд▓рд┐рд╕реА рд╣реЛрддреА рд╣реИ рдЬреЛ рдПрдХ рдпреВрдЬрд░ рд╕реЗ рдЬреБрдбрд╝реА рд╣реЛрддреА рд╣реИ рдЬреЛ **рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдпреВрдЬрд░ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреЗ рдкрд╛рд╕ рдЕрдзрд┐рдХрддрдо рд╕реНрддрд░ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдХреНрдпрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ**ред рдЗрд╕рд▓рд┐рдП, **рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдЕрдЧрд░ рдпреВрдЬрд░ рдХреЗ рдкрд╛рд╕ рдкреНрд░рд╢рд╛рд╕рдХреАрдп рдкрд╣реБрдБрдЪ рд╣реИ**, рдЕрдЧрд░ рдмрд╛рдЙрдВрдбреНрд░реА рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рд╡рд╣ рдХреЗрд╡рд▓ S3 рдмрдХреЗрдЯреНрд╕ рдХреЛ рдкрдврд╝ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЕрдзрд┐рдХрддрдо рд╣реИ рдЬреЛ рд╡рд╣ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

**рдпрд╣**, **SCPs** рдФрд░ **рдиреНрдпреВрдирддрдо рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░** рд╕рд┐рджреНрдзрд╛рдВрдд рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рд╣реИрдВ рдХрд┐ рдпреВрдЬрд░реНрд╕ рдХреЗ рдкрд╛рд╕ рдЙрдирдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕реЗ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рди рд╣реЛрдВред

### рд╕реЗрд╢рди рдкреЙрд▓рд┐рд╕реАрдЬ

рдПрдХ рд╕реЗрд╢рди рдкреЙрд▓рд┐рд╕реА рдПрдХ **рдкреЙрд▓рд┐рд╕реА рд╕реЗрдЯ рд╣реЛрддреА рд╣реИ рдЬрдм рдХрд┐рд╕реА рднреВрдорд┐рдХрд╛ рдХреЛ рдХрд┐рд╕реА рддрд░рд╣ рд╕реЗ рдорд╛рди рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**ред рдпрд╣ рдЙрд╕ рд╕реЗрд╢рди рдХреЗ рд▓рд┐рдП рдПрдХ **IAM рдмрд╛рдЙрдВрдбреНрд░реА рдХреА рддрд░рд╣ рд╣реЛрдЧрд╛**: рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╕реЗрд╢рди рдкреЙрд▓рд┐рд╕реА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддреА рд╣реИ рд▓реЗрдХрд┐рди **рдЙрдиреНрд╣реЗрдВ рдкреЙрд▓рд┐рд╕реА рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХреА рдЧрдИ рдЕрдиреБрдорддрд┐рдпреЛрдВ рддрдХ рд╕реАрдорд┐рдд рдХрд░рддреА рд╣реИ** (рдЕрдзрд┐рдХрддрдо рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╡реЗ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рднреВрдорд┐рдХрд╛ рдХреЗ рдкрд╛рд╕ рд╣реЛрддреА рд╣реИрдВ)ред

рдпрд╣ **рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ**: рдЬрдм рдПрдХ рдкреНрд░рд╢рд╛рд╕рдХ рдПрдХ рдмрд╣реБрдд рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рднреВрдорд┐рдХрд╛ рдХреЛ рдорд╛рди рд▓реЗрдиреЗ рдЬрд╛ рд░рд╣рд╛ рд╣реЛ рддреЛ рд╡рд╣ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдХреЗрд╡рд▓ рдЙрдиреНрд╣реАрдВ рддрдХ рд╕реАрдорд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рд╕реЗрд╢рди рдкреЙрд▓рд┐рд╕реА рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХреА рдЧрдИ рд╣реИрдВ, рдорд╛рди рд▓рд┐рдпрд╛ рдЬрд╛рдП рдХрд┐ рд╕реЗрд╢рди рд╕рдордЭреМрддрд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред
```bash
aws sts assume-role \
--role-arn <value> \
--role-session-name <value> \
[--policy-arns <arn_custom_policy1> <arn_custom_policy2>]
[--policy <file://policy.json>]
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ **AWS рд╕рддреНрд░ рдиреАрддрд┐рдпреЛрдВ рдХреЛ рд╕рддреНрд░реЛрдВ рдореЗрдВ рдЬреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реИ** рдЬреЛ рддреАрд╕рд░реЗ рдХрд╛рд░рдгреЛрдВ рдХреА рд╡рдЬрд╣ рд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, [рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд░рд╣рд┐рдд рдХреЙрдЧреНрдирд┐рдЯреЛ рдорд╛рдиреНрдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рднреВрдорд┐рдХрд╛рдУрдВ](../aws-services/aws-cognito-enum/cognito-identity-pools.md#accessing-iam-roles) рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ (рдЙрдиреНрдирдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП), AWS **рд╕рддреНрд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рддреНрд░ рдиреАрддрд┐ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛** рдЬреЛ рд╕реАрдорд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рд╕рддреНрд░ рдХрд┐рди рд╕реЗрд╡рд╛рдУрдВ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддрд╛ рд╣реИ [**рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реВрдЪреА рдХреЗ рд▓рд┐рдП**](https://docs.aws.amazon.com/cognito/latest/developerguide/iam-roles.html#access-policies-scope-down-services).

рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдХрднреА рдЖрдкрдХреЛ рддреНрд░реБрдЯрд┐ рдорд┐рд▓рддреА рд╣реИ "... рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рд╕рддреНрд░ рдиреАрддрд┐ ... рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддреА рд╣реИ", рдФрд░ рднреВрдорд┐рдХрд╛ рдХреЗ рдкрд╛рд╕ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреА рдкрд╣реБрдБрдЪ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ **рдПрдХ рд╕рддреНрд░ рдиреАрддрд┐ рдЗрд╕реЗ рд░реЛрдХ рд░рд╣реА рд╣реИ**ред

### рдкрд╣рдЪрд╛рди рд╕рдВрдШ

рдкрд╣рдЪрд╛рди рд╕рдВрдШ **AWS рдХреЗ рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛рдУрдВ рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ** AWS рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд┐рдирд╛ AWS рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреА рдЖрдкреВрд░реНрддрд┐ рдХрд┐рдП рдмрд┐рдирд╛ рдПрдХ рдорд╛рдиреНрдп IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЗ рд╕реЗред\
рдПрдХ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдЖрдкрдХрд╛ рдЕрдкрдирд╛ рдХреЙрд░реНрдкреЛрд░реЗрдЯ **Microsoft Active Directory** (рд╡рд╛рдпрд╛ **SAML**) рдпрд╛ **OpenID** рд╕реЗрд╡рд╛рдПрдБ (рдЬреИрд╕реЗ **Google**) рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдлреЗрдбрд░реЗрдЯреЗрдб рдкрд╣реБрдБрдЪ рдлрд┐рд░ AWS рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреЗ рднреАрддрд░ рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗрдЧреАред

рдЗрд╕ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ **IAM рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (SAML рдпрд╛ OAuth)** рдЬреЛ **рдЕрдиреНрдп рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░реЗрдЧрд╛**ред рдлрд┐рд░, рдХрдо рд╕реЗ рдХрдо рдПрдХ **IAM рднреВрдорд┐рдХрд╛ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХреЛ (рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рддреЗ рд╣реБрдП) рд╕реМрдВрдкреА рдЬрд╛рддреА рд╣реИ**ред рдпрджрд┐ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд┐рдП рдЧрдП рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХрд╛ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ AWS рддрдХ рдкрд╣реБрдБрдЪрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рднреВрдорд┐рдХрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣реБрдБрдЪреЗрдЧрд╛ред

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдк рдЖрдорддреМрд░ рдкрд░ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рдореВрд╣ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ **рд╡рд┐рднрд┐рдиреНрди рднреВрдорд┐рдХрд╛ рджреЗрдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ**ред рдлрд┐рд░, рдХрдИ **IAM рднреВрдорд┐рдХрд╛рдПрдБ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░ рд╕рдХрддреА рд╣реИрдВ** рдФрд░ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХрд╛ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рднреВрдорд┐рдХрд╛ рдпрд╛ рджреВрд╕рд░реА рднреВрдорд┐рдХрд╛ рдорд╛рди рд▓реЗрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред

<figure><img src="../../../.gitbook/assets/image (1) (2).png" alt=""><figcaption></figcaption></figure>

### IAM рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░

AWS IAM рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ (AWS рд╕рд┐рдВрдЧрд▓ рд╕рд╛рдЗрди-рдСрди рдХрд╛ рдЙрддреНрддрд░рд╛рдзрд┐рдХрд╛рд░реА) AWS рдкрд╣рдЪрд╛рди рдФрд░ рдкрд╣реБрдБрдЪ рдкреНрд░рдмрдВрдзрди (IAM) рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдПрдХ **рдХреЗрдВрджреНрд░реАрдп рд╕реНрдерд╛рди** рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдЬреЛ **AWS рдЦрд╛рддреЛрдВ рдФрд░ рдХреНрд▓рд╛рдЙрдб рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рддрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдкреНрд░рд╢рд╛рд╕рди рдФрд░ рдЙрдирдХреА рдкрд╣реБрдБрдЪ рдХреЛ рдПрдХ рд╕рд╛рде рд▓рд╛рддрд╛ рд╣реИ**ред

рд▓реЙрдЧрд┐рди рдбреЛрдореЗрди рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╣реЛрдЧрд╛ `<user_input>.awsapps.com`.

рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, 3 рдкрд╣рдЪрд╛рди рд╕реНрд░реЛрдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

* рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛: рдирд┐рдпрдорд┐рдд AWS рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛
* рдПрдХреНрдЯрд┐рд╡ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА: рд╡рд┐рднрд┐рдиреНрди рдХрдиреЗрдХреНрдЯрд░ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ
* рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛: рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рд╕рдореВрд╣ рдПрдХ рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ (IdP) рд╕реЗ рдЖрддреЗ рд╣реИрдВ

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (3) (1) (1).png" alt=""><figcaption></figcaption></figure>

рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд╕рдмрд╕реЗ рд╕рд░рд▓ рдорд╛рдорд▓реЗ рдореЗрдВ, **рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдФрд░ рд╕рдореВрд╣реЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реЛрдЧреА** рдФрд░ рд╡рд╣ рд╕рдВрдЧрдарди рдХреЗ **рдХрд┐рд╕реА рднреА рдЦрд╛рддреЗ рдореЗрдВ рдиреАрддрд┐рдпрд╛рдБ рд╕реМрдВрдкрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛**ред

рдПрдХ рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛/рд╕рдореВрд╣ рдХреЛ рдПрдХ рдЦрд╛рддреЗ рддрдХ рдкрд╣реБрдБрдЪ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП **SAML рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдЬреЛ рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рддрд╛ рд╣реИ, рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛**, рдФрд░ рдЧрдВрддрд╡реНрдп рдЦрд╛рддреЗ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ **рднреВрдорд┐рдХрд╛ рдЬреЛ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рддреА рд╣реИ, рдЙрддреНрдкрдиреНрди рдХреА рдЬрд╛рдПрдЧреА**ред

#### AwsSSOInlinePolicy

рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ **IAM рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдирд╛рдИ рдЧрдИ рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ**ред рдЦрд╛рддреЛрдВ рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рднреВрдорд┐рдХрд╛рдПрдБ рдЬрд┐рдиреНрд╣реЗрдВ **AWS рдкрд╣рдЪрд╛рди рдХреЗрдВрджреНрд░ рдореЗрдВ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐рдпрд╛рдБ рджреА рдЧрдИ рд╣реИрдВ** рдЙрдирдХреЗ рдкрд╛рд╕ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВ рдпреЗ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдВрдЧреА рдЬрд┐рд╕реЗ **`AwsSSOInlinePolicy`** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рджреЛ рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐ рдХреЗ рд╕рд╛рде рджреЗрдЦрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ **`AwsSSOInlinePolicy`** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ **рдорддрд▓рдм рдпрд╣ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЗрд╕рдореЗрдВ рд╕рдорд╛рди рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ**ред

### рдХреНрд░реЙрд╕ рдЕрдХрд╛рдЙрдВрдЯ рдЯреНрд░рд╕реНрдЯреНрд╕ рдФрд░ рднреВрдорд┐рдХрд╛рдПрдБ

**рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** (рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛) рдХреБрдЫ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдХреНрд░реЙрд╕ рдЕрдХрд╛рдЙрдВрдЯ рднреВрдорд┐рдХрд╛ рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░, **рджреВрд╕рд░реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗ рд╕рдХрддрд╛ рд╣реИ** (рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛) рдЙрд╕рдХреЗ рдЦрд╛рддреЗ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ **рдирдИ рднреВрдорд┐рдХрд╛ рдиреАрддрд┐рдпреЛрдВ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдкрд╣реБрдБрдЪ рдХреЗ рд╕рд╛рде**ред рдЗрд╕реЗ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╕ рдПрдХ рдирдИ рднреВрдорд┐рдХрд╛ рдмрдирд╛рдПрдБ рдФрд░ рдХреНрд░реЙрд╕ рдЕрдХрд╛рдЙрдВрдЯ рднреВрдорд┐рдХрд╛ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВред рдХреНрд░реЙрд╕-рдЕрдХрд╛рдЙрдВрдЯ рдкрд╣реБрдБрдЪ рдХреЗ рд▓рд┐рдП рднреВрдорд┐рдХрд╛рдПрдБ рджреЛ рд╡рд┐рдХрд▓реНрдк рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВред рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реЗ AWS рдЦрд╛рддреЛрдВ рдХреЗ рдмреАрдЪ рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рдирд╛, рдФрд░ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реЗ рдЦрд╛рддреЗ рдФрд░ рдПрдХ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ AWS рдЦрд╛рддреЗ рдХреЗ рдмреАрдЪ рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ред\
рдпрд╣ рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ **рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд┐рдП рдЧрдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ рдФрд░ рдХреБрдЫ рд╕рд╛рдорд╛рдиреНрдп рдЪреАрдЬрд╝ рди рдбрд╛рд▓реЗрдВ** рдХреНрдпреЛрдВрдХрд┐ рдЕрдиреНрдпрдерд╛, рдЕрдиреНрдп рдкреНрд░рдорд╛рдгрд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЬреИрд╕реЗ рдХрд┐ рдлреЗрдбрд░реЗрдЯреЗрдб рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рднреА рдЗрд╕ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

### AWS рд╕рд┐рдВрдкрд▓ AD

рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИ:

* рдЯреНрд░рд╕реНрдЯ рд╕рдВрдмрдВрдз
* AD рдкреНрд░рд╢рд╛рд╕рди рдХреЗрдВрджреНрд░
* рдкреВрд░реНрдг PS API рд╕рдорд░реНрдерди
* AD рд░реАрд╕рд╛рдпрдХрд▓ рдмрд┐рди
* рд╕рдореВрд╣ рдкреНрд░рдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ
* рд╕реНрдХреАрдорд╛ рдПрдХреНрд╕рдЯреЗрдВрд╢рди
* рдУрдПрд╕ рдпрд╛ рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬ рддрдХ рд╕реАрдзреА рдкрд╣реБрдБрдЪ рдирд╣реАрдВ

#### рд╡реЗрдм рд╕рдВрдШ рдпрд╛ OpenID рдкреНрд░рдорд╛рдгреАрдХрд░рдг

рдРрдк AssumeRoleWithWebIdentity рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрд╕реНрдерд╛рдпреА рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдмрдирд╛рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ AWS рдХрдВрд╕реЛрд▓ рддрдХ рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдХреЗрд╡рд▓ AWS рдХреЗ рднреАрддрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдк
```
[default]
aws_access_key_id = AKIA5ZDCUJHF83HDTYUT
aws_secret_access_key = uOcdhof683fbOUGFYEQug8fUGIf68greoihef

[Admin]
aws_access_key_id = AKIA8YDCu7TGTR356SHYT
aws_secret_access_key = uOcdhof683fbOUGFYEQuR2EIHG34UY987g6ff7
region = eu-west-2
```
рдпрджрд┐ рдЖрдкрдХреЛ **рд╡рд┐рднрд┐рдиреНрди AWS рдЦрд╛рддреЛрдВ** рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреА рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рдЙрди рдЦрд╛рддреЛрдВ рдХреЗ рднреАрддрд░ **рдПрдХ рднреВрдорд┐рдХрд╛ рдорд╛рди рд▓реЗрдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЧрдИ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рд╣рд░ рдмрд╛рд░ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ STS рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдФрд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред

рдЖрдк `~/.aws/config` рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ [**рдХреМрди рд╕реА рднреВрдорд┐рдХрд╛рдПрдБ рдорд╛рди рд▓реЗрдиреА рд╣реИрдВ рдЗрд╕рдХрд╛ рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html), рдФрд░ рдлрд┐рд░ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ `--profile` рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдкрд╛рд░рджрд░реНрд╢реА рддрд░реАрдХреЗ рд╕реЗ `assume-role` рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛)ред\
рдПрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓ рдЙрджрд╛рд╣рд░рдг:
```
[profile acc2]
region=eu-west-2
role_arn=arn:aws:iam::<account-id>:role/<role-path>
role_session_name = <session_name>
source_profile = <profile_with_assume_role>
sts_regional_endpoints = regional
```
рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк aws cli рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
aws --profile acc2 ...
```
рдпрджрд┐ рдЖрдк **browser** рдХреЗ рд▓рд┐рдП рдХреБрдЫ **similar** рдвреВрдВрдв рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк **extension** [**AWS Extend Switch Roles**](https://chrome.google.com/webstore/detail/aws-extend-switch-roles/jpmkfafbacpgapdghgdpembnojdlgkdl?hl=en) рдХреА рдЬрд╛рдБрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## рд╕рдВрджрд░реНрдн

* [https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_getting-started\_concepts.html](https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_getting-started\_concepts.html)
* [https://aws.amazon.com/iam/](https://aws.amazon.com/iam/)
* [https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html](https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html)

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реБрд░реБрдЖрдд рд╕реЗ рд▓реЗрдХрд░ рдПрдХреНрд╕рдкрд░реНрдЯ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк **HackTricks рдореЗрдВ рдЕрдкрдиреА рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**, рддреЛ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**official PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ред
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>
