# AWS - Informa√ß√µes B√°sicas

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) **e** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **reposit√≥rios do github.**

</details>

## Hierarquia da Organiza√ß√£o

![](<../../../.gitbook/assets/image (54).png>)

### Contas

Na AWS, h√° uma **conta raiz**, que √© o **cont√™iner pai para todas as contas** da sua **organiza√ß√£o**. No entanto, voc√™ n√£o precisa usar essa conta para implantar recursos, pode criar **outras contas para separar diferentes infraestruturas AWS** entre elas.

Isso √© muito interessante do ponto de vista da **seguran√ßa**, pois **uma conta n√£o poder√° acessar recursos de outra conta** (exceto se pontes forem criadas especificamente), dessa forma voc√™ pode criar limites entre as implanta√ß√µes.

Portanto, existem **dois tipos de contas em uma organiza√ß√£o** (estamos falando de contas AWS e n√£o de contas de usu√°rio): uma √∫nica conta que √© designada como a conta de gerenciamento e uma ou mais contas de membro.

* A **conta de gerenciamento (a conta raiz)** √© a conta que voc√™ usa para criar a organiza√ß√£o. A partir da conta de gerenciamento da organiza√ß√£o, voc√™ pode fazer o seguinte:

    * Criar contas na organiza√ß√£o
    * Convidar outras contas existentes para a organiza√ß√£o
    * Remover contas da organiza√ß√£o
    * Gerenciar convites
    * Aplicar pol√≠ticas a entidades (ra√≠zes, OUs ou contas) dentro da organiza√ß√£o
    * Habilitar a integra√ß√£o com servi√ßos AWS suportados para fornecer funcionalidade de servi√ßo em todas as contas da organiza√ß√£o.
    * √â poss√≠vel fazer login como usu√°rio raiz usando o e-mail e a senha usados para criar esta conta raiz/organiza√ß√£o.

    A conta de gerenciamento tem as **responsabilidades de uma conta pagadora** e √© respons√°vel por pagar todas as cobran√ßas acumuladas pelas contas de membro. Voc√™ n√£o pode alterar a conta de gerenciamento de uma organiza√ß√£o.
* As **contas de membro** comp√µem todas as outras contas em uma organiza√ß√£o. Uma conta pode ser membro de apenas uma organiza√ß√£o por vez. Voc√™ pode anexar uma pol√≠tica a uma conta para aplicar controles apenas a essa conta.
  * As contas de membro **devem usar um endere√ßo de e-mail v√°lido** e podem ter um **nome**, em geral, elas n√£o poder√£o gerenciar a cobran√ßa (mas podem receber acesso a ela).

```
aws organizations create-account --account-name testingaccount --email testingaccount@lalala1233fr.com
```

### **Unidades Organizacionais**

As contas podem ser agrupadas em **Unidades Organizacionais (OU)**. Dessa forma, voc√™ pode criar **pol√≠ticas** para a Unidade Organizacional que ser√£o **aplicadas a todas as contas filhas**. Observe que uma OU pode ter outras OUs como filhas.

```bash
# Voc√™ pode obter o id raiz de aws organizations list-roots
aws organizations create-organizational-unit --parent-id r-lalala --name TestOU
```

### Pol√≠tica de Controle de Servi√ßo (SCP)

Uma **pol√≠tica de controle de servi√ßo (SCP)** √© uma pol√≠tica que especifica os servi√ßos e a√ß√µes que usu√°rios e fun√ß√µes podem usar nas contas que a SCP afeta. SCPs s√£o **semelhantes √†s pol√≠ticas de permiss√µes IAM**, exceto que elas **n√£o concedem permiss√µes**. Em vez disso, SCPs especificam as **permiss√µes m√°ximas** para uma organiza√ß√£o, unidade organizacional (OU) ou conta. Quando voc√™ anexa um SCP √† raiz da sua organiza√ß√£o ou a uma OU, o **SCP limita as permiss√µes para entidades em contas de membro**.

Esta √© a √öNICA maneira de **at√© mesmo o usu√°rio raiz ser impedido** de fazer algo. Por exemplo, pode ser usado para impedir que os usu√°rios desativem o CloudTrail ou excluam backups.\
A √∫nica maneira de contornar isso √© comprometer tamb√©m a **conta mestra** que configura as SCPs (a conta mestra n√£o pode ser bloqueada).

{% hint style="warning" %}
Observe que **as SCPs restringem apenas os princ√≠pios na conta**, portanto, outras contas n√£o s√£o afetadas. Isso significa que ter uma SCP negando `s3:GetObject` n√£o impedir√° as pessoas de **acessar um bucket S3 p√∫blico** em sua conta.
{% endhint %}

Exemplos de SCP:

* Negar completamente a conta raiz
* Permitir apenas regi√µes espec√≠ficas
* Permitir apenas servi√ßos em lista branca
* Negar que o GuardDuty, CloudTrail e o S3 Public Block Access sejam desativados
* Negar que fun√ß√µes de seguran√ßa/resposta a incidentes sejam exclu√≠das ou modificadas.
* Negar que backups sejam exclu√≠dos.
* Negar a cria√ß√£o de usu√°rios IAM e chaves de acesso

Encontre **exemplos JSON** em [https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_manage\_policies\_scps\_examples.html](https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_manage\_policies\_scps\_examples.html)

### ARN

**Amazon Resource Name** √© o **nome exclusivo** que cada recurso dentro da AWS tem, √© composto assim:

```
arn:partition:service:region:account-id:resource-type/resource-id
arn:aws:elasticbeanstalk:us-west-1:123456789098:environment/App/Env
```

Observe que existem 4 parti√ß√µes na AWS, mas apenas 3 maneiras de cham√°-las:

* AWS Standard: `aws`
* AWS China: `aws-cn`
* AWS US public Internet (GovCloud): `aws-us-gov`
* AWS Secret (US Classified): `aws`

## IAM - Gerenciamento de Identidade e Acesso

O IAM √© o servi√ßo que permitir√° que voc√™ gerencie o **Autentica√ß√£o**, **Autoriza√ß√£o** e **Controle de Acesso** dentro da sua conta AWS.

* **Autentica√ß√£o** - Processo de defini√ß√£o de uma identidade e a verifica√ß√£o dessa identidade. Esse processo pode ser subdividido em: Identifica√ß√£o e verifica√ß√£o.
* **Autoriza√ß√£o** - Determina o que uma identidade pode acessar dentro de um sistema depois que foi autenticada.
* **Controle de Acesso** - O m√©todo e processo de como o acesso √© concedido a um recurso seguro

O IAM pode ser definido por sua capacidade de gerenciar, controlar e governar mecanismos de autentica√ß√£o, autoriza√ß√£o e controle de acesso de identidades para seus recursos dentro de sua conta AWS.

### [Usu√°rio raiz da conta AWS](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_root-user.html) <a href="#id_root" id="id_root"></a>

Quando voc√™ cria uma conta da Amazon Web Services (AWS), come√ßa com uma √∫nica identidade de login que tem **acesso completo a todos** os servi√ßos e recursos da AWS na conta. Este √© o usu√°rio raiz da conta AWS e √© acessado fazendo login com o **endere√ßo de e-mail e a senha que voc√™ usou para criar a conta**.

Observe que um novo **usu√°rio administrador** ter√° **menos permiss√µes que o usu√°rio raiz**.

Do ponto de vista da seguran√ßa, √© recomend√°vel criar outros usu√°rios e evitar o uso deste.

### [Usu√°rios IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_users.html) <a href="#id_iam-users" id="id_iam-users"></a>

Um _usu√°rio IAM_ √© uma entidade que voc√™ cria na AWS para **representar
#### CLI

* **ID da chave de acesso**: 20 caracteres alfanum√©ricos aleat√≥rios em mai√∫sculas, como AKHDNAPO86BSHKDIRYT
* **ID da chave de acesso secreta**: 40 caracteres aleat√≥rios em mai√∫sculas e min√∫sculas, como S836fh/J73yHSb64Ag3Rkdi/jaD6sPl6/antFtU (n√£o √© poss√≠vel recuperar IDs de chave de acesso secreta perdidos).

Sempre que precisar **alterar a chave de acesso**, siga este processo:\
_Crie uma nova chave de acesso -> Aplique a nova chave ao sistema/aplica√ß√£o -> Marque a original como inativa -> Teste e verifique se a nova chave de acesso est√° funcionando -> Exclua a chave de acesso antiga_

### MFA - Autentica√ß√£o de m√∫ltiplos fatores

√â usado para **criar um fator adicional para autentica√ß√£o** al√©m dos seus m√©todos existentes, como senha, criando assim um n√≠vel de autentica√ß√£o de m√∫ltiplos fatores.\
Voc√™ pode usar um **aplicativo virtual gratuito ou um dispositivo f√≠sico**. Voc√™ pode usar aplicativos como a autentica√ß√£o do Google gratuitamente para ativar um MFA na AWS.

Pol√≠ticas com condi√ß√µes MFA podem ser anexadas aos seguintes:

* Um usu√°rio ou grupo IAM
* Um recurso, como um bucket Amazon S3, fila Amazon SQS ou t√≥pico Amazon SNS
* A pol√≠tica de confian√ßa de uma fun√ß√£o IAM que pode ser assumida por um usu√°rio

Se voc√™ quiser **acessar via CLI** um recurso que **verifica o MFA**, voc√™ precisa chamar **`GetSessionToken`**. Isso lhe dar√° um token com informa√ß√µes sobre o MFA.\
Observe que as **credenciais do `AssumeRole` n√£o cont√™m essas informa√ß√µes**.

```bash
aws sts get-session-token --serial-number <arn_device> --token-code <code>
```

Como [**declarado aqui**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_mfa\_configure-api-require.html), h√° muitos casos diferentes em que **MFA n√£o pode ser usado**.

### [Grupos de usu√°rios IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_groups.html) <a href="#id_iam-groups" id="id_iam-groups"></a>

Um **grupo de usu√°rios IAM** √© uma maneira de **anexar pol√≠ticas a v√°rios usu√°rios** de uma s√≥ vez, o que pode facilitar o gerenciamento das permiss√µes para esses usu√°rios. **Fun√ß√µes e grupos n√£o podem fazer parte de um grupo**.

Voc√™ pode anexar uma **pol√≠tica baseada em identidade a um grupo de usu√°rios** para que todos os **usu√°rios** no grupo de usu√°rios **recebam as permiss√µes da pol√≠tica**. Voc√™ **n√£o pode** identificar um **grupo de usu√°rios** como um **`Principal`** em uma **pol√≠tica** (como uma pol√≠tica baseada em recursos) porque os grupos se relacionam com permiss√µes, n√£o autentica√ß√£o, e os princ√≠pios s√£o entidades IAM autenticadas.

Aqui est√£o algumas caracter√≠sticas importantes dos grupos de usu√°rios:

* Um **grupo de usu√°rios** pode **conter muitos usu√°rios**, e um **usu√°rio** pode **pertencer a v√°rios grupos**.
* **Grupos de usu√°rios n√£o podem ser aninhados**; eles podem conter apenas usu√°rios, n√£o outros grupos de usu√°rios.
* N√£o h√° **grupo de usu√°rios padr√£o que inclua automaticamente todos os usu√°rios na conta da AWS**. Se voc√™ quiser ter um grupo de usu√°rios assim, deve cri√°-lo e atribuir cada novo usu√°rio a ele.
* O n√∫mero e o tamanho dos recursos IAM em uma conta da AWS, como o n√∫mero de grupos e o n√∫mero de grupos dos quais um usu√°rio pode ser membro, s√£o limitados. Para obter mais informa√ß√µes, consulte [IAM e cotas do AWS STS](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference\_iam-quotas.html).

### [Fun√ß√µes IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_roles.html) <a href="#id_iam-roles" id="id_iam-roles"></a>

Uma **fun√ß√£o IAM** √© muito **semelhante** a um **usu√°rio**, no sentido de que √© uma **identidade com pol√≠ticas de permiss√£o que determinam o que** pode e n√£o pode fazer na AWS. No entanto, uma fun√ß√£o **n√£o tem credenciais** (senha ou chaves de acesso) associadas a ela. Em vez de ser exclusivamente associada a uma pessoa, uma fun√ß√£o destina-se a ser **assumida por qualquer pessoa que precise dela (e tenha permiss√µes suficientes)**. Um **usu√°rio IAM pode assumir uma fun√ß√£o temporariamente** para assumir diferentes permiss√µes para uma tarefa espec√≠fica. Uma fun√ß√£o pode ser **atribu√≠da a um usu√°rio federado** que faz login usando um provedor de identidade externo em vez do IAM.

Uma fun√ß√£o IAM consiste em **dois tipos de pol√≠ticas**: uma **pol√≠tica de confian√ßa**, que n√£o pode estar vazia, definindo **quem pode assumir** a fun√ß√£o, e uma **pol√≠tica de permiss√µes**, que n√£o pode estar vazia, definindo **o que pode acessar**.

#### Servi√ßo de token de seguran√ßa da AWS (STS)

Este √© um servi√ßo da web que permite que voc√™ **solicite credenciais tempor√°rias e de privil√©gio limitado** para usu√°rios do AWS Identity and Access Management (IAM) ou para usu√°rios que voc√™ autentica (usu√°rios federados).

### [Credenciais tempor√°rias no IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_temp.html) <a href="#id_temp-creds" id="id_temp-creds"></a>

**Credenciais tempor√°rias s√£o usadas principalmente com fun√ß√µes IAM**, mas tamb√©m h√° outros usos. Voc√™ pode solicitar credenciais tempor√°rias que tenham um conjunto de permiss√µes mais restrito do que o seu usu√°rio IAM padr√£o. Isso **impede** que voc√™ **execute acidentalmente tarefas que n√£o s√£o permitidas** pelas credenciais mais restritas. Uma vantagem das credenciais tempor√°rias √© que elas expiram automaticamente ap√≥s um per√≠odo de tempo definido. Voc√™ tem controle sobre a dura√ß√£o em que as credenciais s√£o v√°lidas.

### Pol√≠ticas

#### Permiss√µes de pol√≠tica

S√£o usadas para atribuir permiss√µes. Existem 2 tipos:

* Pol√≠ticas gerenciadas pela AWS (pr√©-configuradas pela AWS)
* Pol√≠ticas gerenciadas pelo cliente: configuradas por voc√™. Voc√™ pode criar pol√≠ticas com base em pol√≠ticas gerenciadas pela AWS (modificando uma delas e criando a sua pr√≥pria), usando o gerador de pol√≠ticas (uma visualiza√ß√£o GUI que ajuda a conceder e negar permiss√µes) ou escrevendo a sua pr√≥pria.

Por **padr√£o, o acesso** √© **negado**, o acesso ser√° concedido se uma fun√ß√£o expl√≠cita tiver sido especificada.\
Se **um √∫nico "Deny" existir, ele substituir√° o "Allow"**, exceto para solicita√ß√µes que usam as credenciais de seguran√ßa raiz da conta AWS (que s√£o permitidas por padr√£o).

```javascript
{
    "Version": "2012-10-17",  //Vers√£o da pol√≠tica
    "Statement": [  //Elemento principal, pode haver mais de uma entrada neste array
        {
            "Sid": "Stmt32894y234276923" //Identificador exclusivo (opcional)
            "Effect": "Allow", //Permitir ou negar
            "Action": [  //A√ß√µes que ser√£o permitidas ou negadas
                "ec2:AttachVolume",
                "ec2:DetachVolume"
            ], 
            "Resource": [ //Recurso em que a a√ß√£o e o efeito ser√£o aplicados
                "arn:aws:ec2:*:*:volume/*",
                "arn:aws:ec2:*:*:instance/*"
            ],
            "Condition": { //Elemento opcional que permite controlar quando a permiss√£o ser√° efetiva
                "ArnEquals": {"ec2:SourceInstanceARN": "arn:aws:ec2:*:*:instance/instance-id"}
            }
        }
    ]
}
```

#### Pol√≠ticas incorporadas

Este tipo de pol√≠ticas √© **atribu√≠do diretamente** a um usu√°rio, grupo ou fun√ß√£o. Ent√£o, eles n√£o aparecem na lista de Pol√≠ticas como qualquer outro pode us√°-los.\
As pol√≠ticas incorporadas s√£o √∫teis se voc√™ quiser **manter uma rela√ß√£o estrita de um para um entre uma pol√≠tica e a identidade** a que ela √© aplicada. Por exemplo, voc√™ quer ter certeza de que as permiss√µes em uma pol√≠tica n√£o s√£o inadvertidamente atribu√≠das a uma identidade diferente daquela para a qual s√£o destinadas. Quando voc√™ usa uma pol√≠tica incorporada, as permiss√µes na pol√≠tica n√£o podem ser inadvertidamente an
### Pol√≠ticas de sess√£o

Uma pol√≠tica de sess√£o √© uma **pol√≠tica definida quando uma fun√ß√£o √© assumida** de alguma forma. Isso ser√° como um **limite do IAM para essa sess√£o**: isso significa que a pol√≠tica de sess√£o n√£o concede permiss√µes, mas **as restringe √†s indicadas na pol√≠tica** (sendo as permiss√µes m√°ximas as que a fun√ß√£o possui).

Isso √© √∫til para **medidas de seguran√ßa**: quando um administrador vai assumir uma fun√ß√£o muito privilegiada, ele pode restringir a permiss√£o apenas √†s indicadas na pol√≠tica de sess√£o, caso a sess√£o seja comprometida.

```bash
aws sts assume-role \
    --role-arn <value> \
    --role-session-name <value> \
    [--policy-arns <arn_custom_policy1> <arn_custom_policy2>]
    [--policy <file://policy.json>]
```

Observe que, por padr√£o, a **AWS pode adicionar pol√≠ticas de sess√£o a sess√µes** que ser√£o geradas por terceiros. Por exemplo, em [fun√ß√µes assumidas do cognito n√£o autenticado](../aws-services/aws-cognito-enum/cognito-identity-pools.md#accessing-iam-roles) por padr√£o (usando autentica√ß√£o aprimorada), a AWS gerar√° **credenciais de sess√£o com uma pol√≠tica de sess√£o** que limita os servi√ßos que a sess√£o pode acessar [**para a seguinte lista**](https://docs.aws.amazon.com/cognito/latest/developerguide/iam-roles.html#access-policies-scope-down-services).

Portanto, se em algum momento voc√™ enfrentar o erro "... porque nenhuma pol√≠tica de sess√£o permite o ...", e a fun√ß√£o tiver acesso para executar a a√ß√£o, √© porque **existe uma pol√≠tica de sess√£o impedindo isso**.

### Federa√ß√£o de identidade

A federa√ß√£o de identidade **permite que usu√°rios de provedores de identidade externos** ao AWS acessem recursos do AWS com seguran√ßa, sem precisar fornecer credenciais de usu√°rio do AWS de uma conta de usu√°rio IAM v√°lida.\
Um exemplo de provedor de identidade pode ser seu pr√≥prio **Microsoft Active Directory** (via **SAML**) ou servi√ßos **OpenID** (como o **Google**). O acesso federado permitir√° que os usu√°rios dentro dele acessem o AWS.

Para configurar essa confian√ßa, um **provedor de identidade IAM √© gerado (SAML ou OAuth)** que **confiar√°** na **outra plataforma**. Em seguida, pelo menos uma **fun√ß√£o IAM √© atribu√≠da (confiando) ao provedor de identidade**. Se um usu√°rio da plataforma confi√°vel acessar o AWS, ele estar√° acessando como a fun√ß√£o mencionada.

No entanto, voc√™ geralmente desejar√° dar uma **fun√ß√£o diferente dependendo do grupo do usu√°rio** na plataforma de terceiros. Em seguida, v√°rias **fun√ß√µes IAM podem confiar** no provedor de identidade de terceiros e a plataforma de terceiros ser√° a respons√°vel por permitir que os usu√°rios assumam uma fun√ß√£o ou outra.

<figure><img src="../../../.gitbook/assets/image (1) (2).png" alt=""><figcaption></figcaption></figure>

### Centro de identidade IAM

O AWS IAM Identity Center (sucessor do AWS Single Sign-On) expande as capacidades do AWS Identity and Access Management (IAM) para fornecer um **local centralizado** que re√∫ne a **administra√ß√£o de usu√°rios e seu acesso a contas AWS** e aplicativos em nuvem.

O dom√≠nio de login ser√° algo como `<user_input>.awsapps.com`.

Para fazer login de usu√°rios, existem 3 fontes de identidade que podem ser usadas:

* Diret√≥rio do Identity Center: usu√°rios regulares da AWS
* Active Directory: suporta diferentes conectores
* Provedor de identidade externo: todos os usu√°rios e grupos v√™m de um provedor de identidade externo (IdP)

<figure><img src="../../../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

No caso mais simples do diret√≥rio do Identity Center, o **Identity Center ter√° uma lista de usu√°rios e grupos** e poder√° **atribuir pol√≠ticas** a eles para **qualquer uma das contas** da organiza√ß√£o.

Para dar acesso a um usu√°rio/grupo do Identity Center a uma conta, um **provedor de identidade SAML confiando no Identity Center ser√° criado**, e uma **fun√ß√£o confiando no provedor de identidade com as pol√≠ticas indicadas ser√° criada** na conta de destino.

#### AwsSSOInlinePolicy

√â poss√≠vel **dar permiss√µes via pol√≠ticas inline para fun√ß√µes criadas via IAM Identity Center**. As fun√ß√µes criadas nas contas que recebem **pol√≠ticas inline no AWS Identity Center** ter√£o essas permiss√µes em uma pol√≠tica inline chamada **`AwsSSOInlinePolicy`**.

Portanto, mesmo que voc√™ veja 2 fun√ß√µes com uma pol√≠tica inline chamada **`AwsSSOInlinePolicy`**, isso **n√£o significa que elas tenham as mesmas permiss√µes**.

### Confian√ßas e fun√ß√µes entre contas

**Um usu√°rio** (confiante) pode criar uma fun√ß√£o entre contas com algumas pol√≠ticas e, em seguida, **permitir que outro usu√°rio** (confi√°vel) **acesse sua conta**, mas apenas **tendo acesso indicado nas novas pol√≠ticas de fun√ß√£o**. Para criar isso, basta criar uma nova fun√ß√£o e selecionar a fun√ß√£o entre contas. As fun√ß√µes para acesso entre contas oferecem duas op√ß√µes. Fornecer acesso entre contas da AWS que voc√™ possui e fornecer acesso entre uma conta que voc√™ possui e uma conta AWS de terceiros.\
√â recomend√°vel **especificar o usu√°rio que √© confi√°vel e n√£o colocar algo gen√©rico** porque, caso contr√°rio, outros usu√°rios autenticados, como usu√°rios federados, tamb√©m poder√£o abusar dessa confian√ßa.

### AWS Simple AD

N√£o suportado:

* Rela√ß√µes de confian√ßa
* Centro de administra√ß√£o do AD
* Suporte total √† API do PS
* Lixeira do AD
* Contas de servi√ßo gerenciadas em grupo
* Extens√µes de esquema
* Sem acesso direto ao SO ou inst√¢ncias

#### Federa√ß√£o da Web ou Autentica√ß√£o OpenID

O aplicativo usa o AssumeRoleWithWebIdentity para criar credenciais tempor√°rias. No entanto, isso n√£o concede acesso ao console AWS, apenas acesso a recursos dentro do AWS.

### Outras op√ß√µes do IAM

* Voc√™ pode **definir uma pol√≠tica de senha** definindo op√ß√µes como comprimento m√≠nimo e requisitos de senha.
* Voc√™ pode **baixar o "Relat√≥rio de credenciais"** com informa√ß√µes sobre as credenciais atuais (como hora de cria√ß√£o do usu√°rio, a senha est√° habilitada...). Voc√™ pode gerar um relat√≥rio de credenciais com a frequ√™ncia de pelo menos uma vez a cada **quatro horas**.

O AWS Identity and Access Management (IAM) fornece **controle de acesso granular** em toda a AWS. Com o IAM, voc√™ pode especificar **quem pode acessar quais servi√ßos e recursos** e em quais condi√ß√µes. Com pol√≠ticas do IAM, voc√™ gerencia permiss√µes para sua for√ßa de trabalho e sistemas para **garantir permiss√µes de privil√©gio m√≠nimo**.

### Prefixos de ID do IAM

Nesta [**p√°gina**](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference\_identifiers.html#identifiers-unique-ids), voc√™ pode encontrar os prefixos de ID do IAM dependendo de sua natureza:

| ABIA | [Token de portador de servi√ßo AWS STS](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_bearer.html)                                                                                                                                                                         |
| ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ACCA | Credencial espec√≠fica do contexto                                                                                                                                                                                           |
| AGPA | Grupo de usu√°rios                                                                                                                                                                                                            |
| AIDA | Usu√°rio IAM                                                                                                                                                                                                                  |
| AIPA | Perfil de inst√¢ncia Amazon EC2                                                                                                                                                                                           |
| AKIA | Ch
## Refer√™ncias

* [https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_getting-started\_concepts.html](https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_getting-started\_concepts.html)
* [https://aws.amazon.com/iam/](https://aws.amazon.com/iam/)
* [https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html](https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html)

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ quiser ver sua **empresa anunciada no HackTricks** ou se quiser acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>