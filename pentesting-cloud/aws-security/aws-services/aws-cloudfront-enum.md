# AWS - CloudFront Enum

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks im PDF-Format herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github Repositories einreichen.

</details>

## CloudFront

CloudFront ist das **Content Delivery Network von AWS, das die Verteilung** Ihres statischen und dynamischen Inhalts √ºber sein weltweites Netzwerk von Edge-Standorten beschleunigt. Wenn Sie eine Anfrage f√ºr Inhalte verwenden, die Sie √ºber Amazon CloudFront hosten, wird die Anfrage an den n√§chstgelegenen Edge-Standort geleitet, der die geringste Latenz bietet, um die beste Leistung zu erzielen. Wenn **CloudFront-Zugriffsprotokolle** aktiviert sind, k√∂nnen Sie die Anfrage von jedem Benutzer aufzeichnen, der auf Ihre Website und Verteilung zugreift. Wie bei S3-Zugriffsprotokollen werden diese Protokolle auch **auf Amazon S3 f√ºr eine dauerhafte und best√§ndige Speicherung** gespeichert. Es fallen keine Geb√ºhren f√ºr die Aktivierung der Protokollierung an, jedoch werden die Protokolle aufgrund der Speicherung in S3 f√ºr den von S3 verwendeten Speicherplatz gespeichert.

Die Protokolldateien erfassen Daten √ºber einen bestimmten Zeitraum, und je nach Anzahl der Anfragen, die von Amazon CloudFront f√ºr diese Verteilung empfangen werden, h√§ngt die Anzahl der Protokolldateien ab, die generiert werden. Es ist wichtig zu wissen, dass diese Protokolldateien nicht auf S3 erstellt oder geschrieben werden. S3 ist einfach der Ort, an den sie geliefert werden, sobald die Protokolldatei voll ist. **Amazon CloudFront beh√§lt diese Protokolle bei, bis sie bereit sind, an S3 geliefert zu werden**. Je nach Gr√∂√üe dieser Protokolldateien kann diese Lieferung **zwischen einer und 24 Stunden** dauern.

**Standardm√§√üig ist das Cookie-Logging deaktiviert**, aber Sie k√∂nnen es aktivieren.

### Funktionen

Sie k√∂nnen Funktionen in CloudFront erstellen. Diese Funktionen haben ihren **Endpunkt in CloudFront** definiert und f√ºhren einen deklarierten **NodeJS-Code** aus. Dieser Code wird in einer **Sandbox** auf einer von AWS verwalteten Maschine ausgef√ºhrt (Sie br√§uchten einen Sandbox-Bypass, um aus dem zugrunde liegenden Betriebssystem zu entkommen).

Da die Funktionen nicht im AWS-Konto des Benutzers ausgef√ºhrt werden, ist kein IAM-Rolle angeh√§ngt, sodass kein direkter Privesc m√∂glich ist, der diese Funktion missbraucht.

### Enumeration
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Nicht authentifizierter Zugriff

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Post-Exploitation

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks in PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>
