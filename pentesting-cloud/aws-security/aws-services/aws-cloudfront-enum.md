# AWS - CloudFront Απαρίθμηση

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## CloudFront

Το CloudFront είναι η **παγκόσμια δικτυακή υπηρεσία παράδοσης περιεχομένου του AWS που επιταχύνει τη διανομή** του στατικού και δυναμικού περιεχομένου σας μέσω του παγκόσμιου δικτύου των edge locations του. Όταν χρησιμοποιείτε ένα περιεχόμενο που φιλοξενείτε μέσω του Amazon CloudFront, ο αίτημα δρομολογείται στην πλησιέστερη edge location που παρέχει τη χαμηλότερη καθυστέρηση για να παρέχει την καλύτερη απόδοση. Όταν είναι ενεργοποιημένα τα **logs πρόσβασης του CloudFront**, μπορείτε να καταγράψετε το αίτημα από κάθε χρήστη που ζητά πρόσβαση στον ιστότοπό σας και στη διανομή σας. Όπως και με τα logs πρόσβασης του S3, αυτά τα logs είναι επίσης **αποθηκευμένα στο Amazon S3 για ανθεκτική και μόνιμη αποθήκευση**. Δεν υπάρχουν χρεώσεις για την ενεργοποίηση της καταγραφής καθαυτής, ωστόσο, καθώς τα logs αποθηκεύονται στο S3, θα χρεωθείτε για την αποθήκευση που χρησιμοποιείται από το S3.

Τα αρχεία καταγραφής καταγράφουν δεδομένα για ένα χρονικό διάστημα και ανάλογα με τον αριθμό των αιτημάτων που λαμβάνονται από το Amazon CloudFront για αυτήν τη διανομή, θα εξαρτηθεί ο αριθμός των αρχείων καταγραφής που δημιουργούνται. Είναι σημαντικό να γνωρίζετε ότι αυτά τα αρχεία καταγραφής δεν δημιουργούνται ή γράφονται στο S3. Το S3 είναι απλώς ο τόπος όπου παραδίδονται μόλις το αρχείο καταγραφής είναι γεμάτο. **Το Amazon CloudFront διατηρεί αυτά τα logs μέχρι να είναι έτοιμα να παραδοθούν στο S3**. Ανάλογα με το μέγεθος αυτών των αρχείων καταγραφής, αυτή η παράδοση μπορεί να διαρκέσει **από ένα έως 24 ώρες**.

**Από προεπιλογή η καταγραφή των cookies είναι απενεργοποιημένη**, αλλά μπορείτε να την ενεργοποιήσετε.

### Λειτουργίες

Μπορείτε να δημιουργήσετε λειτουργίες στο CloudFront. Αυτές οι λειτουργίες θα έχουν το **endpoint τους στο cloudfront** που έχει καθοριστεί και θα εκτελούν έναν δηλωμένο **κώδικα NodeJS**. Αυτός ο κώδικας θα εκτελείται μέσα σε ένα **sandbox** σε μια μηχανή που λειτουργεί υπό τον έλεγχο μιας διαχειριζόμενης μηχανής AWS (θα χρειαστείτε ένα παράκαμψη του sandbox για να καταφέρετε να δραπετεύσετε στο υποκείμενο λειτουργικό σύστημα).

Καθώς οι λειτουργίες δεν εκτελούνται στο AWS λογαριασμό των χρηστών, δεν είναι συνδεδεμένος κανένας ρόλος IAM, οπότε δεν είναι δυνατή άμεση προώθηση προνομίων αξιοποιώντας αυτήν τη λειτουργία.

### Απαρίθμηση
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Μη εξουσιοδοτημένη πρόσβαση

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Μετά την εκμετάλλευση

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
