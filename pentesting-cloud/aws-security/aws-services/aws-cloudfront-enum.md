# AWS - CloudFront Enum

<details>

<summary><strong>AWSハッキングをゼロからヒーローまで学ぶには</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>をチェック！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックする
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォローする**。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングテクニックを共有する。

</details>

## CloudFront

CloudFrontはAWSの**コンテンツ配信ネットワークで、世界中のエッジロケーションを通じて静的および動的コンテンツの配信を高速化します**。Amazon CloudFrontを通じてホスティングしているコンテンツをリクエストすると、リクエストは最も近いエッジロケーションにルーティングされ、最低の遅延で提供され、最高のパフォーマンスを実現します。**CloudFrontアクセスログ**が有効になっている場合、ウェブサイトと配信へのアクセスをリクエストする各ユーザーからのリクエストを記録できます。S3アクセスログと同様に、これらのログも**耐久性と永続性のあるストレージとしてAmazon S3に保存されます**。ログ自体を有効にするための料金はかかりませんが、ログがS3に保存されるため、S3が使用するストレージの料金がかかります。

ログファイルは一定期間のデータをキャプチャし、Amazon CloudFrontがその配信に対して受け取るリクエストの量に応じて、生成されるログファイルの量が決まります。これらのログファイルはS3上で作成されたり書き込まれたりすることはないことを知っておくことが重要です。S3は単にログファイルがいっぱいになった後に配信される場所です。**Amazon CloudFrontはこれらのログをS3に配信する準備ができるまで保持します**。ログファイルのサイズに応じて、この配信には**1時間から24時間かかることがあります**。

**デフォルトではクッキーログは無効になっています**が、有効にすることができます。

### Functions

CloudFrontでは関数を作成できます。これらの関数は**cloudfrontで定義されたエンドポイント**を持ち、宣言された**NodeJSコード**を実行します。このコードはAWSが管理するマシンで動作する**サンドボックス**内で実行されます（基盤となるOSに脱出するためにはサンドボックスバイパスが必要です）。

関数はユーザーのAWSアカウントで実行されないため、IAMロールはアタッチされず、この機能を悪用した直接的な権限昇格は可能ではありません。

### Enumeration
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## 認証されていないアクセス

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## 攻撃後の活動

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)でAWSハッキングをゼロからヒーローまで学ぶ</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックしてください。
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォロー**してください。
* [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のgithubリポジトリにPRを提出して、あなたのハッキングのコツを**共有**してください。

</details>
