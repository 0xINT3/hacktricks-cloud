# AWS - CloudFront Enum

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* **HackTricksで会社を宣伝したい**場合や、**最新バージョンのPEASSを見たい**場合、またはHackTricksをPDFでダウンロードしたい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れる
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)をフォローする。
* **ハッキングのトリックを共有するには、**[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

## CloufFront

CloudFrontは、AWSの**コンテンツ配信ネットワークで、静的および動的なコンテンツの配信を高速化**します。Amazon CloudFrontを介してホストしているリクエストコンテンツを使用すると、リクエストは最も低いレイテンシで最高のパフォーマンスを提供する最も近いエッジロケーションにルーティングされます。CloudFrontアクセスログが有効になっている場合、ウェブサイトや配信へのアクセスを要求する各ユーザーのリクエストを記録することができます。S3アクセスログと同様に、これらのログも**Amazon S3に耐久性と永続性のあるストレージとして保存**されます。ログの有効化自体には料金はかかりませんが、ログはS3に保存されるため、S3が使用するストレージに対して料金が発生します。

ログファイルは一定期間のデータをキャプチャし、Amazon CloudFrontに対して受信されるリクエストの量によって生成されるログファイルの量が異なります。これらのログファイルはS3上で作成または書き込まれるわけではないことを知っておくことが重要です。ログファイルがいっぱいになったら、単にS3に配信されます。**Amazon CloudFrontは、これらのログをS3に配信する準備ができるまで保持**します。また、これらのログファイルのサイズに応じて、この配信には**1〜24時間**かかる場合があります。

**デフォルトでは、クッキーロギングは無効**になっていますが、有効にすることができます。

### 関数

CloudFrontで関数を作成することができます。これらの関数は、**cloudfrontでエンドポイント**が定義され、宣言された**NodeJSコード**が実行されます。このコードは、AWSの管理されたマシンで実行されるマシンのサンドボックス内で実行されます（アンダーレイのOSに脱出するためにはサンドボックスのバイパスが必要です）。

関数はユーザーのAWSアカウントで実行されないため、IAMロールはアタッチされていないため、この機能を悪用して直接的な特権昇格はできません。

### 列挙
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## 認証されていないアクセス

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## ポストエクスプロイテーション

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* もし **HackTricks で会社を宣伝したい** または **PEASS の最新バージョンにアクセスしたい** または **HackTricks を PDF でダウンロードしたい** 場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) をチェックしてください！
* [**公式の PEASS & HackTricks スワッグ**](https://peass.creator-spring.com) を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) を見つけて、独占的な [**NFTs**](https://opensea.io/collection/the-peass-family) のコレクションを発見しましょう
* 💬 [**Discord グループ**](https://discord.gg/hRep4RUj7f) または [**telegram グループ**](https://t.me/peass) に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm) をフォローしましょう。
* **ハッキングのトリックを共有するために、PR を** [**HackTricks**](https://github.com/carlospolop/hacktricks) **と** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **の GitHub リポジトリに提出してください。**

</details>
