# AWS - CloudFront Enum

<details>

<summary><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksスワッグ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**または[telegramグループ](https://t.me/peass)に**参加**するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)で**フォロー**する
- **ハッキングトリックを共有するには、[HackTricks](https://github.com/carlospolop/hacktricks)と[HackTricks Cloud](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください**

</details>

## CloudFront

CloudFrontはAWSの**コンテンツ配信ネットワーク**であり、世界中のエッジロケーションを介して静的および動的コンテンツの配信を高速化します。Amazon CloudFrontを介してホストしているコンテンツをリクエストすると、リクエストは最も低い遅延時間で提供される最寄りのエッジロケーションにルーティングされ、最高のパフォーマンスを提供します。**CloudFrontアクセスログ**が有効になっていると、ウェブサイトや配信にアクセスを要求する各ユーザーからのリクエストを記録できます。S3アクセスログと同様に、これらのログも**Amazon S3に格納されて耐久性と永続性のあるストレージ**として使用されます。ログを有効にするためには料金はかかりませんが、ログはS3に保存されるため、S3が使用するストレージに対して料金が発生します。

ログファイルは一定期間のデータをキャプチャし、その配信用にAmazon CloudFrontに受信されるリクエストの量に応じて生成されるログファイルの量が異なります。これらのログファイルはS3に作成または書き込まれないことを知っておくことが重要です。S3は、ログファイルがいっぱいになったら配信される場所であるだけです。**Amazon CloudFrontはこれらのログをS3に配信する準備ができるまでログを保持**します。再度、これらのログファイルのサイズに応じて、この配信には**1時間から24時間かかる**場合があります。

**デフォルトではCookieログ記録は無効**になっていますが、有効にすることができます。

### 関数

CloudFrontで関数を作成できます。これらの関数は、**cloudfrontでエンドポイントを持ち**、宣言された**NodeJSコード**を実行します。このコードは、AWSが管理するマシンで実行されるマシン内の**サンドボックス**で実行されます（下位のOSに脱出するにはサンドボックスバイパスが必要です）。

関数はユーザーのAWSアカウントで実行されないため、IAMロールが添付されていないため、この機能を悪用して直接的な権限昇格はできません。

### 列挙
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## 認証されていないアクセス

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## ポストエクスプロイテーション

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

<details>

<summary><strong>ゼロからヒーローまでのAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks をサポートする他の方法:

* **HackTricks で企業を宣伝したい**、または **HackTricks をPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な [**NFTs**](https://opensea.io/collection/the-peass-family) のコレクションを見つける
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f) に参加するか、[**telegramグループ**](https://t.me/peass) に参加するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live) をフォローする
* **HackTricks** と [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks) のGitHubリポジトリにPRを提出して、あなたのハッキングテクニックを共有する

</details>
