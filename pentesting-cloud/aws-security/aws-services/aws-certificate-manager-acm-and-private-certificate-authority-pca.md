# AWS - 証明書マネージャー（ACM）＆プライベート証明書機関（PCA）

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* もし **HackTricks で会社を宣伝したい**場合や、**PEASS の最新バージョンにアクセスしたい**場合、または **HackTricks を PDF でダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) をご覧ください！
* [**公式の PEASS & HackTricks スワッグ**](https://peass.creator-spring.com) を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) を見つけてください。これは、私たちの独占的な [**NFT**](https://opensea.io/collection/the-peass-family) のコレクションです
* 💬 [**Discord グループ**](https://discord.gg/hRep4RUj7f) または [**telegram グループ**](https://t.me/peass) に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm) をフォローしてください
* **ハッキングのトリックを共有するには、** [**HackTricks**](https://github.com/carlospolop/hacktricks) と [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) の GitHub リポジトリに PR を提出してください

</details>

## 基本情報

**AWS 証明書マネージャー（ACM）**は、AWS サービスや内部リソースの SSL/TLS 証明書のプロビジョニング、管理、展開を簡素化するために設計されたサービスです。ACM は、これらの証明書の購入、アップロード、更新に関わる手動手続きを**省略**します。ACM を使用すると、ユーザーは Elastic Load Balancer、Amazon CloudFront ディストリビューション、API Gateway 上の API など、さまざまな AWS リソースに対して簡単に証明書のリクエストとデプロイを行うことができます。

ACM はまた、**自動証明書の更新**も行います。さらに、**内部使用のためのプライベート証明書**の作成と集中管理も可能です。ACM を介して提供される SSL/TLS 証明書は、Elastic Load Balancing、Amazon CloudFront、Amazon API Gateway などの統合 AWS サービス専用に使用される場合は無料ですが、ACM 統合サービス以外で使用されるプライベート証明書や、アプリケーションの実行に使用される AWS リソースと、**プライベート証明書機関（CA）**の運用に対しては月額料金が発生します。

**AWS プライベート証明書機関**は、**管理されたプライベート CA サービス**であり、ACM 証明書管理をプライベート証明書に拡張します。プライベート証明書を使用することで、組織内のリソースを認証することができます。

## 列挙

### ACM
```
# List certificates
aws acm list-certificates

# Get certificate info
aws acm describe-certificate --certificate-arn <arn> # Check "InUseBy" to check which resources are using it

# Get certificate data
aws acm get-certificate --certificate-arn "arn:aws:acm:us-east-1:188868097724:certificate/865abced-82c9-43bf-b7d2-1f4948bf353d"

# Account configuration
aws acm get-account-configuration
```
# AWS Certificate Manager (ACM) and Private Certificate Authority (PCA)

AWS Certificate Manager (ACM) は、AWS が提供するマネージドサービスで、SSL/TLS 証明書の作成、管理、デプロイを簡素化します。ACM を使用すると、証明書の発行、更新、削除を容易に行うことができます。

ACM は、パブリック証明書とプライベート証明書の両方をサポートしています。パブリック証明書は、ドメイン名に関連付けられた証明書で、Web サイトやアプリケーションのセキュリティを強化するために使用されます。プライベート証明書は、内部ネットワークや仮想プライベートクラウド (VPC) 内のリソースに対して使用されます。

ACM は、証明書の自動更新をサポートしており、証明書の有効期限が切れることを防ぎます。また、ACM は、AWS の他のサービスとの統合も提供しており、証明書のデプロイを簡単にすることができます。

Private Certificate Authority (PCA) は、ACM の機能を拡張し、独自のプライベート証明書を作成および管理するためのサービスです。PCA を使用すると、独自のルート証明書を作成し、組織内で信頼された証明書を発行することができます。

PCA は、セキュリティ要件の厳しい環境で使用することができます。例えば、組織内のアプリケーションやデバイスに対して、独自の証明書を使用する場合などです。

ACM と PCA を組み合わせることで、パブリック証明書とプライベート証明書の両方を効果的に管理することができます。これにより、セキュリティを強化し、信頼性の高い通信を実現することができます。
```
# List CAs
aws acm-pca list-certificate-authorities

# Get CA info
aws acm-pca describe-certificate-authority --certificate-authority-arn <arn>

# Get CA Permissions
aws acm-pca list-permissions --certificate-authority-arn <arn>

# Get CA certificate
aws acm-pca get-certificate-authority-certificate --certificate-authority-arn <arn>

# Certificate request
aws acm-pca get-certificate-authority-csr --certificate-authority-arn <arn>

# Get CA Policy (if any)
aws acm-pca get-policy --resource-arn <arn>
```
## Privesc

TODO

## ポストエクスプロイテーション

TODO

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* もしもあなたの**会社をHackTricksで宣伝したい**場合や、**最新版のPEASSを入手したい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式のPEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを発見しましょう
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で私をフォローしましょう 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **HackTricks**と**HackTricks Cloud**のgithubリポジトリに**PRを提出**することで、あなたのハッキングトリックを共有しましょう。

</details>
