# AWS - 证书管理器 (ACM) 和私有证书颁发机构 (PCA)

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github 仓库提交 PR 来分享您的黑客技巧。**

</details>

## 基本信息

**AWS 证书管理器 (ACM)** 是一个旨在简化为 AWS 服务和内部资源提供 SSL/TLS 证书的配置、管理和部署的服务。它**消除了购买、上传和更新这些证书所涉及的手动步骤**。使用 ACM，用户可以轻松地在各种 AWS 资源上请求和部署证书，如弹性负载均衡器、Amazon CloudFront 分发和 API Gateway 上的 API。

ACM 还负责**自动证书续订**。此外，它允许创建和集中管理**用于内部使用的私有证书**。通过 ACM 提供的 SSL/TLS 证书专门用于与集成的 AWS 服务（如弹性负载均衡、Amazon CloudFront 和 Amazon API Gateway）一起使用是免费的，但用户需要支付用于运行应用程序的任何 AWS 资源的费用，以及每个**私有证书颁发机构 (CA)** 的运营月费和用于 ACM 集成服务之外的私有证书的费用。

**AWS 私有证书颁发机构**是一项**托管的私有 CA** 服务，它将 ACM 证书管理扩展到私有证书。使用私有证书，您可以对组织内的资源进行身份验证。

## 枚举

### ACM
```
# List certificates
aws acm list-certificates

# Get certificate info
aws acm describe-certificate --certificate-arn <arn> # Check "InUseBy" to check which resources are using it

# Get certificate data
aws acm get-certificate --certificate-arn "arn:aws:acm:us-east-1:188868097724:certificate/865abced-82c9-43bf-b7d2-1f4948bf353d"

# Account configuration
aws acm get-account-configuration
```
# AWS证书管理器（ACM）和私有证书颁发机构（PCA）

## 介绍

AWS证书管理器（ACM）是一项托管服务，用于简化在AWS上部署、管理和使用SSL/TLS证书。它提供了一个集中的位置来存储和管理证书，以便在AWS托管的服务中使用。

私有证书颁发机构（PCA）是AWS的托管服务，用于创建和管理私有证书颁发机构。它允许您创建自己的证书颁发机构，并使用这些机构颁发的证书来保护您的应用程序和服务。

## ACM和PCA的区别

ACM和PCA都是AWS的证书管理服务，但它们有一些关键区别：

- ACM是用于托管公共证书的服务，这些证书可以用于在AWS托管的服务中启用SSL/TLS加密。ACM提供了自动化的证书部署和更新功能，以及与其他AWS服务的集成。
- PCA是用于创建和管理私有证书颁发机构的服务。它允许您创建自己的证书颁发机构，并使用这些机构颁发的证书来保护您的应用程序和服务。PCA提供了更大的灵活性和控制权，但也需要更多的管理和配置工作。

## 使用ACM

使用ACM，您可以轻松地在AWS上部署和管理SSL/TLS证书。以下是使用ACM的一些关键步骤：

1. 登录AWS管理控制台，并导航到ACM服务页面。
2. 单击“导入证书”按钮，然后选择要导入的证书文件。
3. 验证您的域名所有权，以便ACM可以为您的域名颁发证书。
4. 选择要将证书部署到的AWS托管服务，例如Elastic Load Balancer或CloudFront。
5. 确认部署设置，并单击“确认”按钮以部署证书。

## 使用PCA

使用PCA，您可以创建和管理私有证书颁发机构，并使用这些机构颁发的证书来保护您的应用程序和服务。以下是使用PCA的一些关键步骤：

1. 登录AWS管理控制台，并导航到PCA服务页面。
2. 单击“创建证书颁发机构”按钮，然后按照向导的指示创建证书颁发机构。
3. 生成根证书和子证书，并将其下载到您的本地计算机。
4. 配置您的应用程序或服务以使用PCA颁发的证书进行加密通信。
5. 定期更新和轮换证书，以确保安全性。

## 总结

ACM和PCA是AWS的证书管理服务，用于简化在AWS上部署、管理和使用SSL/TLS证书。ACM适用于托管公共证书，而PCA适用于创建和管理私有证书颁发机构。使用ACM和PCA，您可以轻松地保护您的应用程序和服务，并确保安全通信。
```
# List CAs
aws acm-pca list-certificate-authorities

# Get CA info
aws acm-pca describe-certificate-authority --certificate-authority-arn <arn>

# Get CA Permissions
aws acm-pca list-permissions --certificate-authority-arn <arn>

# Get CA certificate
aws acm-pca get-certificate-authority-certificate --certificate-authority-arn <arn>

# Certificate request
aws acm-pca get-certificate-authority-csr --certificate-authority-arn <arn>

# Get CA Policy (if any)
aws acm-pca get-policy --resource-arn <arn>
```
## 提权

待办事项

## 漏洞利用后

待办事项

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获得[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来**分享您的黑客技巧**。

</details>
