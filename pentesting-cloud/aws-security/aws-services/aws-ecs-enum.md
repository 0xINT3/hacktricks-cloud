# AWS - ECS Enum

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## ECS

### Βασικές Πληροφορίες

Το Amazon **Elastic Container Services** ή ECS παρέχει μια πλατφόρμα για τη **φιλοξενία εφαρμογών σε εμπορευματοκιβώτια στο cloud**. Το ECS έχει δύο **μέθοδους αναπτύξεως**, τον τύπο **EC2** και μια επιλογή **serverless**, το **Fargate**. Η υπηρεσία **καθιστά πολύ εύκολη και ανώδυνη την εκτέλεση εμπορευματοκιβωτίων στο cloud**.

Το ECS λειτουργεί χρησιμοποιώντας τα εξής τρία κομμάτια: **Ομάδες**, **Υπηρεσίες** και **Ορισμοί Εργασιών**.

* Οι **Ομάδες** είναι **ομάδες εμπορευματοκιβωτίων** που εκτελούνται στο cloud. Όπως αναφέρθηκε προηγουμένως, υπάρχουν δύο τύποι εκκίνησης για τα εμπορευματοκιβώτια, EC2 και Fargate. Η AWS ορίζει τον τύπο εκκίνησης **EC2** ως τη δυνατότητα των πελατών "να εκτελούν τις εφαρμογές τους σε εμπορευματοκιβώτια σε ένα σύμπλεγμα από παραδείγματα Amazon EC2 που διαχειρίζονται". Το **Fargate** είναι παρόμοιο και ορίζεται ως "να σας επιτρέπει να εκτελείτε τις εφαρμογές σας σε εμπορευματοκιβώτια **χωρίς την ανάγκη για παροχή και διαχείριση** της υποκείμενης υποδομής".
* Οι **Υπηρεσίες** δημιουργούνται μέσα σε μια ομάδα και είναι υπεύθυνες για την **εκτέλεση των εργασιών**. Μέσα σε μια ορισμένη υπηρεσία **ορίζετε τον αριθμό των εργασιών που θα εκτελεστούν, την αυτόματη κλιμάκωση, τον πάροχο χωρητικότητας (Fargate/EC2/Εξωτερικό),** **πληροφορίες δικτύωσης** όπως VPC, υποδίκτυα και ομάδες ασφαλείας.
* Υπάρχουν **2 τύποι εφαρμογών**:
* **Υπηρεσία**: Μια ομάδα εργασιών που χειρίζεται μια εργασία υπολογισμού με μακρά διάρκεια που μπορεί να διακοπεί και να επανεκκινηθεί. Για παράδειγμα, μια ιστοσελίδα.
* **Εργασία**: Μια αυτόνομη εργασία που εκτελείται και τερματίζεται. Για παράδειγμα, μια διαδικασία παρτίδας.
* Ανάμεσα στις εφαρμογές υπηρεσίας, υπάρχουν **2 τύποι προγραμματιστών υπηρεσιών**:
* [**REPLICA**](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs\_services.html): Η στρατηγική προγραμματισμού αντιγράφων τοποθετεί και **διατηρεί τον επιθυμητό αριθμό** εργασιών στο σύμπλεγμά σας. Αν για οποιονδήποτε λόγο μια εργασία τερματιστεί, μια νέα ξεκινά στον ίδιο ή διαφορετικό κόμβο.
* [**DAEMON**](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs\_services.html): Αναπτύσσει ακριβώς μια εργασία σε κάθε ενεργή περίπτωση εμπορευματοκιβωτίου που έχει τις απαιτούμενες απαιτήσεις. Δεν χρειάζεται να καθορίσετε έναν επιθυμητό αριθμό εργασιών, μια στρατηγική τοποθέτησης εργασιών ή τη χρήση πολιτικών αυτόματης κλιμάκωσης υπηρεσίας.
* Οι **Ορισμοί Εργασιών** είναι υπεύθυνοι για τον **ορισμό των εμπορευματοκιβωτίων που θα εκτελεστούν** και των διάφορων παραμέτρων που θα ρυθμιστούν με τα εμπορευματοκιβώτια, όπως **αντιστοιχίσεις θυρών** με τον κεντρικό υπολογιστή, **μεταβλητές περιβάλλοντος**, **σημείο εισόδου** Docker...
* Ελέγξτε τις **μεταβλητές περιβάλλοντος για ευαίσθητες πληροφορίες**!

### Ευαίσθητα Δεδομένα Στους Ορισμούς Εργασιών

Οι ορισμοί εργασιών είναι υπεύθυνοι για τη **ρύθμιση
```bash
# Clusters info
aws ecs list-clusters
aws ecs describe-clusters --clusters <cluster>

# Container instances
## An Amazon ECS container instance is an Amazon EC2 instance that is running the Amazon ECS container agent and has been registered into an Amazon ECS cluster.
aws ecs list-container-instances --cluster <cluster>
aws ecs describe-container-instances --cluster <cluster> --container-instances <container_instance_arn>

# Services info
aws ecs list-services --cluster <cluster>
aws ecs describe-services --cluster <cluster> --services <services>
aws ecs describe-task-sets --cluster <cluster> --service <service>

# Task definitions
aws ecs list-task-definition-families
aws ecs list-task-definitions
aws ecs list-tasks --cluster <cluster>
aws ecs describe-tasks --cluster <cluster> --tasks <tasks>
## Look for env vars and secrets used from the task definition
aws ecs describe-task-definition --task-definition <TASK_NAME>:<VERSION>
```
### Μη εξουσιοδοτημένη πρόσβαση

{% content-ref url="../aws-unauthenticated-enum-access/aws-ecs-unauthenticated-enum.md" %}
[aws-ecs-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-ecs-unauthenticated-enum.md)
{% endcontent-ref %}

### Ανέλιξη προνομιακών δικαιωμάτων

Στην παρακάτω σελίδα μπορείτε να ελέγξετε πώς να **καταχραστείτε τα δικαιώματα του ECS για να αναβαθμίσετε τα προνόμια**:

{% content-ref url="../aws-privilege-escalation/aws-ecs-privesc.md" %}
[aws-ecs-privesc.md](../aws-privilege-escalation/aws-ecs-privesc.md)
{% endcontent-ref %}

### Μετά την εκμετάλλευση

{% content-ref url="../aws-post-exploitation/aws-ecs-post-exploitation.md" %}
[aws-ecs-post-exploitation.md](../aws-post-exploitation/aws-ecs-post-exploitation.md)
{% endcontent-ref %}

### Διατήρηση

{% content-ref url="../aws-persistence/aws-ecs-persistence.md" %}
[aws-ecs-persistence.md](../aws-persistence/aws-ecs-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
