# AWS - EC2, EBS, ELB, SSM, VPC & VPN Enum

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a> <strong>рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)\*\* рдкрд░ рдлреЙрд▓реЛ\*\* рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдХреЛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>

## VPC & Networking

рдЬрд╛рдиреЗрдВ рдХрд┐ VPC рдХреНрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдШрдЯрдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ:

{% content-ref url="aws-vpc-and-networking-basic-information.md" %}
[aws-vpc-and-networking-basic-information.md](aws-vpc-and-networking-basic-information.md)
{% endcontent-ref %}

## EC2

Amazon EC2 рдХрд╛ рдЙрдкрдпреЛрдЧ **рд╡рд░реНрдЪреБрдЕрд▓ рд╕рд░реНрд╡рд░реНрд╕** рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ **рд╕реБрд░рдХреНрд╖рд╛** рдФрд░ **рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ** рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдФрд░ **рд╕реНрдЯреЛрд░реЗрдЬ** рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред Amazon EC2 рдХреА рд▓рдЪреАрд▓рд╛рдкрди рдЙрд╕рдХреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдКрдкрд░ рдФрд░ рдиреАрдЪреЗ рд╕реНрдХреЗрд▓ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдореЗрдВ рд╕реНрдкрд╖реНрдЯ рд╣реИ, рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рдЖрд╡рд╢реНрдпрдХрддрд╛ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдпрд╛ рд▓реЛрдХрдкреНрд░рд┐рдпрддрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреЗ рд╕рдордп рдЕрдиреБрдХреВрд▓ рд╣реЛрдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЛ рдкреНрд░рднрд╛рд╡реА рдврдВрдЧ рд╕реЗ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рддреА рд╣реИред рдпрд╣ рд╕реБрд╡рд┐рдзрд╛ рдпрд╛рддрд╛рдпрд╛рдд рдХреА рдпрдерд╛рд░реНрде рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рдХрдо рдХрд░ рджреЗрддреА рд╣реИред

EC2 рдореЗрдВ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рджрд┐рд▓рдЪрд╕реНрдк рдЪреАрдЬреЗрдВ:

* рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЗрдВ
* SSH рдХреБрдВрдЬрд┐рдпрд╛рдБ
* рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛
* рдореМрдЬреВрджрд╛ EC2/AMIs/рд╕реНрдиреИрдкрд╢реЙрдЯреНрд╕
* рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ
* рдиреЗрдЯрд╡рд░реНрдХ
* рд╕рдмрдиреЗрдЯрд╡рд░реНрдХ
* рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЖрдИрдкреА
* рдЦреБрд▓реЗ рдкреЛрд░реНрдЯреНрд╕
* AWS рдХреЗ рдмрд╛рд╣рд░ рдЕрдиреНрдп рдиреЗрдЯрд╡рд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрдиреЗрдХреНрд╢рди

### рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкреНрд░реЛрдлрд╛рдЗрд▓реНрд╕

**EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬ** рдкрд░ рдЪрд▓ рд░рд╣реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреЛ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП **рд░реЛрд▓реНрд╕** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝реА рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рдиреНрдпрд╛рд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкрд░ рдЪрд▓ рд░рд╣реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬрд╝реНрдб рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рджреНрд╡рд╛рд░рд╛ AWS рд╕реЗ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕ рдЕрддрд┐рд░рд┐рдХреНрдд рдЕрд▓рдЧрд╛рд╡ рдХреЗ рдХрд╛рд░рдг, рдЖрдкрдХреЛ рдПрдХ AWS рд░реЛрд▓ рдФрд░ рдЙрд╕рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ рд╕реМрдВрдкрдиреЗ рдФрд░ рдЙрд╕рдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрджрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

рдпрд╣ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрджрдо рд╣реИ **рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкреНрд░реЛрдлрд╛рдЗрд▓** рдХрд╛ **рдирд┐рд░реНрдорд╛рдг** рдЬреЛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИред **рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкреНрд░реЛрдлрд╛рдЗрд▓** рдореЗрдВ рд░реЛрд▓ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкрд░ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд░реЛрд▓ рдХреЗ рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рд╛рдорд╛рдгрд┐рдХрддрд╛ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдлрд┐рд░ рдЙрди рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рд╛рдорд╛рдгрд┐рдХрддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ API рдХреЙрд▓реНрд╕ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪрд╛ рдЬрд╛ рд╕рдХреЗ рдФрд░ рд░реЛрд▓ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХреЗрд╡рд▓ рдЙрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХреЛ рд╕реАрдорд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **рдХреЗрд╡рд▓ рдПрдХ рд░реЛрд▓ рдПрдХ EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ рд╕реМрдВрдкрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** рдФрд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкрд░ рд╕рднреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдПрдХ рд╣реА рд░реЛрд▓ рдФрд░ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВред

### рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ

AWS EC2 рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдПрдХ рдЕрдореЗрдЬрд╝рди рдПрд▓рд╛рд╕реНрдЯрд┐рдХ рдХрдВрдкреНрдпреВрдЯ рдХреНрд▓рд╛рдЙрдб (EC2) рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реИ рдЬреЛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ рд░рдирдЯрд╛рдЗрдо рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИред рдЗрд╕ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдЗрд╕рдХрд╛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдЖрдИрдбреА, рдпрд╣ рдХрд┐рд╕ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрдмрдВрдзрд┐рдд IAM рд░реЛрд▓, рдФрд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХрд╛ рд╣реЛрд╕реНрдЯрдиреЗрдоред

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf" %}

### рдЬрд╛рдВрдЪрдирд╛

```bash
# Get EC2 instances
aws ec2 describe-instances
aws ec2 describe-instance-status #Get status from running instances

# Get user data from each ec2 instance
for instanceid in $(aws ec2 describe-instances --profile <profile> --region us-west-2 | grep -Eo '"i-[a-zA-Z0-9]+' | tr -d '"'); do
echo "Instance ID: $instanceid"
aws ec2 describe-instance-attribute --profile <profile> --region us-west-2 --instance-id "$instanceid" --attribute userData | jq ".UserData.Value" | tr -d '"' | base64 -d
echo ""
echo "-------------------"
done

# Instance profiles
aws iam list-instance-profiles
aws iam list-instance-profiles-for-role --role-name <name>

# Get tags
aws ec2 describe-tags

# Get volumes
aws ec2 describe-volume-status
aws ec2 describe-volumes

# Get snapshots
aws ec2 describe-snapshots --owner-ids self

# Scheduled instances
aws ec2 describe-scheduled-instances

# Get custom images
aws ec2 describe-images --owners self

# Get Elastic IPs
aws ec2 describe-addresses

# Get current output
aws ec2 get-console-output --instance-id [id]

# Get VPN customer gateways
aws ec2 describe-customer-gateways
aws ec2 describe-vpn-gateways
aws ec2 describe-vpn-connections

# List conversion tasks to upload/download VMs
aws ec2 describe-conversion-tasks
aws ec2 describe-import-image-tasks

# Get Bundle Tasks
aws ec2 describe-bundle-tasks

# Get Classic Instances
aws ec2 describe-classic-link-instances

# Get Dedicated Hosts
aws ec2 describe-hosts

# Get SSH Key Pairs
aws ec2 describe-key-pairs

# Get Internet Gateways
aws ec2 describe-internet-gateways

# Get NAT Gateways
aws ec2 describe-nat-gateways

# Get subnetworks
aws ec2 describe-subnets

# Get FW rules
aws ec2 describe-network-acls

# Get security groups
aws ec2 describe-security-groups

# Get interfaces
aws ec2 describe-network-interfaces

# Get routes table
aws ec2 describe-route-tables

# Get VPCs
aws ec2 describe-vpcs
aws ec2 describe-vpc-peering-connections
```

### рдЕрдирдЕрдереЗрдВрдЯрд┐рдХреЗрдЯреЗрдб рдПрдХреНрд╕реЗрд╕

{% content-ref url="../../aws-unauthenticated-enum-access/aws-ec2-unauthenticated-enum.md" %}
[aws-ec2-unauthenticated-enum.md](../../aws-unauthenticated-enum-access/aws-ec2-unauthenticated-enum.md)
{% endcontent-ref %}

### рдкреНрд░рд╛рдЗрд╡реЗрд╕реНрдХ

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреГрд╖реНрда рдкрд░ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ **EC2 рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдП**:

{% content-ref url="../../aws-privilege-escalation/aws-ec2-privesc.md" %}
[aws-ec2-privesc.md](../../aws-privilege-escalation/aws-ec2-privesc.md)
{% endcontent-ref %}

### рдкреЛрд╕реНрдЯ-рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреЗрд╢рди

{% content-ref url="../../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/" %}
[aws-ec2-ebs-ssm-and-vpc-post-exploitation](../../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/)
{% endcontent-ref %}

## EBS

рдЕрдореЗрдЬрд╝рди **EBS** (рдПрд▓рд╛рд╕реНрдЯрд┐рдХ рдмреНрд▓реЙрдХ рд╕реНрдЯреЛрд░) **рд╕реНрдиреИрдкрд╢реЙрдЯреНрд╕** рдореБрдЦреНрдп рд░реВрдк рд╕реЗ AWS EBS рд╡реЙрд▓реНрдпреВрдо рдХреА рд╕реНрдерд┐рд░ **рдмреИрдХрдЕрдкреНрд╕** рд╣реЛрддреЗ рд╣реИрдВред рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдпреЗ рдПрдХ **рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдордп рдкрд░ EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реА рдбрд┐рд╕реНрдХ рдХреА рдХреЙрдкреА** рд╣реЛрддреА рд╣реИрдВред EBS рд╕реНрдиреИрдкрд╢реЙрдЯреНрд╕ рдХреЛ рдХреНрд╖реЗрддреНрд░реЛрдВ рдФрд░ рдЦрд╛рддреЛрдВ рдХреЗ рдмреАрдЪ рдХреЙрдкреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╛ рдпрд╣рд╛рдБ рддрдХ рдХрд┐ рдЙрдиреНрд╣реЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдХреЗ рд╕реНрдерд╛рдирд┐рдХ рд░реВрдк рд╕реЗ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рд╕реНрдиреИрдкрд╢реЙрдЯреНрд╕ рдореЗрдВ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬреИрд╕реЗ **рд╕реЛрд░реНрд╕ рдХреЛрдб рдпрд╛ рдПрдкреАрдЖрдИ рдХреБрдВрдЬреА**, рдЗрд╕рд▓рд┐рдП, рдЕрдЧрд░ рдЖрдкрдХреЛ рдореМрдХрд╛ рдорд┐рд▓реЗ рддреЛ рдЗрд╕реЗ рдЬрд╛рдВрдЪрдирд╛ рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

### рдЕрдВрддрд░ AMI рдФрд░ EBS

**AMI** рдХрд╛ рдЙрдкрдпреЛрдЧ **EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд▓реЙрдиреНрдЪ** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрдмрдХрд┐ EC2 **рд╕реНрдиреИрдкрд╢реЙрдЯ** рдХрд╛ рдЙрдкрдпреЛрдЧ **EBS рд╡реЙрд▓реНрдпреВрдо рдкрд░ рд╕реНрдЯреЛрд░ рдбреЗрдЯрд╛ рдХрд╛ рдмреИрдХрдЕрдк рдФрд░ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрддрд┐** рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЬрдмрдХрд┐ EC2 рд╕реНрдиреИрдкрд╢реЙрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирдП AMI рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ AMI рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА, рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рд░реНрд╡рд░, рдпрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рд╣реИред

### рдкреНрд░рд╛рдЗрд╡реЗрд╕реНрдХ

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреГрд╖реНрда рдкрд░ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ **EBS рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдП**:

{% content-ref url="../../aws-privilege-escalation/aws-ebs-privesc.md" %}
[aws-ebs-privesc.md](../../aws-privilege-escalation/aws-ebs-privesc.md)
{% endcontent-ref %}

## SSM

**рдЕрдореЗрдЬрд╝рди рд╕рд┐рдореНрдкрд▓ рд╕рд┐рд╕реНрдЯрдореНрд╕ рдореИрдиреЗрдЬрд░ (SSM)** рджреНрд╡рд╛рд░рд╛ EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рдлреНрд▓реЛрдЯ рдХреЛ рд░рд┐рдореЛрдЯ рд░реВрдк рд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ рддрд╛рдХрд┐ рдЙрдирдХрд╛ рдкреНрд░рд╢рд╛рд╕рди рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рд░рд▓ рд╣реЛред рдЗрди рд╕рднреА рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ **SSM рдПрдЬреЗрдВрдЯ рд╕реЗрд╡рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХреНрдпреЛрдВрдХрд┐ рд╕реЗрд╡рд╛ рдХреЛ рдХреНрд░рд┐рдпрд╛рдПрдБ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХрд╛ рдХрд╛рдо рдХрд░реЗрдЧреА** AWS API рд╕реЗред

**SSM рдПрдЬреЗрдВрдЯ** рд╕рд┐рд╕реНрдЯрдореНрд╕ рдореИрдиреЗрдЬрд░ рдХреЛ рдЗрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдЕрдкрдбреЗрдЯ, рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдмрдирд╛рддрд╛ рд╣реИред рдПрдЬреЗрдВрдЯ **AWS рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рд╕рд┐рд╕реНрдЯрдореНрд╕ рдореИрдиреЗрдЬрд░ рд╕реЗрд╡рд╛ рд╕реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рддрд╛ рд╣реИ**, рдФрд░ рдлрд┐рд░ рдЙрдиреНрд╣реЗрдВ рдЕрдиреБрд░реЛрдз рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рд╛рддрд╛ рд╣реИред

**SSM рдПрдЬреЗрдВрдЯ** [**рдХреБрдЫ AMIs рдореЗрдВ рдкреВрд░реНрд╡ рд╕реНрдерд╛рдкрд┐рдд рдЖрддрд╛ рд╣реИ**](https://docs.aws.amazon.com/systems-manager/latest/userguide/ami-preinstalled-agent.html) рдпрд╛ рдЖрдкрдХреЛ [**рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЗрдирд╕реНрдЯреЙрд▓ рдХрд░рдирд╛**](https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-manual-agent-install.html) рд╣реЛрддрд╛ рд╣реИ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкрд░ред рд╕рд╛рде рд╣реА, рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ IAM рд░реЛрд▓ рдХреЛ рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрддрд┐ **AmazonEC2RoleforSSM** рдЬреБрдбрд╝реА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред

### рдЬрд╛рдВрдЪрди

```bash
aws ssm describe-instance-information
aws ssm describe-parameters
aws ssm describe-sessions --state [Active|History]
aws ssm describe-instance-patches --instance-id <id>
aws ssm describe-instance-patch-states --instance-ids <id>
aws ssm describe-instance-associations-status --instance-id <id>
```

рдЖрдк рдПрдХ EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдореЗрдВ рд╕рд┐рд╕реНрдЯрдореНрд╕ рдореИрдиреЗрдЬрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВ рдпрд╣ рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдмрд╕ рдЗрд╕рдХреЛ рдПрдХреНрд╕реАрдХреНрдпреВрдЯ рдХрд░рдХреЗ:

```bash
ps aux | grep amazon-ssm
```

### Privesc

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреГрд╖реНрда рдкрд░ рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ **рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП SSM рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ**:

{% content-ref url="../../aws-privilege-escalation/aws-ssm-privesc.md" %}
[aws-ssm-privesc.md](../../aws-privilege-escalation/aws-ssm-privesc.md)
{% endcontent-ref %}

### Persistence

## ELB

**Elastic Load Balancing** (ELB) рдПрдХ **рдЕрдореЗрдЬрд╝рди рд╡реЗрдм рд╕реЗрд╡рд╛рдУрдВ** (AWS) рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ **рд▓реЛрдб-рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ рд╕реЗрд╡рд╛** рд╣реИред ELB рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ **рдЖрдиреЗ рд╡рд╛рд▓реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рд╡рд┐рддрд░рд┐рдд** рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЯреНрд░реИрдлрд┐рдХ рдорд╛рдВрдЧреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реНрдХреЗрд▓ рдХрд░рддрд╛ рд╣реИред

```bash
# List internet-facing ELBs
aws elb describe-load-balancers
aws elb describe-load-balancers | jq '.LoadBalancerDescriptions[]| select( .Scheme | contains("internet-facing"))|.DNSName'

# DONT FORGET TO CHECK VERSION 2
aws elbv2 describe-load-balancers
aws elbv2 describe-load-balancers | jq '.LoadBalancers[].DNSName'
aws elbv2 describe-listeners --load-balancer-arn <load_balancer_arn>
```

## рд▓реЙрдиреНрдЪ рдЯреЗрдореНрдкрд▓реЗрдЯ рдФрд░ рдСрдЯреЛрд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЧреНрд░реБрдк

### рдЧрдгрдирд╛

{% code overflow="wrap" %}
```bash
# Launch templates
aws ec2 describe-launch-templates
aws ec2 describe-launch-templates --launch-template-id <launch_template_id>
## Get details, like user data
aws ec2 describe-launch-template-versions --launch-template-id <launch_template_id>

# Autoscaling
aws autoscaling describe-auto-scaling-groups
aws autoscaling describe-auto-scaling-instances
aws autoscaling describe-launch-configurations
aws autoscaling describe-load-balancer-target-groups
aws autoscaling describe-load-balancers
```
{% endcode %}

## VPN

рдПрдХ VPN рдХреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ **on-premise рдиреЗрдЯрд╡рд░реНрдХ (site-to-site VPN)** рдпрд╛ **рдХрд░реНрдордЪрд╛рд░реА рд▓реИрдкрдЯреЙрдкреНрд╕ (Client VPN)** рдХреЛ рдПрдХ **AWS VPC** рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╕реЗрд╡рд╛рдУрдВ рддрдХ рдкрд╣реБрдВрдЪрд╛ рдЬрд╛ рд╕рдХреЗ рдмрд┐рдирд╛ рдЙрдиреНрд╣реЗрдВ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдкреНрд░рдХрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рди рд╣реЛред

#### рдореМрд▓рд┐рдХ AWS VPN рдШрдЯрдХ

1. **рдЧреНрд░рд╛рд╣рдХ рдЧреЗрдЯрд╡реЗ**:

* рдЧреНрд░рд╛рд╣рдХ рдЧреЗрдЯрд╡реЗ рдПрдХ рд╕рдВрд╕рд╛рдзрди рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк AWS рдореЗрдВ рдмрдирд╛рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдПрдХ VPN рдХрдиреЗрдХреНрд╢рди рдХреЗ рджреМрд░рд╛рди рдЖрдкрдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рджрд┐рдЦрд╛рдПред
* рдпрд╣ рдореВрд▓ рд░реВрдк рд╕реЗ рдПрдХ рднреМрддрд┐рдХ рдЙрдкрдХрд░рдг рдпрд╛ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИ рдЬреЛ рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рдХрдиреЗрдХреНрд╢рди рдХреЗ рдЖрдкрдХреА рдУрд░ рд╣реИред
* рдЖрдк AWS рдХреЛ рдЧреНрд░рд╛рд╣рдХ рдЧреЗрдЯрд╡реЗ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд░реВрдЯрд┐рдВрдЧ рд╕реВрдЪрдирд╛ рдФрд░ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдЙрдкрдХрд░рдг рдХрд╛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЖрдИрдкреА рдкрддрд╛ (рдЬреИрд╕реЗ рдПрдХ рд░рд╛рдЙрдЯрд░ рдпрд╛ рдлрд╝рд╛рдпрд░рд╡реЙрд▓) рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред
* рдпрд╣ VPN рдХрдиреЗрдХреНрд╢рди рд╕реЗрдЯрдЕрдк рдХреЗ рд▓рд┐рдП рд╕рдВрджрд░реНрдн рдмрд┐рдВрджреБ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЕрддрд┐рд░рд┐рдХреНрдд рд╢реБрд▓реНрдХ рдирд╣реАрдВ рд▓реЗрддрд╛ рд╣реИред

2. **рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдЧреЗрдЯрд╡реЗ**:

* рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдЧреЗрдЯрд╡реЗ (VPG) рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рдХрдиреЗрдХреНрд╢рди рдХреЗ рдЕрдореЗрдЬрд╝рди рд╕рд╛рдЗрдб рдкрд░ VPN рдХрдВрд╕реЗрдВрдЯреНрд░реЗрдЯрд░ рд╣реИред
* рдпрд╣ рдЖрдкрдХреЗ VPC рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЗ VPN рдХрдиреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рд▓рдХреНрд╖реНрдп рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред
* VPG VPN рдХрдиреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП AWS рд╕рд╛рдЗрдб рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╣реИред
* рдпрд╣ рдЖрдкрдХреЗ VPC рдФрд░ рдЖрдкрдХреЗ on-premises рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмреАрдЪ рд╕реБрд░рдХреНрд╖рд┐рдд рд╕рдВрдЪрд╛рд░ рдХрд╛ рд╕рдВрднрд╛рд▓ рдХрд░рддрд╛ рд╣реИред

3. **рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рдХрдиреЗрдХреНрд╢рди**:

* рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рдХрдиреЗрдХреНрд╢рди рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд, IPsec VPN рдЯрдирд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЖрдкрдХреЗ on-premises рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдПрдХ VPC рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛ рд╣реИред
* рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдХрдиреЗрдХреНрд╢рди рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдЧреЗрдЯрд╡реЗ рдФрд░ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдЧреЗрдЯрд╡реЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
* рдпрд╣ рдЖрдкрдХреЗ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдЖрдкрдХреЗ AWS рдкрд░рд┐рд╡реЗрд╢ рдХреЗ рдмреАрдЪ рд╕реБрд░рдХреНрд╖рд┐рдд, рд╕реНрдерд┐рд░ рдФрд░ рдирд┐рдпрдорд┐рдд рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
* рдпрд╣ рдирд┐рдпрдорд┐рдд, рджреАрд░реНрдШрдХрд╛рд▓рд┐рдХ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдбреЗрдЯрд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрд┐рд▓рд┐рдВрдЧ рдХреА рдЬрд╛рддреА рд╣реИред

4. **рдХреНрд▓рд╛рдЗрдВрдЯ VPN рдПрдВрдбрдкреЙрдЗрдВрдЯ**:

* рдХреНрд▓рд╛рдЗрдВрдЯ VPN рдПрдВрдбрдкреЙрдЗрдВрдЯ рдПрдХ рд╕рдВрд╕рд╛рдзрди рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк AWS рдореЗрдВ рдмрдирд╛рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ VPN рд╕рддреНрд░реЛрдВ рдХреЛ рд╕рдХреНрд╖рдо рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░ рд╕рдХреЗрдВред
* рдпрд╣ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЙрдкрдХрд░рдгреЛрдВ (рдЬреИрд╕реЗ рд▓реИрдкрдЯреЙрдк, рд╕реНрдорд╛рд░реНрдЯрдлреЛрди рдЖрджрд┐) рдХреЛ AWS рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдпрд╛ рдЖрдкрдХреЗ on-premises рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
* рдпрд╣ рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рд╕реЗ рднрд┐рдиреНрди рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкреВрд░реЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдмрдЬрд╛рдп рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
* рдХреНрд▓рд╛рдЗрдВрдЯ VPN рдХреЗ рд╕рд╛рде, рдкреНрд░рддреНрдпреЗрдХ рдЧреНрд░рд╛рд╣рдХ рдЙрдкрдХрд░рдг рдПрдХ VPN рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрдиреЗрдХреНрд╢рди рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИред

рдЖрдк [**рдпрд╣рд╛рдБ AWS VPNs рдХреЗ рд▓рд╛рдн рдФрд░ рдШрдЯрдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ**](aws-vpc-and-networking-basic-information.md#vpn).

### рдЧрдгрдирд╛

```bash
# VPN endpoints
## Check used subnetwork, authentication, SGs, connected...
aws ec2 describe-client-vpn-endpoints

## Get AWS network info related to the vpn endpoint
aws ec2 describe-client-vpn-target-networks --client-vpn-endpoint-id <id>

## Get AWS subnet & ip range the VPN iconnected to
aws ec2 describe-client-vpn-routes --client-vpn-endpoint-id <id>

## Check authorization rules
aws ec2 describe-client-vpn-authorization-rules --client-vpn-endpoint-id <id>

## Get current connections to the VPN endpoint
aws ec2 describe-client-vpn-connections --client-vpn-endpoint-id <id>

# Get VPN gateways and check with which VPC each is connected
aws ec2 describe-vpn-gateways

# Get VPN site-to-site connections
aws ec2 describe-vpn-connections
```

### рд╕реНрдерд╛рдиреАрдп рдЬрд╛рдВрдЪ

**рд╕реНрдерд╛рдирд┐рдХ рдЕрд╕реНрдерд╛рдпреА рдкреНрд░рдорд╛рдгрдкрддреНрд░**

рдЬрдм AWS VPN Client рдХрд╛ рдЙрдкрдпреЛрдЧ VPN рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рд╛рдорд╛рдиреНрдпрдд: **AWS рдореЗрдВ рд▓реЙрдЧрд┐рди** рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ VPN рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреЗред рдлрд┐рд░, VPN рдХрдиреЗрдХреНрд╢рди рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ **AWS рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдмрдирд╛рдП рдФрд░ рд╕рдВрдЧреНрд░рд╣рд┐рдд** рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдпреЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ **`$HOME/.config/AWSVPNClient/TemporaryCredentials/<region>/temporary-credentials.txt`** рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдореЗрдВ рдПрдХ **AccessKey**, рдПрдХ **SecretKey** рдФрд░ рдПрдХ **Token** рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред

рдпреЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ `arn:aws:sts::<acc-id>:assumed-role/aws-vpn-client-metrics-analytics-access-role/CognitoIdentityCredentials` рдХреЗ рд▓рд┐рдП рд╣реИрдВ (TODO: рдЗрди рдкреНрд░рдорд╛рдгрдкрддреНрд░реЛрдВ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЕрдиреБрд╕рдВрдзрд╛рди рдХрд░реЗрдВ)ред

**opvn рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓реЗрдВ**

рдпрджрд┐ рдПрдХ **VPN рдХрдиреЗрдХреНрд╢рди рд╕реНрдерд╛рдкрд┐рдд** рд╣реБрдЖ рд╣реИ рддреЛ рдЖрдкрдХреЛ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ **`.opvn`** рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓реЗрдВ рдЦреЛрдЬрдиреА рдЪрд╛рд╣рд┐рдПред рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдПрдХ рд╕реНрдерд╛рди рдЬрд╣рд╛рдБ рдЖрдк **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ рд╡рд╣ рд╣реИ **`$HOME/.config/AWSVPNClient/OpenVpnConfigs`**

#### **рдкреЛрд╕реНрдЯ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯреЗрд╢рди**

{% content-ref url="../../aws-post-exploitation/aws-vpn-post-exploitation.md" %}
[aws-vpn-post-exploitation.md](../../aws-post-exploitation/aws-vpn-post-exploitation.md)
{% endcontent-ref %}

## рд╕рдВрджрд░реНрдн

* [https://docs.aws.amazon.com/batch/latest/userguide/getting-started-ec2.html](https://docs.aws.amazon.com/batch/latest/userguide/getting-started-ec2.html)

<details>

<summary><strong>рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a> <strong>рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб** рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рдЬреБрдбрд╝реЗрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рд╕реЗ рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)\*\* рдкрд░ рдлреЙрд▓реЛ\*\* рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ рдкреАрдЖрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>
