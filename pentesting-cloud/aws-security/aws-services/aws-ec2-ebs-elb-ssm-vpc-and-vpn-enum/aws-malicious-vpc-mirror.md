# AWS - 悪意のあるVPCミラー

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でAWSハッキングをゼロからヒーローまで学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

* **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
* **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦で私たちをフォローする [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **ハッキングトリックを共有するために、** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出する。

</details>

**攻撃の詳細については** [**こちら**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) **をチェックしてください！**

クラウド環境でのパッシブネットワーク検査は**困難**であり、ネットワークトラフィックを監視するために大規模な構成変更が必要でした。しかし、AWSが導入した「**VPC Traffic Mirroring**」という新機能により、このプロセスが簡素化されました。VPC Traffic Mirroringを使用すると、VPC内のネットワークトラフィックを**インスタンスにソフトウェアをインストールすることなく**複製することができます。この複製されたトラフィックは、ネットワーク侵入検知システム（IDS）に**送信**して**分析**することができます。

VPCトラフィックをミラーリングし、VPCトラフィックを盗聴および外部送信するための必要なインフラストラクチャを**自動的に展開**する必要性に対処するために、「**malmirror**」という概念実証スクリプトを開発しました。このスクリプトは、**侵害されたAWS資格情報**を使用して、対象のVPC内のすべてのサポートされているEC2インスタンスのミラーリングを設定するために使用できます。VPC Traffic Mirroringは、AWS Nitroシステムで動作するEC2インスタンスのみでサポートされており、VPCミラーターゲットは、ミラーリングされたホストと同じVPC内にある必要があります。

悪意のあるVPCトラフィックミラーリングの**影響**は大きく、VPC内で送信される**機密情報**にアクセスできるようになります。このような悪意のあるミラーリングの**可能性**は高く、VPCを流れる**クリアテキストトラフィック**が存在することを考えると、その可能性は高いです。多くの企業は、内部ネットワークで**パフォーマンス上の理由**からクリアテキストプロトコルを使用しており、従来の中間者攻撃が不可能であると仮定しています。

詳細情報や[malmirrorスクリプト](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror)へのアクセスについては、当社の**GitHubリポジトリ**で見つけることができます。このスクリプトは、攻撃的な研究目的のためにプロセスを**迅速かつ簡単かつ繰り返し可能**に自動化し、合理化します。

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でAWSハッキングをゼロからヒーローまで学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

* **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
* **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦で私たちをフォローする [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **ハッキングトリックを共有するために、** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出する。

</details>
