# AWS - 悪意のあるVPCミラー

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)でゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見する、私たちの独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクション
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォローする**。
* **HackTricks**のGitHubリポジトリにPRを提出して、あなたのハッキングのコツを共有する。

</details>

**攻撃の詳細については、[**https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) をチェックしてください！**

クラウド環境でのパッシブネットワーク検査は**困難**であり、ネットワークトラフィックを監視するために大きな設定変更が必要でした。しかし、AWSによって“**VPCトラフィックミラーリング**”という新機能が導入され、このプロセスが簡素化されました。VPCトラフィックミラーリングを使用すると、インスタンス自体にソフトウェアをインストールすることなく、VPC内のネットワークトラフィックを**複製**することができます。この複製されたトラフィックは、ネットワーク侵入検知システム（IDS）に送信され、**分析**されます。

VPCトラフィックのミラーリングと外部への流出に必要なインフラストラクチャの**自動デプロイ**のニーズに対応するために、私たちは“**malmirror**”というプルーフ・オブ・コンセプトスクリプトを開発しました。このスクリプトは、**侵害されたAWSクレデンシャル**を使用して、ターゲットVPC内のすべてのサポートされているEC2インスタンスのミラーリングを設定するために使用できます。VPCトラフィックミラーリングはAWS Nitroシステムによって動力を供給されるEC2インスタンスのみをサポートしており、VPCミラーターゲットはミラーされたホストと同じVPC内にある必要があることに注意が必要です。

悪意のあるVPCトラフィックミラーリングの**影響**は大きく、攻撃者がVPC内で送信される**機密情報**にアクセスできるようになるためです。このような悪意のあるミラーリングの**可能性**は高く、VPCを通じて流れる**クリアテキストトラフィック**の存在を考えると、多くの企業が内部ネットワーク内で**パフォーマンスの理由**からクリアテキストプロトコルを使用しており、従来の中間者攻撃が不可能だと仮定しています。

[**malmirrorスクリプト**](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror)の詳細とアクセスについては、私たちの**GitHubリポジトリ**で見つけることができます。このスクリプトはプロセスを自動化し、**迅速で簡単、繰り返し可能**にすることで、攻撃的な研究目的に役立ちます。

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)でゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見する、私たちの独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクション
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォローする**。
* **HackTricks**のGitHubリポジトリにPRを提出して、あなたのハッキングのコツを共有する。

</details>
