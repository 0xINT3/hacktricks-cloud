# AWS - Espejo malicioso de VPC

<details>

<summary><strong>Aprende hacking de AWS de cero a h√©roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

**Consulta** [**https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) **para m√°s detalles del ataque!**

La inspecci√≥n pasiva de redes en un entorno en la nube ha sido **desafiante**, requiriendo cambios de configuraci√≥n importantes para monitorear el tr√°fico de red. Sin embargo, AWS ha introducido una nueva caracter√≠stica llamada ‚Äú**VPC Traffic Mirroring**‚Äù para simplificar este proceso. Con VPC Traffic Mirroring, el tr√°fico de red dentro de los VPCs puede ser **duplicado** sin instalar ning√∫n software en las instancias mismas. Este tr√°fico duplicado puede ser enviado a un sistema de detecci√≥n de intrusiones de red (IDS) para **an√°lisis**.

Para abordar la necesidad de **despliegue automatizado** de la infraestructura necesaria para el espejo y exfiltraci√≥n del tr√°fico de VPC, hemos desarrollado un script de prueba de concepto llamado ‚Äú**malmirror**‚Äù. Este script puede ser utilizado con **credenciales de AWS comprometidas** para configurar el espejo para todas las instancias EC2 compatibles en un VPC objetivo. Es importante notar que VPC Traffic Mirroring solo es compatible con instancias EC2 impulsadas por el sistema AWS Nitro, y el objetivo del espejo de VPC debe estar dentro del mismo VPC que los hosts espejados.

El **impacto** de un espejo malicioso de tr√°fico de VPC puede ser significativo, ya que permite a los atacantes acceder a **informaci√≥n sensible** transmitida dentro de los VPCs. La **probabilidad** de tal espejo malicioso es alta, considerando la presencia de **tr√°fico en texto claro** fluyendo a trav√©s de los VPCs. Muchas empresas utilizan protocolos en texto claro dentro de sus redes internas por **razones de rendimiento**, asumiendo que los ataques tradicionales de hombre en el medio no son posibles.

Para m√°s informaci√≥n y acceso al [**script malmirror**](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror), se puede encontrar en nuestro **repositorio de GitHub**. El script automatiza y simplifica el proceso, haci√©ndolo **r√°pido, simple y repetible** para fines de investigaci√≥n ofensiva.

<details>

<summary><strong>Aprende hacking de AWS de cero a h√©roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
