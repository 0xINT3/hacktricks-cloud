# AWS - Αναγνώριση Σχεσιακής Βάσης Δεδομένων (RDS)

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs** στα [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Βασικές Πληροφορίες

Η υπηρεσία **Relational Database Service (RDS)** που προσφέρεται από το AWS σχεδιάστηκε για να διευκολύνει την ανάπτυξη, λειτουργία και κλιμάκωση μιας **σχεσιακής βάσης δεδομένων στο cloud**. Αυτή η υπηρεσία προσφέρει τα πλεονεκτήματα της οικονομικής αποδοτικότητας και κλιμακωσιμότητας, ενώ αυτοματοποιεί εργασίες που απαιτούν πολύ χρόνο, όπως η παροχή υλικού, η διαμόρφωση της βάσης δεδομένων, η ενημέρωση και η δημιουργία αντιγράφων ασφαλείας.

Το AWS RDS υποστηρίζει διάφορες δημοφιλείς μηχανές σχεσιακών βάσεων δεδομένων, συμπεριλαμβανομένων των MySQL, PostgreSQL, MariaDB, Oracle Database, Microsoft SQL Server και Amazon Aurora, με συμβατότητα τόσο για το MySQL όσο και για το PostgreSQL.

Οι βασικές λειτουργίες του RDS περιλαμβάνουν:

- Απλοποίηση της διαχείρισης των περιπτώσεων της βάσης δεδομένων.
- Δημιουργία **αντιγράφων ανάγνωσης** για βελτίωση της απόδοσης ανάγνωσης.
- Διαμόρφωση **αναπτύξεων πολλαπλών ζωνών διαθεσιμότητας (AZ)** για να εξασφαλιστεί η υψηλή διαθεσιμότητα και οι μηχανισμοί ανακατεύθυνσης.
- **Ενσωμάτωση** με άλλες υπηρεσίες του AWS, όπως:
- Η διαχείριση ταυτοποίησης και πρόσβασης του AWS Identity and Access Management (**IAM**) για αξιόπιστο έλεγχο πρόσβασης.
- Η παρακολούθηση και οι μετρήσεις του AWS **CloudWatch** για πλήρη παρακολούθηση.
- Η διαχείριση της κρυπτογράφησης στην κατάσταση ανάπαυσης με την χρήση της υπηρεσίας διαχείρισης κλειδιών του AWS Key Management Service (**KMS**).

## Διαπιστευτήρια

Κατά τη δημιουργία του συστάδα της βάσης δεδομένων, μπορεί να διαμορφωθεί το κύριο **όνομα χρήστη** (**`admin`** από προεπιλογή). Για να δημιουργήσετε τον κωδικό πρόσβασης αυτού του χρήστη μπορείτε:

* Να **καθορίσετε** έναν **κωδικό πρόσβασης** μόνοι σας
* Να πείτε στο RDS να τον **δημιουργήσει αυτόματα**
* Να πείτε στο RDS να τον διαχειριστεί στο **AWS Secret Manager** κρυπτογραφημένο με ένα κλειδί KMS

<figure><img src="../../../../.gitbook/assets/image (18) (1).png" alt=""><figcaption></figcaption></figure>

### Ταυτοποίηση

Υπάρχουν 3 επιλογές ταυτοποίησης, αλλά η χρήση του **κύριου κωδικού πρόσβασης είναι πάντα επιτρεπτή**:

<figure><img src="../../../../.gitbook/assets/image (19) (2).png" alt=""><figcaption></figcaption></figure>

### Δημόσια Πρόσβαση & VPC

Από προεπιλογή **δεν παρέχεται δημόσια πρόσβαση** στις βάσεις δεδομένων, αλλά **μπορεί να παρασχεθεί**. Επομένως, από προεπιλογή, μόνο μηχανές από το ίδιο VPC θα μπορούν να έχουν πρόσβαση σε αυτήν, εάν το επιλεγμένο **security group** (αποθηκεύονται στο EC2 SG) το επιτρέπει.

Αντί να αποκαλύπτετε μια περίπτωση βάσης δεδομένων, είναι δυνατό να δημιουργήσετε ένα **RDS Proxy** που βελτιώνει την
```bash
# Clusters info
## Get Endpoints, username, port, iam auth enabled, attached roles, SG
aws rds describe-db-clusters
aws rds describe-db-cluster-endpoints #Cluster URLs
aws rds describe-db-cluster-backtracks --db-cluster-identifier <cluster-name>

## Cluster snapshots
aws rds describe-db-cluster-snapshots

# Get DB instances info
aws rds describe-db-instances #username, url, port, vpc, SG, is public?
aws rds describe-db-security-groups

## Find automated backups
aws rds describe-db-instance-automated-backups

## Find snapshots
aws rds describe-db-snapshots
aws rds describe-db-snapshots --include-public --snapshot-type public
## Restore snapshot as new instance
aws rds restore-db-instance-from-db-snapshot --db-instance-identifier <ID> --db-snapshot-identifier <ID> --availability-zone us-west-2a

# Any public snapshot in the account
aws rds describe-db-snapshots --snapshot-type public

# Proxies
aws rds describe-db-proxy-endpoints
aws rds describe-db-proxy-target-groups
aws rds describe-db-proxy-targets

## reset credentials of MasterUsername
aws rds modify-db-instance --db-instance-identifier <ID> --master-user-password <NewPassword> --apply-immediately
```
{% endcode %}

### Μη εξουσιοδοτημένη πρόσβαση

{% content-ref url="../../aws-unauthenticated-enum-access/aws-rds-unauthenticated-enum.md" %}
[aws-rds-unauthenticated-enum.md](../../aws-unauthenticated-enum-access/aws-rds-unauthenticated-enum.md)
{% endcontent-ref %}

### Ανέλιξη προνομιούχων δικαιωμάτων

{% content-ref url="../../aws-privilege-escalation/aws-rds-privesc.md" %}
[aws-rds-privesc.md](../../aws-privilege-escalation/aws-rds-privesc.md)
{% endcontent-ref %}

### Μετά από εκμετάλλευση

{% content-ref url="../../aws-post-exploitation/aws-rds-post-exploitation.md" %}
[aws-rds-post-exploitation.md](../../aws-post-exploitation/aws-rds-post-exploitation.md)
{% endcontent-ref %}

### Διατήρηση

{% content-ref url="../../aws-persistence/aws-rds-persistence.md" %}
[aws-rds-persistence.md](../../aws-persistence/aws-rds-persistence.md)
{% endcontent-ref %}

### Εισχώρηση SQL

Υπάρχουν τρόποι για να έχετε πρόσβαση σε δεδομένα DynamoDB με **σύνταξη SQL**, επομένως, είναι επίσης δυνατές οι κλασικές **εισχωρήσεις SQL**.

{% embed url="https://book.hacktricks.xyz/pentesting-web/sql-injection" %}

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
