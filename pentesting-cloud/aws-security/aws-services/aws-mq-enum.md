# AWS - MQ Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)でAWSハッキングをゼロからヒーローまで学ぶ</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックする
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)を**フォローする**。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有する。

</details>

## AWS - MQ

**メッセージブローカー**は、異なるプログラミング言語を使用し、さまざまなプラットフォーム上で動作するソフトウェアシステム間の通信と情報交換を可能にします。**Amazon MQ**は、**Apache ActiveMQ**と**RabbitMQ**の管理されたメッセージブローカーサービスで、AWS上でメッセージブローカーの設定、運用、管理を簡素化します。数ステップで、Amazon MQはソフトウェアバージョンのアップグレードをサポートするメッセージブローカーをプロビジョニングできます。

### AWS - RabbitMQ

RabbitMQは、_メッセージブローカー_または_キューマネージャー_としても知られる**メッセージキューイングソフトウェア**です。簡単に言うと、**キューが定義されるソフトウェア**で、**アプリケーションが接続してメッセージを転送する**ためのものです。

メッセージにはあらゆる種類の情報を含めることができます。例えば、別のアプリケーション（別のサーバー上にあるかもしれません）で開始すべきプロセスやタスクに関する情報が含まれているかもしれませんし、単なるシンプルなテキストメッセージである可能性もあります。キューマネージャーソフトウェアは、受信アプリケーションが接続してキューからメッセージを取り出すまで、メッセージを保存します。受信アプリケーションはその後、メッセージを処理します。

AWSは**RabbitMQサーバーを簡単にホストし、管理する**サービスを提供しています。

### AWS - ActiveMQ

Apache ActiveMQ®は、最も人気のあるオープンソースの多プロトコル、Javaベースの**メッセージブローカー**です。業界標準のプロトコルをサポートしているため、ユーザーは幅広い言語とプラットフォームにわたるクライアント選択の利点を享受できます。JavaScript、C、C++、Python、.Netなどで書かれたクライアントから接続します。広く普及している**AMQP**プロトコルを使用してマルチプラットフォームアプリケーションを統合します。**STOMP**を使用してウェブアプリケーション間でメッセージを交換します。**MQTT**を使用してIoTデバイスを管理します。既存の**JMS**インフラをサポートし、それ以上のことを実現します。ActiveMQは、あらゆるメッセージングのユースケースをサポートするためのパワーと柔軟性を提供します。

## 列挙
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: RabbitMQとActiveMQを内部で列挙する方法と、すべてのキューを監視しデータを送信する方法を示してください（この方法を知っている場合はPRを送ってください）
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Unauthenticated Access

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Persistence

RabbitMQウェブコンソールへのアクセス資格情報を知っている場合、管理者権限を持つ新しいユーザーを作成できます。

## 参考文献

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)でAWSのハッキングをゼロからヒーローまで学ぶ</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックしてください。
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォロー**してください。
* [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のgithubリポジトリにPRを送って、あなたのハッキングのコツを**共有**してください。

</details>
