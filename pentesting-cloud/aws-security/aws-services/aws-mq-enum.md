# AWS - MQ Enum

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Amazon MQ

### Wprowadzenie do brokerów wiadomości
**Brokerzy wiadomości** działają jako pośrednicy, ułatwiając komunikację między różnymi systemami oprogramowania, które mogą być zbudowane na różnych platformach i programowane w różnych językach. **Amazon MQ** upraszcza wdrażanie, obsługę i konserwację brokerów wiadomości w AWS. Zapewnia zarządzane usługi dla **Apache ActiveMQ** i **RabbitMQ**, zapewniając płynne dostarczanie i automatyczne aktualizacje wersji oprogramowania.

### AWS - RabbitMQ
RabbitMQ to znane oprogramowanie do **kolejkowania wiadomości**, znane również jako _broker wiadomości_ lub _menedżer kolejek_. Jest to system, w którym konfigurowane są kolejki. Aplikacje komunikują się z tymi kolejkami, aby **wysyłać i odbierać wiadomości**. Wiadomości w tym kontekście mogą przenosić różne informacje, od poleceń do uruchamiania procesów na innych aplikacjach (potencjalnie na różnych serwerach) do prostych wiadomości tekstowych. Wiadomości są przechowywane przez oprogramowanie menedżera kolejek, dopóki nie zostaną pobrane i przetworzone przez aplikację odbierającą. AWS zapewnia łatwe w użyciu rozwiązanie do hostowania i zarządzania serwerami RabbitMQ.

### AWS - ActiveMQ
Apache ActiveMQ® to wiodący otwartoźródłowy, oparty na języku Java **broker wiadomości**, znany ze swojej wszechstronności. Obsługuje wiele standardowych protokołów branżowych, oferując szeroką kompatybilność klientów w różnych językach i platformach. Użytkownicy mogą:

- Łączyć się z klientami napisanymi w JavaScript, C, C++, Python, .Net i wielu innych.
- Wykorzystywać protokół **AMQP** do integracji aplikacji z różnych platform.
- Używać **STOMP** przez websockets do wymiany wiadomości w aplikacjach internetowych.
- Zarządzać urządzeniami IoT za pomocą **MQTT**.
- Utrzymywać istniejącą infrastrukturę **JMS** i rozszerzać jej możliwości.

Wytrzymałość i elastyczność ActiveMQ sprawiają, że jest on odpowiedni dla wielu wymagań dotyczących przesyłania wiadomości.


## Wyliczanie
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: Wskaż, jak przeprowadzić wewnętrzne wyliczanie RabbitMQ i ActiveMQ oraz jak nasłuchiwać wszystkich kolejek i wysyłać dane (wyślij PR, jeśli wiesz, jak to zrobić).
{% endhint %}

## Przywileje

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Nieuwierzytelniony dostęp

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Trwałość

Jeśli znasz dane uwierzytelniające do dostępu do konsoli RabbitMQ, możesz utworzyć nowego użytkownika z uprawnieniami administratora.

## Odwołania

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi trikami hakerskimi, przesyłając PR do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
