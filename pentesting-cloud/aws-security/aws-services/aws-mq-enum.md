# AWS - MQ 枚举

<details>

<summary><strong>从零开始学习 AWS 黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS 红队专家）</strong></a><strong>！</strong></summary>

支持 HackTricks 的其他方式：

* 如果您想看到您的**公司在 HackTricks 中做广告**或**下载 PDF 版的 HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 获取[**官方 PEASS & HackTricks 商品**](https://peass.creator-spring.com)
* 探索[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**电报群组**](https://t.me/peass) 或在 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)** 上关注我们**。
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来分享您的黑客技巧。

</details>

## Amazon MQ

### 介绍消息代理
**消息代理**充当中间人，在不同软件系统之间进行通信，这些系统可能构建在不同平台上，并用不同语言编程。**Amazon MQ**简化了在 AWS 上部署、运行和维护消息代理的过程。它为 **Apache ActiveMQ** 和 **RabbitMQ** 提供托管服务，确保无缝的配置和自动软件版本更新。

### AWS - RabbitMQ
RabbitMQ 是一种知名的**消息队列软件**，也被称为 _消息代理_ 或 _队列管理器_。它基本上是一个配置了队列的系统。应用程序与这些队列接口，以**发送和接收消息**。在这种情况下，消息可以携带各种信息，从命令以启动其他应用程序上的进程（可能在不同服务器上）到简单的文本消息。这些消息由队列管理软件保存，直到被接收应用程序检索并处理。AWS 提供了一个易于使用的解决方案，用于托管和管理 RabbitMQ 服务器。

### AWS - ActiveMQ
Apache ActiveMQ® 是一种领先的开源、基于 Java 的**消息代理**，以其多功能性而闻名。它支持多个行业标准协议，提供广泛的客户端兼容性，适用于多种语言和平台。用户可以：

- 连接 JavaScript、C、C++、Python、.Net 等编写的客户端。
- 利用 **AMQP** 协议集成来自不同平台的应用程序。
- 使用 **STOMP** 通过 Websockets 进行 Web 应用程序消息交换。
- 使用 **MQTT** 管理物联网设备。
- 维护现有的 **JMS** 基础设施并扩展其功能。

ActiveMQ 的稳健性和灵活性使其适用于多种消息传递需求。

## 枚举
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## 未经身份验证的访问

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## 持久性

如果您知道访问RabbitMQ Web控制台的凭据，您可以创建一个具有管理员权限的新用户。

## 参考

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

支持HackTricks的其他方式：

* 如果您想看到您的**公司在HackTricks中做广告**或**下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 发现我们的独家[NFTs](https://opensea.io/collection/the-peass-family)收藏品[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或在**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**上关注**我们。
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>
