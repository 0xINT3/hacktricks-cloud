# AWS - MQ Enum

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Amazon MQ

### Introduction aux courtiers de messages
Les **courtiers de messages** servent d'interm√©diaires, facilitant la communication entre diff√©rents syst√®mes logiciels, qui peuvent √™tre construits sur des plateformes vari√©es et programm√©s dans diff√©rents langages. **Amazon MQ** simplifie le d√©ploiement, l'exploitation et la maintenance des courtiers de messages sur AWS. Il fournit des services g√©r√©s pour **Apache ActiveMQ** et **RabbitMQ**, assurant une provisionnement sans effort et des mises √† jour automatiques de la version logicielle.

### AWS - RabbitMQ
RabbitMQ est un logiciel de **mise en file d'attente de messages** bien connu, √©galement appel√© _courtier de messages_ ou _gestionnaire de file d'attente_. C'est fondamentalement un syst√®me o√π des files d'attente sont configur√©es. Les applications interagissent avec ces files d'attente pour **envoyer et recevoir des messages**. Les messages dans ce contexte peuvent transporter une vari√©t√© d'informations, allant des commandes pour initier des processus sur d'autres applications (potentiellement sur diff√©rents serveurs) √† de simples messages textuels. Les messages sont conserv√©s par le logiciel gestionnaire de file d'attente jusqu'√† ce qu'ils soient r√©cup√©r√©s et trait√©s par une application r√©ceptrice. AWS propose une solution facile √† utiliser pour h√©berger et g√©rer des serveurs RabbitMQ.

### AWS - ActiveMQ
Apache ActiveMQ¬Æ est un **courtier de messages** open-source de premier plan, bas√© sur Java, connu pour sa polyvalence. Il prend en charge plusieurs protocoles standard de l'industrie, offrant une compatibilit√© client √©tendue √† travers une large gamme de langages et de plateformes. Les utilisateurs peuvent :

- Se connecter avec des clients √©crits en JavaScript, C, C++, Python, .Net, et plus encore.
- Tirer parti du protocole **AMQP** pour int√©grer des applications de diff√©rentes plateformes.
- Utiliser **STOMP** sur des websockets pour les √©changes de messages d'applications web.
- G√©rer des appareils IoT avec **MQTT**.
- Maintenir une infrastructure **JMS** existante et √©tendre ses capacit√©s.

La robustesse et la flexibilit√© d'ActiveMQ le rendent adapt√© √† une multitude d'exigences de messagerie.


## √ânum√©ration
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO : Indiquer comment √©num√©rer RabbitMQ et ActiveMQ en interne et comment √©couter toutes les files d'attente et envoyer des donn√©es (envoyez un PR si vous savez comment faire cela)
{% endhint %}

## √âl√©vation de privil√®ges

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Acc√®s non authentifi√©

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Persistance

Si vous connaissez les identifiants pour acc√©der √† la console web RabbitMQ, vous pouvez cr√©er un nouvel utilisateur avec des privil√®ges d'administrateur.

## R√©f√©rences

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> !</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-moi** sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
