# AWS - Απαρίθμηση MQ

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Amazon MQ

### Εισαγωγή στους Message Brokers
Οι **message brokers** λειτουργούν ως μεσάζοντες, διευκολύνοντας την επικοινωνία μεταξύ διάφορων λογισμικών συστημάτων, τα οποία μπορεί να έχουν διαφορετικές πλατφόρμες και να έχουν προγραμματιστεί σε διάφορες γλώσσες. Το **Amazon MQ** απλοποιεί την ανάπτυξη, λειτουργία και συντήρηση των message brokers στο AWS. Παρέχει διαχειριζόμενες υπηρεσίες για το **Apache ActiveMQ** και το **RabbitMQ**, εξασφαλίζοντας απρόσκοπτη παροχή και αυτόματες ενημερώσεις των εκδόσεων του λογισμικού.

### AWS - RabbitMQ
Το RabbitMQ είναι ένα δημοφιλές λογισμικό **message-queueing**, γνωστό επίσης ως _message broker_ ή _queue manager_. Βασικά είναι ένα σύστημα όπου διαμορφώνονται ουρές. Οι εφαρμογές αλληλεπιδρούν με αυτές τις ουρές για να **στείλουν και να λάβουν μηνύματα**. Τα μηνύματα σε αυτό το πλαίσιο μπορούν να μεταφέρουν διάφορες πληροφορίες, από εντολές για την έναρξη διεργασιών σε άλλες εφαρμογές (πιθανώς σε διαφορετικούς διακομιστές) έως απλά κείμενα μηνύματα. Τα μηνύματα κρατούνται από το λογισμικό του queue-manager μέχρι να ανακτηθούν και να επεξεργαστούν από μια λαμβάνουσα εφαρμογή. Το AWS παρέχει μια εύκολη λύση για τη φιλοξενία και διαχείριση των διακομιστών RabbitMQ.

### AWS - ActiveMQ
Το Apache ActiveMQ® είναι ένας κορυφαίος ανοιχτού κώδικα, βασισμένος σε Java **message broker** γνωστός για την ευελιξία του. Υποστηρίζει πολλά πρωτόκολλα βιομηχανίας, προσφέροντας εκτεταμένη συμβατότητα πελατών σε μια ευρεία γκάμα γλωσσών και πλατφορμών. Οι χρήστες μπορούν:

- Να συνδεθούν με πελάτες που έχουν γραφεί σε JavaScript, C, C++, Python, .Net και άλλες.
- Να εκμεταλλευτούν το πρωτόκολλο **AMQP** για να ενσωματώσουν εφαρμογές από διάφορες πλατφόρμες.
- Να χρησιμοποιήσουν το **STOMP** μέσω websockets για ανταλλαγή μηνυμάτων σε εφαρμογές ιστού.
- Να διαχειριστούν συσκευές IoT με το **MQTT**.
- Να διατηρήσουν υπάρχουσα υποδομή **JMS** και να επεκτείνουν τις δυνατότητές της.

Η ανθεκτικότητα και η ευελιξία του ActiveMQ το καθιστούν κατάλληλο για μια πληθώρα απαιτήσεων μηνυμάτων.


## Απαρίθμηση
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
ΕΡΓΑΣΙΕΣ: Υποδείξτε πώς να εντοπίσετε εσωτερικά το RabbitMQ και το ActiveMQ και πώς να ακούτε σε όλες τις ουρές και να στέλνετε δεδομένα (στείλτε PR αν γνωρίζετε πώς να το κάνετε αυτό)
{% endhint %}

## Ανέβασμα δικαιωμάτων

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Μη εξουσιοδοτημένη πρόσβαση

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Διατήρηση

Εάν γνωρίζετε τα διαπιστευτήρια για πρόσβαση στον ιστότοπο του RabbitMQ, μπορείτε να δημιουργήσετε ένα νέο χρήστη με δικαιώματα διαχειριστή.

## Αναφορές

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΠΑΚΕΤΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Συμμετάσχετε** 💬 **στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή **στην ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
