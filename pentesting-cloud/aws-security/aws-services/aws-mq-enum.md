# AWS - Enum√©ration de MQ

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).

</details>

## AWS - MQ

Les **courtiers de messages** permettent aux syst√®mes logiciels, qui utilisent souvent diff√©rents langages de programmation sur diverses plates-formes, de communiquer et d'√©changer des informations. **Amazon MQ** est un service de courtier de messages g√©r√© pour **Apache ActiveMQ** et **RabbitMQ** qui simplifie la configuration, l'exploitation et la gestion des courtiers de messages sur AWS. En quelques √©tapes, Amazon MQ peut provisionner votre courtier de messages avec prise en charge des mises √† niveau de version logicielle.

### AWS - RabbitMQ

RabbitMQ est un **logiciel de mise en file d'attente de messages** √©galement connu sous le nom de _courtier de messages_ ou de _gestionnaire de file d'attente_. En termes simples, c'est un **logiciel o√π les files d'attente sont d√©finies**, auxquelles les **applications se connectent** pour **transf√©rer un message** ou des messages.

Un message peut inclure n'importe quel type d'information. Il pourrait, par exemple, contenir des informations sur un processus ou une t√¢che qui doit d√©marrer sur une autre application (qui pourrait m√™me √™tre sur un autre serveur), ou il pourrait s'agir simplement d'un message texte simple. Le logiciel de gestion de file d'attente stocke les messages jusqu'√† ce qu'une application de r√©ception se connecte et prenne un message de la file d'attente. L'application de r√©ception traite ensuite le message.

AWS propose d'**h√©berger et de g√©rer facilement des serveurs RabbitMQ**.

### AWS - ActiveMQ

Apache ActiveMQ¬Æ est le courtier de messages open source, multi-protocole et bas√© sur Java le plus populaire. Il prend en charge les protocoles standard de l'industrie afin que les utilisateurs puissent b√©n√©ficier du choix des clients dans un large √©ventail de langages et de plates-formes. Connectez-vous √† partir de clients √©crits en JavaScript, C, C++, Python, .Net, et plus encore. Int√©grez vos applications multiplateformes en utilisant le protocole **AMQP** omnipr√©sent. √âchangez des messages entre vos applications Web en utilisant **STOMP** sur les sockets Web. G√©rez vos appareils IoT en utilisant **MQTT**. Prenez en charge votre infrastructure **JMS** existante et au-del√†. ActiveMQ offre la puissance et la flexibilit√© pour prendre en charge tous les cas d'utilisation de messagerie.

## √ânum√©ration

```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Trouvez les points de terminaison dans .BrokerInstances
## Trouvez s'il est accessible publiquement dans .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Ici, vous pouvez trouver si l'authentification simple ou LDAP est utilis√©e

# Cr√©er un utilisateur Active MQ
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```

{% hint style="warning" %}
TODO: Indiquer comment √©num√©rer RabbitMQ et ActiveMQ en interne et comment √©couter toutes les files d'attente et envoyer des donn√©es (envoyer une PR si vous savez comment faire cela)
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Acc√®s non authentifi√©

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Persistance

Si vous connaissez les informations d'identification pour acc√©der √† la console Web RabbitMQ, vous pouvez cr√©er un nouvel utilisateur avec des privil√®ges d'administrateur.

## R√©f√©rences

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).

</details>