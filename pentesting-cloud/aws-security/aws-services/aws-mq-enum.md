# AWS - MQ рдПрдиреБрдо

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ **Twitter** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ**.
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## AWS - MQ

**рдореИрд╕реЗрдЬ рдмреНрд░реЛрдХрд░реНрд╕** рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕рд┐рд╕реНрдЯрдореЛрдВ рдХреЛ рд╕рдВрдЪрд╛рд░ рдФрд░ рд╕реВрдЪрдирд╛ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛рдУрдВ рдФрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдореЛрдВ рдкрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред **Amazon MQ** рдПрдХ рдореИрдиреЗрдЬреНрдб рдореИрд╕реЗрдЬ рдмреНрд░реЛрдХрд░ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ **Apache ActiveMQ** рдФрд░ **RabbitMQ** рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрдЕрдк, рд╕рдВрдЪрд╛рд▓рди рдФрд░ рдкреНрд░рдмрдВрдзрди рдХреЛ рд╕рд░рд▓ рдмрдирд╛рддреА рд╣реИред рдХреБрдЫ рд╕реНрдЯреЗрдкреНрд╕ рдХреЗ рд╕рд╛рде, Amazon MQ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕рдВрд╕реНрдХрд░рдг рдЕрдкрдЧреНрд░реЗрдб рдХреЗ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдЖрдкрдХреЗ рдореИрд╕реЗрдЬ рдмреНрд░реЛрдХрд░ рдХреЛ рдкреНрд░реЛрд╡рд┐рдЬрди рдХрд░ рд╕рдХрддрд╛ рд╣реИред

### AWS - RabbitMQ

RabbitMQ рдПрдХ **рдореИрд╕реЗрдЬ-рдХрддрд╛рд░ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░** рд╣реИ рдЬрд┐рд╕реЗ _рдореИрд╕реЗрдЬ рдмреНрд░реЛрдХрд░_ рдпрд╛ _рдХрддрд╛рд░ рдкреНрд░рдмрдВрдзрдХ_ рднреА рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред рд╕реАрдзреЗ рддреМрд░ рдкрд░ рдХрд╣реЗрдВ рддреЛ рдпрд╣ **рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╣реИ рдЬрд╣рд╛рдВ рдХрддрд╛рд░реЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИрдВ**, рдЬрд┐рдирдореЗрдВ **рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╕рдВрдкрд░реНрдХ рдХрд░рддреЗ рд╣реИрдВ** рддрд╛рдХрд┐ **рдПрдХ рдореИрд╕реЗрдЬ** рдпрд╛ рдореИрд╕реЗрдЬ **рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХрд░ рд╕рдХреЗрдВ**ред

рдПрдХ рдореИрд╕реЗрдЬ рдореЗрдВ рдХрд┐рд╕реА рднреА рдкреНрд░рдХрд╛рд░ рдХреА рдЬрд╛рдирдХрд╛рд░реА рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреА рд╣реИред рдпрд╣, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдпрд╛ рдХрд╛рд░реНрдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬреЛ рджреВрд╕рд░реЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдкрд░ рд╢реБрд░реВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП (рдЬреЛ рдХрд┐ рджреВрд╕рд░реЗ рд╕рд░реНрд╡рд░ рдкрд░ рднреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ), рдпрд╛ рдпрд╣ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рд╕рд╛ рдкрд╛рда рд╕рдВрджреЗрд╢ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдХрддрд╛рд░ рдкреНрд░рдмрдВрдзрдХ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдореИрд╕реЗрдЬ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ рдПрдХ рдкреНрд░рд╛рдкреНрддрд┐ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХрдиреЗрдХреНрдЯ рдХрд░рдХреЗ рдХрддрд╛рд░ рд╕реЗ рдПрдХ рдореИрд╕реЗрдЬ рд▓реЗ рди рд▓реЗред рдкреНрд░рд╛рдкреНрддрд┐ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдлрд┐рд░ рдореИрд╕реЗрдЬ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рддрд╛ рд╣реИред

AWS рд░реЗрдмрд┐рдЯрдПрдордХреНрдпреВ рд╕рд░реНрд╡рд░реЛрдВ рдХреЛ **рдЖрд╕рд╛рди рддрд░реАрдХреЗ рд╕реЗ рд╣реЛрд╕реНрдЯ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ**ред

### AWS - ActiveMQ

Apache ActiveMQ┬о рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдУрдкрди рд╕реЛрд░реНрд╕, рдмрд╣реБ-рдкреНрд░реЛрдЯреЛрдХреЙрд▓, рдЬрд╛рд╡рд╛-рдЖрдзрд╛рд░рд┐рдд **рдореИрд╕реЗрдЬ рдмреНрд░реЛрдХрд░** рд╣реИред рдпрд╣ рдЙрджреНрдпреЛрдЧ рдорд╛рдирдХ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднрд╛рд╖рд╛рдУрдВ рдФрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдореЛрдВ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рд▓рд╛рдн рдорд┐рд▓реЗред рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ, рд╕реА, рд╕реА++, рдкрд╛рдпрдерди, .Net рдФрд░ рдЕрдзрд┐рдХ рдореЗрдВ рд▓рд┐рдЦрд┐рдд рдЧреНрд░рд╛рд╣рдХреЛрдВ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВред рд╡реНрдпрд╛рдкрдХ рднрд╛рд╖рд╛рдУрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ **AMQP** рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рдмрд╣реБ-рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдПрдХреАрдХреГрдд рдХрд░реЗрдВред **STOMP** рдУрд╡рд░ рд╡реЗрдмрд╕реЙрдХреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╡реЗрдм рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрджреЗрд╢ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХрд░реЗрдВред **MQTT** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ IoT рдЙрдкрдХрд░рдгреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░реЗрдВред рдЕрдкрдиреЗ рдореМрдЬреВрджрд╛ **JMS** рдмреБрдирд┐рдпрд╛рджреА рд╕рдВрд░рдЪрдирд╛ рдФрд░ рдЙрд╕рд╕реЗ рдЖрдЧреЗ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВред ActiveMQ рд╢рдХреНрддрд┐ рдФрд░ рд▓рдЪреАрд▓рд╛рдкрди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдХрд┐рд╕реА рднреА рд╕рдВрджреЗрд╢рди рдЙрдкрдпреЛрдЧ рдорд╛рдорд▓реЗ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░ рд╕рдХреЗрдВред

## рдПрдиреБрдорд░реЗрд╢рди
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдВрдбрд┐рдХреЗрдЯ рдХрд░реЗрдВ рдХрд┐ RabbitMQ рдФрд░ ActiveMQ рдХреЛ рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ рдХреИрд╕реЗ рдЧрдгрдирд╛ рдХрд░реЗрдВ рдФрд░ рд╕рднреА рдХрддрд╛рд░реЛрдВ рдореЗрдВ рд╕реБрдирдиреЗ рдФрд░ рдбреЗрдЯрд╛ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рдХрд░реЗрдВ (рдпрджрд┐ рдЖрдкрдХреЛ рдЗрд╕реЗ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдкрддрд╛ рд╣реИ рддреЛ PR рднреЗрдЬреЗрдВ)
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## рдЕрдкреНрд░рдорд╛рдгрд┐рдд рдкрд╣реБрдБрдЪ

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Persistence

рдпрджрд┐ рдЖрдкрдХреЛ RabbitMQ рд╡реЗрдм рдХрдВрд╕реЛрд▓ рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдкрддрд╛ рд╣реИрдВ, рддреЛ рдЖрдк рдПрдХ рдирдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдЕрдзрд┐рдХрд╛рд░ рд╣реЛрдВред

## рд╕рдВрджрд░реНрдн

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣](https://discord.gg/hRep4RUj7f) рдпрд╛ [рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ **рдореБрдЭреЗ рдЯреНрд╡рд┐рдЯрд░ рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos**.

</details>
