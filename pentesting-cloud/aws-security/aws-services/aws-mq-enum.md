# AWS - MQ Enum

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## AWS - MQ

Les **courtiers de messages** permettent aux syst√®mes logiciels, qui utilisent souvent diff√©rents langages de programmation sur diverses plateformes, de communiquer et d'√©changer des informations. **Amazon MQ** est un service de courtier de messages g√©r√© pour **Apache ActiveMQ** et **RabbitMQ** qui simplifie la configuration, l'exploitation et la gestion des courtiers de messages sur AWS. En quelques √©tapes, Amazon MQ peut provisionner votre courtier de messages avec un support pour les mises √† jour de versions logicielles.

### AWS - RabbitMQ

RabbitMQ est un **logiciel de mise en file d'attente de messages** √©galement connu sous le nom de _courtier de messages_ ou _gestionnaire de file d'attente_. En termes simples, c'est un **logiciel o√π des files d'attente sont d√©finies**, auxquelles **les applications se connectent** afin de **transf√©rer un message** ou des messages.

Un message peut inclure tout type d'information. Il pourrait, par exemple, contenir des informations sur un processus ou une t√¢che qui devrait d√©marrer sur une autre application (qui pourrait m√™me √™tre sur un autre serveur), ou cela pourrait √™tre juste un simple message texte. Le logiciel gestionnaire de file d'attente stocke les messages jusqu'√† ce qu'une application r√©ceptrice se connecte et retire un message de la file d'attente. L'application r√©ceptrice traite ensuite le message.

AWS propose d'**h√©berger et de g√©rer de mani√®re simple les serveurs RabbitMQ**.

### AWS - ActiveMQ

Apache ActiveMQ¬Æ est le courtier de messages **open source**, multi-protocoles, bas√© sur Java le plus populaire. Il prend en charge les protocoles standard de l'industrie, donc les utilisateurs b√©n√©ficient du choix des clients dans une large gamme de langages et de plateformes. Connectez-vous √† partir de clients √©crits en JavaScript, C, C++, Python, .Net, et plus encore. Int√©grez vos applications multi-plateformes en utilisant le protocole **AMQP** omnipr√©sent. √âchangez des messages entre vos applications web en utilisant **STOMP** sur des websockets. G√©rez vos appareils IoT en utilisant **MQTT**. Soutenez votre infrastructure **JMS** existante et au-del√†. ActiveMQ offre la puissance et la flexibilit√© pour prendre en charge n'importe quel cas d'utilisation de messagerie.

## √ânum√©ration
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO : Indiquer comment √©num√©rer RabbitMQ et ActiveMQ en interne et comment √©couter toutes les files d'attente et envoyer des donn√©es (envoyez un PR si vous savez comment faire cela)
{% endhint %}

## √âl√©vation de privil√®ges

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Acc√®s non authentifi√©

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Persistance

Si vous connaissez les identifiants pour acc√©der √† la console web RabbitMQ, vous pouvez cr√©er un nouvel utilisateur avec des privil√®ges d'administrateur.

## R√©f√©rences

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> !</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous voulez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-moi** sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
