# AWS - EMR Enum

<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ quiser ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>

## EMR

O servi√ßo Elastic MapReduce (EMR) da AWS, a partir da vers√£o 4.8.0, introduziu um recurso de **configura√ß√£o de seguran√ßa** que aprimora a prote√ß√£o de dados, permitindo que os usu√°rios especifiquem configura√ß√µes de criptografia para dados em repouso e em tr√¢nsito dentro de clusters EMR, que s√£o grupos escal√°veis de inst√¢ncias EC2 projetadas para processar estruturas de big data como Apache Hadoop e Spark.

Principais caracter√≠sticas incluem:

* **Criptografia Padr√£o do Cluster**: Por padr√£o, os dados em repouso dentro de um cluster n√£o s√£o criptografados. No entanto, habilitar a criptografia fornece acesso a v√°rias funcionalidades:
* **Linux Unified Key Setup**: Criptografa os volumes do cluster EBS. Os usu√°rios podem optar pelo AWS Key Management Service (KMS) ou um provedor de chave personalizado.
* **Criptografia HDFS de C√≥digo Aberto**: Oferece duas op√ß√µes de criptografia para Hadoop:
* RPC Hadoop Seguro (Remote Procedure Call), definido como privacidade, aproveitando a Camada de Seguran√ßa de Autentica√ß√£o Simples.
* Criptografia de transfer√™ncia de bloco HDFS, definida como verdadeira, utiliza o algoritmo AES-256.
* **Criptografia em Tr√¢nsito**: Foca em garantir a seguran√ßa dos dados durante a transfer√™ncia. As op√ß√µes incluem:
* **Transport Layer Security (TLS) de C√≥digo Aberto**: A criptografia pode ser habilitada escolhendo um provedor de certificado:
* **PEM**: Requer a cria√ß√£o manual e o agrupamento de certificados PEM em um arquivo zip, referenciado de um bucket S3.
* **Personalizado**: Envolve adicionar uma classe Java personalizada como provedor de certificado que fornece artefatos de criptografia.

Uma vez que um provedor de certificado TLS √© integrado √† configura√ß√£o de seguran√ßa, as seguintes funcionalidades de criptografia espec√≠ficas do aplicativo podem ser ativadas, variando com base na vers√£o do EMR:

* **Hadoop**:
* Pode reduzir a transfer√™ncia criptografada usando TLS.
* RPC Hadoop Seguro com Camada de Seguran√ßa de Autentica√ß√£o Simples e Transfer√™ncia de Bloco HDFS com AES-256 s√£o ativados com criptografia em repouso.
* **Presto** (EMR vers√£o 5.6.0+):
* A comunica√ß√£o interna entre os n√≥s Presto √© protegida usando SSL e TLS.
* **Tez Shuffle Handler**:
* Utiliza TLS para criptografia.
* **Spark**:
* Emprega TLS para o protocolo Akka.
* Usa Camada de Seguran√ßa de Autentica√ß√£o Simples e 3DES para o Servi√ßo de Transfer√™ncia de Bloco.
* O servi√ßo de transfer√™ncia externa √© protegido com a Camada de Seguran√ßa de Autentica√ß√£o Simples.

Esses recursos melhoram coletivamente a postura de seguran√ßa dos clusters EMR, especialmente em rela√ß√£o √† prote√ß√£o de dados durante as fases de armazenamento e transmiss√£o.

#### Enumera√ß√£o
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Escala√ß√£o de Privil√©gios

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## Refer√™ncias

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

<details>

<summary><strong>Aprenda hacking na AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os reposit√≥rios** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
