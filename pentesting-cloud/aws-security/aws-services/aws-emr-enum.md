# AWS - Enumera√ß√£o EMR

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no github.

</details>

## EMR

EMR √© um servi√ßo gerenciado pela AWS e √© composto por um **cluster de inst√¢ncias EC2 altamente escal√°vel** para processar e executar estruturas de big data, como Apache Hadoop e Spark.

A partir da vers√£o 4.8.0 do EMR, temos a capacidade de criar uma **configura√ß√£o de seguran√ßa** especificando diferentes configura√ß√µes sobre **como gerenciar a criptografia de seus dados dentro de seus clusters**. Voc√™ pode criptografar seus dados em repouso, dados em tr√¢nsito ou, se necess√°rio, ambos juntos. O √≥timo dessas configura√ß√µes de seguran√ßa √© que elas n√£o fazem parte de seus clusters EC2.

Um ponto-chave do EMR √© que **por padr√£o, as inst√¢ncias dentro de um cluster n√£o criptografam dados em repouso**. Uma vez habilitados, os recursos a seguir est√£o dispon√≠veis.

* **Linux Unified Key Setup:** os volumes do cluster EBS podem ser criptografados usando este m√©todo, no qual voc√™ pode especificar o **KMS** da AWS para ser usado como seu provedor de gerenciamento de chaves, ou usar um provedor de chave personalizado.
* **Criptografia HDFS de c√≥digo aberto:** isso fornece duas op√ß√µes de criptografia Hadoop. O Secure Hadoop RPC, que seria definido como privacidade, usa uma camada de seguran√ßa de autentica√ß√£o simples, e a criptografia de dados da transfer√™ncia de bloco HDFS, que seria definida como verdadeira, usa o algoritmo AES-256.

Do ponto de vista da criptografia em tr√¢nsito, voc√™ pode habilitar recursos de criptografia de seguran√ßa de camada de transporte de **c√≥digo aberto** e selecionar um tipo de provedor de certificado que pode ser PEM, onde voc√™ precisar√° criar manualmente certificados PEM, agrup√°-los em um arquivo zip e, em seguida, fazer refer√™ncia ao arquivo zip no S3, ou personalizado, onde voc√™ adicionaria um provedor de certificado personalizado como uma classe Java que fornece artefatos de criptografia.

Depois que o provedor de certificado TLS for configurado no arquivo de configura√ß√£o de seguran√ßa, os seguintes recursos de criptografia espec√≠ficos do aplicativo de criptografia podem ser habilitados, o que variar√° dependendo da vers√£o do EMR.

* Hadoop pode reduzir a transfer√™ncia criptografada que usa TLS. Tanto o Secure Hadoop RPC, que usa a Camada de Seguran√ßa de Autentica√ß√£o Simples, quanto a criptografia de dados da Transfer√™ncia de Bloco HDFS, que usa AES-256, s√£o ativados quando a criptografia em repouso √© habilitada na configura√ß√£o de seguran√ßa.
* Presto: ao usar a vers√£o 5.6.0 ou posterior do EMR, qualquer comunica√ß√£o interna entre os n√≥s Presto usar√° SSL e TLS.
* O manipulador de embaralhamento Tez usa TLS.
* Spark: o protocolo Akka usa TLS. O Servi√ßo de Transfer√™ncia de Bloco usa a Camada de Seguran√ßa de Autentica√ß√£o Simples e 3DES. O servi√ßo de embaralhamento externo usa a Camada de Seguran√ßa de Autentica√ß√£o Simples.

### Enumera√ß√£o

```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Obter URLs do est√∫dio
```

### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no github.

</details>