# AWS - EMR Enum

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## EMR

Usługa Elastic MapReduce (EMR) AWS, począwszy od wersji 4.8.0, wprowadziła funkcję **konfiguracji zabezpieczeń**, która zwiększa ochronę danych, umożliwiając użytkownikom określanie ustawień szyfrowania dla danych w spoczynku i w trakcie przesyłania w klastrach EMR, które są skalowalnymi grupami instancji EC2 przeznaczonymi do przetwarzania dużych frameworków danych, takich jak Apache Hadoop i Spark.

Główne cechy to:

- **Domyślne szyfrowanie klastra**: Domyślnie dane w spoczynku w klastrze nie są szyfrowane. Jednak włączenie szyfrowania umożliwia dostęp do kilku funkcji:
- **Linux Unified Key Setup**: Szyfruje woluminy klastra EBS. Użytkownicy mogą wybrać AWS Key Management Service (KMS) lub dostawcę niestandardowego klucza.
- **Szyfrowanie HDFS Open-Source**: Oferuje dwie opcje szyfrowania dla Hadoopa:
- Bezpieczne Hadoop RPC (Remote Procedure Call), ustawione na prywatność, wykorzystujące prostą warstwę zabezpieczeń uwierzytelniania.
- Szyfrowanie transferu bloków HDFS, ustawione na true, wykorzystuje algorytm AES-256.

- **Szyfrowanie w trakcie przesyłania**: Skupia się na zabezpieczaniu danych podczas przesyłania. Opcje obejmują:
- **Transport Layer Security (TLS) Open Source**: Szyfrowanie można włączyć, wybierając dostawcę certyfikatów:
- **PEM**: Wymaga ręcznego tworzenia i pakowania certyfikatów PEM do pliku zip, odwołującego się do kubełka S3.
- **Niestandardowe**: Wymaga dodania niestandardowej klasy Javy jako dostawcy certyfikatów dostarczającej artefakty szyfrowania.

Po zintegrowaniu dostawcy certyfikatów TLS do konfiguracji zabezpieczeń, można aktywować następujące funkcje szyfrowania zależnie od wersji EMR:

- **Hadoop**:
- Może zmniejszyć szyfrowanie shuffle za pomocą TLS.
- Bezpieczne Hadoop RPC z prostą warstwą zabezpieczeń uwierzytelniania i transfer bloków HDFS z AES-256 są aktywowane z szyfrowaniem w spoczynku.

- **Presto** (wersja EMR 5.6.0+):
- Komunikacja wewnętrzna między węzłami Presto jest zabezpieczona za pomocą SSL i TLS.

- **Tez Shuffle Handler**:
- Wykorzystuje TLS do szyfrowania.

- **Spark**:
- Wykorzystuje TLS dla protokołu Akka.
- Wykorzystuje prostą warstwę zabezpieczeń uwierzytelniania i 3DES dla usługi transferu bloków.
- Zewnętrzna usługa shuffle jest zabezpieczona za pomocą prostego protokołu uwierzytelniania.

Te funkcje łącznie poprawiają postawę bezpieczeństwa klastrów EMR, zwłaszcza jeśli chodzi o ochronę danych podczas przechowywania i przesyłania.
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

# Odnośniki
* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
