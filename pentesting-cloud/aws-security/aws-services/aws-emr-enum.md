# AWS - EMR Enum

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo [**telegram**](https://t.me/peass) ou **siga**-me no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## EMR

O servi√ßo AWS's Elastic MapReduce (EMR), a partir da vers√£o 4.8.0, introduziu um recurso de **configura√ß√£o de seguran√ßa** que melhora a prote√ß√£o de dados ao permitir que os usu√°rios especifiquem configura√ß√µes de criptografia para dados em repouso e em tr√¢nsito dentro de clusters EMR, que s√£o grupos escal√°veis de inst√¢ncias EC2 projetados para processar frameworks de big data como Apache Hadoop e Spark.

Caracter√≠sticas principais incluem:

- **Criptografia Padr√£o do Cluster**: Por padr√£o, os dados em repouso dentro de um cluster n√£o s√£o criptografados. No entanto, habilitar a criptografia fornece acesso a v√°rias funcionalidades:
- **Configura√ß√£o de Chave Unificada do Linux**: Criptografa volumes de cluster EBS. Os usu√°rios podem optar pelo AWS Key Management Service (KMS) ou um provedor de chave personalizado.
- **Criptografia HDFS de C√≥digo Aberto**: Oferece duas op√ß√µes de criptografia para Hadoop:
- RPC (Remote Procedure Call) do Hadoop Seguro, configurado para privacidade, aproveitando a Camada de Seguran√ßa de Autentica√ß√£o Simples.
- Criptografia de transfer√™ncia de blocos HDFS, configurada para verdadeiro, utiliza o algoritmo AES-256.

- **Criptografia em Tr√¢nsito**: Foca em proteger dados durante a transfer√™ncia. Op√ß√µes incluem:
- **TLS (Transport Layer Security) de C√≥digo Aberto**: A criptografia pode ser habilitada escolhendo um provedor de certificado:
- **PEM**: Requer a cria√ß√£o manual e o agrupamento de certificados PEM em um arquivo zip, referenciado a partir de um bucket S3.
- **Personalizado**: Envolve adicionar uma classe Java personalizada como um provedor de certificado que fornece artefatos de criptografia.

Uma vez que um provedor de certificado TLS √© integrado √† configura√ß√£o de seguran√ßa, os seguintes recursos de criptografia espec√≠ficos do aplicativo podem ser ativados, variando com base na vers√£o do EMR:

- **Hadoop**:
- Pode reduzir o embaralhamento criptografado usando TLS.
- RPC do Hadoop Seguro com Camada de Seguran√ßa de Autentica√ß√£o Simples e Transfer√™ncia de Bloco HDFS com AES-256 s√£o ativados com criptografia em repouso.

- **Presto** (vers√£o EMR 5.6.0+):
- A comunica√ß√£o interna entre os n√≥s do Presto √© protegida usando SSL e TLS.

- **Tez Shuffle Handler**:
- Utiliza TLS para criptografia.

- **Spark**:
- Emprega TLS para o protocolo Akka.
- Usa Camada de Seguran√ßa de Autentica√ß√£o Simples e 3DES para o Servi√ßo de Transfer√™ncia de Bloco.
- O servi√ßo de embaralhamento externo √© protegido com a Camada de Seguran√ßa de Autentica√ß√£o Simples.

Essas funcionalidades, coletivamente, aprimoram a postura de seguran√ßa dos clusters EMR, especialmente no que diz respeito √† prote√ß√£o de dados durante as fases de armazenamento e transmiss√£o.


### Enumera√ß√£o
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

# Refer√™ncias
* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo [**telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do GitHub** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
