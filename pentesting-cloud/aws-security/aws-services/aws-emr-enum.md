# AWS - EMR Enum

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## EMR

EMR est un service g√©r√© par AWS et est compos√© d'un **cluster d'instances EC2 hautement √©volutif** pour traiter et ex√©cuter des frameworks de big data tels que Apache Hadoop et Spark.

√Ä partir de la version EMR 4.8.0 et ult√©rieure, nous avons la possibilit√© de cr√©er une **configuration de s√©curit√©** sp√©cifiant diff√©rents param√®tres sur **la mani√®re de g√©rer le chiffrement de vos donn√©es au sein de vos clusters**. Vous pouvez soit chiffrer vos donn√©es au repos, les donn√©es en transit, ou si n√©cessaire, les deux ensemble. La grande chose √† propos de ces configurations de s√©curit√© est qu'elles ne font pas r√©ellement partie de vos clusters EC2.

Un point cl√© d'EMR est que **par d√©faut, les instances au sein d'un cluster n'encryptent pas les donn√©es au repos**. Une fois activ√©es, les fonctionnalit√©s suivantes sont disponibles.

* **Linux Unified Key Setup:** Les volumes de cluster EBS peuvent √™tre chiffr√©s en utilisant cette m√©thode, o√π vous pouvez sp√©cifier AWS **KMS** comme votre fournisseur de gestion de cl√©s, ou utiliser un fournisseur de cl√©s personnalis√©.
* **Chiffrement HDFS open-source:** Cela fournit deux options de chiffrement Hadoop. Secure Hadoop RPC qui serait d√©fini sur la confidentialit√© qui utilise une couche de s√©curit√© d'authentification simple, et le chiffrement de donn√©es de HDFS Block transfer qui serait d√©fini sur true pour utiliser l'algorithme AES-256.

D'un point de vue de chiffrement en transit, vous pouvez activer les fonctionnalit√©s de chiffrement **open source transport layer security** et s√©lectionner un type de fournisseur de certificats qui peut √™tre soit PEM o√π vous devrez cr√©er manuellement des certificats PEM, les regrouper avec un fichier zip et ensuite r√©f√©rencer le fichier zip dans S3 ou personnalis√© o√π vous ajouterez un fournisseur de certificats personnalis√© en tant que classe Java qui fournit des artefacts de chiffrement.

Une fois que le fournisseur de certificat TLS a √©t√© configur√© dans le fichier de configuration de s√©curit√©, les fonctionnalit√©s de chiffrement sp√©cifiques √† l'application suivantes peuvent √™tre activ√©es, ce qui variera en fonction de votre version EMR.

* Hadoop pourrait r√©duire le shuffle chiffr√© qui utilise TLS. √Ä la fois le RPC Hadoop s√©curis√© qui utilise la couche de s√©curit√© d'authentification simple, et le chiffrement de donn√©es de HDFS Block Transfer qui utilise AES-256, sont tous deux activ√©s lorsque le chiffrement au repos est activ√© dans la configuration de s√©curit√©.
* Presto : Lors de l'utilisation de la version EMR 5.6.0 et ult√©rieure, toute communication interne entre les n≈ìuds Presto utilisera SSL et TLS.
* Tez Shuffle Handler utilise TLS.
* Spark : Le protocole Akka utilise TLS. Le service de transfert de blocs utilise la couche de s√©curit√© d'authentification simple et 3DES. Le service de shuffle externe utilise la couche de s√©curit√© d'authentification simple.

### √ânum√©ration

```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Obtenir les URLs des studios
```

### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>