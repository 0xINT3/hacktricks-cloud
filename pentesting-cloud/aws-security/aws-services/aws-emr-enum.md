# AWS - EMR Απαρίθμηση

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** Ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## EMR

Το Elastic MapReduce (EMR) της AWS, ξεκινώντας από την έκδοση 4.8.0, εισήγαγε μια δυνατότητα **διαμόρφωσης ασφάλειας** που ενισχύει την προστασία των δεδομένων επιτρέποντας στους χρήστες να καθορίσουν τις ρυθμίσεις κρυπτογράφησης για τα δεδομένα σε κατάσταση ανάπαυσης και κατά τη μεταφορά εντός των συστάδων EMR, οι οποίες είναι επεκτάσιμες ομάδες των παραδειγμάτων EC2 που σχεδιάστηκαν για την επεξεργασία μεγάλων πλαισίων δεδομένων όπως το Apache Hadoop και το Spark.

Κύρια χαρακτηριστικά περιλαμβάνουν:

- **Προεπιλογή Κρυπτογράφησης Συστάδας**: Από προεπιλογή, τα δεδομένα σε κατάσταση ανάπαυσης εντός μιας συστάδας δεν είναι κρυπτογραφημένα. Ωστόσο, η ενεργοποίηση της κρυπτογράφησης παρέχει πρόσβαση σε αρκετά χαρακτηριστικά:
- **Ενοποιημένη Διαμόρφωση Κλειδιού Linux**: Κρυπτογραφεί τα όγκοι της συστάδας EBS. Οι χρήστες μπορούν να επιλέξουν την Υπηρεσία Διαχείρισης Κλειδιών της AWS (KMS) ή έναν παροχέα προσαρμοσμένου κλειδιού.
- **Κρυπτογράφηση HDFS Ανοιχτού Κώδικα**: Προσφέρει δύο επιλογές κρυπτογράφησης για το Hadoop:
- Ασφαλής Hadoop RPC (Remote Procedure Call), ορισμένος στην ιδιωτικότητα, εκμεταλλευόμενος το Simple Authentication Security Layer.
- Κρυπτογράφηση μεταφοράς μπλοκ HDFS, ορισμένη σε true, χρησιμοποιεί τον αλγόριθμο AES-256.

- **Κρυπτογράφηση κατά τη μεταφορά**: Επικεντρώνεται στην ασφάλεια των δεδομένων κατά τη μεταφορά. Οι επιλογές περιλαμβάνουν:
- **Κρυπτογράφηση Μεταφοράς Επιπέδου Μεταφοράς Ανοιχτού Κώδικα (TLS)**: Η κρυπτογράφηση μπορεί να ενεργοποιηθεί επιλέγοντας έναν πάροχο πιστοποιητικού:
- **PEM**: Απαιτεί χειροκίνητη δημιουργία και συσκευασία πιστοποιητικών PEM σε ένα αρχείο zip, που αναφέρεται από ένα κάδο S3.
- **Προσαρμοσμένο**: Περιλαμβάνει την προσθήκη ενός προσαρμοσμένου τάξης Java ως πάροχο πιστοποιητικού που παρέχει τα κρυπτογραφικά αντικείμενα.

Μόλις ένας πάροχος πιστοποιητικού TLS ενσωματωθεί στη διαμόρφωση ασφάλειας, μπορούν να ενεργοποιηθούν τα ακόλουθα χαρακτηριστικά κρυπτογράφησης που αφορούν συγκεκριμένες εφαρμογές, ανάλογα με την έκδοση του EMR:

- **Hadoop**:
- Μπορεί να μειώσει την κρυπτογράφηση της ανακάτεμα χρησιμοποιώντας TLS.
- Ο ασφαλής Hadoop RPC με το Simple Authentication Security Layer και η μεταφορά μπλοκ HDFS με τον AES-256 ενεργοποιούνται με κρυπτογράφηση σε κατάσταση ανάπαυσης.

- **Presto** (έκδοση EMR 5.6.0+):
- Η εσωτερική επικοινωνία μεταξύ των κόμβων Presto είναι ασφαλής χρησιμοποιώντας SSL και TLS.

- **Tez Shuffle Handler**:
- Χρησιμοποιεί TLS για κρυπτογράφηση.

- **Spark**:
- Χρησιμοποιεί TLS για το πρωτόκολλο Akka.
- Χρησιμοποιεί το Simple Authentication Security Layer και το 3DES για την Υπηρεσία Μεταφοράς Μπλοκ.
- Η εξωτερική υπηρεσία ανακάτεμα είναι ασφαλής με το Simple Authentication Security Layer.

Αυτά τα χαρακτηριστικά ενισχύουν συλλογικά την ασφάλεια των συστάδων EMR, ιδιαίτερα όσον αφορά την προστασία των δεδομένων κατά τη φάση αποθήκευσης και μετάδοσης.
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
### Ανέβασμα δικαιωμάτων

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

# Αναφορές
* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

<details>

<summary><strong>Μάθετε το hacking στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
