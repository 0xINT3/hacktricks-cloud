# AWS - EMR Enum

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe t√©l√©gramme**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## EMR

EMR est un service g√©r√© par AWS et se compose d'un **cluster d'instances EC2 hautement √©volutif** pour traiter et ex√©cuter des cadres de grandes donn√©es tels qu'Apache Hadoop et Spark.

√Ä partir de la version 4.8.0 d'EMR, nous avons la capacit√© de cr√©er une **configuration de s√©curit√©** sp√©cifiant diff√©rents param√®tres sur **comment g√©rer le chiffrement de vos donn√©es au sein de vos clusters**. Vous pouvez chiffrer vos donn√©es au repos, les donn√©es en transit, ou si n√©cessaire, les deux ensemble. L'avantage de ces configurations de s√©curit√© est qu'elles ne font pas r√©ellement partie de vos clusters EC2.

Un point cl√© d'EMR est que **par d√©faut, les instances au sein d'un cluster ne chiffrent pas les donn√©es au repos**. Une fois activ√©es, les fonctionnalit√©s suivantes sont disponibles.

* **Linux Unified Key Setup :** Les volumes de cluster EBS peuvent √™tre chiffr√©s en utilisant cette m√©thode o√π vous pouvez sp√©cifier AWS **KMS** comme votre fournisseur de gestion de cl√©s, ou utiliser un fournisseur de cl√©s personnalis√©.
* **Chiffrement HDFS open-source :** Cela fournit deux options de chiffrement Hadoop. Secure Hadoop RPC qui serait r√©gl√© sur confidentialit√© qui utilise la couche de s√©curit√© d'authentification simple, et le chiffrement des donn√©es de transfert de bloc HDFS qui serait r√©gl√© sur vrai pour utiliser l'algorithme AES-256.

Du point de vue du chiffrement en transit, vous pourriez activer les fonctionnalit√©s de chiffrement de la couche de transport open source **et s√©lectionner un type de fournisseur de certificat qui peut √™tre soit PEM o√π vous devrez cr√©er manuellement des certificats PEM, les regrouper dans un fichier zip puis r√©f√©rencer le fichier zip dans S3, soit personnalis√© o√π vous ajouteriez un fournisseur de certificat personnalis√© comme une classe Java qui fournit des artefacts de chiffrement.

Une fois que le fournisseur de certificat TLS a √©t√© configur√© dans le fichier de configuration de s√©curit√©, les fonctionnalit√©s de chiffrement sp√©cifiques aux applications de chiffrement suivantes peuvent √™tre activ√©es, ce qui variera en fonction de votre version d'EMR.

* Hadoop pourrait r√©duire le m√©lange chiffr√© qui utilise TLS. Secure Hadoop RPC qui utilise la couche de s√©curit√© d'authentification simple, et le chiffrement des donn√©es de transfert de bloc HDFS qui utilise AES-256, sont tous deux activ√©s lorsque le chiffrement au repos est activ√© dans la configuration de s√©curit√©.
* Presto : Lors de l'utilisation de la version EMR 5.6.0 et ult√©rieure, toute communication interne entre les n≈ìuds Presto utilisera SSL et TLS.
* Tez Shuffle Handler utilise TLS.
* Spark : Le protocole Akka utilise TLS. Le service de transfert de bloc utilise la couche de s√©curit√© d'authentification simple et 3DES. Le service de m√©lange externe utilise la couche de s√©curit√© d'authentification simple.

### √ânum√©ration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
### √âl√©vation de privil√®ges

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez**-moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
