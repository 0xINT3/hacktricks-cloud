# AWS - EMR Enum

<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipos Rojos de AWS de HackTricks)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obt칠n el [**swag oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## EMR

El servicio Elastic MapReduce (EMR) de AWS, a partir de la versi칩n 4.8.0, introdujo una caracter칤stica de **configuraci칩n de seguridad** que mejora la protecci칩n de datos al permitir a los usuarios especificar ajustes de cifrado para datos en reposo y en tr치nsito dentro de los cl칰steres EMR, que son grupos escalables de instancias EC2 dise침ados para procesar marcos de trabajo de big data como Apache Hadoop y Spark.

Caracter칤sticas clave incluyen:

* **Cifrado por Defecto del Cl칰ster**: Por defecto, los datos en reposo dentro de un cl칰ster no est치n cifrados. Sin embargo, habilitar el cifrado proporciona acceso a varias caracter칤sticas:
* **Configuraci칩n de Clave Unificada de Linux**: Cifra los vol칰menes del cl칰ster EBS. Los usuarios pueden optar por el Servicio de Gesti칩n de Claves de AWS (KMS) o un proveedor de claves personalizado.
* **Cifrado de HDFS de C칩digo Abierto**: Ofrece dos opciones de cifrado para Hadoop:
* Cifrado seguro de Hadoop RPC (Llamada de Procedimiento Remoto), establecido en privacidad, aprovechando la Capa de Seguridad de Autenticaci칩n Simple.
* Cifrado de transferencia de bloques de HDFS, establecido en verdadero, utiliza el algoritmo AES-256.
* **Cifrado en Tr치nsito**: Se centra en asegurar los datos durante la transferencia. Las opciones incluyen:
* **Seguridad de Capa de Transporte de C칩digo Abierto (TLS)**: El cifrado se puede habilitar eligiendo un proveedor de certificados:
* **PEM**: Requiere la creaci칩n manual y el empaquetado de certificados PEM en un archivo zip, referenciado desde un bucket de S3.
* **Personalizado**: Implica agregar una clase Java personalizada como proveedor de certificados que suministra artefactos de cifrado.

Una vez que un proveedor de certificados TLS se integra en la configuraci칩n de seguridad, se pueden activar las siguientes caracter칤sticas de cifrado espec칤ficas de la aplicaci칩n, que var칤an seg칰n la versi칩n de EMR:

* **Hadoop**:
* Puede reducir el intercambio cifrado utilizando TLS.
* Se activan el cifrado seguro de Hadoop RPC con Capa de Seguridad de Autenticaci칩n Simple y la transferencia de bloques de HDFS con AES-256 en reposo.
* **Presto** (versi칩n EMR 5.6.0+):
* La comunicaci칩n interna entre nodos de Presto est치 asegurada utilizando SSL y TLS.
* **Controlador de Mezcla Tez**:
* Utiliza TLS para el cifrado.
* **Spark**:
* Emplea TLS para el protocolo Akka.
* Utiliza la Capa de Seguridad de Autenticaci칩n Simple y 3DES para el Servicio de Transferencia de Bloques.
* El servicio de mezcla externo est치 asegurado con la Capa de Seguridad de Autenticaci칩n Simple.

Estas caracter칤sticas mejoran colectivamente la postura de seguridad de los cl칰steres EMR, especialmente en lo que respecta a la protecci칩n de datos durante las fases de almacenamiento y transmisi칩n.

#### Enumeraci칩n
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Escalada de privilegios

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## Referencias

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** 춰Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obt칠n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
