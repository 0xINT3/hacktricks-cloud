# AWS - Enumera√ß√£o do Secrets Manager

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Obtenha o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no github.

</details>

## AWS Secrets Manager

O AWS Secrets Manager permite que voc√™ **remova quaisquer segredos codificados em seu aplicativo e os substitua por uma chamada de API simples** para o gerenciador de segredos que, em seguida, atende √† solicita√ß√£o com o segredo relevante. Como resultado, o AWS Secrets Manager atua como uma **√∫nica fonte de verdade para todos os seus segredos em todas as suas aplica√ß√µes**.

O AWS Secrets Manager permite a **facilidade de rota√ß√£o de segredos** e, portanto, aprimora a seguran√ßa desse segredo. Um exemplo disso poderia ser suas credenciais de banco de dados. Outros tipos de segredos tamb√©m podem ter rota√ß√£o autom√°tica habilitada por meio do uso de fun√ß√µes lambda, por exemplo, chaves de API.

O acesso aos seus segredos dentro do AWS Secret Manager √© governado por pol√≠ticas baseadas em identidade IAM de granularidade fina, al√©m de pol√≠ticas baseadas em recursos.

Para permitir que um usu√°rio de uma conta diferente acesse seu segredo, voc√™ precisa autoriz√°-lo a acessar o segredo e tamb√©m autoriz√°-lo a descriptografar o segredo no KMS. A pol√≠tica de chave tamb√©m precisa permitir que o usu√°rio externo a use.

**O AWS Secrets Manager se integra ao AWS KMS para criptografar seus segredos dentro do AWS Secrets Manager.**

### **Enumera√ß√£o**

```bash
aws secretsmanager list-secrets #Obter metadados de todos os segredos
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Obter vers√µes
aws secretsmanager describe-secret --secret-id <secret_name> # Obter metadados
aws secretsmanager get-secret-value --secret-id <secret_name> # Obter valor
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Obter valor de uma vers√£o diferente
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```

### Privesc

{% content-ref url="../aws-privilege-escalation/aws-secrets-manager-privesc.md" %}
[aws-secrets-manager-privesc.md](../aws-privilege-escalation/aws-secrets-manager-privesc.md)
{% endcontent-ref %}

### P√≥s-Explora√ß√£o

{% content-ref url="../../aws-pentesting/aws-post-exploitation/aws-secrets-manager-post-exploitation.md" %}
[aws-secrets-manager-post-exploitation.md](../../aws-pentesting/aws-post-exploitation/aws-secrets-manager-post-exploitation.md)
{% endcontent-ref %}

### Persist√™ncia

{% content-ref url="../../aws-pentesting/aws-persistence/aws-secrets-manager-persistence.md" %}
[aws-secrets-manager-persistence.md](../../aws-pentesting/aws-persistence/aws-secrets-manager-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Obtenha o [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no github.

</details>