# AWS - Secrets Manager Enum

<details>

<summary><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricks をサポートする他の方法:

* **HackTricks で企業を宣伝したい**または **HackTricks をPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**をフォローする。**
* **ハッキングトリックを共有するために、[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出する。**

</details>

## AWS Secrets Manager

AWS Secrets Manager は、**API呼び出しでハードコードされたシークレットの使用を排除**するよう設計されています。このサービスは、**すべてのシークレットのための中央集権的なリポジトリ**として機能し、それらがすべてのアプリケーションで一貫して管理されることを保証します。

このマネージャは、**シークレットのローテーションプロセスを簡素化**し、データベースの資格情報などの機密データのセキュリティポジションを大幅に向上させます。さらに、APIキーなどのシークレットは、Lambda関数の統合により自動的にローテーションできます。

シークレットへのアクセスは、詳細なIAMアイデンティティベースのポリシーとリソースベースのポリシーを介して厳密に制御されています。

別のAWSアカウントからユーザーにシークレットへのアクセス権を付与するには、以下が必要です：
1. ユーザーにシークレットへのアクセス権を付与する。
2. ユーザーにKMSを使用してシークレットを復号化する権限を付与する。
3. 外部ユーザーがそれを利用できるように、キーポリシーを変更する。

**AWS Secrets Manager は、AWS KMS と統合して、AWS Secrets Manager 内でシークレットを暗号化します。**

### **列挙**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### 特権昇格

{% content-ref url="../aws-privilege-escalation/aws-secrets-manager-privesc.md" %}
[aws-secrets-manager-privesc.md](../aws-privilege-escalation/aws-secrets-manager-privesc.md)
{% endcontent-ref %}

### 攻撃後の処理

{% content-ref url="../../aws-pentesting/aws-post-exploitation/aws-secrets-manager-post-exploitation.md" %}
[aws-secrets-manager-post-exploitation.md](../../aws-pentesting/aws-post-exploitation/aws-secrets-manager-post-exploitation.md)
{% endcontent-ref %}

### 永続性

{% content-ref url="../../aws-pentesting/aws-persistence/aws-secrets-manager-persistence.md" %}
[aws-secrets-manager-persistence.md](../../aws-pentesting/aws-persistence/aws-secrets-manager-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong>を使って、ゼロからヒーローまでAWSハッキングを学びましょう！</summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)や[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)で**フォロー**する
- **HackTricks**と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks)のGitHubリポジトリにPRを提出して、あなたのハッキングテクニックを共有する

</details>
