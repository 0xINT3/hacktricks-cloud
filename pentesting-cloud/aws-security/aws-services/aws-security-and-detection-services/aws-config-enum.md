# AWS - Config Enum

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** 💬 [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-opslagplekke.

</details>

## AWS Config

AWS Config **neem veranderinge aan bronne op**, sodat enige verandering aan 'n bron wat deur Config ondersteun word, opgeneem kan word. Dit sal **opneem wat verander het, tesame met ander nuttige metadata, alles in 'n lêer wat bekend staan as 'n konfigurasie-item**, 'n CI.
Hierdie diens is **streekspesifiek**.

'n Konfigurasie-item of **CI** soos dit bekend staan, is 'n sleutelkomponent van AWS Config. Dit bestaan uit 'n JSON-lêer wat die konfigurasie-inligting, verhoudingsinligting en ander metadata bevat as 'n oomblikopname van 'n ondersteunde bron. Alle inligting wat AWS Config vir 'n bron kan opneem, word binne die CI vasgevang. 'n CI word **elke keer** geskep as 'n ondersteunde bron op enige manier verander word. Benewens die besonderhede van die betrokke bron, sal AWS Config ook CIs vir enige direk verwante bronne opneem om te verseker dat die verandering nie daardie bronne ook beïnvloed het nie.

* **Metadata**: Bevat besonderhede oor die konfigurasie-item self. 'n Weergawe-ID en 'n konfigurasie-ID, wat die CI uniek identifiseer. Ander inligting kan 'n MD5Hash insluit wat jou in staat stel om ander CIs wat reeds teen dieselfde bron opgeneem is, te vergelyk.
* **Eienskappe**: Dit bevat algemene **eienskapsinligting teenoor die werklike bron**. Binne hierdie gedeelte het ons ook 'n unieke bron-ID en enige sleutelwaarde-etikette wat aan die bron gekoppel is. Die brontipe word ook vermeld. Byvoorbeeld, as dit 'n CI vir 'n EC2-instantie was, kan die vermelde brontipes die netwerkinterface of die elastiese IP-adres vir daardie EC2-instantie wees.
* **Verwantskappe**: Dit bevat inligting oor enige verbandhoudende **verwantskap wat die bron mag hê**. Dus sal hierdie gedeelte 'n duidelike beskrywing toon van enige verwantskap met ander bronne wat hierdie bron het. Byvoorbeeld, as die CI vir 'n EC2-instantie was, kan die verwantskapafdeling die verbinding met 'n VPC toon, tesame met die subnet waarin die EC2-instantie geleë is.
* **Huidige konfigurasie**: Dit sal dieselfde inligting vertoon wat gegenereer sou word as jy 'n beskryf- of lys-API-oproep sou uitvoer wat deur die AWS CLI gemaak is. AWS Config gebruik dieselfde API-oproepe om dieselfde inligting te verkry.
* **Verwante gebeure**: Dit verwys na AWS CloudTrail. Dit sal die **AWS CloudTrail-gebeurtenis-ID vertoon wat verband hou met die verandering wat die skepping van hierdie CI geaktiveer het**. Daar word 'n nuwe CI gemaak vir elke verandering wat teenoor 'n bron gemaak word. Gevolglik sal verskillende CloudTrail-gebeurtenis-IDs geskep word.

**Konfigurasiegeskiedenis**: Dit is moontlik om die konfigurasiegeskiedenis van bronne te verkry dankie aan die konfigurasie-items. 'n Konfigurasiegeskiedenis word elke 6 uur afgelewer en bevat alle CI's vir 'n spesifieke brontipe.

**Konfigurasievloeie**: Konfigurasie-items word na 'n SNS-onderwerp gestuur om analise van die data moontlik te maak.

**Konfigurasie-oomblikopnames**: Konfigurasie-items word gebruik om 'n oomblikopname van alle ondersteunde bronne op 'n bepaalde tydstip te skep.

**S3 word gebruik om** die lêers van die konfigurasiegeskiedenis en enige konfigurasie-oomblikopnames van jou data binne 'n enkele emmer te stoor, wat gedefinieer word binne die Konfigurasie-opnemer. As jy verskeie AWS-rekeninge het, wil jy dalk jou konfigurasiegeskiedenis-lêers in dieselfde S3-emmer vir jou primêre rekening saamvoeg. Jy sal egter skryftoegang vir hierdie diensbeginsel, config.amazonaws.com, en jou sekondêre rekeninge met skryftoegang tot die S3-emmer in jou primêre rekening moet verleen.

### Funksionering

* Wanneer veranderinge aangebring word, byvoorbeeld aan sekuriteitsgroep of emmer-toegangsbeheerlys —> vuur dit as 'n gebeurtenis af wat deur AWS Config opgeneem word
* Stoor alles in 'n S3-emmer
* Afhangende van die opset, sodra iets verander, kan dit 'n lambda-funksie tref OF 'n lambda-funksie skeduleer om periodiek deur die AWS Config-instellings te kyk
* Lambda gee terugvoer aan Config
* As 'n reël oortree is, skakel Config 'n SNS in

![](<../../../../.gitbook/assets/image (46).png>)

### Konfigurasie-Reëls

Konfigurasie-reëls is 'n goeie manier om jou te help om **spesifieke nakomingskontroles** **en beheer oor jou bronne af te dwing**, en stel jou in staat om 'n ideale implementeringsspesifikasie vir elkeen van jou brontipes aan te neem. Elke reël is in wese 'n lambda-funksie wat, wanneer dit aangeroep word, die bron evalueer en 'n eenvoudige logika uitvoer om die nakomingsresultaat met die reël te bepaal. **Elke keer as 'n verandering aangebring word** aan een van jou ondersteunde bronne, **sal AWS Config die nakoming teenoor enige konfigurasie-reëls wat jy het, nagaan**.\
AWS het 'n aantal **voorgedefinieerde reëls** wat onder die sekuriteitsparaplu val en gereed is vir gebruik. Byvoorbeeld, Rds-storage-encrypted. Dit kyk of stoorversleuteling geaktiveer is deur jou RDS-databasisinstansies. Encrypted-volumes. Dit kyk of enige EBS-volume wat 'n gehegde toestand het, versleutel is.

* **AWS Bestuurde reëls**: 'n Stel voorgedefinieerde reëls wat baie beste praktyke dek, so dit is altyd die moeite werd om eers hierdie reëls deur te kyk voordat jy jou eie opstel, omdat daar 'n kans is dat die reël reeds bestaan.
* **Aangepaste reëls**: Jy kan jou eie reëls skep om spesifieke aangepaste konfigurasies te toets.

Limiet van 50 konfigurasie-reëls per streek voordat jy AWS moet kontak vir 'n verhoging.\
Nakomingsresultate word NIE uitgevee nie.

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>
