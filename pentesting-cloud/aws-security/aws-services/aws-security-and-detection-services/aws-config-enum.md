# AWS - Config Enum

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositorys einreichen.

</details>

## AWS Config

AWS Config **erfasst Ressourcen√§nderungen**, sodass jede √Ñnderung an einer von Config unterst√ºtzten Ressource aufgezeichnet werden kann, was **aufgezeichnet wird, was sich ge√§ndert hat, zusammen mit anderen n√ºtzlichen Metadaten, die alle in einer Datei namens Konfigurationsobjekt, einem CI, gespeichert sind**.
Dieser Dienst ist **regionspezifisch**.

Ein Konfigurationsobjekt oder **CI**, wie es bekannt ist, ist ein Schl√ºsselelement von AWS Config. Es besteht aus einer JSON-Datei, die **die Konfigurationsinformationen, Beziehungsinformationen und andere Metadaten als Momentaufnahme einer unterst√ºtzten Ressource** enth√§lt. Alle Informationen, die AWS Config f√ºr eine Ressource aufzeichnen kann, werden im CI erfasst. Ein CI wird **jedes Mal erstellt**, wenn an einer unterst√ºtzten Ressource eine Konfigurations√§nderung vorgenommen wird. Neben der Aufzeichnung der Details der betroffenen Ressource zeichnet AWS Config auch CIs f√ºr direkt betroffene Ressourcen auf, um sicherzustellen, dass die √Ñnderung auch diese Ressourcen nicht beeintr√§chtigt hat.

* **Metadaten**: Enth√§lt Details zum Konfigurationsobjekt selbst. Eine Versions-ID und eine Konfigurations-ID, die das CI eindeutig identifiziert. Weitere Informationen k√∂nnen einen MD5-Hash enthalten, der es Ihnen erm√∂glicht, andere bereits aufgezeichnete CIs gegen dieselbe Ressource zu vergleichen.
* **Attribute**: Dies enth√§lt allgemeine **Attributinformationen zur tats√§chlichen Ressource**. In diesem Abschnitt haben wir auch eine eindeutige Ressourcen-ID und alle Schl√ºsselwert-Tags, die mit der Ressource verbunden sind. Der Ressourcentyp ist ebenfalls aufgef√ºhrt. Wenn es sich beispielsweise um ein CI f√ºr eine EC2-Instanz handelt, k√∂nnten die aufgef√ºhrten Ressourcentypen die Netzwerkschnittstelle oder die elastische IP-Adresse f√ºr diese EC2-Instanz sein.
* **Beziehungen**: Dies enth√§lt Informationen zu jeder verbundenen **Beziehung, die die Ressource haben kann**. In diesem Abschnitt w√ºrde es eine klare Beschreibung aller Beziehungen zu anderen Ressourcen zeigen, die diese Ressource hat. Wenn das CI beispielsweise f√ºr eine EC2-Instanz war, k√∂nnte der Beziehungsbereich die Verbindung zu einem VPC zusammen mit dem Subnetz zeigen, in dem sich die EC2-Instanz befindet.
* **Aktuelle Konfiguration**: Hier werden die gleichen Informationen angezeigt, die generiert w√ºrden, wenn Sie einen Beschreibungs- oder Listen-API-Aufruf √ºber die AWS CLI durchf√ºhren w√ºrden. AWS Config verwendet dieselben API-Aufrufe, um dieselben Informationen zu erhalten.
* **Zugeh√∂rige Ereignisse**: Dies bezieht sich auf AWS CloudTrail. Hier wird die **AWS CloudTrail-Ereignis-ID angezeigt, die mit der √Ñnderung zusammenh√§ngt, die die Erstellung dieses CIs ausgel√∂st hat**. F√ºr jede √Ñnderung an einer Ressource wird ein neues CI erstellt. Daher werden unterschiedliche CloudTrail-Ereignis-IDs erstellt.

**Konfigurationshistorie**: Es ist m√∂glich, die Konfigurationshistorie von Ressourcen dank der Konfigurationsobjekte zu erhalten. Alle 6 Stunden wird eine Konfigurationshistorie geliefert und enth√§lt alle CIs f√ºr einen bestimmten Ressourcentyp.

**Konfigurationsstr√∂me**: Konfigurationsobjekte werden an ein SNS-Thema gesendet, um die Analyse der Daten zu erm√∂glichen.

**Konfigurationssnapshots**: Konfigurationsobjekte werden verwendet, um eine Momentaufnahme aller unterst√ºtzten Ressourcen zu erstellen.

**S3 wird verwendet, um** die Konfigurationshistoriendateien und alle Konfigurationssnapshots Ihrer Daten in einem einzigen Bucket zu speichern, der im Konfigurationsaufzeichner definiert ist. Wenn Sie mehrere AWS-Konten haben, m√∂chten Sie m√∂glicherweise Ihre Konfigurationshistoriendateien in denselben S3-Bucket f√ºr Ihr prim√§res Konto aggregieren. Sie m√ºssen jedoch Schreibzugriff f√ºr dieses Dienstprinzip, config.amazonaws.com, und Ihre sekund√§ren Konten mit Schreibzugriff auf den S3-Bucket in Ihrem prim√§ren Konto gew√§hren.

### Funktionsweise

* Wenn √Ñnderungen vorgenommen werden, z. B. an der Sicherheitsgruppe oder der Zugriffssteuerungsliste f√ºr den Bucket ‚Äî> wird als Ereignis von AWS Config erfasst
* Speichert alles im S3-Bucket
* Je nach Einrichtung k√∂nnte es sofort nach einer √Ñnderung eine Lambda-Funktion ausl√∂sen ODER eine Lambda-Funktion planen, um regelm√§√üig die AWS Config-Einstellungen zu √ºberpr√ºfen
* Lambda gibt Feedback an Config zur√ºck
* Wenn eine Regel verletzt wurde, startet Config ein SNS

![](<../../../../.gitbook/assets/image (46).png>)

### Konfigurationsregeln

Konfigurationsregeln sind eine gro√üartige M√∂glichkeit, Ihnen zu helfen, **spezifische Compliance-Checks** **und Kontrollen √ºber Ihre Ressourcen durchzusetzen**, und erm√∂glichen es Ihnen, f√ºr jeden Ihrer Ressourcentypen eine ideale Bereitstellungsspezifikation zu √ºbernehmen. Jede Regel **ist im Wesentlichen eine Lambda-Funktion**, die bei Bedarf die Ressource bewertet und einige einfache Logik ausf√ºhrt, um das Compliance-Ergebnis mit der Regel zu bestimmen. **Jedes Mal, wenn eine √Ñnderung an einer Ihrer unterst√ºtzten Ressourcen vorgenommen wird**, **√ºberpr√ºft AWS Config die Compliance gegen alle Konfigurationsregeln, die Sie festgelegt haben**.\
AWS hat eine Reihe von **vordefinierten Regeln**, die unter das Sicherheitsdach fallen und sofort einsatzbereit sind. Zum Beispiel Rds-storage-encrypted. Dies √ºberpr√ºft, ob die Speicherung von Verschl√ºsselung durch Ihre RDS-Datenbankinstanzen aktiviert ist. Encrypted-volumes. Dies √ºberpr√ºft, ob EBS-Volumes, die sich im angeh√§ngten Zustand befinden, verschl√ºsselt sind.

* **AWS Managed Rules**: Eine Reihe von vordefinierten Regeln, die viele bew√§hrte Verfahren abdecken, daher lohnt es sich immer, diese Regeln zuerst zu durchsuchen, bevor Sie Ihre eigenen einrichten, da die Regel bereits existieren k√∂nnte.
* **Benutzerdefinierte Regeln**: Sie k√∂nnen Ihre eigenen Regeln erstellen, um spezifische benutzerdefinierte Konfigurationen zu √ºberpr√ºfen.

Grenze von 50 Konfigurationsregeln pro Region, bevor Sie sich an AWS wenden m√ºssen, um eine Erh√∂hung zu beantragen.\
Nicht konforme Ergebnisse werden NICHT gel√∂scht.

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositorys einreichen.

</details>
