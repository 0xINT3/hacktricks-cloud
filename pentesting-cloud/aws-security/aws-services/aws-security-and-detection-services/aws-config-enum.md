# AWS - Config Enum

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju oglašenu u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## AWS Config

AWS Config **snima promene resursa**, tako da se svaka promena resursa podržana od strane Config-a može zabeležiti, što će **zabeležiti šta se promenilo zajedno sa drugim korisnim metapodacima, sve smešteno u datoteku poznatu kao konfiguraciona stavka**, CI.
Ova usluga je **specifična za region**.

Konfiguraciona stavka ili **CI**, kako je poznata, je ključna komponenta AWS Config-a. Sastoji se od JSON datoteke koja **sadrži informacije o konfiguraciji, informacije o odnosima i druge metapodatke kao trenutni prikaz tačke u vremenu podržanog resursa**. Sve informacije koje AWS Config može zabeležiti za resurs su snimljene unutar CI-ja. CI se kreira **svaki put** kada se podržani resurs promeni na bilo koji način. Osim što zabeležava detalje o pogođenom resursu, AWS Config će takođe zabeležiti CI-jeve za sve direktno povezane resurse kako bi se osiguralo da promena nije uticala na te resurse.

* **Metapodaci**: Sadrže detalje o samoj konfiguracionoj stavki. ID verzije i ID konfiguracije, koji jedinstveno identifikuju CI. Ostale informacije mogu uključivati MD5Hash koji vam omogućava poređenje drugih već zabeleženih CI-jeva protiv istog resursa.
* **Atributi**: Ovo sadrži zajedničke **informacije o atributima stvarnog resursa**. U okviru ove sekcije, takođe imamo jedinstveni ID resursa i bilo koje oznake ključ-vrednost koje su povezane sa resursom. Takođe je naveden tip resursa. Na primer, ako je ovo CI za instancu EC2, navedeni tipovi resursa mogu biti mrežni interfejs ili elastična IP adresa za tu instancu EC2.
* **Odnosi**: Ovo sadrži informacije o bilo kojem povezanom **odnosu koji resurs može imati**. Dakle, u okviru ove sekcije bi se prikazao jasan opis bilo kakvog odnosa sa drugim resursima koje ovaj resurs ima. Na primer, ako je CI za instancu EC2, sekcija odnosa može prikazivati vezu sa VPC-om zajedno sa podmrežom u kojoj se nalazi instanca EC2.
* **Trenutna konfiguracija**: Ovde će biti prikazane iste informacije koje bi bile generisane ako biste izvršili API poziv describe ili list putem AWS CLI-ja. AWS Config koristi iste API pozive da bi dobio iste informacije.
* **Povezani događaji**: Ovo se odnosi na AWS CloudTrail. Ovde će biti prikazan **ID događaja AWS CloudTrail-a koji je povezan sa promenom koja je pokrenula kreiranje ovog CI-ja**. Za svaku promenu koja je napravljena na resursu, kreira se novi CI. Kao rezultat toga, biće kreirani različiti ID-jevi događaja CloudTrail-a.

**Istorija konfiguracije**: Moguće je dobiti istoriju konfiguracije resursa zahvaljujući konfiguracionim stavkama. Istorija konfiguracije se isporučuje svakih 6 sati i sadrži sve CI-jeve za određeni tip resursa.

**Tokovi konfiguracije**: Konfiguracione stavke se šalju na SNS temu kako bi se omogućila analiza podataka.

**Snimci konfiguracije**: Konfiguracione stavke se koriste za kreiranje trenutnog snimka svih podržanih resursa.

**S3 se koristi za skladištenje** datoteka istorije konfiguracije i svih snimaka konfiguracije vaših podataka unutar jednog kantičara, koji je definisan unutar konfiguracionog snimača. Ako imate više AWS naloga, možda ćete želeti da agregirate datoteke istorije konfiguracije u isti S3 kantičar za svoj primarni nalog. Međutim, moraćete da dodelite prava za pisanje ovom servisnom principu, config.amazonaws.com, i vašim sekundarnim nalozima sa pravom pisanja u S3 kantičar u vašem primarnom nalogu.

### Funkcionisanje

* Kada napravite promene, na primer u kontrolnoj listi pristupa sigurnosnoj grupi ili kanti —> pokreće se kao događaj koji AWS Config prepoznaje
* Sve se čuva u S3 kantičaru
* Zavisno od podešavanja, čim se nešto promeni, može pokrenuti lambda funkciju ILI zakazati lambda funkciju da periodično pregleda AWS Config podešavanja
* Lambda vraća povratne informacije Config-u
* Ako je pravilo prekršeno, Config pokreće SNS

![](<../../../../.gitbook/assets/image (46).png>)

### Pravila konfiguracije

Pravila konfiguracije su odličan način da vam pomognu da **primenite određene provere usaglašenosti** **i kontrole na svoje resurse**, i omogućavaju vam da usvojite idealnu specifikaciju implementacije za svaki od vaših tipova resursa. Svako pravilo **je suštinski lambda funkcija** koja se, kada se pozove, procenjuje resurs i izvršava neku jednostavnu logiku kako bi se odredio rezultat usaglašenosti sa pravilom. **Svaki put kada se napravi promena** na jednom od vaših podržanih resursa, **AWS Config će proveriti usaglašenost sa svim pravilima konfiguracije koja ste postavili**.\
AWS ima nekoliko **unapred definisanih pravila** koja spadaju pod sigurnosni kišobran i spremna su za upotrebu. Na primer, Rds-storage-encrypted. Ovo proverava da li je enkripcija skladištenja aktivirana za vaše RDS baze podataka. Encrypted-volumes. Ovo proverava da li su enkriptovani bilo koji EBS volumeni koji imaju priloženo stanje.

* **AWS Managed pravila**: Skup unapred definisanih pravila koja pokrivaju mnoge najbolje prakse, pa je uvek vredno pregledati ova pravila pre nego što postavite svoja, jer postoji šansa da pravilo već postoji.
* **Prilagođena pravila**: Možete kreirati svoja pravila kako
