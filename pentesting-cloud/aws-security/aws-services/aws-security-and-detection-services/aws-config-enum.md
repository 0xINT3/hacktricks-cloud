# AWS - Ukaguzi wa AWS Config

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka mwanzo hadi mtaalam wa juu na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## AWS Config

AWS Config **inachukua mabadiliko ya rasilimali**, hivyo mabadiliko yoyote kwa rasilimali inayoungwa mkono na Config yanaweza kurekodiwa, ambayo ita **rekodi mabadiliko pamoja na metadata muhimu nyingine, yote yaliyomo kwenye faili inayoitwa kipengee cha usanidi**, CI.
Huduma hii ni **maalum kwa eneo**.

Kipengee cha usanidi au **CI** kama inavyojulikana, ni sehemu muhimu ya AWS Config. Kinaundwa na faili ya JSON ambayo **inashikilia habari za usanidi, habari za uhusiano na metadata nyingine kama mtazamo wa wakati fulani wa rasilimali inayoungwa mkono**. Habari zote ambazo AWS Config inaweza kurekodi kwa rasilimali zinashikiliwa ndani ya CI. CI inaundwa **kila wakati** rasilimali inayoungwa mkono inapofanyiwa mabadiliko yoyote kwa usanidi wake kwa njia yoyote. Mbali na kurekodi maelezo ya rasilimali iliyohusika, AWS Config pia itarekodi CIs kwa rasilimali zinazohusiana moja kwa moja ili kuhakikisha mabadiliko hayakuathiri rasilimali hizo pia.

* **Metadata**: Ina maelezo kuhusu kipengee cha usanidi yenyewe. Kitambulisho cha toleo na kitambulisho cha usanidi, ambacho kinaifanya CI kuwa ya kipekee. Maelezo mengine yanaweza kujumuisha MD5Hash ambayo inaruhusu kulinganisha CIs nyingine zilizorekodiwa dhidi ya rasilimali hiyo hiyo.
* **Vipengele**: Hii inashikilia **habari za sifa za kawaida dhidi ya rasilimali halisi**. Ndani ya sehemu hii, pia tunayo kitambulisho cha rasilimali ya kipekee, na vitambulisho vya thamani muhimu vinavyohusishwa na rasilimali. Aina ya rasilimali pia imeorodheshwa. Kwa mfano, ikiwa hii ilikuwa CI kwa kifaa cha EC2, aina za rasilimali zilizoorodheshwa zinaweza kuwa kiolesura cha mtandao, au anwani ya IP ya elastiki kwa kifaa hicho cha EC2
* **Mahusiano**: Hii inashikilia habari kwa aina yoyote ya **uhusiano uliowekwa ambao rasilimali inaweza kuwa nao**. Kwa hivyo ndani ya sehemu hii, itaonyesha maelezo wazi ya uhusiano wowote na rasilimali zingine ambazo rasilimali hii inaweza kuwa nazo. Kwa mfano, ikiwa CI ilikuwa kwa kifaa cha EC2, sehemu ya uhusiano inaweza kuonyesha uhusiano na VPC pamoja na subnet ambayo kifaa cha EC2 kinaishi.
* **Usanidi wa Sasa**: Hii itaonyesha habari ile ile ambayo ingeanzishwa ikiwa ungefanya wito wa API wa maelezo au orodha uliofanywa na AWS CLI. AWS Config hutumia wito huo wa API kupata habari ile ile.
* **Matukio yanayohusiana**: Hii inahusiana na AWS CloudTrail. Hii itaonyesha **Kitambulisho cha Tukio la AWS CloudTrail linalohusiana na mabadiliko yaliyochochea uundaji wa CI hii**. Kuna CI mpya inayofanywa kwa kila mabadiliko yanayofanywa dhidi ya rasilimali. Kama matokeo, vitambulisho tofauti vya matukio ya CloudTrail vitafanywa.

**Historia ya Usanidi**: Inawezekana kupata historia ya usanidi wa rasilimali kutokana na vipengee vya usanidi. Historia ya usanidi inatolewa kila baada ya masaa 6 na ina CI zote kwa aina fulani ya rasilimali.

**Mito ya Usanidi**: Vipengee vya usanidi vinatumwa kwa SNS Topic kuwezesha uchambuzi wa data.

**Picha za Usanidi**: Vipengee vya usanidi hutumiwa kuunda picha ya wakati fulani ya rasilimali zote zinazoungwa mkono.

**S3 hutumiwa kuhifadhi** faili za Historia ya Usanidi na picha za Usanidi wowote wa data yako ndani ya ndoo moja, ambayo imefafanuliwa ndani ya rekoda ya Usanidi. Ikiwa una akaunti nyingi za AWS unaweza kutaka kuunganisha faili za historia ya usanidi katika ndoo moja ya S3 kwa akaunti yako kuu. Walakini, utahitaji kutoa ruhusa ya kuandika kwa kanuni hii ya huduma, config.amazonaws.com, na akaunti zako za pili zenye ruhusa ya kuandika kwenye ndoo ya S3 katika akaunti yako kuu.

### Uendeshaji

* Unapofanya mabadiliko, kwa mfano kwa kikundi cha usalama au orodha ya kudhibiti upatikanaji wa kisanduku ‚Äî> inachochewa kama Tukio linalochukuliwa na AWS Config
* Inahifadhi kila kitu katika ndoo ya S3
* Kulingana na usanidi, mara tu kitu kinapobadilika inaweza kuzindua kazi ya lambda AU kupanga kazi ya lambda kutazama mara kwa mara mipangilio ya AWS Config
* Lambda inarudi kwa Config
* Ikiwa sheria imevunjwa, Config inazindua SNS

![](<../../../../.gitbook/assets/image (46).png>)

### Sheria za Usanidi

Sheria za Usanidi ni njia nzuri ya kukusaidia **kutekeleza ukaguzi maalum wa kufuata** **na udhibiti kote kwenye rasilimali zako**, na inakuruhusu kuchukua maelezo ya kutekeleza kwa kila aina ya rasilimali yako. Kila sheria **ni msingi wa kimsingi wa lambda** ambayo ikichukuliwa inaangalia rasilimali na kutekeleza mantiki rahisi kubaini matokeo ya kufuata na sheria. **Kila wakati mabadiliko yanapofanywa** kwa moja ya rasilimali zako zinazoungwa mkono, **AWS Config itachunguza kufuata kwa sheria yoyote ya usanidi ulioweka**.\
AWS ina idadi ya **sheria zilizopangwa mapema** ambazo zinaangukia chini ya bendera ya usalama ambazo ziko tayari kutumika. Kwa mfano, Rds-storage-encrypted. Hii inachunguza ikiwa usimbaji wa kuhifadhi umewashwa kwa visa vya hifadhidata za RDS yako. Encrypted-volumes. Hii inachunguza kuona ikiwa kuna diski za EBS ambazo zina hali ya kushikamishwa zimefanyiwa usimbaji.

* **Sheria zilizosimamiwa na AWS**: Seti ya sheria zilizopangwa mapema ambazo hufunika mazoea bora mengi, kwa hivyo ni vyema kutazama sheria hizi kwanza kabla ya kuweka yako mwenyewe kwani kuna nafasi kwamba sheria tayari inaweza kuwepo.
* **Sheria za desturi**: Unaweza kuunda sheria zako mwenyewe kuchunguza usanidi maalum.

Kikomo cha sheria 50 za usanidi kwa eneo kabla ya kuhitaji kuwasiliana na AWS kuongeza.\
Matokeo yasiyofuata sheria HAYAONDOLEWI.

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka mwanzo hadi mtaalam wa juu na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
