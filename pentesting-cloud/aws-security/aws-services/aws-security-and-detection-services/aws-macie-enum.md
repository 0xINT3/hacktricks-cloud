# AWS - Macie Enum

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 PDF 版的 HackTricks，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github 仓库提交 PR 来分享您的黑客技巧**。

</details>

## Macie

该服务的主要功能是提供一种自动的方法来**检测、识别和分类**您在 AWS 帐户中存储的数据。

该服务由**机器学习**支持，允许在您的 AWS 帐户中采取不同操作时主动审查您的数据。机器学习可以通过分析云跟踪事件数据来识别访问模式和用户行为，以**警报任何异常或不规则活动**。Amazon Macie 发现的任何结果都会在仪表板中呈现，可以触发警报，让您快速解决潜在的数据暴露或威胁问题。

Amazon Macie 将自动持续地**监视和检测存储在 Amazon S3 中的新数据**。利用机器学习和人工智能的能力，该服务可以随着时间的推移熟悉数据的访问模式。\
Amazon Macie 还使用自然语言处理方法来**对不同的数据类型和内容进行分类和解释**。自然语言处理使用计算机科学和计算语言学的原理来研究计算机与人类语言之间的交互。特别是如何编程让计算机理解和解析语言数据。**该服务可以自动为评估的数据分配业务价值，形成风险评分**。这使得 Amazon Macie 可以按优先顺序对发现结果进行排序，让您首先关注最关键的警报。除此之外，Amazon Macie 还具有监视和发现管理您的数据的安全变更的能力。它还可以识别特定的安全相关数据，例如存储在 S3 存储桶中的访问密钥。

这种保护性和主动性的安全监控使得 Amazon Macie 能够识别关键、敏感和安全相关的数据，例如 API 密钥、秘密密钥，以及个人可识别信息（PII）和个人健康信息（PHI）数据。

这对于避免数据泄露很有用，因为 Macie 将检测您是否将个人信息暴露给互联网。

这是一个**区域性服务**。

它需要存在 IAM 角色 'AWSMacieServiceCustomerSetupRole'，并且需要启用 AWS CloudTrail。

预定义的警报类别：

* 匿名访问
* 配置合规性
* 凭证丢失
* 数据合规性
* 文件托管
* 身份枚举
* 信息丢失
* 位置异常
* 开放权限
* 特权升级
* 勒索软件
* 服务中断
* 可疑访问

**警报摘要**提供详细信息，以便您做出适当的响应。它具有描述，提供更深入的理解为何生成该警报的级别。它还有结果的详细分解。

用户有可能创建新的自定义警报。

**仪表板分类**：

* 选定时间范围内的 S3 对象
* S3 对象
* 基于 PII（个人可识别信息）的 S3 对象
* 基于 ACL 的 S3 对象
* 高风险 CloudTrail 事件及相关用户
* 高风险 CloudTrail 错误及相关用户
* 活动位置
* CloudTrail 事件
* 活动 ISP
* CloudTrail 用户身份类型

**用户类别**：Macie 将用户分为以下类别：

* **白金**：被认为进行高风险 API 调用的用户或角色。通常具有管理员特权。您应该密切监视他们，以防他们被入侵。
* **黄金**：具有调用与基础架构更改相关的 API 历史记录的用户或角色。您也应该监视他们。
* **银牌**：执行中等风险 API 调用的用户或角色
* **青铜**：根据 API 调用的风险级别最低的用户或角色

**身份类型**：

* Root：由根用户发出的请求
* IAM 用户：由 IAM 用户发出的请求
* 假定角色：使用临时假定凭证发出的请求（STS 的 AssumeRole API）
* 联合用户：使用临时凭证发出的请求（STS 的 GetFederationToken API）
* AWS 帐户：由不同的 AWS 帐户发出的请求
* AWS 服务：由 AWS 服务发出的请求

**数据分类**：存在 4 种文件分类：

* 内容类型：根据检测到的内容类型列出文件。给定的风险由检测到的内容类型确定。
* 文件扩展名：与内容类型相同，但基于扩展名
* 主题：根据文件中检测到的一系列关键字进行分类
* 正则表达式：基于特定的正则表达式进行分类

文件的最终风险将是这 4 个类别中找到的最高风险。

研究功能允许对 Amazon Macie 的所有数据创建自定义查询，并对数据进行深入分析。您可以根据以下内容过滤结果：CloudTrail 数据、S3 存储桶属性和 S3 对象

可以邀请其他帐户加入 Amazon Macie，以便多个帐户共享 Amazon Macie。

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 PDF 版的 HackTricks，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github 仓库提交 PR 来分享您的黑客技巧**。

</details>
