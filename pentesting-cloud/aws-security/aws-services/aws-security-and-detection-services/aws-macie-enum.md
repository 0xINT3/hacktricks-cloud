# AWS - Macie Enum

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

# Macie

Amazon Macie inajitokeza kama huduma iliyoundwa kugundua, kuchambua, na kutambua data kiotomatiki ndani ya akaunti ya AWS. Inatumia **machine learning** kufuatilia na kuchambua data kwa usahihi, ikilenga hasa kugundua na kutoa tahadhari dhidi ya shughuli za kawaida au zisizo za kawaida kwa kuchunguza data za **cloud trail events** na mifano ya tabia ya watumiaji.

Vipengele muhimu vya Amazon Macie:

1. **Mapitio ya Data ya Moja kwa Moja**: Hutumia machine learning kuchunguza data kwa ufanisi wakati hatua mbalimbali zinatokea ndani ya akaunti ya AWS.
2. **Uchunguzi wa Kutokea kwa Kupita Kiasi**: Hutambua shughuli au mifumo ya ufikiaji isiyo ya kawaida, ikitoa tahadhari za kupunguza hatari za ufunuo wa data.
3. **Ufuatiliaji wa Kudumu**: Kiotomatiki inafuatilia na kutambua data mpya kwenye Amazon S3, ikitegemea machine learning na artificial intelligence kuzoea mifumo ya ufikiaji wa data kwa muda.
4. **Uainishaji wa Data na NLP**: Inatumia usindikaji wa lugha asilia (NLP) kuainisha na kufasiri aina tofauti za data, ikitoa alama za hatari kipaumbele cha kupata matokeo.
5. **Ufuatiliaji wa Usalama**: Hutambua data zenye hisia za usalama, ikiwa ni pamoja na funguo za API, funguo za siri, na taarifa za kibinafsi, kusaidia kuzuia uvujaji wa data.

Amazon Macie ni **huduma ya kikanda** na inahitaji jukumu la IAM 'AWSMacieServiceCustomerSetupRole' na AWS CloudTrail iliyowezeshwa kwa utendaji.

## Mfumo wa Tahadhari

Macie inagawa tahadhari katika makundi yaliyopangwa kama:

- Upatikanaji uliofanywa bila kutambulika
- Ufuatiliaji wa data
- Upotezaji wa siri
- Kuongezeka kwa madaraka
- Ransomware
- Upatikanaji wenye shaka, n.k.

Tahadhari hizi hutoa maelezo ya kina na uchambuzi wa matokeo kwa majibu na ufumbuzi wa ufanisi.

## Vipengele vya Dashibodi

Dashibodi inagawa data katika sehemu mbalimbali, ikiwa ni pamoja na:

- Vitu vya S3 (kwa kipindi cha muda, ACL, PII)
- Matukio/watumiaji wa CloudTrail wenye hatari kubwa
- Maeneo ya Shughuli
- Aina za utambulisho wa watumiaji wa CloudTrail, na zaidi.

## Uainishaji wa Watumiaji

Watumiaji wanapangwa katika viwango kulingana na kiwango cha hatari cha simu zao za API:

- **Platinum**: Simu za API zenye hatari kubwa, mara nyingi zenye mamlaka ya admin.
- **Gold**: Simu za API zinazohusiana na miundombinu.
- **Silver**: Simu za API zenye hatari ya wastani.
- **Bronze**: Simu za API zenye hatari ndogo.

## Aina za Utambulisho

Aina za utambulisho ni pamoja na Root, Mtumiaji wa IAM, Jukumu lililodhaniwa, Mtumiaji aliyejumuishwa, Akaunti ya AWS, na Huduma ya AWS, ikionyesha chanzo cha maombi.

## Uainishaji wa Data

Uainishaji wa data unajumuisha:

- Aina ya Yaliyomo: Kulingana na aina ya yaliyomo iliyogunduliwa.
- Kifungu cha Faili: Kulingana na kifungu cha faili.
- Mada: Imepangwa kwa maneno muhimu ndani ya faili.
- Regex: Imepangwa kulingana na mifumo maalum ya regex.

Hatari kubwa kati ya vikundi hivi inaamua kiwango cha hatari cha faili.

## Utafiti na Uchambuzi

Kazi ya utafiti ya Amazon Macie inaruhusu utaftaji wa desturi kote kwenye data zote za Macie kwa uchambuzi wa kina. Vichujio ni pamoja na Data ya CloudTrail, mali za Bakuli la S3, na Vitu vya S3. Zaidi ya hayo, inasaidia kuwaalika akaunti zingine kushiriki Amazon Macie, ikirahisisha usimamizi wa data wa ushirikiano na ufuatiliaji wa usalama. 

## Uorodheshaji
```
# Get buckets
aws macie2 describe-buckets

# Org config
aws macie2 describe-organization-configuration

# Get admin account (if any)
aws macie2 get-administrator-account
aws macie2 list-organization-admin-accounts # Run from the management account of the org

# Get macie account members (run this form the admin account)
aws macie2 list-members

# Check if automated sensitive data discovey is enabled
aws macie2 get-automated-discovery-configuration

# Get findings
aws macie2 list-findings
aws macie2 get-findings --finding-ids <ids>
aws macie2 list-findings-filters
aws macie2 get -findings-filters --id <id>

# Get allow lists
aws macie2 list-allow-lists
aws macie2 get-allow-list --id <id>

# Get different info
aws macie2 list-classification-jobs
aws macie2 list-classification-scopes
aws macie2 list-custom-data-identifiers
```
### Baada ya Uvamizi

{% hint style="success" %}
Kutoka mtazamo wa mshambuliaji, huduma hii haikubuniwi kugundua mshambuliaji, bali kugundua habari nyeti katika faili zilizohifadhiwa. Kwa hivyo, huduma hii inaweza **kusaidia mshambuliaji kupata habari nyeti** ndani ya vikasha.\
Hata hivyo, labda mshambuliaji angekuwa na nia pia ya kuitatiza ili kuzuia mwathiriwa kupata tahadhari na kuiba habari hiyo kwa urahisi zaidi.
{% endhint %}

TODO: PRs ni karibu!

# Marejeo
* [https://cloudacademy.com/blog/introducing-aws-security-hub/](https://cloudacademy.com/blog/introducing-aws-security-hub/)

<details>

<summary><strong>Jifunze kuhusu kuvamia AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kuvamia kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
