# AWS - Macie Enum

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* **HackTricksで会社を宣伝したい**場合や、**最新バージョンのPEASSを見たい**場合、または**HackTricksをPDFでダウンロード**したい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見しましょう。独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしてください 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **ハッキングのトリックを共有するには、**[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

## Macie

このサービスの主な機能は、AWSアカウント内に保存されているデータを**自動的に検出、識別、および分類**することです。

このサービスは**機械学習**によって支えられており、AWSアカウント内でさまざまなアクションが実行されるたびにデータを積極的にレビューすることができます。機械学習は、クラウドトレイルイベントデータを分析してアクセスパターンや**ユーザーの行動**を検出し、**異常または不規則なアクティビティに対してアラートを発信**することができます。Amazon Macieが行った発見は、ダッシュボード上に表示され、アラートをトリガーとして使用することで、データの漏洩や侵害の潜在的な脅威を迅速に解決することができます。

Amazon Macieは、自動的にAmazon S3に保存されている新しいデータを**継続的に監視および検出**します。機械学習と人工知能の能力を活用することで、このサービスは時間の経過とともにデータへのアクセスパターンを習得することができます。\
Amazon Macieはまた、自然言語処理の手法を使用して、さまざまなデータタイプとコンテンツを**分類および解釈**します。NLPは、コンピュータサイエンスと計算言語学の原則を使用して、コンピュータと人間の言語の相互作用を調べ、言語データを理解し解読するためのコンピュータプログラムの作成方法について研究します。**サービスは、リスクスコアの形で評価されるデータに自動的にビジネス価値を割り当てることができます**。これにより、Amazon Macieは優先順位に基づいて発見を順序付けることができ、最も重要なアラートに集中することができます。さらに、Amazon Macieは、データを管理するセキュリティ変更を**監視および検出**することもできます。また、S3バケット内に保持されているアクセスキーなどのセキュリティに関連するデータを特定することもできます。

この保護的で積極的なセキュリティモニタリングにより、Amazon MacieはAPIキー、シークレットキー、PII（個人を特定できる情報）およびPHIデータなどの**重要な、機密性の高いセキュリティに関連するデータを特定**することができます。

これは、Macieが人々の情報をインターネットに公開しているかどうかを検出するために役立ちます。

これは**リージョナルサービス**です。

IAMロール「AWSMacieServiceCustomerSetupRole」の存在と、AWS CloudTrailの有効化が必要です。

事前定義されたアラートカテゴリ：

* 匿名化されたアクセス
* 設定の準拠
* 資格情報の喪失
* データの準拠
* ファイルのホスティング
* 身元の列挙
* 情報の喪失
* 場所の異常
* オープンな権限
* 特権のエスカレーション
* ランサムウェア
* サービスの中断
* 不審なアクセス

**アラートの概要**には、適切な対応を行うための詳細な情報が提供されます。生成された理由についてより深い理解を提供する説明があります。また、結果の詳細な分析も含まれています。

ユーザーは新しいカスタムアラートを作成することも可能です。

**ダッシュボードの分類**：

* 選択した時間範囲のS3オブジェクト
* S3オブジェクト
* PII（個人を特定できる情報）によるS3オブジェクト
* ACLによるS3オブジェクト
* ハイリスクなCloudTrailイベントと関連するユーザー
* ハイリスクなCloudTrailエラーと関連するユーザー
* アクティビティの場所
* CloudTrailイベント
* アクティビティのISP
* CloudTrailユーザーのアイデンティティタイプ

**ユーザーカテゴリ**：Macieは、次のカテゴリにユーザーを分類します：

* **プラチナ**: 高リスクのAPI呼び出しを行うと考えられるユーザーまたはロール。しばしば管理者特権を持っています。彼らが侵害された場合に備えて、かなり注意して監視する必要があります
* **ゴールド**: インフラストラクチャの変更に関連するAPIを呼び出す履歴を持つユーザーまたはロール。これらも監視する必要があります
* **シルバー**: 中程度のリスクのAPI呼び出しを実行するユーザーまたはロール
* **ブロンズ**: API呼び出しに基づいて最も低いリスクレベルを使用するユーザーまたはロール

**アイデンティティタイプ**：

* ルート：ルートユーザーによるリクエスト
* IAMユーザー：IAMユーザーによるリクエスト
* 仮定されたロール：一時的な仮定された資格情報によるリクエスト（STSのAssumeRole API）
* フェデレーテッドユーザー：一時的な資格情報を使用したリクエスト（STSのGetFederationToken API）
* AWSアカウント：別のAWSアカウントによるリクエスト
* AWSサービス：AWSサービスによるリクエスト

**データ分類**：4つのファイル分類が存在します：

* コンテンツタイプ：検出されたコンテンツタイプに基づいてファ
