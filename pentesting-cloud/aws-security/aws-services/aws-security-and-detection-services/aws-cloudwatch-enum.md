# AWS - CloudWatch Enum

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдЕрдЧрд░ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рд╣реЛ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рди рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks_live**](https://twitter.com/hacktricks_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>

## CloudWatch

**CloudWatch** **рд▓реЙрдЧ/рдореАрдЯреНрд░рд┐рдХреНрд╕/рдЗрд╡реЗрдВрдЯреНрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдФрд░ рдСрдкрд░реЗрд╢рдирд▓ рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд░рддрд╛ рд╣реИ** рдЬреЛ AWS рд╕рдВрд╕рд╛рдзрдиреЛрдВ, рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ **рдПрдХреАрдХреГрдд рджреГрд╢реНрдп** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред\
CloudWatch рд▓реЙрдЧ рдЗрд╡реЗрдВрдЯ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд▓реЙрдЧ рд▓рд╛рдЗрди рдкрд░ **256KB рдХреА рдЖрдХрд╛рд░ рд╕реАрдорд╛** рд╣реЛрддреА рд╣реИред\
рдпрд╣ **рдЙрдЪреНрдЪ рд░рд┐рдЬреЛрд▓реНрдпреВрд╢рди рдЕрд▓рд╛рд░реНрдо** рд╕реЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, **рд▓реЙрдЧреНрд╕** рдФрд░ **рдореАрдЯреНрд░рд┐рдХреНрд╕** рдХреЛ рд╕рд╛рде-рд╕рд╛рде **рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝** рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдБ рд▓реЗ рд╕рдХрддрд╛ рд╣реИ, рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рдЯреНрд░рдмрд▓рд╢реВрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдВрддрд░реНрджреГрд╖реНрдЯрд┐ рдЦреЛрдЬ рд╕рдХрддрд╛ рд╣реИред

рдЖрдк рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП CloudTrail рд╕реЗ рд▓реЙрдЧ рдХреА рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╡реЗрдВрдЯреНрд╕ рдЬреЛ рдореЙрдирд┐рдЯрд░ рд╣реЛрддреЗ рд╣реИрдВ:

* рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣реЛрдВ рдФрд░ NACLs рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди
* EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ рд╢реБрд░реВ, рдмрдВрдж, рд░реАрдмреВрдЯ рдФрд░ рдмрдВрдж рдХрд░рдирд╛
* IAM рдФрд░ S3 рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рдиреАрддрд┐рдпреЛрдВ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди
* AWS рдкреНрд░рдмрдВрдзрди рдХрдВрд╕реЛрд▓ рдореЗрдВ рд╡рд┐рдлрд▓ рд▓реЙрдЧрд┐рди рдкреНрд░рдпрд╛рд╕
* рд╡рд┐рдлрд▓ рдЕрдзрд┐рдХреГрддрд┐ рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рджреЗрдиреЗ рд╡рд╛рд▓реЗ API рдХреЙрд▓реНрд╕
* Cloudwatch рдореЗрдВ рдЦреЛрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд┐рд▓реНрдЯрд░: [https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html)

### CloudWatch Logs <a href="#cloudwatch-logs" id="cloudwatch-logs"></a>

**рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рд╕реЗ рд▓реЙрдЧ рдПрдЧреНрд░реАрдЧреЗрдЯ рдФрд░ рдореЙрдирд┐рдЯрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ** AWS рд╕реЗрд╡рд╛рдУрдВ (рд╕рд╣рд┐рдд CloudTrail) рд╕реЗ рдФрд░ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди/рд╕рд┐рд╕реНрдЯрдо** рд╕реЗ рд▓реЙрдЧред рд▓реЙрдЧ **рдЕрдВрддрд╣реАрди рд░реВрдк рд╕реЗ** рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ (рд▓реЙрдЧ рдЧреНрд░реБрдк рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ) рдФрд░ рдирд┐рд░реНрдпрд╛рдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред

**рддрддреНрд╡**:

| **рд▓реЙрдЧ рдЧреНрд░реБрдк**            | рдПрдХ **рд▓реЙрдЧ рд╕реНрдЯреНрд░реАрдо рдХрд╛ рд╕рдВрдЧреНрд░рд╣рдг** рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рд╕рдореВрд╣ рдЬреЛ рд╕рдорд╛рди рд░рд┐рдЯреЗрдВрд╢рди, рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ, рдФрд░ рдПрдХреНрд╕реЗрд╕ рдХрдВрдЯреНрд░реЛрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░рддрд╛ рд╣реИ                                                     |
| ------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **рд▓реЙрдЧ рд╕реНрдЯреНрд░реАрдо**           | рдПрдХ рд╕рд┐рдХреНрд╡реЗрдВрд╕ рдСрдл **рд▓реЙрдЧ рдЗрд╡реЗрдВрдЯреНрд╕** рдЬреЛ **рд╕рдорд╛рди рд╕реНрд░реЛрдд** рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВ                                                                                                |
| **рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдлрд╝рд┐рд▓реНрдЯрд░** | рдирд┐рд╢реНрдЪрд┐рдд рд▓реЙрдЧ рдЧреНрд░реБрдк рдореЗрдВ рдШрдЯрдирд╛рдУрдВ рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓реЗ рдПрдХ **рдлрд╝рд┐рд▓реНрдЯрд░ рдкреИрдЯрд░реНрди** рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВ, рдЙрдиреНрд╣реЗрдВ Kinesis Data Firehose рд╕реНрдЯреНрд░реАрдо, Kinesis рд╕реНрдЯреНрд░реАрдо, рдпрд╛ рдПрдХ Lambda рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рднреЗрдЬреЗрдВ |

### CloudWatch Monitoring & Events

CloudWatch **рдореВрд▓** рдбреЗрдЯрд╛ рдХреЛ **рд╣рд░ 5 рдорд┐рдирдЯ** рдореЗрдВ рдПрдЧреНрд░реАрдЧреЗрдЯ рдХрд░рддрд╛ рд╣реИ (рд╡рд┐рд╕реНрддреГрдд рд╡рд╛рд▓рд╛ рдпрд╣ **рд╣рд░ 1 рдорд┐рдирдЯ** рдХрд░рддрд╛ рд╣реИ)ред рдПрдЧреНрд░реАрдЧреЗрд╢рди рдХреЗ рдмрд╛рдж, рдпрд╣ **рдЕрд▓рд╛рд░реНрдо рдХреА рд╕реАрдорд╛рдУрдВ рдХреА рдЬрд╛рдВрдЪ** рдХрд░рддрд╛ рд╣реИ рдпрджрд┐ рдЗрд╕реЗ рдХрд┐рд╕реА рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред\
рдЙрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, CloudWatch рдХреЛ рдПрдХ рдЗрд╡реЗрдВрдЯ рднреЗрдЬрдиреЗ рдФрд░ рдХреБрдЫ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдБ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (AWS рд▓реИрдореНрдмрдбрд╛ рдлрд╝рдВрдХреНрд╢рди, SNS рд╡рд┐рд╖рдп, SQS рдХрддрд╛рд░реЗрдВ, Kinesis рд╕реНрдЯреНрд░реАрдореНрд╕)

### рдПрдЬреЗрдВрдЯ рд╕реНрдерд╛рдкрдирд╛

рдЖрдк рдЕрдкрдиреА рдорд╢реАрдиреЛрдВ/рдХрдВрдЯреЗрдирд░реНрд╕ рдореЗрдВ рдПрдЬреЗрдВрдЯ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд▓реЙрдЧ рд╡рд╛рдкрд╕ CloudWatch рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛ рд╕рдХреЗред

* **рдПрдХ** **рд░реЛрд▓ рдмрдирд╛рдПрдВ** рдФрд░ рдЙрд╕реЗ **рдЗрдВрд╕реНрдЯреЗрдВрд╕** рдХреЗ рд╕рд╛рде **рдЬреЛрдбрд╝реЗрдВ** рдЬрд┐рд╕рдореЗрдВ CloudWatch рдХреЛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╕реЗ рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛ рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд AWS рд╕рд┐рд╕реНрдЯрдо рдореИрдиреЗрдЬрд░ SSM рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛ (CloudWatchAgentAdminPolicy & AmazonEC2RoleforSSM)
* **рдПрдЬреЗрдВрдЯ** рдХреЛ EC2 рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкрд░ **рдбрд╛рдЙрдирд▓реЛрдб** рдФрд░ **рд╕реНрдерд╛рдкрд┐рдд** рдХрд░реЗрдВ ([https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip](https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip)). рдЖрдк рдЗрд╕реЗ EC2 рдХреЗ рдЕрдВрджрд░ рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ AWS рд╕рд┐рд╕реНрдЯрдо рдореИрдиреЗрдЬрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ AWS-ConfigureAWSPackage рдкреИрдХреЗрдЬ рдХрд╛ рдЪрдпрди рдХрд░рдХреЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ
* CloudWatch рдПрдЬреЗрдВрдЯ рдХреЛ **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░** рдФрд░ **рд╕реНрдЯрд╛рд░реНрдЯ** рдХрд░реЗрдВ

рдПрдХ рд▓реЙрдЧ рдЧреНрд░реБрдк рдореЗрдВ рдХрдИ рд╕реНрдЯреНрд░реАрдо рд╣реЛрддреЗ рд╣реИрдВред рдПрдХ рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рдХрдИ рдЗрд╡реЗрдВрдЯреНрд╕ рд╣реЛрддреЗ рд╣реИрдВред рдФрд░ рд╣рд░ рд╕реНрдЯреНрд░реАрдо рдХреЗ рдЕрдВрджрд░, рдЗрд╡реЗрдВрдЯреНрд╕ рдХреЛ рдХреНрд░рдо рдореЗрдВ рд╣реЛрдиреЗ рдХреА рдЧрд╛рд░рдВрдЯреА рд╣реЛрддреА рд╣реИред

## рдХреНрд░рд┐рдпрд╛рдПрдБ

### рдЬрд╛рдВрдЪ
```bash
# Dashboards
aws cloudwatch list-dashboards
aws cloudwatch get-dashboard --dashboard-name <dashboard_name>

# Alarms
aws cloudwatch describe-alarms
aws cloudwatch describe-alarm-history
aws cloudwatch describe-alarms-for-metric --metric-name <metric_name> --namespace <namespace>
aws cloudwatch describe-alarms-for-metric --metric-name IncomingLogEvents --namespace AWS/Logs

# Anomaly Detections
aws cloudwatch describe-anomaly-detectors
aws cloudwatch describe-insight-rules

# Logs
aws logs tail "<log_group_name>" --follow
aws logs get-log-events --log-group-name "<log_group_name>" --log-stream-name "<log_stream_name>" --output text > <output_file>

# Events enumeration
aws events list-rules
aws events describe-rule --name <name>
aws events list-targets-by-rule --rule <name>
aws events list-archives
aws events describe-archive --archive-name <name>
aws events list-connections
aws events describe-connection --name <name>
aws events list-endpoints
aws events describe-endpoint --name <name>
aws events list-event-sources
aws events describe-event-source --name <name>
aws events list-replays
aws events list-api-destinations
aws events list-event-buses
```
## рд╕рдВрджрд░реНрдн

* [https://cloudsecdocs.com/aws/services/logging/cloudwatch/](https://cloudsecdocs.com/aws/services/logging/cloudwatch/#general-info)

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks_live**](https://twitter.com/hacktricks_live) **рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рдЬрдорд╛ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>
