# AWS - WAF Enum

<details>

<summary><strong>рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ **PR рдЬрдорд╛ рдХрд░рдХреЗ** рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

## WAF

AWS WAF рдПрдХ **рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдлрд╝рд╛рдпрд░рд╡реЙрд▓** рд╣реИ рдЬреЛ рдЖрдкрдХреА рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╛ API рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рд╡реЗрдм рдзреЛрдЦрд╛рдзрдбрд╝реА рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрдкрд▓рдмреНрдзрддрд╛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░ рд╕рдХрддреА рд╣реИ, рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдЦрд╝рддрд░реЗ рдореЗрдВ рдбрд╛рд▓ рд╕рдХрддреА рд╣реИ рдпрд╛ рдЕрддреНрдпрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреА рд╣реИред AWS WAF рдЖрдкрдХреЛ рдЕрдкрдиреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рддрд╛рд▓рд┐рдХрд╛рдУрдВ рддрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рдкрд╣реБрдВрдЪ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рджреЗрддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рдЖрдкрдХреЛ рд╕рд╛рдорд╛рдиреНрдп рд╣рдорд▓реЗ рдХреЗ рдкреИрдЯрд░реНрди рдЬреИрд╕реЗ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдпрд╛ рдХреНрд░реЙрд╕-рд╕рд╛рдЗрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯрд┐рдВрдЧ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рдиреЗ рдЬреИрд╕реЗ рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдпрдо рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдФрд░ рдЬрд┐рди рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреИрдЯрд░реНрди рдХреЛ рдЖрдк рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

### рд╢рд░реНрддреЗрдВ

рд╢рд░реНрддреЗрдВ рдЖрдкрдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИрдВ рдХрд┐ **рдЖрдк WAF рдХреЛ рдореЙрдирд┐рдЯрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдиреЗ рд╡рд╛рд▓реЗ HTTP рдпрд╛ HTTPS рдЕрдиреБрд░реЛрдз рдХреЗ рдХреМрди рд╕реЗ рддрддреНрд╡реЛрдВ рдХреЛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** (XSS, GEO - рд╕реНрдерд╛рди рджреНрд╡рд╛рд░рд╛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдирд╛-, IP рдкрддрд╛, рдЖрдХрд╛рд░ рд╕реАрдорд╛рдПрдБ, SQL рдЗрдВрдЬреЗрдХреНрд╢рди рд╣рдорд▓реЗ, рд╕реНрдЯреНрд░рд┐рдВрдЧ рдФрд░ рд░реЗрдЧреЗрдХреНрд╕ рдореИрдЪрд┐рдВрдЧ)ред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рдХреНрд▓рд╛рдЙрдбрдлреНрд░рдВрдЯ рд╕реЗ рдПрдХ рджреЗрд╢ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЕрдиреБрд░реЛрдз WAF рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪреЗрдЧрд╛ред

рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХрд╛рд░ рдХреА 100 рд╢рд░реНрддреЗрдВ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ Geo Match рдпрд╛ рдЖрдХрд╛рд░ рд╕реАрдорд╛рдПрдБ, рд╣рд╛рд▓рд╛рдВрдХрд┐ **Regex** рдЗрд╕ рдирд┐рдпрдо рдХреА **рдЕрдкрд╡рд╛рдж** рд╣реИ рдЬрд╣рд╛рдВ **рдХреЗрд╡рд▓ 10 Regex** рд╢рд░реНрддреЗрдВ рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕реАрдорд╛ рдмрдврд╝рд╛рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИред рдЖрдкрдХреЗ рдкрд╛рд╕ **100 рдирд┐рдпрдо рдФрд░ 50 рд╡реЗрдм ACL рдкреНрд░рддрд┐ AWS рдЦрд╛рддрд╛** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдкрдХреЛ рдЦрд╛рддреЗ рдкреНрд░рддрд┐ **5 рд░реЗрдЯ-рдЖрдзрд╛рд░рд┐рдд-рдирд┐рдпрдо** рдХреА рд╕реАрдорд╛ рд╣реЛрддреА рд╣реИред рдЕрдВрдд рдореЗрдВ, рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ рдХреЗ рд╕рд╛рде **WAF рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп 10,000 рдЕрдиреБрд░реЛрдз рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

### рдирд┐рдпрдо

рдЗрди рд╢рд░реНрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк рдирд┐рдпрдо рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ: рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдЧрд░ 2 рд╢рд░реНрддреЗрдВ рдкреВрд░реА рд╣реЛрддреА рд╣реИрдВ рддреЛ рдЕрдиреБрд░реЛрдз рдХреЛ рдмреНрд▓реЙрдХ рдХрд░реЗрдВред\
рдирд┐рдпрдо рдмрдирд╛рддреЗ рд╕рдордп рдЖрдкрд╕реЗ рдПрдХ **рдирд┐рдпрдо рдкреНрд░рдХрд╛рд░** рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛: **рдирд┐рдпрдо рдпрд╛ рд░реЗрдЯ-рдЖрдзрд╛рд░рд┐рдд рдирд┐рдпрдо**ред

рд░реЗрдЯ-рдЖрдзрд╛рд░рд┐рдд рдирд┐рдпрдо рдФрд░ рдирд┐рдпрдо рдХреЗ рдмреАрдЪ рдХреЗрд╡рд▓ рдПрдХ **рдЕрдВрддрд░** рд╣реИ рдХрд┐ рд░реЗрдЯ-рдЖрдзрд╛рд░рд┐рдд рдирд┐рдпрдо **рдкрд╛рдВрдЪ рдорд┐рдирдЯ рдХреА рдЕрд╡рдзрд┐ рдореЗрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖ IP рдкрддреЗ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рд╣реЛ рд░рд╣реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛** рдХреЛ **рдЧрд┐рдирддреА** рдХрд░рддреЗ рд╣реИрдВред

рд░реЗрдЯ-рдЖрдзрд╛рд░рд┐рдд рдирд┐рдпрдо рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЪрдпрди рдХрд░рддреЗ рд╕рдордп, рдЖрдкрд╕реЗ **рдкрд╛рдВрдЪ рдорд┐рдирдЯ рдХреА рдЕрд╡рдзрд┐ рдореЗрдВ рдПрдХрд▓ IP рд╕реЗ рдЕрдзрд┐рдХрддрдо рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рджрд░реНрдЬ рдХрд░рдиреЗ** рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЬрдм рдЧрдгрдирд╛ рд╕реАрдорд╛ **рдкреВрд░реА рд╣реЛ рдЬрд╛рддреА рд╣реИ**, рддреЛ рдЙрд╕реА IP рдкрддреЗ рд╕реЗ рдЕрдиреНрдп рд╕рднреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрджрд┐ рдЕрдиреБрд░реЛрдз рджрд░ рдлрд┐рд░ рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рджрд░ рд╕реАрдорд╛ рд╕реЗ рдХрдо рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рдпрд╛рддрд╛рдпрд╛рдд рдХреЛ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЕрдм рдмреНрд▓реЙрдХ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред рдЕрдкрдиреА рджрд░ рд╕реАрдорд╛ рд╕реЗрдЯ рдХрд░рддреЗ рд╕рдордп рдЗрд╕реЗ **2000 рд╕реЗ рдКрдкрд░ рдХреА рдорд╛рди** рдкрд░ рд╕реЗрдЯ рдХрд░рдирд╛ **рдЖрд╡рд╢реНрдпрдХ рд╣реИ**ред рдЗрд╕ рд╕реАрдорд╛ рд╕реЗ рдХрдо рдХрд┐рд╕реА рднреА рдЕрдиреБрд░реЛрдз рдХреЛ рдирд┐рдпрдорд┐рдд рдирд┐рдпрдо рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред

### рдХреНрд░рд┐рдпрд╛рдПрдБ

рдкреНрд░рддреНрдпреЗрдХ рдирд┐рдпрдо рдкрд░ рдХреНрд░рд┐рдпрд╛ рд▓рд╛рдЧреВ рдХреА рдЬрд╛рддреА рд╣реИ, рдпреЗ рдХреНрд░рд┐рдпрд╛рдПрдВ рдпрд╛ рддреЛ **рдЕрдиреБрдорддрд┐**, **рдмреНрд▓реЙрдХ** рдпрд╛ **рдЧрдгрдирд╛** рд╣реЛ рд╕рдХрддреА рд╣реИрдВред

* рдЬрдм рдПрдХ рдЕрдиреБрд░реЛрдз рдХреЛ **рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИ**, рддреЛ рд╡рд╣ рдЙрд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдХреНрд▓рд╛рдЙрдбрдлреНрд░рдВрдЯ рд╡рд┐рддрд░рдг рдпрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЛ
```
# Get web acls
aws wafv2 list-web-acls --scope REGIONAL
aws wafv2 get-web-acl --scope REGIONAL --name <name> --id <id>
aws wafv2 list-resources-for-web-acl --web-acl-arn <web-acl-arn> #Resources associated with the ACL
aws wafv2 get-web-acl-for-resource --resource-arn <arn> # Get web acl of the resource

# Rule groups
aws wafv2 list-rule-groups --scope REGIONAL
aws wafv2 get-rule-group --scope REGIONAL --name <name> --id <id>

# Get IP sets
aws wafv2 list-ip-sets --scope=REGIONAL
aws wafv2 get-ip-set --scope=REGIONAL --name <name> --id <id>

# Get regex patterns
aws wafv2 list-regex-pattern-sets --scope REGIONAL

# Get logging config (buckets storing the logs)
aws wafv2 list-logging-configurations --scope=REGIONAL
```
## рдкреЛрд╕реНрдЯ рдПрдХреНрд╕рдкреНрд▓реЛрдЗрдЯреЗрд╢рди / рдмрд╛рдИрдкрд╛рд╕

{% hint style="success" %}
рд╣рдорд▓рд╛рд╡рд░реЛрдВ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рдпрд╣ рд╕реЗрд╡рд╛ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рд╡реЗрдм рдХреЛ рдХрдВрдкреНрд░рдорд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддреА рд╣реИ рдЬреЛ рдЙрд╕реЗ WAF рд╕рдВрд░рдХреНрд╖рдг рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЕрдирд╛рд╡рд░рдгреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддреА рд╣реИред

рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕ рд╕реЗрд╡рд╛ рдХреЛ рднрдВрдЧ рдХрд░рдиреЗ рдореЗрдВ рднреА рд░реБрдЪрд┐ рд░рдЦ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╡реЗрдм WAF рджреНрд╡рд╛рд░рд╛ рд╕рдВрд░рдХреНрд╖рд┐рдд рди рд╣реЛрдВред
{% endhint %}

TODO: рдкреАрдЖрд░ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ рдкреАрдбреАрдПрдл рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**рдж рдкреАрдПрд╕ рдлреИрдорд┐рд▓реА**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред

</details>
