# AWS - Enumera√ß√£o do Firewall Manager

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo [**telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Firewall Manager

**AWS Firewall Manager** simplifica a gest√£o e manuten√ß√£o do **AWS WAF, AWS Shield Advanced, grupos de seguran√ßa do Amazon VPC e AWS Network Firewall** em m√∫ltiplas contas e recursos. Ele permite que voc√™ configure suas regras de firewall, prote√ß√µes Shield Advanced, grupos de seguran√ßa do VPC e configura√ß√µes do Network Firewall apenas uma vez, com o servi√ßo **aplicando automaticamente essas regras e prote√ß√µes em suas contas e recursos**, incluindo os rec√©m-adicionados.

O servi√ßo oferece a capacidade de **agrupar e proteger recursos espec√≠ficos juntos**, como aqueles que compartilham uma tag comum ou todas as suas distribui√ß√µes CloudFront. Uma vantagem significativa do Firewall Manager √© sua habilidade de **estender automaticamente a prote√ß√£o para recursos rec√©m-adicionados** em sua conta.

**Pr√©-requisitos** incluem a configura√ß√£o de uma Conta Mestre do Firewall Manager, estabelecendo uma organiza√ß√£o AWS com contas membros e ativando o AWS Config.

Um **grupo de regras** (uma cole√ß√£o de regras do WAF) pode ser incorporado em uma Pol√≠tica do AWS Firewall Manager, que √© ent√£o vinculada a recursos espec√≠ficos da AWS, como distribui√ß√µes CloudFront ou balanceadores de carga de aplica√ß√£o.

√â importante notar que **as pol√≠ticas do Firewall Manager permitem apenas a√ß√µes de "Bloquear" ou "Contar"** para um grupo de regras, sem uma op√ß√£o de "Permitir".

## Enumera√ß√£o
```
# Get admin account
aws fms get-admin-account

# Get member accounts
aws fms list-member-accounts

# Get policies
aws fms list-policies

# Get App list
aws fms list-apps-lists --max-results 10

# Get notification channel (if any)
aws fms get-notification-channel

# Get resource sets
aws fms list-resource-sets

# Get admin scope: Get resources Firewall Manager can manage
aws fms get-admin-scope --admin-account <acc-id> # ReadOnly policy is not enough for this

# Get Firewall Manager administrators within the organization that are onboarded to Firewall Manager by AssociateAdminAccount
aws fms list-admin-accounts-for-organization # ReadOnly policy is not enough for this
```
## Bypass de Detec√ß√£o

TODO, PRs aceitos

# Refer√™ncias
* [https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-fms.html](https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-fms.html)

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo do** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo do [**telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
