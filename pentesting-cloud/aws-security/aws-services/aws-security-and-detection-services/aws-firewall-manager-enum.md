# AWS - 防火墙管理器枚举

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS红队专家）</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您想看到您的**公司在HackTricks中做广告**或**下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[NFTs](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或 **关注**我们的**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>

## 防火墙管理器

**AWS防火墙管理器**简化了跨多个帐户和资源管理和维护**AWS WAF、AWS Shield高级版、Amazon VPC安全组和AWS网络防火墙**的过程。它使您能够仅需一次配置防火墙规则、Shield高级版保护、VPC安全组和网络防火墙设置，服务会**自动强制执行这些规则和保护措施**，包括新添加的资源。

该服务提供了**将特定资源分组和保护在一起**的能力，比如共享共同标签或所有CloudFront分发。防火墙管理器的一个重要优势是其能够**自动将保护扩展到您帐户中新添加的资源**。

**先决条件**包括设置防火墙管理器主帐户、建立具有成员帐户的AWS组织，并启用AWS Config。

**规则组**（一组WAF规则）可以并入AWS防火墙管理器策略，然后链接到特定的AWS资源，如CloudFront分发或应用程序负载均衡器。

值得注意的是，**防火墙管理器策略仅允许规则组的“阻止”或“计数”操作**，没有“允许”选项。

## 枚举
```
# Get admin account
aws fms get-admin-account

# Get member accounts
aws fms list-member-accounts

# Get policies
aws fms list-policies

# Get App list
aws fms list-apps-lists --max-results 10

# Get notification channel (if any)
aws fms get-notification-channel

# Get resource sets
aws fms list-resource-sets

# Get admin scope: Get resources Firewall Manager can manage
aws fms get-admin-scope --admin-account <acc-id> # ReadOnly policy is not enough for this

# Get Firewall Manager administrators within the organization that are onboarded to Firewall Manager by AssociateAdminAccount
aws fms list-admin-accounts-for-organization # ReadOnly policy is not enough for this
```
## 绕过检测

TODO，接受PR

# 参考
* [https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-fms.html](https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-fms.html)

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS红队专家）</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您想看到您的**公司在HackTricks中做广告**或**下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 探索[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或 **关注**我们的**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>
