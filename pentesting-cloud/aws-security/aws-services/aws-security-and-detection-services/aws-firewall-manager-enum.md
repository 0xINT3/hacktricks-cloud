# AWS - Firewall Manager Enum

<details>

<summary><strong>AWSハッキングをゼロからヒーローまで学ぶには</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>をご覧ください！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをご覧ください
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォロー**してください。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有してください。

</details>

## Firewall Manager

AWS Firewall Managerは、**AWS WAF, AWS Shield Advanced, Amazon VPCセキュリティグループ, およびAWS Network Firewall**にわたる複数のアカウントとリソースの管理とメンテナンス作業を簡素化します。Firewall Managerを使用すると、AWS WAFファイアウォールルール、Shield Advancedプロテクション、Amazon VPCセキュリティグループ、およびNetwork Firewallファイアウォールを一度に設定できます。このサービスは、新しいリソースを追加する際にも、**自動的にアカウントとリソースにルールとプロテクションを適用します**。

特定のリソースをグループ化して保護することができます。例えば、特定のタグが付けられたすべてのリソースや、すべてのCloudFrontディストリビューションなどです。Firewall Managerの主な利点の一つは、アカウントに追加された特定のリソースがアクティブになると、**自動的に保護される**ことです。

**前提条件**: Firewall Managerマスターアカウントを作成し、AWS組織を設定し、メンバーアカウントを追加し、AWS Configを有効にする。

**ルールグループ**（WAFルールのセット）は、AWS Firewall Managerポリシーに追加でき、その後、cloudfrontディストリビューションやアプリケーションロードバランサーなどのAWSリソースに関連付けられます。

**Firewall Managerポリシーは、ルールグループに対して「ブロック」または「カウント」のオプションのみを許可します**（「許可」オプションはありません）。

## 列挙
```
# Get admin account
aws fms get-admin-account

# Get member accounts
aws fms list-member-accounts

# Get policies
aws fms list-policies

# Get App list
aws fms list-apps-lists --max-results 10

# Get notification channel (if any)
aws fms get-notification-channel

# Get resource sets
aws fms list-resource-sets

# Get admin scope: Get resources Firewall Manager can manage
aws fms get-admin-scope --admin-account <acc-id> # ReadOnly policy is not enough for this

# Get Firewall Manager administrators within the organization that are onboarded to Firewall Manager by AssociateAdminAccount
aws fms list-admin-accounts-for-organization # ReadOnly policy is not enough for this
```
## 検出回避

TODO, PRs accepted

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)で</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックする
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加する、または**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)を**フォローする**。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを**共有する**。

</details>
