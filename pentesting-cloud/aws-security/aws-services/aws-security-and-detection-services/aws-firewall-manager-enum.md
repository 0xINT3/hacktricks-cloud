# AWS - Enumera√ß√£o do Firewall Manager

<details>

<summary><strong>Aprenda hacking na AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>

## Firewall Manager

O **AWS Firewall Manager** simplifica a gest√£o e manuten√ß√£o do **AWS WAF, AWS Shield Advanced, grupos de seguran√ßa Amazon VPC e AWS Network Firewall** em v√°rias contas e recursos. Ele permite que voc√™ configure suas regras de firewall, prote√ß√µes Shield Advanced, grupos de seguran√ßa VPC e configura√ß√µes de Network Firewall apenas uma vez, com o servi√ßo **aplicando automaticamente essas regras e prote√ß√µes em suas contas e recursos**, incluindo os rec√©m-adicionados.

O servi√ßo oferece a capacidade de **agrupar e proteger recursos espec√≠ficos juntos**, como aqueles que compartilham uma tag comum ou todas as suas distribui√ß√µes CloudFront. Uma vantagem significativa do Firewall Manager √© sua capacidade de **estender automaticamente a prote√ß√£o para recursos rec√©m-adicionados** em sua conta.

Os **pr√©-requisitos** incluem configurar uma Conta Mestre do Firewall Manager, estabelecer uma organiza√ß√£o AWS com contas de membros e habilitar o AWS Config.

Um **grupo de regras** (uma cole√ß√£o de regras WAF) pode ser incorporado em uma Pol√≠tica do AWS Firewall Manager, que √© ent√£o vinculada a recursos AWS espec√≠ficos, como distribui√ß√µes CloudFront ou balanceadores de carga de aplicativos.

√â importante observar que as **pol√≠ticas do Firewall Manager permitem apenas a√ß√µes de "Bloquear" ou "Contar"** para um grupo de regras, sem a op√ß√£o "Permitir".

### Enumera√ß√£o
```
# Get admin account
aws fms get-admin-account

# Get member accounts
aws fms list-member-accounts

# Get policies
aws fms list-policies

# Get App list
aws fms list-apps-lists --max-results 10

# Get notification channel (if any)
aws fms get-notification-channel

# Get resource sets
aws fms list-resource-sets

# Get admin scope: Get resources Firewall Manager can manage
aws fms get-admin-scope --admin-account <acc-id> # ReadOnly policy is not enough for this

# Get Firewall Manager administrators within the organization that are onboarded to Firewall Manager by AssociateAdminAccount
aws fms list-admin-accounts-for-organization # ReadOnly policy is not enough for this
```
### Bypass Detection

TODO, PRs accepted

## References

* [https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-fms.html](https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-fms.html)

<details>

<summary><strong>Aprenda hacking na AWS de zero a her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os reposit√≥rios** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
