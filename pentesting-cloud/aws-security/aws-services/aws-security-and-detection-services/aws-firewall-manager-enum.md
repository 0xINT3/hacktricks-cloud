# AWS - ファイアウォールマネージャーの列挙

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* もし **HackTricks で会社を宣伝したい**場合や、**PEASS の最新バージョンにアクセスしたい**場合、または **HackTricks をPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式のPEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけてください。これは私たちの独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしてください 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ハッキングのトリックを共有するには、** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

## ファイアウォールマネージャー

AWSファイアウォールマネージャーは、**AWS WAF、AWS Shield Advanced、Amazon VPCセキュリティグループ、およびAWS Network Firewall**の複数のアカウントとリソースにわたる管理とメンテナンスタスクを簡素化します。ファイアウォールマネージャーを使用すると、AWS WAFファイアウォールルール、Shield Advanced保護、Amazon VPCセキュリティグループ、およびNetwork Firewallファイアウォールを一度だけ設定できます。このサービスは、新しいリソースを追加するときにも、ルールと保護を自動的にアカウントとリソース全体に適用します。

ファイアウォールマネージャーは、特定のリソースを**グループ化して保護**することができます。たとえば、特定のタグを持つすべてのリソースや、すべてのCloudFrontディストリビューションなどです。ファイアウォールマネージャーの主な利点の1つは、アクティブになると自動的にアカウントに追加される特定のリソースを自動的に保護することです。

**前提条件**: ファイアウォールマネージャーマスターアカウントを作成し、AWS組織をセットアップし、メンバーアカウントを追加し、AWS Configを有効にしてください。

**ルールグループ**（WAFルールのセット）は、AWSファイアウォールマネージャーポリシーに追加できます。このポリシーは、CloudFrontディストリビューションやアプリケーションロードバランサーなどのAWSリソースに関連付けられます。

**ファイアウォールマネージャーポリシーでは、「ブロック」または「カウント」**のみがルールグループに対して許可されています（「許可」はありません）。

## 列挙
```
# Get admin account
aws fms get-admin-account

# Get member accounts
aws fms list-member-accounts

# Get policies
aws fms list-policies

# Get App list
aws fms list-apps-lists --max-results 10

# Get notification channel (if any)
aws fms get-notification-channel

# Get resource sets
aws fms list-resource-sets

# Get admin scope: Get resources Firewall Manager can manage
aws fms get-admin-scope --admin-account <acc-id> # ReadOnly policy is not enough for this

# Get Firewall Manager administrators within the organization that are onboarded to Firewall Manager by AssociateAdminAccount
aws fms list-admin-accounts-for-organization # ReadOnly policy is not enough for this
```
## 検出回避

TODO、PRは受け付けています

<details>

<summary><strong>ハックトリックスをサポートして特典を得る！</strong></summary>

* **会社の広告をハックトリックスで見たい**場合や、**PEASSの最新バージョンにアクセスしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をご確認ください！
* [**公式PEASS＆ハックトリックスグッズ**](https://peass.creator-spring.com)を手に入れる
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で私をフォローする🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ハッキングのトリックを共有するために、PRを** [**HackTricks**](https://github.com/carlospolop/hacktricks) **および** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **のGitHubリポジトリに提出してください。**

</details>
