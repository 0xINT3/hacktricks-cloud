# AWS - Enumeración de Firewall Manager

<details>

<summary><strong>¡Apoya a HackTricks y obtén beneficios!</strong></summary>

* Si quieres ver tu **empresa anunciada en HackTricks** o si quieres acceder a la **última versión de PEASS o descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop).
* Obtén el [**merchandising oficial de PEASS y HackTricks**](https://peass.creator-spring.com).
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colección exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family).
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) en GitHub.

</details>

## Firewall Manager

AWS Firewall Manager simplifica tus tareas de administración y mantenimiento en múltiples cuentas y recursos para **AWS WAF, AWS Shield Advanced, grupos de seguridad de Amazon VPC y AWS Network Firewall**. Con Firewall Manager, configuras tus reglas de firewall de AWS WAF, protecciones de Shield Advanced, grupos de seguridad de Amazon VPC y firewalls de Network Firewall solo una vez. El servicio **aplica automáticamente las reglas y protecciones en todas tus cuentas y recursos**, incluso al agregar nuevos recursos.

Puede **agrupar y proteger recursos específicos juntos**, por ejemplo, todos los recursos con una etiqueta particular o todas tus distribuciones de CloudFront. Uno de los principales beneficios de Firewall Manager es que **protege automáticamente ciertos recursos que se agregan** a tu cuenta a medida que se vuelven activos.

**Requisitos**: Crear una cuenta principal de Firewall Manager, configurar una organización de AWS y agregar nuestras cuentas de miembros y habilitar AWS Config.

Un **grupo de reglas** (un conjunto de reglas de WAF juntas) se puede agregar a una Política de Firewall Manager de AWS que luego se asocia a recursos de AWS, como tus distribuciones de CloudFront o equilibrios de carga de aplicaciones.

Las políticas de **Firewall Manager solo permiten las opciones "Bloquear" o "Contar"** para un grupo de reglas (no hay opción "Permitir").

## Enumeración
```
# Get admin account
aws fms get-admin-account

# Get member accounts
aws fms list-member-accounts

# Get policies
aws fms list-policies

# Get App list
aws fms list-apps-lists --max-results 10

# Get notification channel (if any)
aws fms get-notification-channel

# Get resource sets
aws fms list-resource-sets

# Get admin scope: Get resources Firewall Manager can manage
aws fms get-admin-scope --admin-account <acc-id> # ReadOnly policy is not enough for this

# Get Firewall Manager administrators within the organization that are onboarded to Firewall Manager by AssociateAdminAccount
aws fms list-admin-accounts-for-organization # ReadOnly policy is not enough for this
```
## Bypassar la Detección

TODO, se aceptan PRs

<details>

<summary><strong>¡Apoya a HackTricks y obtén beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **última versión de PEASS o descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop).
* Obtén el [**merchandising oficial de PEASS y HackTricks**](https://peass.creator-spring.com).
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colección exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family).
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) en GitHub.

</details>
