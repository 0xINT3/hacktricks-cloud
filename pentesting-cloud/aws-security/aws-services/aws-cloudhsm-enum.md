# AWS - CloudHSM Enum

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez** üí¨ **le groupe Discord** ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) **et** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos.**

</details>

## HSM - Module de s√©curit√© mat√©rielle

Cloud HSM est un **dispositif mat√©riel** valid√© FIPS 140 niveau deux pour le stockage s√©curis√© de cl√©s cryptographiques (notez que CloudHSM est un appareil mat√©riel, ce n'est pas un service virtualis√©). Il s'agit d'un appareil SafeNetLuna 7000 pr√©charg√© avec la version 5.3.13. Il existe deux versions de firmware et celle que vous choisissez d√©pend vraiment de vos besoins exacts. L'une est conforme √† FIPS 140-2 et il y avait une version plus r√©cente qui peut √™tre utilis√©e.

La caract√©ristique inhabituelle de CloudHSM est qu'il s'agit d'un dispositif physique et qu'il n'est donc **pas partag√© avec d'autres clients**, ou comme on l'appelle couramment, multi-locataire. Il s'agit d'un appareil d√©di√© √† un seul locataire exclusivement mis √† disposition de vos charges de travail.

En g√©n√©ral, un appareil est disponible dans les 15 minutes si la capacit√© est disponible, mais dans certaines zones, cela pourrait ne pas √™tre le cas.

Comme il s'agit d'un dispositif physique qui vous est d√©di√©, **les cl√©s sont stock√©es sur l'appareil**. Les cl√©s doivent √™tre soit **r√©pliqu√©es sur un autre appareil**, sauvegard√©es sur un stockage hors ligne, ou export√©es vers un appareil de secours. **Cet appareil n'est pas sauvegard√©** par S3 ou tout autre service chez AWS comme KMS.

Dans **CloudHSM**, vous devez **mettre √† l'√©chelle le service vous-m√™me**. Vous devez provisionner suffisamment d'appareils CloudHSM pour g√©rer tous vos besoins de chiffrement en fonction des algorithmes de chiffrement que vous avez choisis pour votre solution.\
La mise √† l'√©chelle du service de gestion de cl√©s est effectu√©e par AWS et se met automatiquement √† l'√©chelle en fonction de la demande, donc √† mesure que votre utilisation augmente, le nombre d'appareils CloudHSM requis peut √©galement augmenter. Gardez cela √† l'esprit lorsque vous mettez √† l'√©chelle votre solution et si votre solution a une mise √† l'√©chelle automatique, assurez-vous que votre √©chelle maximale est prise en compte avec suffisamment d'appareils CloudHSM pour servir la solution.

Tout comme la mise √† l'√©chelle, **les performances d√©pendent de vous avec CloudHSM**. Les performances varient en fonction de l'algorithme de chiffrement utilis√© et de la fr√©quence √† laquelle vous devez acc√©der ou r√©cup√©rer les cl√©s pour chiffrer les donn√©es. Les performances du service de gestion de cl√©s sont g√©r√©es par Amazon et se mettent automatiquement √† l'√©chelle en fonction des besoins de la demande. Les performances de CloudHSM sont obtenues en ajoutant plus d'appareils et si vous avez besoin de plus de performances, vous ajoutez simplement des appareils ou modifiez la m√©thode de chiffrement pour l'algorithme qui est plus rapide.

Si votre solution est **multi-r√©gion**, vous devriez ajouter plusieurs **appareils CloudHSM dans la deuxi√®me r√©gion et travailler sur la connectivit√© interr√©gionale avec une connexion VPN priv√©e** ou une m√©thode pour garantir que le trafic est toujours prot√©g√© entre l'appareil √† chaque couche de la connexion. Si vous avez une solution multi-r√©gion, vous devez r√©fl√©chir √† la fa√ßon de **r√©pliquer les cl√©s et de configurer des appareils CloudHSM suppl√©mentaires dans les r√©gions o√π vous op√©rez**. Vous pouvez tr√®s rapidement vous retrouver dans une situation o√π vous avez six ou huit appareils r√©partis dans plusieurs r√©gions, permettant une redondance compl√®te de vos cl√©s de chiffrement.

**CloudHSM** est un service de classe entreprise pour le stockage s√©curis√© de cl√©s et peut √™tre utilis√© comme **racine de confiance pour une entreprise**. Il peut stocker des cl√©s priv√©es dans PKI et des cl√©s d'autorit√© de certification dans des impl√©mentations X509. En plus des cl√©s sym√©triques utilis√©es dans les algorithmes sym√©triques tels que AES, **KMS stocke et prot√®ge physiquement uniquement les cl√©s sym√©triques (ne peut pas agir en tant qu'autorit√© de certification)**, donc si vous devez stocker des cl√©s PKI et CA, un ou deux CloudHSM pourraient √™tre votre solution.

**CloudHSM est consid√©rablement plus cher que Key Management Service**. CloudHSM est un appareil mat√©riel, vous avez donc des co√ªts fixes pour provisionner l'appareil CloudHSM, puis un co√ªt horaire pour faire fonctionner l'appareil. Le co√ªt est multipli√© par autant d'appareils CloudHSM que n√©cessaire pour r√©pondre √† vos besoins sp√©cifiques.\
De plus, il faut tenir compte de l'achat de logiciels tiers tels que les suites de logiciels SafeNet ProtectV et du temps et des efforts d'int√©gration. Key Management Service est bas√© sur l'utilisation et d√©pend du nombre de cl√©s que vous avez et des op√©rations d'entr√©e et de sortie. Comme la gestion des cl√©s offre une int√©gration transparente avec de nombreux services AWS, les co√ªts d'int√©gration devraient √™tre nettement inf√©rieurs. Les co√ªts doivent √™tre consid√©r√©s comme un facteur secondaire dans les solutions de chiffrement. Le chiffrement est g√©n√©ralement utilis√© pour la s√©curit√© et la conformit√©.

Avec CloudHSM, vous √™tes le seul √† avoir acc√®s aux cl√©s et sans entrer dans trop de d√©tails, avec CloudHSM, vous g√©rez vos propres cl√©s. **Avec KMS, vous et Amazon g√©rez conjointement vos cl√©s**. AWS dispose de nombreuses sauvegardes de politique contre les abus et **ne peut toujours pas acc√©der √† vos cl√©s dans l'une ou l'autre des solutions**. La principale distinction est la conformit√© en ce qui concerne la propri√©t√© et la gestion des cl√©s, et avec CloudHSM, il s'agit d'un appareil mat√©riel que vous g√©rez et entretenez avec un acc√®s exclusif √† vous et √† vous seul.

### Suggestions CloudHSM

1. D√©ployez toujours CloudHSM dans une configuration **HA avec au moins deux appareils dans des zones de disponibilit√© s√©par√©es**, et si possible, d√©ployez un troisi√®me soit sur site, soit dans une autre r√©gion chez AWS.
2. Soyez prudent lors de l'**initialisation** d'un **CloudHSM**. Cette action **d√©truira les cl√©s**, alors ayez une autre copie des cl√©s ou soyez absolument s√ªr que vous n'avez pas besoin de ces cl√©s et que vous n'en aurez jamais besoin pour d√©crypter des donn√©es.
3. CloudHSM ne **prend en charge que certaines versions de firmware** et de logiciels. Avant de proc√©der √† une mise √† jour, assurez-vous que le firmware et/ou le logiciel est pris en charge par AWS. Vous pouvez toujours contacter le support AWS pour v√©rifier si le guide de mise √† niveau n'est pas clair.
4. La **configuration r√©seau ne doit jamais √™tre modifi√©e**. Rappelez-vous, c'est dans un centre de donn√©es AWS et AWS surveille le mat√©riel de base pour vous. Cela signifie que si le mat√©riel tombe en panne, ils le remplaceront pour vous, mais seulement s'ils savent qu'il est en panne.
5. Le **transfert SysLog ne doit pas √™tre supprim√© ou modifi√©**. Vous pouvez toujours **ajouter** un transfert SysLog pour diriger les journaux vers votre propre outil de collecte.
6. La configuration **SNMP** a les m√™mes restrictions de base que le r√©seau et le dossier SysLog. Cela **ne doit pas √™tre modifi√© ou supprim√©**. Une configuration SNMP **suppl√©mentaire** est acceptable, assurez-vous simplement de ne pas modifier celle qui est d√©j√† sur l'appareil.
7. Une autre bonne pratique int√©ressante d'AWS est de **ne pas modifier la configuration
### Qu'est-ce qu'un module de s√©curit√© mat√©rielle

Un module de s√©curit√© mat√©rielle (HSM) est un dispositif cryptographique d√©di√© utilis√© pour g√©n√©rer, stocker et g√©rer des cl√©s cryptographiques et prot√©ger des donn√©es sensibles. Il est con√ßu pour fournir un niveau √©lev√© de s√©curit√© en isolant physiquement et √©lectroniquement les fonctions cryptographiques du reste du syst√®me.

La fa√ßon dont un HSM fonctionne peut varier en fonction du mod√®le et du fabricant sp√©cifique, mais g√©n√©ralement, les √©tapes suivantes se produisent :

1. **G√©n√©ration de cl√©** : L'HSM g√©n√®re une cl√© cryptographique al√©atoire √† l'aide d'un g√©n√©rateur de nombres al√©atoires s√©curis√©.
2. **Stockage de cl√©** : La cl√© est **stock√©e en toute s√©curit√© dans l'HSM, o√π elle ne peut √™tre acc√©d√©e que par des utilisateurs ou des processus autoris√©s**.
3. **Gestion de cl√©** : L'HSM fournit une gamme de fonctions de gestion de cl√©, y compris la rotation, la sauvegarde et la r√©vocation de cl√©.
4. **Op√©rations cryptographiques** : L'HSM effectue une gamme d'op√©rations cryptographiques, y compris le chiffrement, le d√©chiffrement, la signature num√©rique et l'√©change de cl√©. Ces op√©rations sont **effectu√©es dans l'environnement s√©curis√© de l'HSM**, qui prot√®ge contre l'acc√®s non autoris√© et la manipulation.
5. **Journalisation d'audit** : L'HSM enregistre toutes les op√©rations cryptographiques et les tentatives d'acc√®s, qui peuvent √™tre utilis√©es √† des fins de conformit√© et d'audit de s√©curit√©.

Les HSM peuvent √™tre utilis√©s pour une large gamme d'applications, y compris les transactions en ligne s√©curis√©es, les certificats num√©riques, les communications s√©curis√©es et le chiffrement de donn√©es. Ils sont souvent utilis√©s dans des industries qui n√©cessitent un niveau √©lev√© de s√©curit√©, telles que la finance, les soins de sant√© et le gouvernement.

Dans l'ensemble, le niveau √©lev√© de s√©curit√© fourni par les HSM rend **tr√®s difficile l'extraction de cl√©s brutes √† partir d'eux, et toute tentative de le faire est souvent consid√©r√©e comme une violation de la s√©curit√©**. Cependant, il peut y avoir **certaines situations** o√π une **cl√© brute pourrait √™tre extraite** par du personnel autoris√© √† des fins sp√©cifiques, comme dans le cas d'une proc√©dure de r√©cup√©ration de cl√©.

### √ânum√©ration

```
```

<details>

<summary><strong>Soutenez HackTricks et obtenez des avantages !</strong></summary>

* Si vous voulez voir votre **entreprise annonc√©e dans HackTricks** ou si vous voulez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>