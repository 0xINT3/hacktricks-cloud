# AWS - CloudHSM Enum

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* **HackTricksで会社を宣伝したい**場合や、**最新バージョンのPEASSを見たい**場合、またはHackTricksをPDFでダウンロードしたい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを見つけましょう
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしましょう 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **ハッキングのトリックを共有するには、PRを** [**HackTricks**](https://github.com/carlospolop/hacktricks) **および** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **のGitHubリポジトリに提出してください。**

</details>

## HSM - ハードウェアセキュリティモジュール

Cloud HSMは、安全な暗号鍵の保存のためのFIPS 140レベル2の検証済み**ハードウェアデバイス**です（CloudHSMはハードウェアアプライアンスであり、仮想化されたサービスではありません）。これは、5.3.13がプリロードされたSafeNetLuna 7000アプライアンスです。2つのファームウェアバージョンがあり、どちらを選ぶかは実際のニーズに基づいています。1つはFIPS 140-2の準拠であり、新しいバージョンも使用できます。

CloudHSMの特異な機能は、それが物理デバイスであるため、他の顧客と共有されない、または一般的にはマルチテナントと呼ばれることです。これは、専用のシングルテナントアプライアンスであり、あなたのワークロードにのみ利用可能です。

通常、デバイスは15分以内に利用可能になります（容量がある場合）。ただし、一部のゾーンでは利用できない場合があります。

これはあなた専用の物理デバイスなので、**鍵はデバイス上に保存されます**。鍵は、別のデバイスに**レプリケート**したり、オフラインストレージにバックアップしたり、スタンバイアプライアンスにエクスポートする必要があります。このデバイスは、S3やKMSのようなAWSの他のサービスによってバックアップされていません。

**CloudHSM**では、**サービスのスケーリングは自己責任**です。ソリューションに実装する暗号化アルゴリズムに基づいて、暗号化ニーズに対応するために十分なCloudHSMデバイスをプロビジョニングする必要があります。キーマネジメントサービスのスケーリングはAWSによって実行され、需要に応じて自動的にスケーリングされます。ソリューションのスケーリング時にはこれを考慮に入れ、ソリューションに自動スケーリングがある場合は、十分なCloudHSMアプライアンスがソリューションに対応できるようにしてください。

スケーリングと同様に、**パフォーマンスはCloudHSMに依存します**。パフォーマンスは、使用される暗号化アルゴリズムとデータの暗号化に必要な鍵のアクセスまたは取得頻度に基づいて異なります。キーマネジメントサービスのパフォーマンスはAmazonによって処理され、需要に応じて自動的にスケーリングされます。CloudHSMのパフォーマンスは、デバイスを追加することによって達成され、さらなるパフォーマンスが必要な場合はデバイスを追加するか、より高速なアルゴリズムに暗号化方法を変更します。

ソリューションが**マルチリージョン**の場合、第2リージョンに複数の**CloudHSMアプライアンスを追加**し、プライベートVPN接続などを使用してクロスリージョンの接続を確保する必要があります。マルチリージョンのソリューションでは、鍵のレプリケーションと追加のCloudHSMデバイスの設定を考える必要があります。複数のリージョンにわたって6つまたは8つのデバイスが配置され、暗号化キーの完全な冗長性が実現されるシナリオにすぐに入ることができます。

**CloudHSM**は、セキュリティキーの安全な保存のためのエンタープライズクラスのサービスであり、企業の**信頼のルート**として使用することができます。PKIでのプライベートキーとX509実装での証明書機関キーを格納することができます。AESなどの対称アルゴリズムで使用される対称キーのみをKMSが格納し、物理的に保護します（証明書機関として機能することはできません）。したがって、PKIおよびCAキーを格納するには、CloudHSMを2つまたは3つ使用することができます。

**CloudHSMはKey Management Serviceよりもかなり高価です**。CloudHSMはハードウェアアプライアンスなので、CloudHSMデバイスをプロビジョニングするための固定コストと、アプライアンスを実行するための時間ごとのコストがあります。このコストは、特定の要件を満たすために必要なCloudHSMアプライアンスの数によって乗算されます。さらに、SafeNet ProtectVソフトウェアスイートなどのサードパーティソフトウェアの購入、統合にかかる時間と労力も考慮する必要があります。キーマネジメントサービスは使用量に基づいており、キーの数と入出力操作に依存します。キーマネジメントは多くのAWSサービスとシームレスに統合されるため、統合コストは大幅に低くなるはずです。コストは、暗号化ソリューションにおいては二次的な要素として考慮すべきです。暗号化は通常、セキュリティとコンプライアンスのために使用されます。

**CloudHSMでは、キーにアクセスできるのはあな
### ハードウェアセキュリティモジュールとは何ですか

ハードウェアセキュリティモジュール（HSM）は、暗号鍵の生成、保存、管理、および機密データの保護に使用される専用の暗号デバイスです。HSMは、暗号機能を物理的および電子的にシステムの他の部分から分離することにより、高いレベルのセキュリティを提供するよう設計されています。

HSMの動作方法は、特定のモデルやメーカーによって異なる場合がありますが、一般的には次の手順が行われます：

1. **鍵の生成**：HSMは、安全な乱数生成器を使用してランダムな暗号鍵を生成します。
2. **鍵の保存**：鍵は**HSM内で安全に保存され、認証されたユーザーまたはプロセスのみがアクセスできます**。
3. **鍵の管理**：HSMは、鍵のローテーション、バックアップ、および失効など、さまざまな鍵管理機能を提供します。
4. **暗号操作**：HSMは、暗号化、復号化、デジタル署名、および鍵交換など、さまざまな暗号操作を実行します。これらの操作は、**HSMの安全な環境内で実行され**、不正アクセスや改ざんから保護されます。
5. **監査ログ**：HSMは、すべての暗号操作とアクセス試行をログに記録し、コンプライアンスおよびセキュリティ監査の目的に使用できます。

HSMは、安全なオンライン取引、デジタル証明書、安全な通信、およびデータの暗号化など、さまざまなアプリケーションに使用できます。金融、医療、政府など、高いセキュリティレベルが必要な産業でよく使用されます。

全体的に、HSMが提供する高いセキュリティレベルにより、**HSMから生の鍵を抽出することは非常に困難であり、それを試みることはセキュリティ上の侵害と見なされることが多い**です。ただし、特定の目的（キーの回復手順など）のために、**許可された人物によって生の鍵が抽出される場合**があるかもしれません。

### 列挙
```
```
<details>

<summary><strong>Support HackTricksと特典を得る！</strong></summary>

* **HackTricksで会社の広告を見たい**場合や、**最新バージョンのPEASSを入手したい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をご確認ください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを発見しましょう
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしましょう 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **ハッキングのトリックを共有するには、** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>
