# AWS - CloudHSM枚举

<details>

<summary><strong>支持HackTricks并获得福利！</strong></summary>

* 如果您想在HackTricks中看到您的公司广告，或者如果您想访问PEASS的最新版本或下载PDF版的HackTricks，请查看[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)！
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github仓库提交PR来分享您的黑客技巧**。

</details>

## HSM - 硬件安全模块

Cloud HSM是一个FIPS 140级别二验证的**硬件设备**，用于安全的加密密钥存储（请注意，CloudHSM是一个硬件设备，不是虚拟化服务）。它是一个预装了5.3.13版本的SafeNetLuna 7000设备。有两个固件版本，您选择哪个版本取决于您的确切需求。一个是符合FIPS 140-2标准的版本，还有一个可以使用的更新版本。

CloudHSM的不寻常之处在于它是一个物理设备，因此它**不与其他客户共享**，或者通常所说的多租户。它是一个专用的单租户设备，专门为您的工作负载提供。

通常情况下，设备在15分钟内可用，假设有足够的容量，但在某些区域可能没有可用设备。

由于这是一个专门为您提供的物理设备，**密钥存储在设备上**。密钥需要被复制到另一个设备，备份到离线存储，或者导出到备用设备。**此设备不受S3或AWS的任何其他服务（如KMS）支持**。

在**CloudHSM**中，您必须**自行扩展服务**。根据您选择为解决方案实施的加密算法，您必须提供足够的CloudHSM设备来处理您的加密需求。\
密钥管理服务的扩展由AWS执行，并根据需求自动扩展，因此随着使用量的增长，所需的CloudHSM设备数量可能会增加。在扩展解决方案时，请记住这一点，并确保您的最大扩展范围考虑到了足够的CloudHSM设备来服务解决方案。

与扩展一样，**CloudHSM的性能取决于您**。性能根据使用的加密算法以及访问或检索密钥以加密数据的频率而变化。密钥管理服务的性能由Amazon处理，并根据需求自动扩展。通过添加更多设备来实现CloudHSM的性能，并且如果您需要更高的性能，可以添加设备或更改为更快的加密方法。

如果您的解决方案是**多区域**的，您应该在第二个区域中添加几个**CloudHSM设备，并通过私有VPN连接**或其他方法解决跨区域连接的问题，以确保流量始终在每个连接层中受到保护。如果您有一个多区域解决方案，您需要考虑如何**复制密钥并在您操作的区域中设置额外的CloudHSM设备**。您很快就会发现，您在多个区域分布的六个或八个设备，可以实现对加密密钥的完全冗余。

**CloudHSM**是一个用于安全密钥存储的企业级服务，可以用作企业的**信任根**。它可以在PKI中存储私钥和证书颁发机构密钥，以及在X509实现中。除了对称算法（如AES）中使用的对称密钥外，**KMS仅存储和物理保护对称密钥（无法充当证书颁发机构）**，因此，如果您需要存储PKI和CA密钥，CloudHSM可能是您的解决方案。

**CloudHSM的成本比密钥管理服务高得多**。CloudHSM是一个硬件设备，因此您需要支付固定成本来配置CloudHSM设备，然后还有一个按小时计费的运行CloudHSM的费用，目前为每小时1.88美元，或大约每月1,373美元。

使用CloudHSM的最常见原因是必须满足监管要求的合规标准。**KMS不支持非对称密钥的数据支持。CloudHSM允许您安全地存储非对称密钥**。

在初始化CloudHSM时，公钥将安装在HSM设备上，以便您可以通过SSH访问CloudHSM实例。
### 什么是硬件安全模块

硬件安全模块（HSM）是一种专用的加密设备，用于生成、存储和管理加密密钥并保护敏感数据。它通过物理和电子隔离加密功能与系统的其他部分，提供了高级别的安全性。

HSM的工作方式可能因具体型号和制造商而异，但通常会发生以下步骤：

1. **密钥生成**：HSM使用安全的随机数生成器生成随机的加密密钥。
2. **密钥存储**：密钥被**安全地存储在HSM内部，只有经授权的用户或进程才能访问**。
3. **密钥管理**：HSM提供一系列密钥管理功能，包括密钥轮换、备份和吊销。
4. **加密操作**：HSM执行各种加密操作，包括加密、解密、数字签名和密钥交换。这些操作是在HSM的安全环境中进行的，可以防止未经授权的访问和篡改。
5. **审计日志**：HSM记录所有加密操作和访问尝试，可用于合规性和安全审计目的。

HSM可用于广泛的应用，包括安全的在线交易、数字证书、安全通信和数据加密。它们通常用于需要高级别安全性的行业，如金融、医疗保健和政府。

总的来说，HSM提供的高级别安全性使得从中提取原始密钥变得**非常困难，试图这样做通常被视为安全漏洞**。然而，在特定情况下，例如密钥恢复过程中，经授权人员可能会提取**原始密钥**以满足特定需求。

### 枚举
```
```
<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想看到您的公司在 HackTricks 中被广告，或者如果您想访问最新版本的 PEASS 或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获得[**官方 PEASS & HackTricks 商品**](https://peass.creator-spring.com)
* 发现我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品，[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass)，或者在 **Twitter** 上 **关注** 我 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来分享您的黑客技巧。

</details>
