# Test de p√©n√©tration AWS

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert Red Team AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

## Informations de base

**Avant de commencer le test de p√©n√©tration** d'un environnement **AWS**, il y a quelques **choses de base que vous devez savoir** sur le fonctionnement d'AWS pour vous aider √† comprendre ce que vous devez faire, comment trouver des configurations incorrectes et comment les exploiter.

Des concepts tels que la hi√©rarchie de l'organisation, IAM et d'autres concepts de base sont expliqu√©s dans :

{% content-ref url="aws-basic-information/" %}
[aws-basic-information](aws-basic-information/)
{% endcontent-ref %}

## Laboratoires pour apprendre

* [https://github.com/RhinoSecurityLabs/cloudgoat](https://github.com/RhinoSecurityLabs/cloudgoat)
* [https://github.com/BishopFox/iam-vulnerable](https://github.com/BishopFox/iam-vulnerable)
* [https://github.com/nccgroup/sadcloud](https://github.com/nccgroup/sadcloud)
* [https://github.com/bridgecrewio/terragoat](https://github.com/bridgecrewio/terragoat)
* [https://github.com/ine-labs/AWSGoat](https://github.com/ine-labs/AWSGoat)
* [http://flaws.cloud/](http://flaws.cloud/)
* [http://flaws2.cloud/](http://flaws2.cloud/)

Outils pour simuler des attaques :

* [https://github.com/Datadog/stratus-red-team/](https://github.com/Datadog/stratus-red-team/)
* [https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main](https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main)

## M√©thodologie du testeur de p√©n√©tration/Red Team AWS

Pour auditer un environnement AWS, il est tr√®s important de savoir : quels **services sont utilis√©s**, ce qui est **expos√©**, qui a **acc√®s** √† quoi, et comment les services AWS internes et les services externes sont connect√©s.

Du point de vue de la Red Team, le **premier pas pour compromettre un environnement AWS** est de parvenir √† obtenir des **informations d'identification**. Voici quelques id√©es sur la fa√ßon de le faire :

* **Fuites** sur github (ou similaire) - OSINT
* Ing√©nierie **sociale**
* R√©utilisation de **mot de passe** (fuites de mots de passe)
* Vuln√©rabilit√©s dans les applications h√©berg√©es sur AWS
* [**Falsification de requ√™te c√¥t√© serveur**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) avec acc√®s √† l'endpoint de m√©tadonn√©es
* **Lecture de fichiers locaux**
* `/home/USERNAME/.aws/credentials`
* `C:\Users\USERNAME\.aws\credentials`
* Tiers **compromis**
* Employ√© **interne**
* [**Cognito** ](aws-services/aws-cognito-enum/#cognito)informations d'identification

Ou en **compromettant un service non authentifi√©** expos√© :

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

Ou si vous effectuez une **r√©vision**, vous pourriez simplement **demander des informations d'identification** avec ces r√¥les :

{% content-ref url="aws-permissions-for-a-pentest.md" %}
[aws-permissions-for-a-pentest.md](aws-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
Apr√®s avoir r√©ussi √† obtenir des informations d'identification, vous devez savoir **√† qui appartiennent ces informations d'identification**, et **√† quoi elles ont acc√®s**, vous devez donc effectuer une certaine √©num√©ration de base :
{% endhint %}

## √ânum√©ration de base

### SSRF

Si vous avez trouv√© un SSRF sur une machine √† l'int√©rieur d'AWS, consultez cette page pour des astuces :

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf" %}

### Qui suis-je

Une des premi√®res choses que vous devez savoir est qui vous √™tes (dans quel compte vous √™tes et d'autres informations sur l'environnement AWS) :
```bash
# Easiest way, but might be monitored?
aws sts get-caller-identity
aws iam get-user # This will get your own user

# If you have a Key ID
aws sts get-access-key-info --access-key-id=ASIA1234567890123456

# Get inside error message
aws sns publish --topic-arn arn:aws:sns:us-east-1:*account id*:aaa --message aaa

# From metadata
TOKEN=`curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600"`
curl -H "X-aws-ec2-metadata-token: $TOKEN" http://169.254.169.254/latest/dynamic/instance-identity/document
```
{% hint style="danger" %}
Notez que les entreprises peuvent utiliser des **tokens canary** pour identifier quand des **tokens sont vol√©s et utilis√©s**. Il est recommand√© de v√©rifier si un token est un token canary ou non avant de l'utiliser.\
Pour plus d'informations, [**consultez cette page**](aws-services/aws-security-and-detection-services/aws-cloudtrail-enum.md#honeytokens-bypass).
{% endhint %}

### √ânum√©ration de l'organisation

{% content-ref url="../aws-pentesting/aws-services/aws-organizations-enum.md" %}
[aws-organizations-enum.md](../aws-pentesting/aws-services/aws-organizations-enum.md)
{% endcontent-ref %}

### √ânum√©ration IAM

Si vous avez suffisamment de permissions, **v√©rifier les privil√®ges de chaque entit√© √† l'int√©rieur du compte AWS** vous aidera √† comprendre ce que vous et d'autres identit√©s pouvez faire et comment **escalader les privil√®ges**.

Si vous n'avez pas suffisamment de permissions pour √©num√©rer IAM, vous pouvez les **voler en les for√ßant** pour les d√©couvrir.\
Consultez **comment effectuer l'√©num√©ration et le for√ßage** dans :

{% content-ref url="aws-services/aws-iam-enum.md" %}
[aws-iam-enum.md](aws-services/aws-iam-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
Maintenant que vous **avez des informations sur vos identifiants** (et si vous √™tes une √©quipe rouge, esp√©rons que vous **n'avez pas √©t√© d√©tect√©**). Il est temps de d√©couvrir quels services sont utilis√©s dans l'environnement.\
Dans la section suivante, vous pouvez v√©rifier quelques fa√ßons d'**√©num√©rer certains services courants**.
{% endhint %}

## √ânum√©ration des services, Post-Exploitation & Persistence

AWS propose une quantit√© impressionnante de services, sur la page suivante, vous trouverez des **informations de base, des triches pour l'√©num√©ration**, comment **√©viter la d√©tection**, obtenir **la persistance**, et d'autres **astuces de post-exploitation** √† leur sujet :

{% content-ref url="aws-services/" %}
[aws-services](aws-services/)
{% endcontent-ref %}

Notez que vous **n'avez pas** besoin d'effectuer tout le travail **manuellement**, plus bas dans ce post, vous pouvez trouver une **section sur les** [**outils automatiques**](./#automated-tools).

De plus, √† ce stade, vous pourriez avoir d√©couvert **davantage de services expos√©s aux utilisateurs non authentifi√©s**, que vous pourriez exploiter :

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

## √âl√©vation de privil√®ges

Si vous pouvez **v√©rifier au moins vos propres permissions** sur diff√©rentes ressources, vous pourriez **v√©rifier si vous √™tes en mesure d'obtenir des permissions suppl√©mentaires**. Vous devriez vous concentrer au moins sur les permissions indiqu√©es dans :

{% content-ref url="aws-privilege-escalation/" %}
[aws-privilege-escalation](aws-privilege-escalation/)
{% endcontent-ref %}

## Services Expos√©s Publiquement

En √©num√©rant les services AWS, vous pourriez en trouver certains **exposant des √©l√©ments sur Internet** (ports VM/Containers, bases de donn√©es ou services de file d'attente, instantan√©s ou compartiments...).\
En tant que testeur d'intrusion/√©quipe rouge, vous devriez toujours v√©rifier si vous pouvez trouver des **informations sensibles/vuln√©rabilit√©s** sur eux car ils pourraient vous fournir un **acc√®s suppl√©mentaire au compte AWS**.

Dans ce livre, vous devriez trouver des **informations** sur comment trouver des **services AWS expos√©s et comment les v√©rifier**. Pour trouver des **vuln√©rabilit√©s dans les services r√©seau expos√©s**, je vous recommande de **rechercher** le **service** sp√©cifique dans :

{% embed url="https://book.hacktricks.xyz/" %}

## Compromission de l'organisation

### √Ä partir du compte racine/de gestion

Lorsque le compte de gestion cr√©e de nouveaux comptes dans l'organisation, un **nouveau r√¥le** est cr√©√© dans le nouveau compte, nomm√© par d√©faut **`OrganizationAccountAccessRole`** et donnant la politique **AdministratorAccess** au **compte de gestion** pour acc√©der au nouveau compte.

<figure><img src="../../.gitbook/assets/image (3) (3) (2).png" alt=""><figcaption></figcaption></figure>

Ainsi, pour acc√©der en tant qu'administrateur √† un compte enfant, vous devez :

* **Compromettre** le **compte de gestion** et trouver l'**ID** des **comptes enfants** et les **noms** du **r√¥le** (OrganizationAccountAccessRole par d√©faut) permettant au compte de gestion d'acc√©der en tant qu'administrateur.
* Pour trouver les comptes enfants, allez √† la section organisations dans la console AWS ou ex√©cutez `aws organizations list-accounts`
* Vous ne pouvez pas trouver directement le nom des r√¥les, donc v√©rifiez toutes les politiques IAM personnalis√©es et recherchez celles autorisant **`sts:AssumeRole` sur les comptes enfants pr√©c√©demment d√©couverts**.
* **Compromettez** un **principal** dans le compte de gestion avec l'autorisation **`sts:AssumeRole` sur le r√¥le dans les comptes enfants** (m√™me si le compte autorise n'importe qui du compte de gestion √† s'impersonner, des autorisations sp√©cifiques `sts:AssumeRole` sont n√©cessaires).

## Outils Automatis√©s

### Recon

* [**aws-recon**](https://github.com/darkbitio/aws-recon) : Un outil de collecte d'inventaire AWS multi-threaded ax√© sur la s√©curit√© √©crit en Ruby.
```bash
# Install
gem install aws_recon

# Recon and get json
AWS_PROFILE=<profile> aws_recon \
--services S3,EC2 \
--regions global,us-east-1,us-east-2 \
--verbose
```
* [**cloudlist**](https://github.com/projectdiscovery/cloudlist): Cloudlist est un **outil multi-cloud pour obtenir des ressources** (noms d'h√¥tes, adresses IP) aupr√®s des fournisseurs de cloud.
* [**cloudmapper**](https://github.com/duo-labs/cloudmapper): CloudMapper vous aide √† analyser vos environnements Amazon Web Services (AWS). Il contient d√©sormais beaucoup plus de fonctionnalit√©s, y compris l'audit des probl√®mes de s√©curit√©.
```bash
# Installation steps in github
# Create a config.json file with the aws info, like:
{
"accounts": [
{
"default": true,
"id": "<account id>",
"name": "dev"
}
],
"cidrs":
{
"2.2.2.2/28": {"name": "NY Office"}
}
}

# Enumerate
python3 cloudmapper.py collect --profile dev
## Number of resources discovered
python3 cloudmapper.py stats --accounts dev

# Create HTML report
## In the report you will find all the info already
python3 cloudmapper.py report --accounts dev

# Identify potential issues
python3 cloudmapper.py audit --accounts dev --json > audit.json
python3 cloudmapper.py audit --accounts dev --markdow > audit.md
python3 cloudmapper.py iam_report --accounts dev

# Identify admins
## The permissions search for are in https://github.com/duo-labs/cloudmapper/blob/4df9fd7303e0337ff16a08f5e58f1d46047c4a87/shared/iam_audit.py#L163-L175
python3 cloudmapper.py find_admins --accounts dev

# Identify unused elements
python3 cloudmapper.py find_unused --accounts dev

# Identify publivly exposed resources
python3 cloudmapper.py public --accounts dev

python cloudmapper.py prepare #Prepare webserver
python cloudmapper.py webserver #Show webserver
```
* [**cartography**](https://github.com/lyft/cartography): Cartography est un outil Python qui consolide les actifs d'infrastructure et les relations entre eux dans une vue graphique intuitive aliment√©e par une base de donn√©es Neo4j.
```bash
# Install
pip install cartography
## At the time of this writting you need neo4j version 3.5.*

# Get AWS info
AWS_PROFILE=dev cartography --neo4j-uri bolt://127.0.0.1:7687 --neo4j-password-prompt  --neo4j-user neo4j
```
* [**starbase**](https://github.com/JupiterOne/starbase): Starbase collecte des actifs et des relations √† partir de services et de syst√®mes, y compris l'infrastructure cloud, les applications SaaS, les contr√¥les de s√©curit√©, et plus encore, dans une vue graphique intuitive soutenue par la base de donn√©es Neo4j.
* [**aws-inventory**](https://github.com/nccgroup/aws-inventory): (Utilise python2) C'est un outil qui tente de **d√©couvrir tous les** [**ressources AWS**](https://docs.aws.amazon.com/general/latest/gr/glos-chap.html#resource) cr√©√©es dans un compte.
* [**aws\_public\_ips**](https://github.com/arkadiyt/aws\_public\_ips): C'est un outil pour **r√©cup√©rer toutes les adresses IP publiques** (IPv4/IPv6) associ√©es √† un compte AWS.

### Privesc & Exploiting

* [**SkyArk**](https://github.com/cyberark/SkyArk)**:** D√©couvrez les utilisateurs les plus privil√©gi√©s dans l'environnement AWS analys√©, y compris les administrateurs Shadow AWS. Il utilise powershell. Vous pouvez trouver la **d√©finition des politiques privil√©gi√©es** dans la fonction **`Check-PrivilegedPolicy`** dans [https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1](https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1).
* [**pacu**](https://github.com/RhinoSecurityLabs/pacu): Pacu est un **cadre d'exploitation AWS** open-source, con√ßu pour les tests de s√©curit√© offensive contre les environnements cloud. Il peut **√©num√©rer**, trouver des **mauvaises configurations** et les **exploiter**. Vous pouvez trouver la **d√©finition des autorisations privil√©gi√©es** dans [https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134](https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134) √† l'int√©rieur du dictionnaire **`user_escalation_methods`**.
* Notez que pacu **v√©rifie uniquement vos propres chemins de privil√®ges** (pas √† l'√©chelle du compte).
```bash
# Install
## Feel free to use venvs
pip3 install pacu

# Use pacu CLI
pacu
> import_keys <profile_name> # import 1 profile from .aws/credentials
> import_keys --all # import all profiles
> list # list modules
> exec iam__enum_permissions # Get permissions
> exec iam__privesc_scan # List privileged permissions
```
* [**PMapper**](https://github.com/nccgroup/PMapper): Principal Mapper (PMapper) est un script et une biblioth√®que permettant d'identifier les risques li√©s √† la configuration de la gestion des identit√©s et des acc√®s (IAM) AWS pour un compte AWS ou une organisation AWS. Il mod√©lise les diff√©rents utilisateurs IAM et r√¥les dans un compte sous forme de graphe orient√©, ce qui permet de v√©rifier les possibilit√©s d'**√©l√©vation de privil√®ges** et les chemins alternatifs qu'un attaquant pourrait emprunter pour acc√©der √† une ressource ou une action dans AWS. Vous pouvez v√©rifier les **autorisations utilis√©es pour trouver les chemins de privil√®ges** dans les fichiers se terminant par `_edges.py` dans [https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing](https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing)
```bash
# Install
pip install principalmapper

# Get data
pmapper --profile dev graph create
pmapper --profile dev graph display # Show basic info
# Generate graph
pmapper --profile dev visualize # Generate svg graph file (can also be png, dot and graphml)
pmapper --profile dev visualize --only-privesc # Only privesc permissions

# Generate analysis
pmapper --profile dev analysis
## Run queries
pmapper --profile dev query 'who can do iam:CreateUser'
pmapper --profile dev query 'preset privesc *' # Get privescs with admins

# Get organization hierarchy data
pmapper --profile dev orgs create
pmapper --profile dev orgs display
```
* [**cloudsplaining**](https://github.com/salesforce/cloudsplaining): Cloudsplaining est un outil d'√©valuation de la s√©curit√© IAM AWS qui identifie les violations du principe du moindre privil√®ge et g√©n√®re un rapport HTML prioris√© par risque.\
Il vous montrera potentiellement les clients **sur-privilegi√©s**, les **policies** inline et aws et quels **principaux y ont acc√®s**. (Il ne v√©rifie pas seulement les √©l√©vations de privil√®ges mais aussi d'autres types de permissions int√©ressantes, recommand√© √† utiliser).
```bash
# Install
pip install cloudsplaining

# Download IAM policies to check
## Only the ones attached with the versions used
cloudsplaining download --profile dev

# Analyze the IAM policies
cloudsplaining scan --input-file /private/tmp/cloudsplaining/dev.json --output /tmp/files/
```
* [**cloudjack**](https://github.com/prevade/cloudjack): CloudJack √©value les comptes AWS pour les **vuln√©rabilit√©s de d√©tournement de sous-domaine** r√©sultant de configurations Route53 et CloudFront d√©coupl√©es.
* [**ccat**](https://github.com/RhinoSecurityLabs/ccat): Liste des d√©p√¥ts ECR -> R√©cup√®re le d√©p√¥t ECR -> Le pirate -> Pousse l'image pirat√©e
* [**Dufflebag**](https://github.com/bishopfox/dufflebag): Dufflebag est un outil qui **recherche** √† travers les instantan√©s publics de stockage de blocs √©lastiques (**EBS) pour des secrets** qui auraient pu √™tre laiss√©s accidentellement.

### Audit

* [**cloudsploit**](https://github.com/aquasecurity/cloudsploit)**:** CloudSploit par Aqua est un projet open source con√ßu pour permettre la d√©tection des **risques de s√©curit√© dans les comptes d'infrastructure cloud**, y compris : Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform (GCP), Oracle Cloud Infrastructure (OCI) et GitHub (Il ne recherche pas les ShadowAdmins).
```bash
./index.js --csv=file.csv --console=table --config ./config.js

# Compiance options: --compliance {hipaa,cis,cis1,cis2,pci}
## use "cis" for cis level 1 and 2
```
* [**Prowler**](https://github.com/prowler-cloud/prowler): Prowler est un outil de s√©curit√© Open Source pour effectuer des √©valuations des meilleures pratiques de s√©curit√© AWS, des audits, des r√©ponses aux incidents, une surveillance continue, un renforcement et une pr√©paration √† la criminalistique.
```bash
# Install python3, jq and git
# Install
pip install prowler
prowler -v

# Run
prowler <provider>
prowler aws --profile custom-profile [-M csv json json-asff html]
```
* [**CloudFox**](https://github.com/BishopFox/cloudfox): CloudFox vous aide √† acqu√©rir une connaissance de la situation dans des environnements cloud inconnus. C'est un outil en ligne de commande open source cr√©√© pour aider les testeurs de p√©n√©tration et d'autres professionnels de la s√©curit√© offensive √† trouver des chemins d'attaque exploitables dans l'infrastructure cloud.
```bash
cloudfox aws --profile [profile-name] all-checks
```
* [**ScoutSuite**](https://github.com/nccgroup/ScoutSuite): Scout Suite est un outil d'audit de s√©curit√© multi-cloud open source, qui permet d'√©valuer la posture de s√©curit√© des environnements cloud.
```bash
# Install
virtualenv -p python3 venv
source venv/bin/activate
pip install scoutsuite
scout --help

# Get info
scout aws -p dev
```
* [**cs-suite**](https://github.com/SecurityFTW/cs-suite): Cloud Security Suite (utilise python2.7 et semble non maintenu)
* [**Zeus**](https://github.com/DenizParlak/Zeus): Zeus est un outil puissant pour les meilleures pratiques de durcissement AWS EC2 / S3 / CloudTrail / CloudWatch / KMS (semble non maintenu). Il v√©rifie uniquement les informations d'identification configur√©es par d√©faut dans le syst√®me.

### Audit Constant

* [**cloud-custodian**](https://github.com/cloud-custodian/cloud-custodian): Cloud Custodian est un moteur de r√®gles pour la gestion des comptes et des ressources de cloud public. Il permet aux utilisateurs de **d√©finir des politiques pour permettre une infrastructure cloud bien g√©r√©e**, √† la fois s√©curis√©e et optimis√©e en termes de co√ªts. Il consolide de nombreux scripts ad hoc que les organisations poss√®dent en un outil l√©ger et flexible, avec des m√©triques et des rapports unifi√©s.
* [**pacbot**](https://github.com/tmobile/pacbot)**: Policy as Code Bot (PacBot)** est une plateforme de **surveillance continue de la conformit√©, de g√©n√©ration de rapports de conformit√© et d'automatisation de la s√©curit√© pour le cloud**. Dans PacBot, les politiques de s√©curit√© et de conformit√© sont impl√©ment√©es sous forme de code. Toutes les ressources d√©couvertes par PacBot sont √©valu√©es par rapport √† ces politiques pour mesurer la conformit√© aux politiques. Le cadre **auto-fix** de PacBot offre la possibilit√© de r√©pondre automatiquement aux violations de politiques en prenant des actions pr√©d√©finies.
* [**streamalert**](https://github.com/airbnb/streamalert)**:** StreamAlert est un framework d'analyse de donn√©es **en temps r√©el** sans serveur qui vous permet d'**ing√©rer, d'analyser et d'alerter** sur des donn√©es provenant de n'importe quel environnement, **en utilisant des sources de donn√©es et une logique d'alerte que vous d√©finissez**. Les √©quipes de s√©curit√© informatique utilisent StreamAlert pour analyser des t√©raoctets de donn√©es de journal chaque jour pour la d√©tection et la r√©ponse aux incidents.

## DEBUG: Capturer les requ√™tes AWS cli
```bash
# Set proxy
export HTTP_PROXY=http://localhost:8080
export HTTPS_PROXY=http://localhost:8080

# Capture with burp nor verifying ssl
aws --no-verify-ssl ...

# Dowload brup cert and transform it to pem
curl http://127.0.0.1:8080/cert --output Downloads/certificate.cer
openssl x509 -inform der -in Downloads/certificate.cer -out Downloads/certificate.pem

# Indicate the ca cert to trust
export AWS_CA_BUNDLE=~/Downloads/certificate.pem

# Run aws cli normally trusting burp cert
aws ...
```
## R√©f√©rences

* [https://www.youtube.com/watch?v=8ZXRw4Ry3mQ](https://www.youtube.com/watch?v=8ZXRw4Ry3mQ)
* [https://cloudsecdocs.com/aws/defensive/tooling/audit/](https://cloudsecdocs.com/aws/defensive/tooling/audit/)

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert de l'√©quipe rouge HackTricks AWS)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks:

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>
