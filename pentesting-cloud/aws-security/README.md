# AWS Pentesting

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahramana kadar AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzdaki özel [**NFT'leri**](https://opensea.io/collection/the-peass-family) keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı takip edin.
* Hacking hilelerinizi **HackTricks** ve **HackTricks Cloud** github depolarına PR göndererek paylaşın.

</details>

## Temel Bilgiler

**AWS** ortamını pentest etmeye başlamadan önce, ne yapmanız gerektiğini, yanlış yapılandırmaları nasıl bulacağınızı ve nasıl sömüreceğinizi anlamak için AWS'nin nasıl çalıştığı hakkında birkaç temel bilgiye ihtiyacınız vardır.

Organizasyon hiyerarşisi, IAM ve diğer temel kavramlar gibi kavramlar şu adreste açıklanmıştır:

{% content-ref url="aws-basic-information/" %}
[aws-basic-information](aws-basic-information/)
{% endcontent-ref %}

## Öğrenmek için Lablar

* [https://github.com/RhinoSecurityLabs/cloudgoat](https://github.com/RhinoSecurityLabs/cloudgoat)
* [https://github.com/BishopFox/iam-vulnerable](https://github.com/BishopFox/iam-vulnerable)
* [https://github.com/nccgroup/sadcloud](https://github.com/nccgroup/sadcloud)
* [https://github.com/bridgecrewio/terragoat](https://github.com/bridgecrewio/terragoat)
* [https://github.com/ine-labs/AWSGoat](https://github.com/ine-labs/AWSGoat)
* [http://flaws.cloud/](http://flaws.cloud/)
* [http://flaws2.cloud/](http://flaws2.cloud/)

Saldırıları simüle etmek için araçlar:

* [https://github.com/Datadog/stratus-red-team/](https://github.com/Datadog/stratus-red-team/)
* [https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main](https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main)

## AWS Pentester/Red Team Metodolojisi

Bir AWS ortamını denetlemek için çok önemli olan şeyler: hangi **hizmetlerin kullanıldığı**, neyin **açığa çıkarıldığı**, kimin **ne tür erişimi** olduğu ve iç AWS hizmetlerinin **harici hizmetlerle** nasıl bağlantılı olduğudur.

Kırmızı Takım bakış açısından, bir AWS ortamını ele geçirmenin **ilk adımı bazı kimlik bilgilerini elde etmeyi** başarmaktır. İşte bunu nasıl yapabileceğinize dair bazı fikirler:

* Github (veya benzeri) **sızıntıları** - OSINT
* **Sosyal** Mühendislik
* **Parola** yeniden kullanımı (parola sızıntıları)
* AWS'de barındırılan Uygulamalardaki Zayıflıklar
* [**Sunucu Tarafı İstek Sahtekarlığı (SSRF)**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) - meta veri uç noktasına erişimle
* **Yerel Dosya Okuma**
* `/home/USERNAME/.aws/credentials`
* `C:\Users\USERNAME\.aws\credentials`
* 3. tarafların **ihlal edilmesi**
* **İç** Çalışan
* [**Cognito** ](aws-services/aws-cognito-enum/#cognito)kimlik bilgileri

Veya **kimlik doğrulaması yapılmamış bir hizmeti** ele geçirerek:

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

Veya bir **inceleme** yapıyorsanız, bu rollerle **kimlik bilgilerini isteyebilirsiniz**:

{% content-ref url="aws-permissions-for-a-pentest.md" %}
[aws-permissions-for-a-pentest.md](aws-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
Kimlik bilgilerini elde etmeyi başardıktan sonra, bu kimlik bilgilerinin **kime ait olduğunu** ve **ne tür erişime sahip olduklarını** bilmek için bazı temel numaralandırmalar yapmanız gerekmektedir:
{% endhint %}

## Temel Numaralandırma

### SSRF

AWS içindeki bir makinede SSRF bulduysanız, hileler için bu sayfaya bakın:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf" %}

### Kimim

Bilmeniz gereken ilk şeylerden biri kim olduğunuzdur (hangi hesapta olduğunuz, AWS ortamı hakkında diğer bilgiler):
```bash
# Easiest way, but might be monitored?
aws sts get-caller-identity
aws iam get-user # This will get your own user

# If you have a Key ID
aws sts get-access-key-info --access-key-id=ASIA1234567890123456

# Get inside error message
aws sns publish --topic-arn arn:aws:sns:us-east-1:*account id*:aaa --message aaa

# From metadata
TOKEN=`curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600"`
curl -H "X-aws-ec2-metadata-token: $TOKEN" http://169.254.169.254/latest/dynamic/instance-identity/document
```
{% hint style="danger" %}
Şirketler, **token'ların çalındığını ve kullanıldığını** tespit etmek için **canary token'lar** kullanabilir. Kullanmadan önce bir token'ın bir canary token olup olmadığını kontrol etmek önerilir.\
Daha fazla bilgi için [**bu sayfayı kontrol edin**](aws-services/aws-security-and-detection-services/aws-cloudtrail-enum.md#honeytokens-bypass).
{% endhint %}

### Org Enumerasyonu

{% content-ref url="../aws-pentesting/aws-services/aws-organizations-enum.md" %}
[aws-organizations-enum.md](../aws-pentesting/aws-services/aws-organizations-enum.md)
{% endcontent-ref %}

### IAM Enumerasyonu

Yeterli izinlere sahipseniz, AWS hesabındaki her bir varlık için **ayrıcalıklarını kontrol etmek**, sizin ve diğer kimliklerin ne yapabileceğini ve nasıl **ayrıcalıkları yükseltebileceğinizi** anlamanıza yardımcı olacaktır.

IAM'yi numaralandırmak için yeterli izniniz yoksa, bunları belirlemek için **brute force** yöntemiyle çalabilirsiniz.\
Numaralandırma ve brute force yapmanın **nasıl yapılacağını** kontrol edin:

{% content-ref url="aws-services/aws-iam-enum.md" %}
[aws-iam-enum.md](aws-services/aws-iam-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
Şimdi **kimlik bilgileriniz hakkında bazı bilgilere sahipsiniz** (ve eğer bir kırmızı takım iseniz umarım **tespit edilmemişsinizdir**). Şimdi ortamda hangi hizmetlerin kullanıldığını anlamaya çalışmanın zamanı geldi.\
Aşağıdaki bölümde, bazı yaygın hizmetleri **numaralandırmak** için bazı yöntemleri kontrol edebilirsiniz.
{% endhint %}

## Hizmetlerin Numaralandırılması, Saldırı Sonrası ve Kalıcılık

AWS, inanılmaz miktarda hizmete sahiptir, aşağıdaki sayfada bazılarının **temel bilgilerini, numaralandırma** hilelerini, tespit **engelleme** yöntemlerini, **kalıcılık** sağlama yöntemlerini ve diğer **saldırı sonrası** hileleri bulabilirsiniz:

{% content-ref url="aws-services/" %}
[aws-services](aws-services/)
{% endcontent-ref %}

Elbette tüm çalışmayı **manuel olarak** yapmanıza gerek yok, bu gönderinin altında **otomatik araçlar hakkında** bir bölüm bulabilirsiniz.

Ayrıca, bu aşamada **kimlik doğrulaması yapılmamış kullanıcılara daha fazla hizmetin açığa çıktığını** keşfedebilirsiniz, bunları sömürebilirsiniz:

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

## Ayrıcalık Yükseltme

Farklı kaynaklar üzerinde en az kendi izinlerinizi **kontrol edebiliyorsanız**, daha fazla izin elde edebilip edemeyeceğinizi **kontrol edebilirsiniz**. En azından aşağıdaki izinlere odaklanmalısınız:

{% content-ref url="aws-privilege-escalation/" %}
[aws-privilege-escalation](aws-privilege-escalation/)
{% endcontent-ref %}

## Kamuya Açık Hizmetler

AWS hizmetlerini numaralandırırken, bazılarının **İnternet'e öğeleri açığa çıkardığını** (VM/Container portları, veritabanları veya kuyruk hizmetleri, anlık görüntüler veya kovalar...) fark etmiş olabilirsiniz.\
Pentester/kırmızı takım olarak, bunlarda **hassas bilgileri/zaafiyetleri** bulup bulamayacağınızı her zaman kontrol etmelisiniz, çünkü bunlar size AWS hesabına **daha fazla erişim sağlayabilir**.

Bu kitapta, **açığa çıkarılmış AWS hizmetlerini nasıl bulacağınızı ve kontrol edeceğinizi** bulacaksınız. Açığa çıkarılmış ağ hizmetlerinde **zaafiyetleri nasıl bulacağınız** hakkında bilgi için, özel **hizmeti** aramak için aşağıdaki siteyi **aramanızı** öneririm:

{% embed url="https://book.hacktricks.xyz/" %}

## Kuruluşu Ele Geçirme

### Kök/Yönetim hesabından

Yönetim hesabı, kuruluşta yeni hesaplar oluşturduğunda, yeni bir rol oluşturur, varsayılan olarak **`OrganizationAccountAccessRole`** adını alır ve yönetim hesabının yeni hesaba erişim için **AdministratorAccess** politikasını verir.

<figure><img src="../../.gitbook/assets/image (3) (3) (2).png" alt=""><figcaption></figcaption></figure>

Bu nedenle, bir alt hesaba yönetici olarak erişmek için şunlara ihtiyacınız vardır:

* **Yönetim** hesabını **ele geçirin** ve **çocuk hesapların kimliklerini** ve yönetim hesabının yönetici olarak erişmesine izin veren rolün adlarını (varsayılan olarak OrganizationAccountAccessRole) bulun.
* Çocuk hesaplarını bulmak için aws konsolunda organizasyonlar bölümüne gidin veya `aws organizations list-accounts` komutunu çalıştırın.
* Rollerin adını doğrudan bulamazsınız, bu yüzden tüm özel IAM politikalarını kontrol edin ve önceden keşfedilen çocuk hesapları üzerinde **`sts:AssumeRole` izni veren** herhangi bir politikayı arayın.
* Yönetim hesabındaki bir **temsilciyi** ele geçirin ve çocuk hesaplardaki role **`sts:AssumeRole` izni** verin (hesap yönetim hesabından herkese kimlik taklit etmeye izin veriyor olsa bile, harici bir hesap olduğu için belirli `sts:AssumeRole` izinleri gereklidir).

## Otomatik Araçlar

### Keşif

* [**aws-recon**](https://github.com/darkbitio/aws-recon): Ruby ile yazılmış çoklu iş parçacıklı bir AWS güvenlik odaklı **envanter toplama aracı**.
```bash
# Install
gem install aws_recon

# Recon and get json
AWS_PROFILE=<profile> aws_recon \
--services S3,EC2 \
--regions global,us-east-1,us-east-2 \
--verbose
```
* [**cloudlist**](https://github.com/projectdiscovery/cloudlist): Cloudlist, Bulut Sağlayıcılardan Varlıkları (Ana Bilgisayar Adları, IP Adresleri) almak için çoklu bulut aracıdır.
* [**cloudmapper**](https://github.com/duo-labs/cloudmapper): CloudMapper, Amazon Web Services (AWS) ortamlarınızı analiz etmenize yardımcı olur. Artık güvenlik sorunları için denetim gibi çok daha fazla işlev içermektedir.
```bash
# Installation steps in github
# Create a config.json file with the aws info, like:
{
"accounts": [
{
"default": true,
"id": "<account id>",
"name": "dev"
}
],
"cidrs":
{
"2.2.2.2/28": {"name": "NY Office"}
}
}

# Enumerate
python3 cloudmapper.py collect --profile dev
## Number of resources discovered
python3 cloudmapper.py stats --accounts dev

# Create HTML report
## In the report you will find all the info already
python3 cloudmapper.py report --accounts dev

# Identify potential issues
python3 cloudmapper.py audit --accounts dev --json > audit.json
python3 cloudmapper.py audit --accounts dev --markdow > audit.md
python3 cloudmapper.py iam_report --accounts dev

# Identify admins
## The permissions search for are in https://github.com/duo-labs/cloudmapper/blob/4df9fd7303e0337ff16a08f5e58f1d46047c4a87/shared/iam_audit.py#L163-L175
python3 cloudmapper.py find_admins --accounts dev

# Identify unused elements
python3 cloudmapper.py find_unused --accounts dev

# Identify publivly exposed resources
python3 cloudmapper.py public --accounts dev

python cloudmapper.py prepare #Prepare webserver
python cloudmapper.py webserver #Show webserver
```
* [**cartography**](https://github.com/lyft/cartography): Cartography, bir Neo4j veritabanı tarafından desteklenen sezgisel bir graf görünümünde altyapı varlıklarını ve aralarındaki ilişkileri birleştiren bir Python aracıdır.
```bash
# Install
pip install cartography
## At the time of this writting you need neo4j version 3.5.*

# Get AWS info
AWS_PROFILE=dev cartography --neo4j-uri bolt://127.0.0.1:7687 --neo4j-password-prompt  --neo4j-user neo4j
```
* [**starbase**](https://github.com/JupiterOne/starbase): Starbase, Neo4j veritabanı tarafından desteklenen sezgisel bir grafik görünümüne sahip olacak şekilde bulut altyapısı, SaaS uygulamaları, güvenlik kontrolleri ve daha fazlasından varlıkları ve ilişkileri toplar.
* [**aws-inventory**](https://github.com/nccgroup/aws-inventory): (Python2 kullanır) Bu, bir hesapta oluşturulan **tüm AWS kaynaklarını keşfetmeye** çalışan bir araçtır.
* [**aws\_public\_ips**](https://github.com/arkadiyt/aws\_public\_ips): AWS hesabıyla ilişkilendirilmiş **tüm genel IP adreslerini** (IPv4/IPv6) almak için bir araçtır.

### Privesc & Exploiting

* [**SkyArk**](https://github.com/cyberark/SkyArk)**:** AWS ortamında taranan en ayrıcalıklı kullanıcıları, AWS Shadow Admin'leri dahil olmak üzere keşfeder. Powershell kullanır. Ayrıcalıklı politikaların tanımını [https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1](https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1) içindeki **`Check-PrivilegedPolicy`** fonksiyonunda bulabilirsiniz.
* [**pacu**](https://github.com/RhinoSecurityLabs/pacu): Pacu, bulut ortamlarına karşı saldırgan güvenlik testleri için tasarlanmış açık kaynaklı bir **AWS istismar çerçevesidir**. Bu, **numaralandırabilir**, **hatalı yapılandırmaları** bulabilir ve **istismar edebilir**. **Ayrıcalıklı izinlerin tanımını** [https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134](https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134) içindeki **`user_escalation_methods`** sözlüğünde bulabilirsiniz.
* Unutmayın ki pacu, yalnızca kendi ayrıcalık yükseltme yollarınızı kontrol eder (hesap genelinde değil).
```bash
# Install
## Feel free to use venvs
pip3 install pacu

# Use pacu CLI
pacu
> import_keys <profile_name> # import 1 profile from .aws/credentials
> import_keys --all # import all profiles
> list # list modules
> exec iam__enum_permissions # Get permissions
> exec iam__privesc_scan # List privileged permissions
```
* [**PMapper**](https://github.com/nccgroup/PMapper): Principal Mapper (PMapper), bir AWS hesabı veya bir AWS organizasyonunun AWS Kimlik ve Erişim Yönetimi (IAM) yapılandırmasındaki riskleri belirlemek için bir betik ve kütüphanedir. Farklı IAM Kullanıcılarını ve Rolleri bir hesapta yönlendirilmiş bir graf olarak modeller ve bu, AWS'de bir kaynağa veya eyleme erişmek için bir saldırganın izleyebileceği alternatif yolları ve **ayrıcalık yükseltme** kontrollerini sağlar. [https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing](https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing) adresinde `_edges.py` ile biten dosya adlarında bulunan izinleri kontrol edebilirsiniz.
```bash
# Install
pip install principalmapper

# Get data
pmapper --profile dev graph create
pmapper --profile dev graph display # Show basic info
# Generate graph
pmapper --profile dev visualize # Generate svg graph file (can also be png, dot and graphml)
pmapper --profile dev visualize --only-privesc # Only privesc permissions

# Generate analysis
pmapper --profile dev analysis
## Run queries
pmapper --profile dev query 'who can do iam:CreateUser'
pmapper --profile dev query 'preset privesc *' # Get privescs with admins

# Get organization hierarchy data
pmapper --profile dev orgs create
pmapper --profile dev orgs display
```
* [**cloudsplaining**](https://github.com/salesforce/cloudsplaining): Cloudsplaining, AWS IAM Güvenlik Değerlendirme aracıdır ve en az ayrıcalığın ihlallerini belirler ve risk öncelikli bir HTML raporu oluşturur.\
Potansiyel olarak aşırı ayrıcalıklı müşteriyi, satır içi ve aws politikalarını ve onlara erişimi olan prensipleri gösterecektir. (Sadece ayrıcalık yükseltme kontrolü yapmaz, aynı zamanda diğer ilginç izinleri de kontrol eder, kullanılması önerilir).
```bash
# Install
pip install cloudsplaining

# Download IAM policies to check
## Only the ones attached with the versions used
cloudsplaining download --profile dev

# Analyze the IAM policies
cloudsplaining scan --input-file /private/tmp/cloudsplaining/dev.json --output /tmp/files/
```
* [**cloudjack**](https://github.com/prevade/cloudjack): CloudJack, AWS hesaplarını, ayrılmış Route53 ve CloudFront yapılandırmalarının bir sonucu olarak **alt alan adı ele geçirme açıklıkları** için değerlendirir.
* [**ccat**](https://github.com/RhinoSecurityLabs/ccat): ECR depolarını listele -> ECR deposunu çek -> Arkasına zararlı yazılım yerleştir -> Zararlı yazılımı geri yükle
* [**Dufflebag**](https://github.com/bishopfox/dufflebag): Dufflebag, yanlışlıkla bırakılmış olabilecek **genel Elastic Block Storage (EBS) anlık görüntülerindeki gizli bilgileri arar**.

### Denetim

* [**cloudsploit**](https://github.com/aquasecurity/cloudsploit)**:** Aqua tarafından geliştirilen CloudSploit, Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform (GCP), Oracle Cloud Infrastructure (OCI) ve GitHub gibi bulut altyapı hesaplarında **güvenlik risklerinin tespitine izin vermek için tasarlanmış açık kaynaklı bir projedir** (ShadowAdmin'leri aramaz).
```bash
./index.js --csv=file.csv --console=table --config ./config.js

# Compiance options: --compliance {hipaa,cis,cis1,cis2,pci}
## use "cis" for cis level 1 and 2
```
* [**Prowler**](https://github.com/prowler-cloud/prowler): Prowler, AWS güvenlik en iyi uygulamaları değerlendirmeleri, denetimler, olay yanıtı, sürekli izleme, sıkılaştırma ve adli hazırlık yapmak için bir Açık Kaynak güvenlik aracıdır.
```bash
# Install python3, jq and git
# Install
pip install prowler
prowler -v

# Run
prowler <provider>
prowler aws --profile custom-profile [-M csv json json-asff html]
```
* [**CloudFox**](https://github.com/BishopFox/cloudfox): CloudFox, sizi tanıdık olmayan bulut ortamlarında durumsal farkındalık kazanmanıza yardımcı olur. Bulut altyapısında sömürülebilir saldırı yollarını bulmak için oluşturulmuş açık kaynaklı bir komut satırı aracıdır. Bu araç, sızma testçileri ve diğer saldırgan güvenlik profesyonellerine yardımcı olmak için tasarlanmıştır.
```bash
cloudfox aws --profile [profile-name] all-checks
```
* [**ScoutSuite**](https://github.com/nccgroup/ScoutSuite): Scout Suite, açık kaynaklı bir çoklu bulut güvenlik denetimi aracıdır ve bulut ortamlarının güvenlik durumunu değerlendirmeyi sağlar.
```bash
# Install
virtualenv -p python3 venv
source venv/bin/activate
pip install scoutsuite
scout --help

# Get info
scout aws -p dev
```
* [**cs-suite**](https://github.com/SecurityFTW/cs-suite): Cloud Security Suite (python2.7 kullanır ve bakımsız görünüyor)
* [**Zeus**](https://github.com/DenizParlak/Zeus): Zeus, AWS EC2 / S3 / CloudTrail / CloudWatch / KMS için en iyi sertleştirme uygulamaları için güçlü bir araçtır (bakımsız görünüyor). Sadece sistem içinde varsayılan olarak yapılandırılmış kimlik bilgilerini kontrol eder.

### Sürekli Denetim

* [**cloud-custodian**](https://github.com/cloud-custodian/cloud-custodian): Cloud Custodian, genel bulut hesaplarını ve kaynaklarını yönetmek için bir kurallar motorudur. Kullanıcılara, hem güvenli hem de maliyet optimize edilmiş bir bulut altyapısı sağlamak için politikaları tanımlama imkanı sunar. Cloud Custodian, organizasyonların birçok ad hoc komut dosyasını hafif ve esnek bir araçta birleştirir ve birleşik metrikler ve raporlama sağlar.
* [**pacbot**](https://github.com/tmobile/pacbot)**: Policy as Code Bot (PacBot)**, sürekli uyumluluk izleme, uyumluluk raporlama ve bulut için güvenlik otomasyonu için bir platformdur. PacBot'ta, güvenlik ve uyumluluk politikaları kod olarak uygulanır. PacBot tarafından keşfedilen tüm kaynaklar, bu politikalara uygunluğu değerlendirmek için değerlendirilir. PacBot'un **otomatik düzeltme** çerçevesi, önceden tanımlanmış eylemlerle politika ihlallerine otomatik olarak yanıt verme yeteneği sağlar.
* [**streamalert**](https://github.com/airbnb/streamalert)**:** StreamAlert, **gerçek zamanlı** veri analizi çerçevesidir ve tanımladığınız veri kaynakları ve uyarı mantığı kullanarak herhangi bir ortamdan veri almanıza, analiz etmenize ve uyarı almanıza olanak tanır. Bilgisayar güvenlik ekipleri, olay tespiti ve yanıtı için her gün terabaytlarca günlük veriyi tarayabilmek için StreamAlert'i kullanır. 

## DEBUG: AWS cli isteklerini yakalama
```bash
# Set proxy
export HTTP_PROXY=http://localhost:8080
export HTTPS_PROXY=http://localhost:8080

# Capture with burp nor verifying ssl
aws --no-verify-ssl ...

# Dowload brup cert and transform it to pem
curl http://127.0.0.1:8080/cert --output Downloads/certificate.cer
openssl x509 -inform der -in Downloads/certificate.cer -out Downloads/certificate.pem

# Indicate the ca cert to trust
export AWS_CA_BUNDLE=~/Downloads/certificate.pem

# Run aws cli normally trusting burp cert
aws ...
```
## Referanslar

* [https://www.youtube.com/watch?v=8ZXRw4Ry3mQ](https://www.youtube.com/watch?v=8ZXRw4Ry3mQ)
* [https://cloudsecdocs.com/aws/defensive/tooling/audit/](https://cloudsecdocs.com/aws/defensive/tooling/audit/)

<details>

<summary><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya bizi **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına **PR göndererek paylaşın**.

</details>
