# AWS - CodeBuild Na-Exploitation

<details>

<summary><strong>Leer AWS hakwerk vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat** Kontroleer die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel jou haktruuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>

## CodeBuild

Vir meer inligting, kyk:

{% content-ref url="../../aws-services/aws-codebuild-enum.md" %}
[aws-codebuild-enum.md](../../aws-services/aws-codebuild-enum.md)
{% endcontent-ref %}

### Misbruik CodeBuild Repo Toegang

Om **CodeBuild** te konfigureer, sal dit **toegang tot die kode-repo** benodig wat dit gaan gebruik. Verskeie platforms kan hierdie kode aanbied:

<figure><img src="../../../../.gitbook/assets/image (96).png" alt=""><figcaption></figcaption></figure>

Die **CodeBuild projek moet toegang h√™** tot die gekonfigureerde bronverskaffer, of via 'n **IAM rol** of met 'n github/bitbucket **token of OAuth-toegang**.

'n Aanvaller met **verhoogde regte oor 'n CodeBuild** kan hierdie gekonfigureerde toegang misbruik om die kode van die gekonfigureerde repo en ander waar die ingestelde geloofsbriewe toegang het, te lek.\
Om dit te doen, sal 'n aanvaller net die **repo URL na elke repo waar die konfigurasie-geloofsbriewe toegang het, verander** (let daarop dat die aws-webwerf almal vir jou sal lys):

<figure><img src="../../../../.gitbook/assets/image (107).png" alt=""><figcaption></figcaption></figure>

En **verander die Buildspec-opdragte om elke repo uit te sif**.

{% hint style="warning" %}
Hierdie **taak is egter herhalend en vervelig** en as 'n github-token met **skryfregte** gekonfigureer was, sal 'n aanvaller **nie in staat wees om daardie regte te (mis)bruik nie** omdat hy nie toegang tot die token het nie.\
Of het hy? Kyk na die volgende afdeling
{% endhint %}

### Lekkering van Toegangstokens vanaf AWS CodeBuild

Jy kan toegang wat in CodeBuild gegee is, lek na platforms soos Github. Kyk of enige toegang tot eksterne platforms gegee is met:
```bash
aws codebuild list-source-credentials
```
{% content-ref url="aws-codebuild-token-leakage.md" %}
[aws-codebuild-token-leakage.md](aws-codebuild-token-leakage.md)
{% endcontent-ref %}

### `codebuild:DeleteProject`

'n Aanvaller kan 'n hele CodeBuild-projek uitvee, wat lei tot verlies van projekkonfigurasie en wat toepassings wat op die projek staatmaak, be√Ønvloed.
```bash
aws codebuild delete-project --name <value>
```
**Potensi√´le Impak**: Verlies van projekkonfigurasie en diensontwrigting vir toepassings wat die verwyderde projek gebruik.

### `codebuild:TagResource`, `codebuild:UntagResource`

'n Aanvaller kan etikette byvoeg, wysig of verwyder van CodeBuild-bronne, wat jou organisasie se koste-toewysing, hulpbronopsporing en toegangsbeheerbeleid gebaseer op etikette kan ontwrig.
```bash
aws codebuild tag-resource --resource-arn <value> --tags <value>
aws codebuild untag-resource --resource-arn <value> --tag-keys <value>
```
**Potensi√´le Impak**: Versteuring van koste-toewysing, hulpbron-opsporing, en tag-gebaseerde toegangsbeheerbeleide.

### `codebuild:DeleteSourceCredentials`

'n Aanvaller kan bron-geloofsbriewe vir 'n Git-opslag verwyder, wat die normale werking van programme wat op die opslag staatmaak, kan be√Ønvloed.
```sql
aws codebuild delete-source-credentials --arn <value>
```
**Potensi√´le Impak**: Versteuring van normale werking vir toepassings wat staatmaak op die geaffekteerde bewaarplek as gevolg van die verwydering van bron-gedragsleutels.

<details>

<summary><strong>Leer AWS hak vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling van eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github bewaarplekke.

</details>
