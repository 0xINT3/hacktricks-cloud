# AWS - S3 Na-Aanval Naverwerking

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>

## S3

Vir meer inligting, kyk:

{% content-ref url="../aws-services/aws-s3-athena-and-glacier-enum.md" %}
[aws-s3-athena-and-glacier-enum.md](../aws-services/aws-s3-athena-and-glacier-enum.md)
{% endcontent-ref %}

### Sensitiewe Inligting

Soms sal jy sensitiewe inligting in leesbare vorm in die emmers kan vind. Byvoorbeeld, terraform state secrets.

### Pivoting

Verskillende platforms kan S3 gebruik om sensitiewe bates te stoor. Byvoorbeeld, **airflow** kan **DAGs-kode** daarin stoor, of **webbladsye** kan direk vanuit S3 bedien word. 'n Aanvaller met skryftoestemmings kan die kode van die emmer **verander** om na ander platforms te **pivot** of om rekeninge oor te neem deur JS-l√™ers te verander.

### S3 Ransomware

In hierdie scenario skep die **aanvaller 'n KMS (Key Management Service) sleutel in hul eie AWS-rekening** of 'n ander gekompromitteerde rekening. Hulle maak dan hierdie **sleutel toeganklik vir enigeen ter w√™reld**, wat enige AWS-gebruiker, rol, of rekening in staat stel om voorwerpe met behulp van hierdie sleutel te versleutel. Die voorwerpe kan egter nie ontsluit word nie.

Die aanvaller identifiseer 'n teiken **S3-emmer en verkry skryftoegang** daartoe deur verskeie metodes te gebruik. Dit kan wees as gevolg van swak emmerkonfigurasie wat dit openbaar blootstel, of die aanvaller verkry toegang tot die AWS-omgewing self. Die aanvaller teiken gewoonlik emmers wat sensitiewe inligting bevat, soos persoonlik identifiseerbare inligting (PII), beskermde gesondheidsinligting (PHI), logboeke, rugsteun, en meer.

Om te bepaal of die emmer as teiken vir ransomware gebruik kan word, kontroleer die aanvaller sy konfigurasie. Dit sluit in om te verifieer of **S3 Object Versioning** geaktiveer is en of **multi-factor authentication delete (MFA delete) geaktiveer is**. As Object Versioning nie geaktiveer is nie, kan die aanvaller voortgaan. As Object Versioning geaktiveer is maar MFA delete gedeaktiveer is, kan die aanvaller **Object Versioning deaktiveer**. As beide Object Versioning en MFA delete geaktiveer is, word dit moeiliker vir die aanvaller om daardie spesifieke emmer te ransomware.

Met behulp van die AWS API vervang die aanvaller elke voorwerp in die emmer met 'n versleutelde kopie met behulp van hul KMS-sleutel. Dit versleutel die data in die emmer effektief en maak dit ontoeganklik sonder die sleutel.

Om verdere druk uit te oefen, skeduleer die aanvaller die uitwissing van die KMS-sleutel wat in die aanval gebruik is. Dit gee die teiken 'n venster van 7 dae om hul data te herstel voordat die sleutel uitgewis word en die data permanent verlore gaan.

Laastens kan die aanvaller 'n finale l√™er oplaai, gewoonlik genaamd "ransom-note.txt," wat instruksies vir die teiken bevat oor hoe om hul l√™ers te herwin. Hierdie l√™er word sonder versleuteling oplaai, waarskynlik om die teiken se aandag te trek en hulle bewus te maak van die ransomware-aanval.

**Vir meer inligting** [**kyk na die oorspronklike navorsing**](https://rhinosecuritylabs.com/aws/s3-ransomware-part-1-attack-vector/)**.**

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
