# AWS - Espejo malicioso de VPC

<details>

<summary><strong>Aprende hacking en AWS de cero a h√©roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipos Rojos de HackTricks en AWS)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

**Consulta** [**https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) **para m√°s detalles sobre el ataque!**

La inspecci√≥n pasiva de la red en un entorno en la nube ha sido **desafiante**, requiriendo cambios de configuraci√≥n importantes para monitorear el tr√°fico de red. Sin embargo, AWS ha introducido una nueva caracter√≠stica llamada "**VPC Traffic Mirroring**" para simplificar este proceso. Con VPC Traffic Mirroring, el tr√°fico de red dentro de las VPC puede ser **duplicado** sin instalar ning√∫n software en las instancias mismas. Este tr√°fico duplicado puede ser enviado a un sistema de detecci√≥n de intrusiones en la red (IDS) para su **an√°lisis**.

Para abordar la necesidad de **implementaci√≥n automatizada** de la infraestructura necesaria para reflejar y exfiltrar el tr√°fico de la VPC, hemos desarrollado un script de prueba de concepto llamado "**malmirror**". Este script puede ser utilizado con **credenciales de AWS comprometidas** para configurar el reflejo para todas las instancias de EC2 admitidas en una VPC objetivo. Es importante tener en cuenta que el reflejo de tr√°fico de VPC solo es compatible con las instancias de EC2 alimentadas por el sistema Nitro de AWS, y el objetivo de espejo de VPC debe estar dentro de la misma VPC que los hosts reflejados.

El **impacto** del reflejo malicioso del tr√°fico de VPC puede ser significativo, ya que permite a los atacantes acceder a **informaci√≥n sensible** transmitida dentro de las VPC. La **probabilidad** de dicho reflejo malicioso es alta, considerando la presencia de **tr√°fico en texto claro** que fluye a trav√©s de las VPC. Muchas empresas utilizan protocolos en texto claro dentro de sus redes internas por razones de **rendimiento**, asumiendo que los ataques tradicionales de intermediario no son posibles.

Para obtener m√°s informaci√≥n y acceder al [**script malmirror**](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror), se puede encontrar en nuestro **repositorio de GitHub**. El script automatiza y agiliza el proceso, haci√©ndolo **r√°pido, simple y repetible** para fines de investigaci√≥n ofensiva.

<details>

<summary><strong>Aprende hacking en AWS de cero a h√©roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipos Rojos de HackTricks en AWS)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
