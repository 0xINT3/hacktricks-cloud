# AWS - P√≥s-Explora√ß√£o do CloudFront

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **vers√£o mais recente do PEASS ou baixar o HackTricks em PDF**, verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo Telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no GitHub.

</details>

## CloudFront

Para mais informa√ß√µes, consulte:

{% content-ref url="../aws-services/aws-cloudfront-enum.md" %}
[aws-cloudfront-enum.md](../aws-services/aws-cloudfront-enum.md)
{% endcontent-ref %}

### Man-in-the-Middle

Este [**post do blog**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c) prop√µe alguns cen√°rios diferentes em que uma **Lambda** pode ser adicionada (ou modificada, se j√° estiver sendo usada) em uma **comunica√ß√£o atrav√©s do CloudFront** com o objetivo de **roubar** informa√ß√µes do usu√°rio (como o **cookie** da sess√£o) e **modificar** a **resposta** (injetando um script JS malicioso).

#### Cen√°rio 1: MitM onde o CloudFront est√° configurado para acessar algum HTML de um bucket

* **Crie** a **fun√ß√£o** maliciosa.
* **Associe-a** √† distribui√ß√£o do CloudFront.
* Defina o **tipo de evento como "Viewer Response"**.

Acessando a resposta, voc√™ pode roubar o cookie dos usu√°rios e injetar um JS malicioso.

#### Cen√°rio 2: MitM onde o CloudFront j√° est√° usando uma fun√ß√£o lambda

* **Modifique o c√≥digo** da fun√ß√£o lambda para roubar informa√ß√µes sens√≠veis.

Voc√™ pode verificar o [**c√≥digo tf para recriar esses cen√°rios aqui**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main).

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **vers√£o mais recente do PEASS ou baixar o HackTricks em PDF**, verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo Telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no GitHub.

</details>
