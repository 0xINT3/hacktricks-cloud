# AWS - SNS Post Explotación

<details>

<summary><strong>Aprende hacking de AWS de cero a héroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colección de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sigue** a **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## SNS

Para más información:

{% content-ref url="../aws-services/aws-sns-enum.md" %}
[aws-sns-enum.md](../aws-services/aws-sns-enum.md)
{% endcontent-ref %}

### Interrumpir Mensajes

En varios casos, los temas de SNS se utilizan para enviar mensajes a plataformas que están siendo monitoreadas (correos electrónicos, mensajes de slack...). Si un atacante impide el envío de los mensajes que alertan sobre su presencia en la nube, podría permanecer sin ser detectado.

### `sns:DeleteTopic`

Un atacante podría eliminar un tema completo de SNS, causando la pérdida de mensajes e impactando en las aplicaciones que dependen del tema.
```bash
aws sns delete-topic --topic-arn <value>
```
**Impacto Potencial**: Pérdida de mensajes y disrupción del servicio para aplicaciones que utilizan el tema eliminado.

### `sns:Publish`

Un atacante podría enviar mensajes maliciosos o no deseados al tema SNS, lo que podría causar corrupción de datos, activar acciones no intencionadas o agotar recursos.
```bash
aws sns publish --topic-arn <value> --message <value>
```
**Impacto Potencial**: Corrupción de datos, acciones no intencionadas o agotamiento de recursos.

### `sns:SetTopicAttributes`

Un atacante podría modificar los atributos de un tema SNS, afectando potencialmente su rendimiento, seguridad o disponibilidad.

{% code overflow="wrap" %}
```bash
aws sns set-topic-attributes --topic-arn <value> --attribute-name <value> --attribute-value <value>
```
{% endcode %}

**Impacto Potencial**: Configuraciones erróneas que conducen a un rendimiento degradado, problemas de seguridad o disponibilidad reducida.

### `sns:Subscribe`, `sns:Unsubscribe`

Un atacante podría suscribirse o darse de baja de un tema de SNS, ganando potencialmente acceso no autorizado a mensajes o interrumpiendo el funcionamiento normal de aplicaciones que dependen del tema.

{% code overflow="wrap" %}
```bash
aws sns subscribe --topic-arn <value> --protocol <value> --endpoint <value>
aws sns unsubscribe --subscription-arn <value>
```
{% endcode %}

**Impacto Potencial**: Acceso no autorizado a mensajes, interrupción del servicio para aplicaciones que dependen del tema afectado.

### `sns:AddPermission`, `sns:RemovePermission`

Un atacante podría otorgar acceso a un tema SNS a usuarios o servicios no autorizados, o revocar permisos a usuarios legítimos, causando interrupciones en el funcionamiento normal de aplicaciones que dependen del tema.
```css
aws sns add-permission --topic-arn <value> --label <value> --aws-account-id <value> --action-name <value>
aws sns remove-permission --topic-arn <value> --label <value>
```
**Impacto Potencial**: Acceso no autorizado al tema, exposición de mensajes o manipulación del tema por usuarios o servicios no autorizados, interrupción del funcionamiento normal de aplicaciones que dependen del tema.

### `sns:TagResource`, `sns:UntagResource`

Un atacante podría agregar, modificar o eliminar etiquetas de recursos SNS, alterando la asignación de costos de su organización, el seguimiento de recursos y las políticas de control de acceso basadas en etiquetas.

{% code overflow="wrap" %}
```bash
aws sns tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws sns untag-resource --resource-arn <value> --tag-keys <key>
```
**Impacto Potencial**: Interrupción de la asignación de costos, seguimiento de recursos y políticas de control de acceso basadas en etiquetas.

<details>

<summary><strong>Aprende hacking en AWS de cero a héroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colección de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sígueme** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
