# AWS - SQS 后渗透

<details>

<summary><strong>从零开始学习 AWS 黑客技术，成为</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS 红队专家)</strong></a><strong>！</strong></summary>

支持 HackTricks 的其他方式：

* 如果您希望在 HackTricks 中看到您的**公司广告**或**下载 HackTricks 的 PDF**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS & HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们独家的[**NFTs 集合**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass) 或在 **Twitter** 🐦 上**关注**我 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来**分享您的黑客技巧。

</details>

## SQS

更多信息请查看：

{% content-ref url="../aws-services/aws-sqs-and-sns-enum.md" %}
[aws-sqs-and-sns-enum.md](../aws-services/aws-sqs-and-sns-enum.md)
{% endcontent-ref %}

### `sqs:SendMessage` , `sqs:SendMessageBatch`

攻击者可以向 SQS 队列发送恶意或不需要的消息，可能导致数据损坏、触发意外行为或耗尽资源。
```bash
aws sqs send-message --queue-url <value> --message-body <value>
aws sqs send-message-batch --queue-url <value> --entries <value>
```
**潜在影响**：漏洞利用、数据损坏、意外行为或资源耗尽。

### `sqs:ReceiveMessage`, `sqs:DeleteMessage`,  `sqs:ChangeMessageVisibility`

攻击者可以接收、删除或修改 SQS 队列中消息的可见性，导致消息丢失、数据损坏或依赖这些消息的应用程序服务中断。
```bash
aws sqs receive-message --queue-url <value>
aws sqs delete-message --queue-url <value> --receipt-handle <value>
aws sqs change-message-visibility --queue-url <value> --receipt-handle <value> --visibility-timeout <value>
```
**潜在影响**：窃取敏感信息，消息丢失，数据损坏，以及对依赖受影响消息的应用程序造成服务中断。

### `sqs:DeleteQueue`

攻击者可以删除整个SQS队列，导致消息丢失并影响依赖该队列的应用程序。
```arduino
Copy codeaws sqs delete-queue --queue-url <value>
```
**潜在影响**：对于使用已删除队列的应用程序，可能会导致消息丢失和服务中断。

### `sqs:PurgeQueue`

攻击者可以清除 SQS 队列中的所有消息，导致消息丢失和依赖这些消息的应用程序可能出现的中断。
```arduino
Copy codeaws sqs purge-queue --queue-url <value>
```
**潜在影响**：依赖于被清除消息的应用程序可能会遭受消息丢失和服务中断。

### `sqs:SetQueueAttributes`

攻击者可以修改SQS队列的属性，可能影响其性能、安全性或可用性。
```arduino
aws sqs set-queue-attributes --queue-url <value> --attributes <value>
```
**潜在影响**：配置错误可能导致性能下降、安全问题或可用性降低。

### `sqs:TagQueue` , `sqs:UntagQueue`

攻击者可以添加、修改或移除 SQS 资源的标签，扰乱您组织的成本分配、资源跟踪以及基于标签的访问控制策略。
```bash
aws sqs tag-queue --queue-url <value> --tags Key=<key>,Value=<value>
aws sqs untag-queue --queue-url <value> --tag-keys <key>
```
**潜在影响**：成本分配、资源跟踪和基于标签的访问控制策略的中断。

### `sqs:RemovePermission`

攻击者可以通过移除与SQS队列相关联的策略，撤销合法用户或服务的权限。这可能导致依赖队列的应用程序的正常功能受到干扰。
```arduino
arduinoCopy codeaws sqs remove-permission --queue-url <value> --label <value>
```
**潜在影响**：由于未经授权的权限移除，依赖队列的应用程序的正常功能可能会受到干扰。

<details>

<summary><strong>从零开始学习AWS黑客技术，成为</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS 红队专家)</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您希望在**HackTricks中看到您的公司广告**或**下载HackTricks的PDF版本**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方的PEASS & HackTricks商品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们独家的[**NFTs系列**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram群组**](https://t.me/peass) 或在 **Twitter** 🐦 上**关注**我 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>
