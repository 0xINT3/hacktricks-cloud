# AWS - Post Esploitation di Secrets Manager

<details>

<summary><strong>Impara l'hacking di AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Secrets Manager

Per ulteriori informazioni, controlla:

{% content-ref url="../../aws-security/aws-services/aws-secrets-manager-enum.md" %}
[aws-secrets-manager-enum.md](../../aws-security/aws-services/aws-secrets-manager-enum.md)
{% endcontent-ref %}

### Leggi i Secrets

I **secrets stessi sono informazioni sensibili**, [controlla la pagina di privesc](../../aws-security/aws-privilege-escalation/aws-secrets-manager-privesc.md) per imparare come leggerli.

### DoS Cambia il Valore del Secret

Cambiando il valore del secret potresti **DoS tutto il sistema che dipende da quel valore.**

{% hint style="warning" %}
Nota che i valori precedenti sono anche memorizzati, quindi √® facile tornare al valore precedente.
{% endhint %}
```bash
# Requires permission secretsmanager:PutSecretValue
aws secretsmanager put-secret-value \
--secret-id MyTestSecret \
--secret-string "{\"user\":\"diegor\",\"password\":\"EXAMPLE-PASSWORD\"}"
```
### DoS Cambio chiave KMS

In alcuni casi, potresti essere in grado di eseguire un attacco di negazione del servizio (DoS) cambiando la chiave KMS (Key Management Service) su AWS. Questo tipo di attacco pu√≤ essere utilizzato per interrompere il funzionamento normale di un'applicazione o di un servizio che dipende dalla chiave KMS per la crittografia dei dati.

Per eseguire questo attacco, dovrai ottenere le autorizzazioni necessarie per modificare la chiave KMS. Una volta ottenute le autorizzazioni, puoi utilizzare l'API di AWS per cambiare la chiave KMS associata all'applicazione o al servizio target.

√à importante notare che questo tipo di attacco pu√≤ causare interruzioni significative e potenzialmente dannose per l'applicazione o il servizio target. Pertanto, √® fondamentale eseguire questo tipo di attacco solo in un ambiente di test o con il consenso esplicito del proprietario dell'applicazione o del servizio.

Ricorda sempre di rispettare le leggi e le normative locali quando esegui attivit√† di pentesting o hacking.
```bash
aws secretsmanager update-secret \
--secret-id MyTestSecret \
--kms-key-id arn:aws:kms:us-west-2:123456789012:key/EXAMPLE1-90ab-cdef-fedc-ba987EXAMPLE
```
### DoS Eliminazione Segreta

Il numero minimo di giorni per eliminare una segreta √® 7.
```bash
aws secretsmanager delete-secret \
--secret-id MyTestSecret \
--recovery-window-in-days 7
```
<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT**](https://opensea.io/collection/the-peass-family) esclusivi
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository di** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) su GitHub.

</details>
