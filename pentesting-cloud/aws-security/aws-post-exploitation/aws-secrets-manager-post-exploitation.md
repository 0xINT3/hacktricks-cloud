# AWS - Secrets Manager Sonrası Sızma

<details>

<summary><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>

## Secrets Manager

Daha fazla bilgi için kontrol edin:

{% content-ref url="../../aws-security/aws-services/aws-secrets-manager-enum.md" %}
[aws-secrets-manager-enum.md](../../aws-security/aws-services/aws-secrets-manager-enum.md)
{% endcontent-ref %}

### Secrets Okuma

**Secrets kendileri hassas bilgilerdir**, onları nasıl okuyacağınızı öğrenmek için [privesc sayfasını](../../aws-security/aws-privilege-escalation/aws-secrets-manager-privesc.md) kontrol edin.

### DoS Secret Değerini Değiştirme

Secret değerini değiştirerek, **o değere bağlı olan tüm sistemi DoS edebilirsiniz.**

{% hint style="warning" %}
Önceki değerlerin de depolandığını unutmayın, bu yüzden sadece önceki değere geri dönmek kolaydır.
{% endhint %}
```bash
# Requires permission secretsmanager:PutSecretValue
aws secretsmanager put-secret-value \
--secret-id MyTestSecret \
--secret-string "{\"user\":\"diegor\",\"password\":\"EXAMPLE-PASSWORD\"}"
```
### DoS KMS Anahtarını Değiştirme

Bir DoS (Hizmet Reddi) saldırısı, hedeflenen bir sistem veya hizmetin normal işleyişini engellemek için yapılan bir saldırı türüdür. AWS Secrets Manager'da bir DoS saldırısı gerçekleştirmek için KMS (Key Management Service) anahtarını değiştirebilirsiniz.

KMS anahtarını değiştirmek için aşağıdaki adımları izleyebilirsiniz:

1. AWS Management Console'a giriş yapın.
2. AWS Secrets Manager hizmetine gidin.
3. Hedeflenen secret'i seçin.
4. "Secret details" bölümünde, "Rotation" sekmesine gidin.
5. "Edit rotation" düğmesine tıklayın.
6. "Rotate automatically" seçeneğini devre dışı bırakın.
7. "KMS key" bölümünde, mevcut anahtarı seçin.
8. "Save changes" düğmesine tıklayın.

Bu adımları takip ederek, KMS anahtarını değiştirerek AWS Secrets Manager'da bir DoS saldırısı gerçekleştirebilirsiniz. Bu saldırı, hedeflenen secret'in normal işleyişini engelleyecektir.
```bash
aws secretsmanager update-secret \
--secret-id MyTestSecret \
--kms-key-id arn:aws:kms:us-west-2:123456789012:key/EXAMPLE1-90ab-cdef-fedc-ba987EXAMPLE
```
### Gizli Bilgiyi Silme DoS Saldırısı

Bir gizli bilgiyi silmek için gereken minimum gün sayısı 7'dir.
```bash
aws secretsmanager delete-secret \
--secret-id MyTestSecret \
--recovery-window-in-days 7
```
<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman seviyesine öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong> ile!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek isterseniz** veya **HackTricks'i PDF olarak indirmek isterseniz** [**ABONELİK PLANLARINA**](https://github.com/sponsors/carlospolop) göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'ı takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek paylaşın**.

</details>
