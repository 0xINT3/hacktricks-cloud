# AWS - RDS 인증되지 않은 열거

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**를** **팔로우**하세요.
* **HackTricks**와 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하여 **해킹 트릭을 공유**하세요.

</details>

## RDS

자세한 정보는 다음을 확인하세요:

{% content-ref url="../aws-services/aws-databases/aws-relational-database-rds-enum.md" %}
[aws-relational-database-rds-enum.md](../aws-services/aws-databases/aws-relational-database-rds-enum.md)
{% endcontent-ref %}

## 공개 포트

**인터넷에서 데이터베이스에 대한 공개 액세스**를 제공할 수 있습니다. 공격자는 여전히 데이터베이스에 들어가기 위해 **사용자 이름과 암호**, IAM 액세스 또는 **exploit**을 알아야 합니다.

## 공개 RDS 스냅샷

AWS는 **누구에게나 RDS 스냅샷을 다운로드할 수 있는 액세스**를 허용합니다. 자신의 계정에서 이러한 공개 RDS 스냅샷을 매우 쉽게 나열할 수 있습니다:
```bash
# Public RDS snapshots
aws rds describe-db-snapshots --include-public

## Search by account ID
aws rds describe-db-snapshots --include-public --query 'DBSnapshots[?contains(DBSnapshotIdentifier, `284546856933:`) == `true`]'
## To share a RDS snapshot with everybody the RDS DB cannot be encrypted (so the snapshot won't be encryted)
## To share a RDS encrypted snapshot you need to share the KMS key also with the account


# From the own account you can check if there is any public snapshot with:
aws rds describe-db-snapshots --snapshot-type public [--region us-west-2]
## Even if in the console appear as there are public snapshot it might be public
## snapshots from other accounts used by the current account
```
### 공개 URL 템플릿

The following URL template can be used to access the AWS RDS service without authentication:

다음 URL 템플릿은 인증 없이 AWS RDS 서비스에 액세스하는 데 사용할 수 있습니다:

```
https://rds.amazonaws.com/
```

### Enumerating Databases

To enumerate the databases in an AWS RDS instance, you can send a POST request to the following URL:

AWS RDS 인스턴스의 데이터베이스를 열거하려면 다음 URL로 POST 요청을 보낼 수 있습니다:

```
https://rds.amazonaws.com/
```

The request body should contain the following XML data:

요청 본문에는 다음 XML 데이터가 포함되어야 합니다:

```xml
<Action>DescribeDBInstances</Action>
```

### Enumerating Tables

To enumerate the tables in a specific database, you can send a POST request to the following URL:

특정 데이터베이스의 테이블을 열거하려면 다음 URL로 POST 요청을 보낼 수 있습니다:

```
https://rds.amazonaws.com/
```

The request body should contain the following XML data:

요청 본문에는 다음 XML 데이터가 포함되어야 합니다:

```xml
<Action>DescribeDBTables</Action>
<DBInstanceIdentifier>INSTANCE_IDENTIFIER</DBInstanceIdentifier>
```

Replace `INSTANCE_IDENTIFIER` with the identifier of the AWS RDS instance you want to enumerate tables from.

`INSTANCE_IDENTIFIER`를 열거할 테이블이 있는 AWS RDS 인스턴스의 식별자로 대체하세요.

### Enumerating Data

To enumerate the data in a specific table, you can send a POST request to the following URL:

특정 테이블의 데이터를 열거하려면 다음 URL로 POST 요청을 보낼 수 있습니다:

```
https://rds.amazonaws.com/
```

The request body should contain the following XML data:

요청 본문에는 다음 XML 데이터가 포함되어야 합니다:

```xml
<Action>ExecuteSql</Action>
<DBInstanceIdentifier>INSTANCE_IDENTIFIER</DBInstanceIdentifier>
<SqlStatement>SELECT * FROM TABLE_NAME</SqlStatement>
```

Replace `INSTANCE_IDENTIFIER` with the identifier of the AWS RDS instance and `TABLE_NAME` with the name of the table you want to enumerate data from.

`INSTANCE_IDENTIFIER`를 AWS RDS 인스턴스의 식별자로, `TABLE_NAME`을 데이터를 열거하려는 테이블의 이름으로 대체하세요.
```
mysql://{user_provided}.{random_id}.{region}.rds.amazonaws.com:3306
postgres://{user_provided}.{random_id}.{region}.rds.amazonaws.com:5432
```
<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **Hacking 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하세요.

</details>
