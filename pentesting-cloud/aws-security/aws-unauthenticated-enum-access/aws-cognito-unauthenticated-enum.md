# AWS - Cognito Ongeverifieerde Enumerering

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repos.

</details>

## Ongeverifieerde Cognito

Cognito is 'n AWS-diens wat ontwikkelaars in staat stel om hul app-gebruikers toegang tot AWS-diens te gee. Ontwikkelaars sal **IAM-rolle aan geautehtiseerde gebruikers** in hul app toeken (moontlik kan mense net registreer) en hulle kan ook 'n **IAM-rol aan ongeverifieerde gebruikers** toeken.

Vir basiese inligting oor Cognito, kyk na:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Pacu-modules vir pentesting en enumerasie

[Pacu](https://github.com/RhinoSecurityLabs/pacu), die AWS-uitbuitingsraamwerk, sluit nou die "cognito__enum" en "cognito__attack" modules in wat outomatiese enumerasie van alle Cognito-bates in 'n rekening en swak konfigurasies, gebruikerskenmerke wat vir toegangsbeheer gebruik word, ens., outomatiseer. Dit sluit ook outomatiese gebruikerskepping (insluitend MFA-ondersteuning) en bevoorregte eskalasie gebaseer op wysigbare aangepaste kenmerke, bruikbare identiteitspoel-legitimasie, ens.

Vir 'n beskrywing van die modules se funksies, sien deel 2 van die [blogpos](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2). Vir installasie-instruksies, sien die hoof [Pacu](https://github.com/RhinoSecurityLabs/pacu) bladsy.

### Gebruik

Voorbeeld van cognito__attack-gebruik om gebruikerskepping en alle bevoorregte eskalasie-vektore teen 'n gegewe identiteitspoel en gebruikerspoelklient te probeer:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
Voorbeeld cognito__enum gebruik om alle gebruikerspools, gebruikerspoolclients, identiteitspools, gebruikers, ens. te verzamelen wat sigbaar is in die huidige AWS-rekening:

```plaintext
cognito__enum
```

Dit bevel sal alle relevante inligting oor gebruikerspools, gebruikerspoolclients, identiteitspools en gebruikers in die huidige AWS-rekening versamel.
```bash
Pacu (new:test) > run cognito__enum
```
### Identity Pool ID

Identiteitspoels kan **IAM-rolle aan ongeverifieerde gebruikers toekennen** die alleen maar de Identity Pool ID **kennen** (wat vrij gebruikelijk is om **te vinden**), en een aanvaller met deze informatie zou kunnen proberen toegang te krijgen tot die IAM-rol en deze te misbruiken.\
Bovendien kunnen IAM-rollen ook worden toegewezen aan **geverifieerde gebruikers** die toegang hebben tot de Identity Pool. Als een aanvaller een gebruiker kan **registreren** of al toegang heeft tot de identiteitsprovider die wordt gebruikt in de identity pool, kan hij toegang krijgen tot de **IAM-rol die aan geauthenticeerde** gebruikers wordt gegeven en misbruik maken van de privileges ervan.

[**Bekijk hier hoe je dat kunt doen**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### User Pool ID

Standaard staat Cognito toe dat er een **nieuwe gebruiker wordt geregistreerd**. Het kunnen registreren van een gebruiker kan je toegang geven tot de **onderliggende applicatie** of tot de **geauthenticeerde IAM-toegangsrol van een Identity Pool** die de Cognito User Pool als identiteitsprovider accepteert. [**Bekijk hier hoe je dat kunt doen**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).

<details>

<summary><strong>Leer AWS-hacken van beginner tot expert met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere manieren om HackTricks te ondersteunen:

* Als je je **bedrijf geadverteerd wilt zien in HackTricks** of **HackTricks in PDF wilt downloaden**, bekijk dan de [**ABONNEMENTSPAKKETTEN**](https://github.com/sponsors/carlospolop)!
* Koop de [**offici√´le PEASS & HackTricks-merchandise**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), onze collectie exclusieve [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Sluit je aan bij de** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of de [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel je hacktrucs door PR's in te dienen bij de** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repos.

</details>
