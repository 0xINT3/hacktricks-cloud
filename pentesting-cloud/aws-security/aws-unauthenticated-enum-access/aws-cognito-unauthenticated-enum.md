# AWS - Cognito Yetkilendirilmemiş Enum

<details>

<summary><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına **PR göndererek paylaşın**.

</details>

## Yetkilendirilmemiş Cognito

Cognito, geliştiricilere **uygulama kullanıcılarına AWS hizmetlerine erişim izni verme** imkanı sağlayan bir AWS hizmetidir. Geliştiriciler, uygulamalarında **kimlik doğrulaması yapılmış kullanıcılara IAM rolleri** verebilirler (potansiyel olarak insanlar sadece kaydolabilecek) ve ayrıca **yetkilendirilmemiş kullanıcılara IAM rolü** verebilirler.

Cognito hakkında temel bilgiler için:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Pentesting ve enumarasyon için Pacu modülleri

[Pacu](https://github.com/RhinoSecurityLabs/pacu), AWS istismar çerçevesi, artık bir hesaptaki tüm Cognito varlıklarının enumarasyonunu otomatikleştiren "cognito__enum" ve "cognito__attack" modüllerini içerir ve zayıf yapılandırmaları, erişim kontrolü için kullanılan kullanıcı özniteliklerini vb. belirler ve ayrıca değiştirilebilir özel özniteliklere dayalı kullanıcı oluşturmayı (MFA desteği de dahil) ve ayrıca kullanılabilir kimlik havuzu kimlik bilgilerini, id token'larında devralınabilir rolleri otomatikleştirir.

Modüllerin işlevlerinin açıklaması için [blog yazısının](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2) 2. bölümüne bakın. Kurulum talimatları için ana [Pacu](https://github.com/RhinoSecurityLabs/pacu) sayfasına bakın.

### Kullanım

Belirli bir kimlik havuzu ve kullanıcı havuzu istemcisine karşı kullanıcı oluşturma ve tüm ayrıcalık yükseltme vektörlerini denemek için örnek cognito__attack kullanımı:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
Mevcut AWS hesabında görülebilen tüm kullanıcı havuzları, kullanıcı havuzu istemcileri, kimlik havuzları, kullanıcılar vb. bilgileri toplamak için örnek cognito__enum kullanımı:
```bash
Pacu (new:test) > run cognito__enum
```
### Kimlik Havuzu Kimliği

Kimlik Havuzları, sadece **Kimlik Havuzu Kimliğini bilen kimlik doğrulanmamış kullanıcılara** IAM rolleri verebilir (bu oldukça yaygın olarak **bulunabilir**). Bu bilgiye sahip bir saldırgan, bu IAM rolüne **erişmeyi deneyebilir** ve onu istismar edebilir.\
Ayrıca, IAM rolleri, Kimlik Havuzuna erişen **kimlik doğrulanmış kullanıcılara da atanabilir**. Bir saldırgan, bir kullanıcıyı **kaydetme** yeteneğine sahipse veya kimlik havuzunda kullanılan **kimlik sağlayıcıya zaten erişimi varsa**, kimlik doğrulanmış kullanıcılara verilen **IAM rolüne erişebilir** ve ayrıcalıklarını kötüye kullanabilir.

[**Bunu nasıl yapacağınızı buradan kontrol edin**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### Kullanıcı Havuzu Kimliği

Varsayılan olarak, Cognito yeni bir kullanıcı **kaydetmeye izin verir**. Bir kullanıcıyı kaydedebilmek, size **altta yatan uygulamaya erişim** veya Cognito Kullanıcı Havuzu'nu kimlik sağlayıcı olarak kabul eden bir Kimlik Havuzunun **kimlik doğrulama IAM erişim rolüne erişim** sağlayabilir. [**Bunu nasıl yapacağınızı buradan kontrol edin**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).

<details>

<summary><strong>AWS hackleme konusunda sıfırdan kahraman olmak için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>'ı öğrenin!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keşfedin, özel [**NFT'lerimizi**](https://opensea.io/collection/the-peass-family) görün
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya bizi **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'ı takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek paylaşın**.

</details>
