# AWS - Ανεξουσιοδότητη Απαρίθμηση Cognito

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Ανεξουσιοδότητη Cognito

Το Cognito είναι ένα υπηρεσία του AWS που επιτρέπει στους προγραμματιστές να **παρέχουν στους χρήστες των εφαρμογών τους πρόσβαση σε υπηρεσίες του AWS**. Οι προγραμματιστές θα παραχωρήσουν **ρόλους IAM σε επαληθευμένους χρήστες** στην εφαρμογή τους (πιθανώς οι άνθρωποι θα μπορούν απλώς να εγγραφούν) και μπορούν επίσης να παραχωρήσουν έναν **ρόλο IAM σε μη επαληθευμένους χρήστες**.

Για βασικές πληροφορίες σχετικά με το Cognito, ανατρέξτε στο:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Εργαλεία Pacu για pentesting και απαρίθμηση

Το [Pacu](https://github.com/RhinoSecurityLabs/pacu), το πλαίσιο εκμετάλλευσης του AWS, περιλαμβάνει τώρα τα ενότητα "cognito__enum" και "cognito__attack" που αυτοματοποιούν την απαρίθμηση όλων των πόρων Cognito σε έναν λογαριασμό και εντοπίζουν αδύναμες διαμορφώσεις, χαρακτηριστικά χρήστη που χρησιμοποιούνται για έλεγχο πρόσβασης, κ.λπ., και επίσης αυτοματοποιούν τη δημιουργία χρήστη (συμπεριλαμβανομένης της υποστήριξης MFA) και την ανέλιξη δικαιωμάτων με βάση τα προσαρμόσιμα προσαρμοσμένα χαρακτηριστικά, τα διαπιστευτήρια του πισίνας ταυτοτήτων που μπορούν να χρησιμοποιηθούν, τους ρόλους που μπορούν να υποθέσουν στα διακριτικά ταυτότητας, κ.λπ.

Για μια περιγραφή των λειτουργιών των ενοτήτων, δείτε το μέρος 2 της [ανάρτησης στο blog](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2). Για οδηγίες εγκατάστασης, ανατρέξτε στην κύρια σελίδα του [Pacu](https://github.com/RhinoSecurityLabs/pacu).

### Χρήση

Δείγμα χρήσης του εργαλείου cognito__attack για να προσπαθήσετε τη δημιουργία χρήστη και όλα τα διανύσματα προνομιούχων πρόσβασης εναντίον ενός συγκεκριμένου πισίνα ταυτοτήτων και πελάτη πισίνας χρηστών:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
Δείγμα χρήσης της εντολής cognito__enum για τη συλλογή όλων των user pools, user pool clients, identity pools, χρηστών κ.λπ. που είναι ορατά στον τρέχοντα λογαριασμό AWS:
```bash
Pacu (new:test) > run cognito__enum
```
### Αναγνωριστικό Identity Pool

Τα Identity Pools μπορούν να χορηγήσουν **IAM ρόλους σε μη εξουσιοδοτημένους χρήστες** που απλώς **γνωρίζουν το αναγνωριστικό Identity Pool** (το οποίο είναι αρκετά συνηθισμένο να **βρεθεί**), και ένας επιτιθέμενος με αυτές τις πληροφορίες μπορεί να προσπαθήσει να **αποκτήσει πρόσβαση σε αυτόν τον IAM ρόλο** και να τον εκμεταλλευτεί.\
Επιπλέον, οι IAM ρόλοι μπορούν να ανατεθούν και σε **εξουσιοδοτημένους χρήστες** που έχουν πρόσβαση στο Identity Pool. Αν ένας επιτιθέμενος μπορεί να **εγγραφεί ως χρήστης** ή ήδη έχει **πρόσβαση στον πάροχο ταυτότητας** που χρησιμοποιείται στο identity pool, μπορεί να αποκτήσει πρόσβαση στον **IAM ρόλο που δίνεται στους εξουσιοδοτημένους** χρήστες και να καταχραστεί τα προνόμιά τους.

[**Ελέγξτε πώς να το κάνετε αυτό εδώ**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### Αναγνωριστικό User Pool

Από προεπιλογή, το Cognito επιτρέπει την **εγγραφή νέου χρήστη**. Η δυνατότητα εγγραφής χρήστη μπορεί να σας δώσει **πρόσβαση** στην **υποκείμενη εφαρμογή** ή στον **εξουσιοδοτημένο ρόλο IAM ενός Identity Pool** που αποδέχεται ως πάροχο ταυτότητας το Cognito User Pool. [**Ελέγξτε πώς να το κάνετε αυτό εδώ**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας στο hacking υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) στο github.

</details>
