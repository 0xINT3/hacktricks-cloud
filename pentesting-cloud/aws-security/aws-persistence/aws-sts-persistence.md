# AWS - Uhifadhi wa STS

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## STS

Kwa habari zaidi tembelea:

{% content-ref url="../aws-services/aws-sts-enum.md" %}
[aws-sts-enum.md](../aws-services/aws-sts-enum.md)
{% endcontent-ref %}

### Kijisehemu cha jukumu

Vijisehemu vya muda haviwezi kuorodheshwa, hivyo kudumisha kijisehemu cha muda kilichopo ni njia ya kudumisha ushikaji.

<pre class="language-bash"><code class="lang-bash">aws sts get-session-token --duration-seconds 129600

# Pamoja na MFA
aws sts get-session-token \
--serial-number &#x3C;jina-la-kifaa-cha-mfa> \
--token-code &#x3C;kodi-kutoka-kwa-kijisehemu>

# Jina la kifaa cha vifaa vya elektroniki kawaida ni nambari kutoka nyuma ya kifaa, kama vile GAHT12345678
<strong># Jina la kifaa cha SMS ni ARN kwenye AWS, kama vile arn:aws:iam::123456789012:sms-mfa/username
</strong># Jina la kifaa la kielektroniki ni ARN kwenye AWS, kama vile arn:aws:iam::123456789012:mfa/username
</code></pre>

### Udukuzi wa Mnyororo wa Majukumu

[**Udukuzi wa mnyororo wa majukumu ni kipengele kinachotambuliwa na AWS**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_roles\_terms-and-concepts.html#Role%20chaining), mara nyingi hutumiwa kudumisha ushikaji wa kimya. Inajumuisha uwezo wa **kudai jukumu ambalo kisha linadai lingine**, labda kurudi kwenye jukumu la awali kwa **njia ya mzunguko**. Kila wakati jukumu linadaiwa, uga wa kumalizika kwa vyeti unarejeshwa. Kwa hivyo, ikiwa majukumu mawili yameboreshwa kudaiana, hii inaruhusu upya wa kudumu wa vyeti.

Unaweza kutumia [**zana hii**](https://github.com/hotnops/AWSRoleJuggler/) kuendelea na udukuzi wa mnyororo wa majukumu:
```bash
./aws_role_juggler.py -h
usage: aws_role_juggler.py [-h] [-r ROLE_LIST [ROLE_LIST ...]]

optional arguments:
-h, --help            show this help message and exit
-r ROLE_LIST [ROLE_LIST ...], --role-list ROLE_LIST [ROLE_LIST ...]
```
<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
