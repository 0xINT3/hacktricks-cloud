# AWS - Lightsail Persistence

<details>

<summary><strong>ゼロからヒーローまでのAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見る
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)をフォローする
- **ハッキングトリックを共有するには、**[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

## Lightsail

詳細については、以下をチェックしてください：

{% content-ref url="../../aws-security/aws-services/aws-lightsail-enum.md" %}
[aws-lightsail-enum.md](../../aws-security/aws-services/aws-lightsail-enum.md)
{% endcontent-ref %}

### インスタンスのSSHキーとDBパスワードをダウンロード

おそらく変更されないので、持っているだけで持続性の良い選択肢です

### インスタンスにバックドアを設置

攻撃者はインスタンスにアクセスしてバックドアを設置できます：

- 例えば、従来の**rootkit**を使用する
- 新しい**public SSH key**を追加する
- バックドアを持つポートを**ポートノッキング**で公開する

### DNS持続性

ドメインが構成されている場合：

- IPを指すサブドメインを作成して、**サブドメインの乗っ取り**を行う
- ドメインから**メールを送信**できるようにする**SPF**レコードを作成する
- **メインドメインIPを自分のIPに設定**し、自分のIPから正規のIPに**MitM**を実行する
