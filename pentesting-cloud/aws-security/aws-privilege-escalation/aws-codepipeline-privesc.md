# AWS - Προνομιούχα Επέκταση Κώδικα Σωλήνας

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## codepipeline

Για περισσότερες πληροφορίες σχετικά με το codepipeline, ελέγξτε:

{% content-ref url="../aws-services/aws-datapipeline-codepipeline-codebuild-and-codecommit.md" %}
[aws-datapipeline-codepipeline-codebuild-and-codecommit.md](../aws-services/aws-datapipeline-codepipeline-codebuild-and-codecommit.md)
{% endcontent-ref %}

### `iam:PassRole`, `codepipeline:CreatePipeline`, `codebuild:CreateProject, codepipeline:StartPipelineExecution`

Κατά τη δημιουργία ενός κώδικα σωλήνας, μπορείτε να υποδείξετε έναν **ρόλο IAM του codepipeline για εκτέλεση**, επομένως μπορείτε να τους απειλήσετε.

Εκτός από τα προηγούμενα δικαιώματα, θα χρειαστεί να έχετε **πρόσβαση στον τόπο όπου αποθηκεύεται ο κώδικας** (S3, ECR, github, bitbucket...)

Δοκίμασα αυτό κάνοντας τη διαδικασία στην ιστοσελίδα, τα δικαιώματα που αναφέρθηκαν προηγουμένως δεν είναι τα απαιτούμενα για τη δημιουργία ενός κώδικα σωλήνας, αλλά για να τον δημιουργήσετε στον ιστό, θα χρειαστείτε επίσης: `codebuild:ListCuratedEnvironmentImages, codebuild:ListProjects, codebuild:ListRepositories, codecommit:ListRepositories, events:PutTargets, codepipeline:ListPipelines, events:PutRule, codepipeline:ListActionTypes, cloudtrail:<several>`

Κατά τη **δημιουργία του έργου κατασκευής**, μπορείτε να υποδείξετε μια **εντολή για εκτέλεση** (αντίστροφη κέλυφος;) και να εκτελέσετε τη φάση κατασκευής ως **χρήστης με προνόμια**, αυτή είναι η διαμόρφωση που χρειάζεται ο επιτιθέμενος για να απειλήσει:

![](<../../../.gitbook/assets/image (53).png>)

![](<../../../.gitbook/assets/image (64).png>)

### ?`codebuild:UpdateProject, codepipeline:UpdatePipeline, codepipeline:StartPipelineExecution`

Μπορεί να είναι δυνατή η τροποποίηση του ρόλου που χρησιμοποιείται και της εντολής που εκτελείται σε έναν κώδικα σωλήνα με τα προηγούμενα δικαιώματα.

### `codepipeline:pollforjobs`

[Το AWS αναφέρει](https://docs.aws.amazon.com/codepipeline/latest/APIReference/API\_PollForJobs.html):

> Όταν καλείται αυτό το API, το CodePipeline **επιστρέφει προσωρινές πιστοποιήσεις για το S3 bucket** που χρησιμοποιείται για την αποθήκευση των αντικειμένων για τον σωλήνα, εάν η ενέργεια απαιτεί πρόσβαση σε αυτό το S3 bucket για είσοδο ή εξαγωγή αντικειμένων. Αυτό το API επίσης **επιστρέφει οποιεσδήποτε μυστικές τιμές έχουν καθοριστεί για την ενέργεια**.

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
