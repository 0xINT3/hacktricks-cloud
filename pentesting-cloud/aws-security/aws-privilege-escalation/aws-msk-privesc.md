# AWS - MSK 特権昇格

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>を通じて、ゼロからヒーローまでAWSハッキングを学ぶ</strong></a><strong>！</strong></summary>

HackTricks をサポートする他の方法:

- **HackTricks で企業を宣伝したい** または **HackTricks をPDFでダウンロードしたい** 場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)** に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live) をフォローする
- **ハッキングトリックを共有するために、** [**HackTricks**](https://github.com/carlospolop/hacktricks) と [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) のGitHubリポジトリにPRを提出する

</details>

## MSK

MSK（Kafka）の詳細については、以下をチェックしてください:

{% content-ref url="../aws-services/aws-msk-enum.md" %}
[aws-msk-enum.md](../aws-services/aws-msk-enum.md)
{% endcontent-ref %}

### `msk:ListClusters`, `msk:UpdateSecurity`

これらの**特権**と**kafkaブローカーがあるVPCへのアクセス**があれば、**None認証**を追加してアクセスできます。 

{% code overflow="wrap" %}
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
{% endcode %}

VPC へのアクセスが必要です。なぜなら、**Kafka に公開的に None 認証を有効にできない**からです。もし公開的になっている場合、**SASL/SCRAM** 認証が使用されている場合、アクセスするための秘密を読むことができます（秘密を読むために追加の権限が必要です）。\
**IAM ロールベースの認証**が使用されており、**Kafka が公開的になっている**場合、これらの権限を悪用してアクセス権を与えることができます。
