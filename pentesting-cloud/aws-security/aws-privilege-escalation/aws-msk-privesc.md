# AWS - MSK权限提升

<details>

<summary><strong>支持HackTricks并获得福利！</strong></summary>

* 如果您想在HackTricks中看到您的公司广告，或者如果您想访问PEASS的最新版本或下载PDF版本的HackTricks，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github仓库提交PR来分享您的黑客技巧。**

</details>

## MSK

有关MSK（Kafka）的更多信息，请查看：

{% content-ref url="../aws-services/aws-msk-enum.md" %}
[aws-msk-enum.md](../aws-services/aws-msk-enum.md)
{% endcontent-ref %}

### `msk:ListClusters`, `msk:UpdateSecurity`

通过这些**权限**和**对Kafka代理所在的VPC的访问权限**，您可以添加**无身份验证**以访问它们。

{% code overflow="wrap" %}
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
{% endcode %}

你需要访问VPC，因为**你不能在公开暴露的Kafka上启用无身份验证**。如果它是公开暴露的，并且使用了**SASL/SCRAM**身份验证，你可以**读取秘密**以获取访问权限（你需要额外的权限来读取秘密）。\
如果使用了**IAM角色身份验证**并且**Kafka是公开暴露的**，你仍然可以滥用这些权限来给你授予访问权限。

<details>

<summary><strong>支持HackTricks并获得福利！</strong></summary>

* 如果你想看到你的**公司在HackTricks中被宣传**，或者如果你想访问**PEASS的最新版本或下载PDF格式的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获得[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram群组**](https://t.me/peass) 或 **关注**我在**Twitter**上的动态 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github仓库提交PR来分享你的黑客技巧。**

</details>
