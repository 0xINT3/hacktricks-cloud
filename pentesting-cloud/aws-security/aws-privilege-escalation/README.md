# AWS - 特権昇格

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でAWSハッキングをゼロからヒーローまで学びましょう</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**場合や**HackTricksをPDFでダウンロード**したい場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)をフォローする
- **ハッキングトリックを共有する**ために、[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出する

</details>

## AWS 特権昇格

AWSで特権を昇格させる方法は、他のロール/ユーザー/グループの特権にアクセスできるだけの権限を持っていることです。組織全体に管理者アクセス権を持つまで昇格を繰り返します。

{% hint style="warning" %}
AWSには、エンティティに付与できる**数百**（もしくは数千）の**権限**があります。この本では、**特権昇格**に悪用できる**私が知っているすべての権限**を見つけることができますが、ここに記載されていない**パス**を知っている場合は、**共有してください**。
{% endhint %}

{% hint style="danger" %}
IAMポリシーに`"Effect": "Allow"`および`"NotAction": "Someaction"`がある場合、**リソース**を示している... それは**許可された主体**が指定されたアクション以外の**何でも行う権限を持っている**ことを意味します。\
したがって、これは主体に**特権権限を付与**する別の方法であることを覚えておいてください。
{% endhint %}

すべての**サービスごとに特権昇格パス**を見つけることができます：

- [**Apigateway Privesc**](aws-apigateway-privesc.md)
- [**Codebuild Privesc**](aws-codebuild-privesc.md)
- [**Codepipeline Privesc**](aws-codepipeline-privesc.md)
- [**Codestar Privesc**](aws-codestar-privesc/)
- [**Cloudformation Privesc**](aws-cloudformation-privesc/)
- [**Cognito Privesc**](aws-cognito-privesc.md)
- [**Datapipeline Privesc**](aws-datapipeline-privesc.md)
- [**DynamoDB Privesc**](aws-dynamodb-privesc.md)
- [**EBS Privesc**](aws-ebs-privesc.md)
- [**EC2 Privesc**](aws-ec2-privesc.md)
- [**ECR Privesc**](aws-ecr-privesc.md)
- [**ECS Privesc**](aws-ecs-privesc.md)
- [**EFS Privesc**](aws-efs-privesc.md)
- [**EMR Privesc**](aws-emr-privesc.md)
- [**Glue Privesc**](aws-glue-privesc.md)
- [**IAM Privesc**](aws-iam-privesc.md)
- [**KMS Privesc**](aws-kms-privesc.md)
- [**Lambda Privesc**](../../aws-pentesting/aws-privilege-escalation/aws-lambda-privesc.md)
- [**Lightsail Privesc**](aws-lightsail-privesc.md)
- [**MQ Privesc**](aws-mq-privesc.md)
- [**MSK Privesc**](aws-msk-privesc.md)
- [**RDS Privesc**](aws-rds-privesc.md)
- [**Redshift Privesc**](aws-redshift-privesc.md)
- [**S3 Privesc**](aws-s3-privesc.md)
- [**Sagemaker Privesc**](aws-sagemaker-privesc.md)
- [**Secrets Privesc**](aws-secrets-manager-privesc.md)
- [**SSM Privesc**](aws-ssm-privesc.md)
- [**STS Privesc**](aws-sts-privesc.md)
- [**その他のテクニックに関するPrivesc**](broken-reference)

## ツール

- [https://github.com/RhinoSecurityLabs/Security-Research/blob/master/tools/aws-pentest-tools/aws\_escalate.py](https://github.com/RhinoSecurityLabs/Security-Research/blob/master/tools/aws-pentest-tools/aws\_escalate.py)
- [Pacu](https://github.com/RhinoSecurityLabs/pacu)

## 参考文献

- [https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation-part-2/](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation-part-2/)
- [https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/)
- [https://bishopfox.com/blog/privilege-escalation-in-aws](https://bishopfox.com/blog/privilege-escalation-in-aws)
- [https://hackingthe.cloud/aws/exploitation/local-priv-esc-user-data-s3/](https://hackingthe.cloud/aws/exploitation/local-priv-esc-user-data-s3/)

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でAWSハッキングをゼロからヒーローまで学びましょう</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**場合や**HackTricksをPDFでダウンロード**したい場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)をフォローする
- **ハッキングトリックを共有する**ために、[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出する

</details>
