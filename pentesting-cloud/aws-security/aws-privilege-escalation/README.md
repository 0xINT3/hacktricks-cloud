# AWS - 特権エスカレーション

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* もし、**あなたの会社をハックトリックで宣伝したい**場合や、**最新版のPEASSやHackTricksをPDFでダウンロード**したい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを発見しましょう
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしましょう 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ハッキングのトリックを共有するために、PRを提出して** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリに参加しましょう。

</details>

## AWS 特権エスカレーション

AWSで特権をエスカレーションする方法は、他のロール/ユーザー/グループの特権にアクセスできるだけの十分な権限を持つことです。特権をエスカレーションして組織全体に管理者アクセス権を持つまで、エスカレーションを連鎖させます。

{% hint style="warning" %}
AWSには、エンティティに付与できる**数百（もしくは数千）の権限**があります。この本では、**特権をエスカレーションするために悪用できるすべての権限**を見つけることができますが、ここに記載されていない**他の方法**を知っている場合は、**共有してください**。
{% endhint %}

{% hint style="danger" %}
IAMポリシーに`"Effect": "Allow"`と`"NotAction": "Someaction"`が含まれている場合、それは**リソース**を示しています。つまり、**許可された主体**は、指定されたアクション以外の**何でも行う権限を持っている**ことを意味します。\
したがって、これは特権権限を主体に付与する別の方法であることを覚えておいてください。
{% endhint %}

すべての**サービスごとに分類された特権エスカレーションのパス**を見つけることができます：

* [**Apigateway特権エスカレーション**](aws-apigateway-privesc.md)
* [**Codebuild特権エスカレーション**](aws-codebuild-privesc.md)
* [**Codepipeline特権エスカレーション**](aws-codepipeline-privesc.md)
* [**Codestar特権エスカレーション**](aws-codestar-privesc/)
* [**Cloudformation特権エスカレーション**](aws-cloudformation-privesc/)
* [**Cognito特権エスカレーション**](aws-cognito-privesc.md)
* [**Datapipeline特権エスカレーション**](aws-datapipeline-privesc.md)
* [**DynamoDB特権エスカレーション**](aws-dynamodb-privesc.md)
* [**EBS特権エスカレーション**](aws-ebs-privesc.md)
* [**EC2特権エスカレーション**](aws-ec2-privesc.md)
* [**ECR特権エスカレーション**](aws-ecr-privesc.md)
* [**ECS特権エスカレーション**](aws-ecs-privesc.md)
* [**EFS特権エスカレーション**](aws-efs-privesc.md)
* [**EMR特権エスカレーション**](aws-emr-privesc.md)
* [**Glue特権エスカレーション**](aws-glue-privesc.md)
* [**IAM特権エスカレーション**](aws-iam-privesc.md)
* [**KMS特権エスカレーション**](aws-kms-privesc.md)
* [**Lambda特権エスカレーション**](../../aws-pentesting/aws-privilege-escalation/aws-lambda-privesc.md)
* [**Lightsail特権エスカレーション**](aws-lightsail-privesc.md)
* [**MQ特権エスカレーション**](aws-mq-privesc.md)
* [**MSK特権エスカレーション**](aws-msk-privesc.md)
* [**RDS特権エスカレーション**](aws-rds-privesc.md)
* [**Redshift特権エスカレーション**](aws-redshift-privesc.md)
* [**S3特権エスカレーション**](aws-s3-privesc.md)
* [**Sagemaker特権エスカレーション**](aws-sagemaker-privesc.md)
* [**Secrets特権エスカレーション**](aws-secrets-manager-privesc.md)
* [**SSM特権エスカレーション**](aws-ssm-privesc.md)
* [**STS特権エスカレーション**](aws-sts-privesc.md)
* [**その他のテクニックの特権エスカレーション**](aws-misc-privesc/)

## ツール

* [https://github.com/RhinoSecurityLabs/Security-Research/blob/master/tools/aws-pentest-tools/aws\_escalate.py](https://github.com/RhinoSecurityLabs/Security-Research/blob/master/tools/aws-pentest-tools/aws\_escalate.py)
* [Pacu](https://github.com/RhinoSecurityLabs/pacu)

参考文献

* [https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation-part-2/](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation-part-2/)
* [https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/)
* [https://bishopfox.com/blog/privilege-escalation-in-aws](https://bishopfox.com/blog/privilege-escalation-in-aws)
* [https://hackingthe.cloud/aws/exploitation/local-priv-esc-user-data-s3/](https://hackingthe.cloud/aws/exploitation/local-priv-esc-user-data-s3/)

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* もし、**あなたの会社をハックトリックで宣伝したい**場合や、**最新版のPEASSやHackTricksをPDFでダウンロード**したい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを発見しましょう
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしましょう 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ハッキングのトリックを共有するために、PRを提出
