# AWS - 特权升级

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我在 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github 仓库提交 PR 来分享您的黑客技巧。**

</details>

## AWS 特权升级

在 AWS 中提升特权的方法是拥有足够的权限，以便以某种方式访问其他角色/用户/组的权限。通过升级特权，直到获得对组织的管理员访问权限。

{% hint style="warning" %}
AWS 有数百（如果不是数千）个可以授予实体的权限。在本书中，您可以找到我所知道的所有可以滥用以提升特权的权限，但如果您知道此处未提及的某些路径，请分享出来。
{% endhint %}

{% hint style="danger" %}
如果 IAM 策略具有 `"Effect": "Allow"` 和 `"NotAction": "Someaction"`，指示一个**资源**... 这意味着**允许的主体**具有**执行除指定操作之外的任何操作的权限**。\
因此，请记住这是另一种向主体授予特权权限的方式。
{% endhint %}

您可以按服务找到所有的**特权升级路径**：

* [**Apigateway 特权升级**](aws-apigateway-privesc.md)
* [**Codebuild 特权升级**](aws-codebuild-privesc.md)
* [**Codepipeline 特权升级**](aws-codepipeline-privesc.md)
* [**Codestar 特权升级**](aws-codestar-privesc/)
* [**Cloudformation 特权升级**](aws-cloudformation-privesc/)
* [**Cognito 特权升级**](aws-cognito-privesc.md)
* [**Datapipeline 特权升级**](aws-datapipeline-privesc.md)
* [**DynamoDB 特权升级**](aws-dynamodb-privesc.md)
* [**EBS 特权升级**](aws-ebs-privesc.md)
* [**EC2 特权升级**](aws-ec2-privesc.md)
* [**ECR 特权升级**](aws-ecr-privesc.md)
* [**ECS 特权升级**](aws-ecs-privesc.md)
* [**EFS 特权升级**](aws-efs-privesc.md)
* [**EMR 特权升级**](aws-emr-privesc.md)
* [**Glue 特权升级**](aws-glue-privesc.md)
* [**IAM 特权升级**](aws-iam-privesc.md)
* [**KMS 特权升级**](aws-kms-privesc.md)
* [**Lambda 特权升级**](../../aws-pentesting/aws-privilege-escalation/aws-lambda-privesc.md)
* [**Lightsail 特权升级**](aws-lightsail-privesc.md)
* [**MQ 特权升级**](aws-mq-privesc.md)
* [**MSK 特权升级**](aws-msk-privesc.md)
* [**RDS 特权升级**](aws-rds-privesc.md)
* [**Redshift 特权升级**](aws-redshift-privesc.md)
* [**S3 特权升级**](aws-s3-privesc.md)
* [**Sagemaker 特权升级**](aws-sagemaker-privesc.md)
* [**Secrets 特权升级**](aws-secrets-manager-privesc.md)
* [**SSM 特权升级**](aws-ssm-privesc.md)
* [**STS 特权升级**](aws-sts-privesc.md)
* [**Misc（其他技术）特权升级**](aws-misc-privesc/)

## 工具

* [https://github.com/RhinoSecurityLabs/Security-Research/blob/master/tools/aws-pentest-tools/aws\_escalate.py](https://github.com/RhinoSecurityLabs/Security-Research/blob/master/tools/aws-pentest-tools/aws\_escalate.py)
* [Pacu](https://github.com/RhinoSecurityLabs/pacu)

## 参考资料

* [https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation-part-2/](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation-part-2/)
* [https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/)
* [https://bishopfox.com/blog/privilege-escalation-in-aws](https://bishopfox.com/blog/privilege-escalation-in-aws)
* [https://hackingthe.cloud/aws/exploitation/local-priv-esc-user-data-s3/](https://hackingthe.cloud/aws/exploitation/local-priv-esc-user-data-s3/)

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我在 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) **和** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github 仓库提交 PR 来分享您的黑客技巧。**

</details>
