# GCP - Απαρίθμηση Αποθετηρίων Πηγαίου Κώδικα

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Βασικές Πληροφορίες <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Τα Google Cloud Source Repositories είναι ένα πλήρως λειτουργικό, κλιμακούμενο, **ιδιωτικό υπηρεσία αποθετηρίου Git**. Είναι σχεδιασμένο για να **φιλοξενεί τον πηγαίο κώδικα σας σε ένα πλήρως διαχειριζόμενο περιβάλλον**, ενσωματώνοντας αρμονικά με άλλα εργαλεία και υπηρεσίες του GCP. Προσφέρει ένα συνεργατικό και ασφαλές μέρος για ομάδες να αποθηκεύουν, διαχειρίζονται και παρακολουθούν τον κώδικά τους.

Οι βασικές λειτουργίες των Cloud Source Repositories περιλαμβάνουν:

1. **Πλήρως Διαχειριζόμενο Hosting Git**: Προσφέρει την οικεία λειτουργικότητα του Git, πράγμα που σημαίνει ότι μπορείτε να χρησιμοποιήσετε κανονικές εντολές και ροές εργασίας του Git.
2. **Ενσωμάτωση με Υπηρεσίες του GCP**: Ενσωματώνεται με άλλες υπηρεσίες του GCP όπως το Cloud Build, το Pub/Sub και το App Engine για πλήρη ανιχνευσιμότητα από τον κώδικα μέχρι την αναπτυξιακή διαδικασία.
3. **Ιδιωτικά Αποθετήρια**: Βεβαιώνει ότι ο κώδικάς σας αποθηκεύεται με ασφάλεια και ιδιωτικότητα. Μπορείτε να ελέγξετε την πρόσβαση χρησιμοποιώντας ρόλους Διαχείρισης Ταυτότητας και Πρόσβασης (IAM) του Cloud.
4. **Ανάλυση Πηγαίου Κώδικα**: Συνεργάζεται με άλλα εργαλεία του GCP για να παρέχει αυτοματοποιημένη ανάλυση του πηγαίου κώδικά σας, εντοπίζοντας πιθανά προβλήματα όπως σφάλματα, ευπάθειες ή κακές πρακτικές κωδικοποίησης.
5. **Εργαλεία Συνεργασίας**: Υποστηρίζει τη συνεργατική κωδικοποίηση με εργαλεία όπως αιτήματα συγχώνευσης, σχόλια και αξιολογήσεις.
6. **Υποστήριξη Καθρέπτη**: Σας επιτρέπει να συνδέσετε τα Cloud Source Repositories με αποθετήρια που φιλοξενούνται στο GitHub ή το Bitbucket, επιτρέποντας αυτόματη συγχρονισμό και παρέχοντας μια ενοποιημένη προβολή όλων των αποθετηρίων σας.

### Πληροφορίες OffSec <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* Η διαμόρφωση των αποθετηρίων πηγαίου κώδικα μέσα σε ένα έργο θα έχει έναν **Λογαριασμό Υπηρεσίας** που χρησιμοποιείται για τη δημοσίευση μηνυμάτων Cloud Pub/Sub. Ο προεπιλεγμένος που χρησιμοποιείται είναι ο **Compute SA**. Ωστόσο, **δεν νομίζω ότι είναι δυνατό να κλέψετε το διακριτικό του** από τα Αποθετήρια Πηγαίου Κώδικα καθώς εκτελείται στο παρασκήνιο.
* Για να δείτε τον κώδικα μέσα στον ιστότοπο των GCP Cloud Source Repositories ([https://source.cloud.google.com/](https://source.cloud.google.com/)), ο κώδικας πρέπει να είναι **μέσα στον κύριο κλαδί από προεπιλογή**.
* Μπορείτε επίσης να **δημιουργήσετε έναν καθρέπτη Αποθετηρίου Cloud** που να δείχνει σε ένα αποθετήριο από το **Github** ή το **Bitbucket** (δίνοντας πρόσβαση σε αυτές τις πλατφόρμες).
* Είναι δυνατόν να **κωδικοποιήσετε και να εντοπίσετε σφάλματα από μέσα στο GCP**.
* Από προεπιλογή, τα Source Repositories **αποτρέπουν την αποστολή ιδιωτικών κλειδιών σε δεσμεύσεις**, αλλά αυτό μπορεί να απενεργοποιηθεί.

### Άνοιγμα στο Cloud Shell

Είναι δυνατό να ανοίξετε το αποθετήριο στο Cloud Shell, θα εμφανιστεί ένα παράθυρο όπως αυτό:

<figure><img src="../../../.gitbook/assets/image (136).png" alt=""><figcaption></figcaption></figure>

Αυτό θα σας επιτρέψει να κωδικοποιήσετε και να εντοπίσετε σφάλματα στο Cloud Shell (το οποίο μπορεί να διακυβευτεί).

### Απαρίθ
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### Επέκταση Προνομίων & Μετά Εκμετάλλευση

{% content-ref url="../../gcp-pentesting/gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../../gcp-pentesting/gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### Ανεξουσιοδότητη Απαρίθμηση

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Συμμετάσχετε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
