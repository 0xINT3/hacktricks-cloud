# GCP - Bron Repositories Enum

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslagplekke.

</details>

## Basiese Inligting <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Google Cloud Source Repositories is 'n volledig uitgeruste, skaalbare, **privaat Git-opslagdiens**. Dit is ontwerp om jou bronkode in 'n volledig bestuurde omgewing te **berg**, en integreer naadloos met ander GCP-hulpmiddels en -dienste. Dit bied 'n samewerkende en veilige plek vir spanne om hul kode te stoor, bestuur en op te spoor.

Kernkenmerke van Cloud Source Repositories sluit in:

1. **Volledig Bestuurde Git-hosting**: Bied die bekende funksionaliteit van Git, wat beteken dat jy gewone Git-opdragte en werkstrome kan gebruik.
2. **Integrasie met GCP-dienste**: Integreer met ander GCP-dienste soos Cloud Build, Pub/Sub en App Engine vir end-to-end naspeurbaarheid van kode tot implementering.
3. **Privaat Repositories**: Verseker dat jou kode veilig en privaat gestoor word. Jy kan toegang beheer deur gebruik te maak van Cloud Identity and Access Management (IAM) rolle.
4. **Bronkode-analise**: Werk saam met ander GCP-hulpmiddels om outomatiese analise van jou bronkode te bied, wat potensi√´le probleme soos foute, kwesbaarhede of swak koderingspraktyke identifiseer.
5. **Samewerkingshulpmiddels**: Ondersteun samewerkende kodering met hulpmiddels soos samenvoegingsversoeke, kommentaar en resensies.
6. **Spie√´londersteuning**: Maak dit moontlik om Cloud Source Repositories te koppel aan repositories wat op GitHub of Bitbucket gehuisves word, wat outomatiese sinchronisering moontlik maak en 'n eenvormige siening van al jou repositories bied.

### OffSec-inligting <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* Die bronrepository-konfigurasie binne 'n projek sal 'n **Diensrekening** h√™ wat gebruik word om Cloud Pub/Sub-boodskappe te publiseer. Die verstekrekening wat gebruik word, is die **Compute SA**. Ek dink egter nie dit is moontlik om sy token te steel nie vanuit Source Repositories omdat dit in die agtergrond uitgevoer word.
* Om die kode binne die GCP Cloud Source Repositories-webkonsol ([https://source.cloud.google.com/](https://source.cloud.google.com/)) te sien, moet die kode **standaard binne die hooftak wees**.
* Jy kan ook 'n **spie√´l Cloud Repository** skep wat na 'n repo van **Github** of **Bitbucket** wys (deur toegang tot daardie platforms te gee).
* Dit is moontlik om **kode te skryf en te foutsoek van binne GCP**.
* Standaard voorkom Source Repositories dat privaat sleutels in toewydings gedruk word, maar dit kan gedeaktiveer word.

### Open in Cloud Shell

Dit is moontlik om die repository in Cloud Shell oop te maak, 'n venster soos hierdie sal verskyn:

<figure><img src="../../../.gitbook/assets/image (136).png" alt=""><figcaption></figcaption></figure>

Dit sal jou in staat stel om kode te skryf en te foutsoek in Cloud Shell (wat cloudshell in gevaar kan bring).

### Enumerasie

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### Voorregverhoging en Post Exploitation

{% content-ref url="../../gcp-pentesting/gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../../gcp-pentesting/gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### Ongeverifieerde Enumeratie

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere manieren om HackTricks te ondersteunen:

* Als je je **bedrijf geadverteerd wilt zien in HackTricks** of **HackTricks in PDF wilt downloaden**, bekijk dan de [**ABONNEMENTSPAKKETTEN**](https://github.com/sponsors/carlospolop)!
* Koop de [**offici√´le PEASS & HackTricks-merchandise**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), onze collectie exclusieve [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Doe mee aan de** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of de [**telegram-groep**](https://t.me/peass) of **volg** me op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel je hacktrucs door PR's in te dienen bij de** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repo's.

</details>
