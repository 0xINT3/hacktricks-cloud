# GCP - Kaynak Deposu Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>

## Temel Bilgiler <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Google Cloud Kaynak Deposu, tam özellikli, ölçeklenebilir, **özel Git depo hizmetidir**. Kodunuzu tamamen yönetilen bir ortamda barındırmak için tasarlanmış olup, diğer GCP araçları ve hizmetleriyle sorunsuz bir şekilde entegre olur. Takımların kodlarını depolamak, yönetmek ve izlemek için işbirlikçi ve güvenli bir yer sunar.

Cloud Kaynak Deposunun temel özellikleri şunlardır:

1. **Tamamen Yönetilen Git Barındırma**: Git'in tanıdık işlevselliğini sunar, yani düzenli Git komutlarını ve iş akışlarını kullanabilirsiniz.
2. **GCP Hizmetleriyle Entegrasyon**: Kodunuzdan dağıtıma kadar olan süreçte Cloud Build, Pub/Sub ve App Engine gibi diğer GCP hizmetleriyle entegre çalışır.
3. **Özel Depolar**: Kodunuzun güvenli ve özel olarak depolanmasını sağlar. Erişimi, Cloud Kimlik ve Erişim Yönetimi (IAM) rollerini kullanarak kontrol edebilirsiniz.
4. **Kaynak Kodu Analizi**: Kaynak kodunuzun otomatik analizini sağlamak için diğer GCP araçlarıyla birlikte çalışır ve hatalar, güvenlik açıkları veya kötü kodlama uygulamaları gibi potansiyel sorunları tespit eder.
5. **İşbirliği Araçları**: Birleştirme istekleri, yorumlar ve incelemeler gibi araçlarla işbirlikçi kodlama desteği sağlar.
6. **Ayna Desteği**: Cloud Kaynak Deposunu GitHub veya Bitbucket'te barındırılan depolarla bağlayarak otomatik senkronizasyonu sağlar ve tüm depolarınızın birleşik bir görünümünü sunar.

### OffSec Bilgisi <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* Bir projenin içindeki kaynak deposu yapılandırmasında, Cloud Pub/Sub mesajlarını yayınlamak için kullanılan bir **Hizmet Hesabı** bulunur. Varsayılan olarak kullanılan **Compute SA**'nın kaynaktan Repositories üzerinden jetonunun çalınması mümkün değildir.
* GCP Cloud Kaynak Deposu web konsolunda ([https://source.cloud.google.com/](https://source.cloud.google.com/)) kodu görmek için, kodun varsayılan olarak **ana dalda** olması gerekmektedir.
* Ayrıca, **Github** veya **Bitbucket**'teki bir repo'ya işaret eden bir ayna Cloud Deposu oluşturabilirsiniz (bu platformlara erişim sağlar).
* GCP içinden **kod yazabilir ve hata ayıklayabilirsiniz**.
* Kaynak Deposu varsayılan olarak, özel anahtarların taahhütlerde itilmesini engeller, ancak bu devre dışı bırakılabilir.

### Cloud Shell'de Aç

Depoyu Cloud Shell'de açmak mümkündür, aşağıdaki gibi bir iletişim kutusu görünecektir:

<figure><img src="../../../.gitbook/assets/image (136).png" alt=""><figcaption></figcaption></figure>

Bu, Cloud Shell'de kod yazmanıza ve hata ayıklamanıza olanak sağlar (bu, cloudshell'in tehlikeye girmesine neden olabilir).

### Numaralandırma

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
### Yetki Yükseltme ve Sonraki Saldırı

{% content-ref url="../../gcp-pentesting/gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../../gcp-pentesting/gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### Kimlik Doğrulamasız Sorgulama

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>
