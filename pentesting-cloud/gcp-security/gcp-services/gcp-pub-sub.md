# GCP - Pub/Sub Enum

<details>

<summary><strong>Jifunze kuhack AWS kutoka mwanzo hadi mtaalamu na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalamu wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **fuata** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Shiriki mbinu zako za kuhack kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## Pub/Sub <a href="#reviewing-cloud-pubsub" id="reviewing-cloud-pubsub"></a>

[Google **Cloud Pub/Sub**](https://cloud.google.com/pubsub/) inaelezwa kama huduma inayorahisisha kubadilishana ujumbe kati ya programu huru. Vipengele muhimu ni **mada**, ambazo programu zinaweza **jisajili**. Programu zilizojisajili zina uwezo wa **kutuma na kupokea ujumbe**. Kila ujumbe una maudhui halisi pamoja na metadata inayohusiana.

**Mada ni foleni** ambapo ujumbe utatumwa, wakati **jisajili** ni **vitu** ambavyo watumiaji watatumia **kupata ujumbe kwenye mada**. Inaweza kuwepo **jisajili zaidi ya 1 kwa mada** na kuna aina 4 za jisajili:

* **Vuta**: Mtumiaji(s) wa jisajili hii wanahitaji kuvuta ujumbe.
* **Push**: Anwani ya URL inaonyeshwa na ujumbe utatumwa mara moja kwenda huko.
* **Jedwali la Big query**: Kama push lakini kuweka ujumbe ndani ya jedwali la Big query.
* **Uhifadhi wa Cloud**: Toa ujumbe moja kwa moja kwenye kisanduku kilichopo.

Kwa **chaguo-msingi** jisajili inakwisha baada ya siku 31, ingawa inaweza kuwekwa isiishe kamwe.

Kwa **chaguo-msingi**, ujumbe unahifadhiwa kwa siku 7, lakini wakati huu unaweza **ongezwa hadi siku 31**. Pia, ikiwa hauta **ACKed ndani ya sekunde 10** inarudi kwenye foleni. Inaweza pia kuwekwa kwamba ujumbe ulio ACKed uendelee kuhifadhiwa.

Kwa chaguo-msingi, mada inaandikwa kwa kutumia **ufunguo wa kielelezo uliosimamiwa na Google**. Lakini **CMEK** (Ufunguo wa Kielelezo Uliosimamiwa na Mteja) kutoka KMS pia unaweza kuchaguliwa.

**Barua ya kufa**: Jisajili inaweza kusanidi **idadi kubwa ya jaribio la utoaji**. Wakati ujumbe hauwezi kutumwa, unachapishwa tena kwenye mada ya barua ya kufa iliyotajwa.

### Picha & Mifano

Picha ni kipengele kinachochukua **hali ya jisajili wakati fulani**. Kimsingi ni **chelezo thabiti la ujumbe usiothibitishwa katika jisajili**. Kwa kuunda picha, unahifadhi hali ya uthibitisho wa ujumbe wa jisajili, kuruhusu kurudi kwa matumizi ya ujumbe kutoka kwa wakati picha ilichukuliwa, hata baada ya ujumbe wa asili kufutwa.

Ikiwa una bahati sana picha inaweza kuwa na **habari nyeti za zamani** kutoka wakati picha ilipochukuliwa.

Unapounda mada, unaweza kuonyesha kuwa **ujumbe wa mada lazima ufuate muundo**. 

### Urambazaji
```bash
# Get a list of topics in the project
gcloud pubsub topics list
gcloud pubsub topics describe <topic>
gcloud pubsub topics list-subscriptions <topic>
gcloud pubsub topics get-iam-policy <topic>

# Get a list of subscriptions across all topics
gcloud pubsub subscriptions list
gcloud pubsub subscriptions describe <subscription>
gcloud pubsub subscriptions get-iam-policy <subscription>

# Get list of schemas
gcloud pubsub schemas list
gcloud pubsub schemas describe <schema>
gcloud pubsub schemas list-revisions <schema>

# Get list of snapshots
gcloud pubsub snapshots list
gcloud pubsub snapshots describe <snapshot>
```
Hata hivyo, unaweza kupata matokeo bora [**kwa kuomba seti kubwa zaidi ya data**](https://cloud.google.com/pubsub/docs/replay-overview), ikiwa ni pamoja na ujumbe wa zamani. Hii inahitaji mahitaji fulani na inaweza kuathiri programu, kwa hivyo hakikisha unajua kabisa unachofanya.

### Kupandisha Hadhi ya Mamlaka & Baada ya Kudukuliwa

{% content-ref url="../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md" %}
[gcp-pub-sub-post-exploitation.md](../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md)
{% endcontent-ref %}

## Pub/Sub Lite

[**Pub/Sub Lite**](https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite) ni huduma ya ujumbe na **uhifadhi wa eneo**. Pub/Sub Lite **gharama ni sehemu ndogo** ya Pub/Sub na inalenga kwa **mtiririko wa juu** (hadi ujumbe milioni 10 kwa sekunde) na mifumo inayotegemea matukio ambapo gharama ya chini ni kuzingatiwa kuu.

Katika PubSub Lite kuna **mada** na **usajili**, hakuna **picha** na **muundo** na kuna:

* **Hifadhi**: Hifadhi ya Pub/Sub Lite ni kipengele kinachowezesha watumiaji kuweka akiba ya uwezo katika eneo maalum kwa mitiririko yao ya ujumbe.
* **Operesheni**: Inahusu vitendo na kazi zinazohusika katika kusimamia na kusimamia Pub/Sub Lite.

### Uainishaji
```bash
# lite-topics
gcloud pubsub lite-topics list
gcloud pubsub lite-topics describe <topic>
gcloud pubsub lite-topics list-subscriptions <topic>

# lite-subscriptions
gcloud pubsub lite-subscriptions list
gcloud pubsub lite-subscriptions describe <subscription>

# lite-reservations
gcloud pubsub lite-reservations list
gcloud pubsub lite-reservations describe <topic>
gcloud pubsub lite-reservations list-topics <topic>

# lite-operations
gcloud pubsub lite-operations list
gcloud pubsub lite-operations describe <topic>
```
<details>

<summary><strong>Jifunze AWS hacking kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **fuata** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Shiriki mbinu zako za kuhack kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
