# GCP - Pub/Sub

<details>

<summary><strong>рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ.

</details>

## Pub/Sub <a href="#reviewing-cloud-pubsub" id="reviewing-cloud-pubsub"></a>

Google [**Cloud Pub/Sub**](https://cloud.google.com/pubsub/) рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рд╕реНрд╡рддрдВрддреНрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдЖрдкрд╕ рдореЗрдВ **рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред рдореВрд▓ рд░реВрдк рд╕реЗ, **рд╡рд┐рд╖рдп** рд╣реЛрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ рдЕрдиреБрдкреНрд░рдпреЛрдЧ **рд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ **рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП (рдЬреЛ рд╕рдВрджреЗрд╢ рд╕рд╛рдордЧреНрд░реА рдФрд░ рдХреБрдЫ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╕реЗ рдмрдиреЗ рд╣реЛрддреЗ рд╣реИрдВ)ред

**рд╡рд┐рд╖рдп рд╣реА рдХрддрд╛рд░ рд╣реИ** рдЬрд╣рд╛рдВ рд╕рдВрджреЗрд╢ рднреЗрдЬреЗ рдЬрд╛рдПрдВрдЧреЗ, рдЬрдмрдХрд┐ **рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди** рд╡реЗ **рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕** рд╣реИрдВ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ **рд╡рд┐рд╖рдпреЛрдВ рдореЗрдВ рд╕рдВрджреЗрд╢реЛрдВ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ** рдХреЗ рд▓рд┐рдП рдХрд░реЗрдВрдЧреЗред рдПрдХ рд╡рд┐рд╖рдп рдкрд░ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ **рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ** рдФрд░ рддреАрди рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд╣реЛрддреЗ рд╣реИрдВ:

* **рдкреБрд▓**: рдЗрд╕ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛(рдУрдВ) рдХреЛ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП рдкреБрд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
* **рдкреБрд╢**: рдПрдХ URL рдПрдВрдбрдкреЙрдЗрдВрдЯ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕рдВрджреЗрд╢ рддреБрд░рдВрдд рдЙрд╕ рдкрд░ рднреЗрдЬреЗ рдЬрд╛рдПрдВрдЧреЗред
* **рдмрд┐рдЧ рдХреНрд╡реЗрд░реА рдЯреЗрдмрд▓**: рдкреБрд╢ рдХреА рддрд░рд╣ рд▓реЗрдХрд┐рди рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдПрдХ рдмрд┐рдЧ рдХреНрд╡реЗрд░реА рдЯреЗрдмрд▓ рдХреЗ рдЕрдВрджрд░ рд╕реЗрдЯ рдХрд░рдирд╛ред

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ**, рдПрдХ рд╕рдВрджреЗрд╢ рдХреЛ **7 рджрд┐рдиреЛрдВ рдХреЗ рд▓рд┐рдП рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ**, рд▓реЗрдХрд┐рди рдЗрд╕ рд╕рдордп рдХреЛ **31 рджрд┐рдиреЛрдВ рддрдХ рдмрдврд╝рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдЧрд░ рдпрд╣ **10 рд╕реЗрдХрдВрдб рдореЗрдВ ACKed рдирд╣реАрдВ рд╣реЛрддрд╛** рддреЛ рдпрд╣ рдХрддрд╛рд░ рдореЗрдВ рд╡рд╛рдкрд╕ рдЪрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред

рдПрдХ рд╡рд┐рд╖рдп рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдПрдХ **Google рдкреНрд░рдмрдВрдзрд┐рдд рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреБрдВрдЬреА** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд▓реЗрдХрд┐рди рдПрдХ **CMEK** (Customer Managed Encryption Key) KMS рд╕реЗ рднреА рдЪреБрдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

**рдбреЗрдб рд▓реЗрдЯрд░**: рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдПрдХ **рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ рдХреА рдбрд┐рд▓реАрд╡рд░реА рдкреНрд░рдпрд╛рд╕реЛрдВ** рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЬрдм рдХреЛрдИ рд╕рдВрджреЗрд╢ рд╡рд┐рддрд░рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛, рддреЛ рдпрд╣ **рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдбреЗрдб рд▓реЗрдЯрд░ рд╡рд┐рд╖рдп рдкрд░ рдкреБрдирдГ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**ред

### рдмреИрдХрдЕрдкреНрд╕ рдФрд░ рд╕реНрдХреАрдорд╛рд╕

рд╡рд┐рд╖рдпреЛрдВ рдореЗрдВ **рдмреИрдХрдЕрдкреНрд╕** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЖрдк рд╡рд╣рд╛рдВ **рдкреБрд░рд╛рдиреА рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ**ред рдмреИрдХрдЕрдкреНрд╕ рдЙрд╕ рд╕рдордп рдХреЗ **unACKed** рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдмрдирд╛рдП рд░рдЦрддреЗ рд╣реИрдВ рдЬрдм рдпрд╣ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдХреЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ (рдФрд░ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╡реЗ рдПрдХ рд╕рдкреНрддрд╛рд╣ рдХреЗ рд▓рд┐рдП рдЬреАрд╡рд┐рдд рд░рд╣рддреЗ рд╣реИрдВ)ред

рдЬрдм рдЖрдк рдПрдХ рд╡рд┐рд╖рдп рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ **рд╡рд┐рд╖рдп рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдПрдХ рд╕реНрдХреАрдорд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП**ред

### рд╕реВрдЪреАрдХрд░рдг
```bash
# Get a list of topics in the project
gcloud pubsub topics list
gcloud pubsub topics describe <topic>
gcloud pubsub topics list-subscriptions <topic>
gcloud pubsub topics get-iam-policy <topic>

# Get a list of subscriptions across all topics
gcloud pubsub subscriptions list
gcloud pubsub subscriptions describe <subscription>
gcloud pubsub subscriptions get-iam-policy <subscription>

# Get list of schemas
gcloud pubsub schemas list
gcloud pubsub schemas describe <snapshot>

# Get list of snapshots
gcloud pubsub snapshots list
gcloud pubsub snapshots describe <snapshot>
```
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдкрдХреЛ [**рдмрдбрд╝реЗ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдХреЗ рд▓рд┐рдП рдкреВрдЫрдиреЗ рдкрд░**](https://cloud.google.com/pubsub/docs/replay-overview) рдмреЗрд╣рддрд░ рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдкреБрд░рд╛рдиреЗ рд╕рдВрджреЗрд╢ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдЗрд╕рдХреЗ рдХреБрдЫ рдкреВрд░реНрд╡рд╛рдкреЗрдХреНрд╖рд╛рдПрдБ рд╣реИрдВ рдФрд░ рдпрд╣ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдкрд░ рдкреНрд░рднрд╛рд╡ рдбрд╛рд▓ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдХреНрдпрд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВред

### рдкреЛрд╕реНрдЯ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯреЗрд╢рди

{% code overflow="wrap" %}
```bash
# Publish a message in a topic
gcloud pubsub topics publish <topic_name> --message "Hello!"

# This will retrive a non ACKed message (and won't ACK it)
gcloud pubsub subscriptions create my_subscription --topic <topic_name>
gcloud pubsub subscriptions pull <FULL SUBSCRIPTION NAME>

# Crete push subscription and recieve all the messages instantly in your web server
gcloud pubsub subscriptions create <subscription name> --topic <topic name> --push-endpoint <URL to push to>
```
{% endcode %}

## Pub/Sub Lite

[**Pub/Sub Lite**](https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite) рдПрдХ рдореИрд╕реЗрдЬрд┐рдВрдЧ рд╕реЗрд╡рд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ **zonal storage** рд╣реЛрддрд╛ рд╣реИред Pub/Sub Lite рдХреА рд▓рд╛рдЧрдд Pub/Sub рдХреЗ рдореБрдХрд╛рдмрд▓реЗ **рдПрдХ рдЕрдВрд╢** рд╣реЛрддреА рд╣реИ рдФрд░ рдпрд╣ **рдЙрдЪреНрдЪ рдорд╛рддреНрд░рд╛ рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ** (рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб 10 рдорд┐рд▓рд┐рдпрди рд╕рдВрджреЗрд╢реЛрдВ рддрдХ) рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреЛрдВ рдФрд░ рдЗрд╡реЗрдВрдЯ-рдбреНрд░рд┐рд╡рди рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд▓рд┐рдП рдмрдирд╛рдИ рдЧрдИ рд╣реИ рдЬрд╣рд╛рдВ рдХрдо рд▓рд╛рдЧрдд рдореБрдЦреНрдп рд╡рд┐рдЪрд╛рд░ рд╣реИред

PubSub Lite рдореЗрдВ **topics** рдФрд░ **subscriptions** рд╣реЛрддреЗ рд╣реИрдВ, **backups** рдФрд░ **schemas** рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдореЗрдВ рд╣реЛрддреЗ рд╣реИрдВ:

* **Reservations**: Pub/Sub Lite Reservations рдПрдХ рд╕реБрд╡рд┐рдзрд╛ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЙрдирдХреЗ рд╕рдВрджреЗрд╢ рд╕реНрдЯреНрд░реАрдореЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдХреНрд╖рдорддрд╛ рдЖрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред
* **Operations**: Pub/Sub Lite рдХреЗ рдкреНрд░рдмрдВрдзрди рдФрд░ рдкреНрд░рд╢рд╛рд╕рди рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХреНрд░рд┐рдпрд╛рдУрдВ рдФрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИред

### Enumeration
```bash
# lite-topics
gcloud pubsub lite-topics list
gcloud pubsub lite-topics describe <topic>
gcloud pubsub lite-topics list-subscriptions <topic>

# lite-subscriptions
gcloud pubsub lite-subscriptions list
gcloud pubsub lite-subscriptions describe <subscription>

# lite-reservations
gcloud pubsub lite-reservations list
gcloud pubsub lite-reservations describe <topic>
gcloud pubsub lite-reservations list-topics <topic>

# lite-operations
gcloud pubsub lite-operations list
gcloud pubsub lite-operations describe <topic>
```
<details>

<summary><strong>рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>
