# GCP - Pub/Sub Enum

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>

## Pub/Sub <a href="#reviewing-cloud-pubsub" id="reviewing-cloud-pubsub"></a>

[Google **Cloud Pub/Sub**](https://cloud.google.com/pubsub/) word beskryf as 'n diens wat boodskapuitruiling tussen onafhanklike toepassings fasiliteer. Die kernkomponente sluit in **onderwerpe**, waarop toepassings kan inteken. Ingeteken toepassings het die vermo√´ om boodskappe te stuur en te ontvang. Elke boodskap bestaan uit die werklike inhoud saam met geassosieerde metadata.

Die **onderwerp is die tou** waar boodskappe na gestuur sal word, terwyl die **inskrywings** die **voorwerpe** is wat gebruikers gaan gebruik om toegang tot boodskappe in die onderwerpe te verkry. Daar kan meer as **1 inskrywing per onderwerp** wees en daar is 4 tipes inskrywings:

* **Trek**: Die gebruiker(s) van hierdie inskrywing moet vir boodskappe trek.
* **Druk**: 'n URL-eindpunt word aangedui en boodskappe sal onmiddellik daarna gestuur word.
* **Grootvraagtabel**: Soos druk, maar die boodskappe word binne 'n grootvraagtabel geplaas.
* **Cloud Storage**: Lees boodskappe direk na 'n bestaande emmer.

Standaard verval 'n **inskrywing na 31 dae**, alhoewel dit ingestel kan word om nooit te verval nie.

Standaard word 'n boodskap **7 dae behou**, maar hierdie tyd kan **tot 31 dae verhoog** word. As dit ook nie binne 10s **ACKed** word nie, gaan dit terug na die tou. Dit kan ook ingestel word dat **ACKed-boodskappe steeds gestoor moet word**.

'n Onderwerp word standaard versleutel met 'n **Google-bestuurde versleutelingssleutel**. Maar 'n **CMEK** (Customer Managed Encryption Key) van KMS kan ook gekies word.

**Dooie brief**: Inskrywings kan 'n **maksimum aantal afleweringspogings** instel. Wanneer 'n boodskap nie afgelewer kan word nie, word dit **herpubliseer na die gespesifiseerde dooie brief-onderwerp**.

### Snitprente & Skemas

'n Snitprent is 'n funksie wat **die toestand van 'n inskrywing op 'n spesifieke tydstip vasvang**. Dit is in wese 'n konsekwente **back-up van die onerkende boodskappe in 'n inskrywing**. Deur 'n snitprent te skep, behou jy die boodskap-erkenningsstatus van die inskrywing, sodat jy boodskapverbruik van die punt waar die snitprent geneem is, kan hervat, selfs nadat die oorspronklike boodskappe andersins uitgevee sou gewees het.\
As jy baie gelukkig is, kan 'n snitprent **ou sensitiewe inligting** bevat vanaf die tydstip waarop die snitprent geneem is.

Wanneer jy 'n onderwerp skep, kan jy aandui dat die **boodskappe van die onderwerp 'n skema moet volg**.

### Enumerasie
```bash
# Get a list of topics in the project
gcloud pubsub topics list
gcloud pubsub topics describe <topic>
gcloud pubsub topics list-subscriptions <topic>
gcloud pubsub topics get-iam-policy <topic>

# Get a list of subscriptions across all topics
gcloud pubsub subscriptions list
gcloud pubsub subscriptions describe <subscription>
gcloud pubsub subscriptions get-iam-policy <subscription>

# Get list of schemas
gcloud pubsub schemas list
gcloud pubsub schemas describe <schema>
gcloud pubsub schemas list-revisions <schema>

# Get list of snapshots
gcloud pubsub snapshots list
gcloud pubsub snapshots describe <snapshot>
```
Togtig, jy mag beter resultate h√™ deur te vra vir 'n groter stel data, insluitend ouer boodskappe. Dit het sekere vereistes en kan impak h√™ op programme, so maak seker jy weet presies wat jy doen.

### Voorregverhoging en Na-uitbuiting

{% content-ref url="../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md" %}
[gcp-pub-sub-post-exploitation.md](../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md)
{% endcontent-ref %}

## Pub/Sub Lite

[**Pub/Sub Lite**](https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite) is 'n boodskapdiens met **zonale berging**. Pub/Sub Lite kos 'n fraksie van Pub/Sub en is bedoel vir ho√´ volume stroom (tot 10 miljoen boodskappe per sekonde) pyplyne en gebeurtenisgedrewe stelsels waar lae koste die prim√™re oorweging is.

In PubSub Lite is daar **onderwerpe** en **inskrywings**, daar is **nie snitprente** en **skemas** nie, en daar is:

* **Reserverings**: Pub/Sub Lite Reserverings is 'n funksie wat gebruikers in staat stel om kapasiteit in 'n spesifieke streek te reserweer vir hul boodskapstrome.
* **Operasies**: Verwys na die aksies en take wat betrokke is by die bestuur en administrasie van Pub/Sub Lite.

### Opname
```bash
# lite-topics
gcloud pubsub lite-topics list
gcloud pubsub lite-topics describe <topic>
gcloud pubsub lite-topics list-subscriptions <topic>

# lite-subscriptions
gcloud pubsub lite-subscriptions list
gcloud pubsub lite-subscriptions describe <subscription>

# lite-reservations
gcloud pubsub lite-reservations list
gcloud pubsub lite-reservations describe <topic>
gcloud pubsub lite-reservations list-topics <topic>

# lite-operations
gcloud pubsub lite-operations list
gcloud pubsub lite-operations describe <topic>
```
<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslagplekke.

</details>
