# GCP - Wolke SQL Enum

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien jou **maatskappy geadverteer in HackTricks** of **HackTricks aflaai in PDF-formaat** Kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou hacking-truuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
*
*
* &#x20;github repos.

</details>

## Basiese Inligting

Google Cloud SQL word erken as 'n **volledig-bestuurde databasisdiens**. Sy prim√™re doel is om die prosesse wat betrokke is by die inisialisering, instandhouding, bestuur en administrasie van **verwantskapdatabasisse** op die Google Cloud Platform te stroomlyn. Die diens is ontwerp om interaksie met bekende SQL-databasisse (**MySQL, PostgreSQL en SQL Server**) te fasiliteer, en elimineer effektief die behoefte om roetine-operasionele pligte te bestuur. Hierdie pligte sluit tipies die voorsiening van hardeware, die konfigurasie van databasisse, die toepassing van pleisters en die uitvoering van rugsteun in.

Belangrike kenmerke van Google Cloud SQL sluit in:

1. **Volledig Bestuur**: Google Cloud SQL is 'n volledig-bestuurde diens, wat beteken dat Google databasisinstandhoudingstake soos pleistering, opdaterings, rugsteun en konfigurasie hanteer.
2. **Skaalbaarheid**: Dit bied die vermo√´ om die stoorvermo√´ en rekenaarhulpbronne van jou databasis te skaal, dikwels sonder afbreektyd.
3. **Ho√´ Beskikbaarheid**: Bied ho√´ beskikbaarheidskonfigurasies, wat verseker dat jou databasisdienste betroubaar is en bestand is teen sone- of instansie-foute.
4. **Sekuriteit**: Verskaf robuuste sekuriteitskenmerke soos data-enkripsie, Identiteit en Toegangsbestuur (IAM)-beheer en netwerk-isolasie deur gebruik te maak van privaat IP's en VPC.
5. **Rugsteun en Herstel**: Ondersteun outomatiese rugsteun en herstel op 'n punt in tyd, wat jou help om jou data te beskerm en te herstel.
6. **Integrasie**: Integreer naadloos met ander Google Cloud-dienste, wat 'n omvattende oplossing bied vir die bou, implementering en bestuur van toepassings.
7. **Prestasie**: Bied prestasiemetriek en diagnostiek om databasisprestasie te monitor, probleme op te los en te verbeter.

### Wagwoord

In die webkonsol laat Cloud SQL die gebruiker toe om die wagwoord van die databasis **in te stel**, daar is ook 'n genereerfunksie, maar belangrik, **MySQL** laat toe om 'n le√´ wagwoord te laat en almal laat toe om net die karakter "a" as wagwoord in te stel:

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Dit is ook moontlik om 'n wagwoordbeleid te konfigureer wat **lengte**, **kompleksiteit**, **hergebruik deaktiveer** en **gebruikersnaam in wagwoord deaktiveer** vereis. Almal is standaard gedeaktiveer.

**SQL Server** kan gekonfigureer word met **Active Directory-verifikasie**.

### Sonebeskikbaarheid

Die databasis kan **beskikbaar wees in 1 sone of in meerdere**, dit is natuurlik aanbeveel om belangrike databasisse in meerdere sones te h√™.

### Enkripsie

Standaard word 'n deur Google bestuurde enkripsiesleutel gebruik, maar dit is ook **moontlik om 'n Kli√´nt-besturende enkripsiesleutel (CMEK)** te kies.

### Verbindings

* **Privaat IP**: Dui die VPC-netwerk aan en die databasis sal 'n privaat IP binne die netwerk kry
* **Openbare IP**: Die databasis sal 'n openbare IP kry, maar standaard sal niemand in staat wees om te verbind nie
* **Gemagtigde netwerke**: Dui openbare **IP-reeks aan wat toegelaat moet word** om met die databasis te verbind
* **Privaat Pad**: As die DB in 'n VPC gekoppel is, is dit moontlik om hierdie opsie te aktiveer en **ander GCP-dienste soos BigQuery toegang daartoe te gee**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### Data Beskerming

* **Daaglikse rugsteun**: Voer outomatiese daaglikse rugsteun uit en dui die aantal rugsteune aan wat jy wil behou.
* **Punt-in-tyd-herstel**: Maak dit moontlik om data vanaf 'n spesifieke punt in tyd te herstel, tot op 'n fraksie van 'n sekonde.
* **Verwyderingsbeskerming**: As dit geaktiveer is, kan die DB nie verwyder word nie totdat hierdie funksie gedeaktiveer is nie

### Enumerasie
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Ongeverifieerde Enum

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post Exploitatie

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Volharding

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere manieren om HackTricks te ondersteunen:

* Als je je **bedrijf geadverteerd wilt zien in HackTricks** of **HackTricks in PDF wilt downloaden**, bekijk dan de [**ABONNEMENTSPAKKETTEN**](https://github.com/sponsors/carlospolop)!
* Koop de [**offici√´le PEASS & HackTricks-merchandise**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), onze collectie exclusieve [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Sluit je aan bij de** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of de [**telegram-groep**](https://t.me/peass) of **volg** me op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel je hacktrucs door PR's in te dienen bij de** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repos.

</details>
