# GCP - √ânum√©ration de Cloud SQL

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
*
*
* &#x20;repos github.

</details>

## Informations de base

Google Cloud SQL est un service de base de donn√©es **enti√®rement g√©r√©** qui facilite la configuration, la maintenance, la gestion et l'administration de vos **bases de donn√©es relationnelles** sur Google Cloud Platform. Il offre un moyen de travailler avec des bases de donn√©es SQL famili√®res (**MySQL, PostgreSQL et SQL Server**) sans avoir √† g√©rer les t√¢ches op√©rationnelles habituelles telles que la fourniture de mat√©riel, la configuration de la base de donn√©es, les mises √† jour ou les sauvegardes.

Les caract√©ristiques cl√©s de Google Cloud SQL incluent :

1. **Enti√®rement g√©r√©** : Google Cloud SQL est un service enti√®rement g√©r√©, ce qui signifie que Google s'occupe des t√¢ches de maintenance de la base de donn√©es telles que les correctifs, les mises √† jour, les sauvegardes et la configuration.
2. **Scalabilit√©** : Il offre la possibilit√© de faire √©voluer la capacit√© de stockage et les ressources informatiques de votre base de donn√©es, souvent sans temps d'arr√™t.
3. **Haute disponibilit√©** : Propose des configurations √† haute disponibilit√©, garantissant que vos services de base de donn√©es sont fiables et peuvent r√©sister √† des d√©faillances de zone ou d'instance.
4. **S√©curit√©** : Fournit des fonctionnalit√©s de s√©curit√© robustes telles que le chiffrement des donn√©es, les contr√¥les d'Identity and Access Management (IAM) et l'isolation r√©seau √† l'aide d'IP priv√©es et de VPC.
5. **Sauvegardes et r√©cup√©ration** : Prend en charge les sauvegardes automatiques et la r√©cup√©ration √† un moment donn√©, vous aidant √† prot√©ger et √† restaurer vos donn√©es.
6. **Int√©gration** : S'int√®gre parfaitement avec d'autres services Google Cloud, offrant une solution compl√®te pour la construction, le d√©ploiement et la gestion des applications.
7. **Performance** : Offre des m√©triques de performance et des diagnostics pour surveiller, d√©panner et am√©liorer les performances de la base de donn√©es.

### Mot de passe

Dans la console web, Cloud SQL permet √† l'utilisateur de **d√©finir** le **mot de passe** de la base de donn√©es, il y a aussi une fonction de g√©n√©ration, mais surtout, **MySQL** permet de **laisser un mot de passe vide et tous permettent de d√©finir comme mot de passe juste le caract√®re "a" :**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Il est √©galement possible de configurer une politique de mot de passe exigeant une **longueur**, une **complexit√©**, **d'emp√™cher la r√©utilisation** et **d'emp√™cher l'utilisation du nom d'utilisateur dans le mot de passe**. Tous sont d√©sactiv√©s par d√©faut.

**SQL Server** peut √™tre configur√© avec **l'authentification Active Directory**.

### Disponibilit√© de la zone

La base de donn√©es peut √™tre **disponible dans 1 zone ou plusieurs**, bien s√ªr, il est recommand√© d'avoir des bases de donn√©es importantes dans plusieurs zones.

### Chiffrement

Par d√©faut, une cl√© de chiffrement g√©r√©e par Google est utilis√©e, mais il est √©galement **possible de s√©lectionner une cl√© de chiffrement g√©r√©e par le client (CMEK)**.

### Connexions

* **IP priv√©e** : Indiquez le r√©seau VPC et la base de donn√©es obtiendra une IP priv√©e √† l'int√©rieur du r√©seau
* **IP publique** : La base de donn√©es obtiendra une IP publique, mais par d√©faut personne ne pourra se connecter
* **R√©seaux autoris√©s** : Indiquez les **plages d'IP publiques qui devraient √™tre autoris√©es** √† se connecter √† la base de donn√©es
* **Chemin priv√©** : Si la base de donn√©es est connect√©e √† un VPC, il est possible d'activer cette option et de donner **√† d'autres services GCP comme BigQuery l'acc√®s via celui-ci**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### Protection des donn√©es

* **Sauvegardes quotidiennes** : Effectuez des sauvegardes automatiques quotidiennes et indiquez le nombre de sauvegardes que vous souhaitez conserver.
* **R√©cup√©ration √† un moment donn√©** : Vous permet de r√©cup√©rer des donn√©es √† partir d'un moment sp√©cifique, √† la fraction de seconde pr√®s.
* **Protection contre la suppression** : Si activ√©e, la base de donn√©es ne pourra pas √™tre supprim√©e tant que cette fonctionnalit√© n'est pas d√©sactiv√©e

### √ânum√©ration
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### √ânum√©ration non authentifi√©e

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post-exploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistance

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez**-moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
