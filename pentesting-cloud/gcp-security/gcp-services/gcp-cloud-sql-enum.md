# GCP - Enumerazione di Cloud SQL

<details>

<summary><strong>Impara l'hacking di AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata in HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di esclusive [**NFT**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguimi** su **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Condividi i tuoi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
*
*
* repository di github.

</details>

## Informazioni di base

Google Cloud SQL √® riconosciuto come un **servizio di database completamente gestito**. Il suo scopo principale √® semplificare i processi coinvolti nell'inizializzazione, manutenzione, gestione e amministrazione di **database relazionali** sulla piattaforma Google Cloud. Il servizio √® progettato per facilitare l'interazione con database SQL ben noti (**MySQL, PostgreSQL e SQL Server**), eliminando efficacemente la necessit√† di gestire compiti operativi di routine. Questi compiti includono tipicamente la fornitura di hardware, la configurazione di database, l'applicazione di patch e l'esecuzione di backup.

Le caratteristiche principali di Google Cloud SQL includono:

1. **Completamente gestito**: Google Cloud SQL √® un servizio completamente gestito, il che significa che Google si occupa delle attivit√† di manutenzione del database come patching, aggiornamenti, backup e configurazione.
2. **Scalabilit√†**: Fornisce la possibilit√† di scalare la capacit√† di archiviazione e le risorse di calcolo del tuo database, spesso senza tempi di inattivit√†.
3. **Alta disponibilit√†**: Offre configurazioni ad alta disponibilit√†, garantendo che i tuoi servizi di database siano affidabili e possano resistere a guasti di zona o di istanza.
4. **Sicurezza**: Fornisce robuste funzionalit√† di sicurezza come crittografia dei dati, controlli di Identity and Access Management (IAM) e isolamento di rete utilizzando indirizzi IP privati e VPC.
5. **Backup e ripristino**: Supporta backup automatici e ripristino a un determinato punto nel tempo, aiutandoti a proteggere e ripristinare i tuoi dati.
6. **Integrazione**: Si integra in modo trasparente con altri servizi di Google Cloud, fornendo una soluzione completa per la creazione, distribuzione e gestione delle applicazioni.
7. **Prestazioni**: Offre metriche delle prestazioni e diagnostica per monitorare, risolvere i problemi e migliorare le prestazioni del database.

### Password

Nella console web di Cloud SQL √® possibile **impostare** la **password** del database, √® presente anche una funzione di generazione, ma soprattutto, **MySQL** consente di **lasciare una password vuota e tutte consentono di impostare come password solo il carattere "a":**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

√à anche possibile configurare una policy di password che richiede **lunghezza**, **complessit√†**, **disabilitazione del riutilizzo** e **disabilitazione del nome utente nella password**. Tutti sono disabilitati per impostazione predefinita.

**SQL Server** pu√≤ essere configurato con **Autenticazione di Active Directory**.

### Disponibilit√† della zona

Il database pu√≤ essere **disponibile in 1 zona o in pi√π**, naturalmente, √® consigliabile avere database importanti in pi√π zone.

### Crittografia

Per impostazione predefinita viene utilizzata una chiave di crittografia gestita da Google, ma √® anche **possibile selezionare una chiave di crittografia gestita dal cliente (CMEK)**.

### Connessioni

* **IP privato**: Indica la rete VPC e il database otterr√† un IP privato all'interno della rete
* **IP pubblico**: Il database otterr√† un IP pubblico, ma di default nessuno potr√† connettersi
* **Reti autorizzate**: Indica gli **intervalli di IP pubblici** che devono essere autorizzati a connettersi al database
* **Percorso privato**: Se il DB √® connesso a una VPC, √® possibile abilitare questa opzione e dare **accesso ad altri servizi GCP come BigQuery**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### Protezione dei dati

* **Backup giornalieri**: Esegue automaticamente backup giornalieri e indica il numero di backup da mantenere.
* **Ripristino a un determinato punto nel tempo**: Consente di ripristinare i dati da un punto specifico nel tempo, fino a una frazione di secondo.
* **Protezione dalla cancellazione**: Se abilitata, il DB non potr√† essere eliminato fino a quando questa funzionalit√† non viene disabilitata

### Enumerazione
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Enumerazione non autenticata

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post Esploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistenza

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata in HackTricks** o **scaricare HackTricks in PDF** controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di esclusive [**NFT**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguimi** su **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository di** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github.

</details>
