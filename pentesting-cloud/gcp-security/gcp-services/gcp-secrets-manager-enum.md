# GCP - Secrets Manager Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* 회사를 **HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**를** **팔로우**하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 트릭을 공유**하세요.

</details>

## Secret Manager

Google [**Secret Manager**](https://cloud.google.com/solutions/secrets-management/)는 비밀번호, API 키, 인증서, 파일(최대 64KB) 및 기타 민감한 데이터를 저장하기 위한 금고와 같은 솔루션입니다.

비밀은 **다른 데이터를 저장하는 다른 버전**을 가질 수 있습니다.

기본적으로 비밀은 **Google 관리 키를 사용하여 암호화**되지만, 비밀을 암호화하는 데 사용할 **KMS에서 키를 선택**할 수도 있습니다.

**회전**에 관해서는, 일정한 일 수마다 **메시지를 pub-sub로 보낼 수 있도록 구성**할 수 있으며, 해당 메시지를 수신하는 코드는 **비밀을 회전**할 수 있습니다.

**자동 삭제**를 위해 일자를 구성할 수 있으며, 지정된 일자에 도달하면 **비밀은 자동으로 삭제**됩니다.

### 열거
```bash
# First, list the entries
gcloud secrets list
gcloud secrets get-iam-policy <secret_name>

# Then, pull the clear-text of any version of any secret
gcloud secrets versions list <secret_name>
gcloud secrets versions access 1 --secret="<secret_name>"
```
### 권한 상승

다음 페이지에서는 **비밀 관리자 권한을 남용하여 권한을 상승시키는 방법**을 확인할 수 있습니다.

{% content-ref url="../../gcp-security/gcp-privilege-escalation/gcp-secretmanager-privesc.md" %}
[gcp-secretmanager-privesc.md](../../gcp-security/gcp-privilege-escalation/gcp-secretmanager-privesc.md)
{% endcontent-ref %}

### 사후 침투

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-secretmanager-post-exploitation.md" %}
[gcp-secretmanager-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-secretmanager-post-exploitation.md)
{% endcontent-ref %}

### 지속성

{% content-ref url="../../gcp-security/gcp-persistence/gcp-secret-manager-persistence.md" %}
[gcp-secret-manager-persistence.md](../../gcp-security/gcp-persistence/gcp-secret-manager-persistence.md)
{% endcontent-ref %}

### 회전 오용

공격자는 비밀을 업데이트하여 **회전을 중지**시킬 수 있으며 (따라서 수정되지 않을 것입니다), 또는 회전이 **훨씬 덜 자주** 발생하도록 할 수 있습니다 (따라서 비밀이 수정되지 않을 것입니다). 또는 회전 메시지를 다른 pub/sub으로 **게시**하거나 실행되는 회전 코드를 수정할 수도 있습니다 (이는 다른 서비스에서 발생하며, 아마도 클라우드 함수에서 발생하므로 공격자는 클라우드 함수 또는 다른 서비스에 대한 특권 액세스가 필요합니다).

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 처음부터 AWS 해킹을 전문가 수준까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* HackTricks에서 **회사 광고를 보거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFT**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**를** 팔로우하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 자신의 해킹 기법을 공유하세요.

</details>
