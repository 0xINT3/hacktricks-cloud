# GCP - Kielelezo cha Usajili wa Artifakti

<details>

<summary><strong>Jifunze kuhusu kuvamia AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA USAJILI**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **nifuata** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Shiriki mbinu zako za kuvamia kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
* &#x20;repos za github.

</details>

## Taarifa Msingi

Usajili wa Artifakti wa Google Cloud ni huduma iliyosimamiwa kabisa inayokuwezesha **kusimamia, kuhifadhi, na kusimika artifakti zako za programu**. Kimsingi ni ghala la **kuhifadhi mahitaji ya ujenzi**, kama vile picha za **Docker**, pakiti za **Maven**, pakiti za npm, na aina zingine za artifakti. Mara nyingi hutumiwa katika mabomba ya CI/CD kwa kuhifadhi na kutoa toleo la artifakti zinazozalishwa wakati wa mchakato wa maendeleo ya programu.

Sifa muhimu za Usajili wa Artifakti ni pamoja na:

1. **Ghala la Pamoja**: Inasaidia **aina nyingi za artifakti**, kuruhusu kuwa na ghala moja kwa picha za Docker, pakiti za lugha (kama vile Maven ya Java, npm ya Node.js), na aina zingine za artifakti, ikiruhusu udhibiti wa upatikanaji unaofanana na mtazamo uliojumuishwa kote kwa artifakti zako zote.
2. **Usimamizi Kamili**: Kama huduma iliyosimamiwa, inajali miundombinu ya msingi, upanuzi, na usalama, kupunguza mzigo wa matengenezo kwa watumiaji.
3. **Udhibiti wa Upatikanaji wa Kina**: Inaunganisha na Usimamizi wa Kitambulisho na Upatikanaji wa Google Cloud (IAM), kuruhusu kufafanua ni nani anaweza kupata, kupakia, au kupakua artifakti kwenye ghala zako.
4. **Ugawanyaji wa Kijiografia**: Inasaidia ugawanyaji wa artifakti katika mikoa kadhaa, kuboresha kasi ya upakuaji na kuhakikisha upatikanaji.
5. **Ushirikiano na Huduma za Google Cloud**: Inafanya kazi kwa urahisi na **huduma zingine za GCP kama Cloud Build, Kubernetes Engine, na Compute Engine**, ikifanya iwe chaguo la urahisi kwa timu zinazofanya kazi ndani ya mfumo wa Google Cloud.
6. **Usalama**: Inatoa vipengele kama **uchunguzi wa udhaifu na uchambuzi wa chombo** ili kuhakikisha kuwa artifakti zilizohifadhiwa ni salama na hazina masuala ya usalama yanayojulikana.

### Miundo na Hali

Wakati wa kuunda ghala jipya, ni **chaguo kuchagua aina/jinsi** ya ghala miongoni mwa kadhaa kama Docker, Maven, npm, Python... na hali ambayo kawaida inaweza kuwa moja ya hizi tatu:

* **Ghala la Kawaida**: Hali ya msingi kwa **kuhifadhi artifakti zako wenyewe** (kama picha za Docker, pakiti za Maven) moja kwa moja kwenye GCP. Ni salama, inaweza kupanuliwa, na inashirikiana vizuri ndani ya mfumo wa Google Cloud.
* **Ghala la Mbali** (ikiwa inapatikana): Inafanya kazi kama mbadala kwa **kufanya kama kache ya artifakti kutoka nje**, ghala za umma. Inasaidia kuzuia masuala yanayobadilika kwenye tegemezi na kupunguza kuchelewesha kwa kuhifadhi artifakti zinazotumiwa mara kwa mara.
* **Ghala la Kivitualu** (ikiwa inapatikana): Hutoa **kiolesura kilichounganishwa cha kupata ghala nyingi (za kawaida au mbali)** kupitia mwisho mmoja, ikisimplisha usanidi wa upande wa mteja na usimamizi wa upatikanaji wa artifakti zilizosambaa kwenye ghala tofauti.
* Kwa ghala la kivitualu utahitaji **kuchagua ghala na kumpa kipaumbele** (ghala lenye kipaumbele kikubwa litatumika).
* Unaweza **changanya ghala za mbali na za kawaida** katika **ghala la kivitualu**, ikiwa **kipaumbele** cha **mbali** ni **kikubwa** kuliko la kawaida, **pakiti kutoka mbali (kama PyPi kwa mfano) zitatumika**. Hii inaweza kusababisha **Mchanganyiko wa Tegemezi.**

Tambua kwamba katika **Toleo la Mbali la Docker** ni rahisi kutoa jina la mtumiaji na kitufe cha kupata Docker Hub. **Kitufe kisha kuhifadhiwa kwenye Meneja wa Siri.**

### Ufichaji

Kama ilivyotarajiwa, kwa chaguo-msingi ufunguo uliosimamiwa na Google hutumiwa lakini ufunguo uliosimamiwa na Mteja unaweza kutajwa (CMEK).

### Sera za Kusafisha

* **Futa artifakti:** Artifakti zitafutwa kulingana na vigezo vya sera ya kusafisha.
* **Jaribio la Kavu:** (Chaguo la msingi) Artifakti **hazitafutwa**. Sera za kusafisha zitahakikiwa, na matukio ya kufuta majaribio kutumwa kwa Kuingiza Kuingiza Kuingiza.

### Uchunguzi wa Udhaifu

Inawezekana kuwezesha **uchunguzi wa udhaifu** ambao utachunguza udhaifu ndani ya **picha za kontena**.

### Uelewaji wa Kielelezo
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### Kupandisha Mamlaka

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### Upatikanaji usiothibitishwa

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### Baada ya Uchimbaji

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### Uthabiti

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **nifuata** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
