# GCP - Artifact Registry Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahramana kadar AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamını görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)'a PR göndererek paylaşın
* &#x20;github repos.

</details>

## Temel Bilgiler

Google Cloud Artifact Registry, **yazılım artefaktlarınızı yönetmenize, depolamanıza ve güvence altına almanıza olanak sağlayan tamamen yönetilen bir hizmettir**. Temel olarak, **Docker** görüntüleri, **Maven**, npm paketleri ve diğer artefakt türleri gibi **derleme bağımlılıklarını depolamak için bir depo** olarak kullanılır. Yazılım geliştirme süreci sırasında üretilen artefaktları depolamak ve sürümlemek için **CI/CD borularında yaygın olarak kullanılır**.

Artifact Registry'nin temel özellikleri şunlardır:

1. **Birleşik Depo**: Docker görüntüleri, dil paketleri (Java'nın Maven'i, Node.js'nin npm'i gibi) ve diğer artefakt türleri için tek bir depo kullanmanıza olanak sağlar, böylece tüm artefaktlara tutarlı erişim kontrolleri ve birleşik bir görünüm sağlar.
2. **Tamamen Yönetilen**: Yönetilen bir hizmet olarak, altta yatan altyapıyı, ölçeklendirmeyi ve güvenliği yönetir, kullanıcılar için bakım yükünü azaltır.
3. **İnce Tanımlı Erişim Kontrolü**: Google Cloud Kimlik ve Erişim Yönetimi (IAM) ile entegre olarak, depolarınızdaki artefaktlara kimin erişebileceğini, yükleyebileceğini veya indirebileceğini tanımlamanıza olanak sağlar.
4. **Coğrafi Çoğaltma**: Birden fazla bölgede artefaktların çoğaltılmasını destekler, indirme hızını artırır ve kullanılabilirliği sağlar.
5. **Google Cloud Hizmetleriyle Entegrasyon**: Cloud Build, Kubernetes Engine ve Compute Engine gibi **diğer GCP hizmetleriyle sorunsuz çalışır**, bu da Google Cloud ekosistemi içinde zaten çalışan ekipler için uygun bir seçenek yapar.
6. **Güvenlik**: Depolanan artefaktların güvenli ve bilinen güvenlik sorunlarından arındığından emin olmak için **zayıflıkların taraması ve konteyner analizi** gibi özellikler sunar.

### Formatlar ve Modlar

Yeni bir depo oluşturulurken, depo **format/türü** arasından Docker, Maven, npm, Python gibi birini **seçmek mümkündür** ve genellikle üç moddan biri olabilir:

* **Standart Depo**: Kendi artefaktlarınızı (Docker görüntüleri, Maven paketleri gibi) doğrudan GCP'de **depolar** için varsayılan moddur. Güvenli, ölçeklenebilir ve Google Cloud ekosistemiyle uyumlu çalışır.
* **Uzak Depo** (müsaitse): Dış, genel depolardan **artefaktları önbelleğe alan bir proxy** olarak hareket eder. Bağımlılıkların yukarı akışta değişmesinden kaynaklanan sorunları önlemeye yardımcı olur ve sık erişilen artefaktları önbelleğe alarak gecikmeyi azaltır.
* **Sanal Depo** (müsaitse): Birden çok (standart veya uzak) depoya **tek bir noktadan erişim sağlayan birleşik bir arayüz** sunar, böylece çeşitli depolara yayılan artefaktlar için istemci tarafı yapılandırmasını ve erişim yönetimini basitleştirir.
* Sanal bir depo için **depoları seçmeniz ve onlara bir öncelik vermeniz gerekecektir** (en yüksek önceliğe sahip depo kullanılacaktır).
* Bir sanal depoda **uzak ve standart** depoları **karıştırabilirsiniz**, eğer **uzak** depodaki **öncelik**, **standart** depodan **daha büyükse (örneğin PyPi)**, **uzaktaki paketler kullanılacaktır**. Bu, bir **Bağımlılık Karışıklığına** yol açabilir.

Docker'ın **Uzak sürümünde** Docker Hub'a erişmek için bir kullanıcı adı ve belirteç vermek mümkündür. **Belirteç daha sonra Secret Manager'da saklanır**.

### Şifreleme

Beklendiği gibi, varsayılan olarak Google tarafından yönetilen bir anahtar kullanılır, ancak Müşteri tarafından yönetilen bir anahtar (CMEK) belirtilebilir.

### Temizleme Politikaları

* **Artefaktları sil:** Artefaktlar, temizleme politikası kriterlerine göre **silinecektir**.
* **Kuru çalıştırma:** (Varsayılan olan) Artefaktlar **silinmeyecek**. Temizleme politikaları değerlendirilecek ve test silme olayları Cloud Audit Logging'e gönderilecektir.

### Zayıflık Taraması

**Zayıflık tarayıcısını** etkinleştirmek mümkündür, bu tarayıcı **konteyner görüntüleri** içindeki zayıflıkları kontrol edecektir.

### Numaralandırma
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### Yetki Yükseltme

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### Kimlik Doğrulamasız Erişim

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### Saldırı Sonrası

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### Kalıcılık

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>
