# GCP - Enum√©ration de Stackdriver

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez** üí¨ [**le groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**d√©p√¥ts Github de HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## [Journalisation de Stackdriver](https://cloud.google.com/sdk/gcloud/reference/logging/)

****[**Stackdriver**](https://cloud.google.com/stackdriver/) **** est la suite d'infrastructure de **journalisation** g√©n√©rale de Google qui pourrait capturer des informations sensibles telles que des capacit√©s similaires √† syslog qui rapportent les commandes individuelles ex√©cut√©es √† l'int√©rieur des instances de calcul, les demandes HTTP envoy√©es aux √©quilibreurs de charge ou aux applications App Engine, les m√©tadonn√©es de paquets r√©seau pour les communications VPC, et plus encore.

Le compte de service pour une instance de calcul **a seulement besoin d'un acc√®s en √©criture** pour activer la journalisation des actions de l'instance, **mais** un administrateur peut **par erreur** accorder au compte de service √† la fois un acc√®s en **lecture** et en **√©criture**. Si c'est le cas, vous pouvez explorer les journaux pour trouver des donn√©es sensibles.

[gcloud logging](https://cloud.google.com/sdk/gcloud/reference/logging/) fournit des outils pour y parvenir. Tout d'abord, vous voudrez voir quels types de journaux sont disponibles dans votre projet actuel.

```bash
# Liste des journaux
gcloud logging logs list
NAME
projects/REDACTED/logs/OSConfigAgent
projects/REDACTED/logs/cloudaudit.googleapis.com%2Factivity
projects/REDACTED/logs/cloudaudit.googleapis.com%2Fsystem_event
projects/REDACTED/logs/bash.history
projects/REDACTED/logs/compute.googleapis.com
projects/REDACTED/logs/compute.googleapis.com%2Factivity_log

# Lire les journaux
gcloud logging read [DOSSIER]

# √âcrire des journaux
# Un attaquant √©crivant des journaux peut tromper l'√©quipe Blue
gcloud logging write [DOSSIER] [MESSAGE]

# Liste des seaux
gcloud logging buckets list
```

## R√©f√©rences

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/#reviewing-stackdriver-logging](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/#reviewing-stackdriver-logging)

<details>

<summary><strong>Soutenez HackTricks et b√©n√©ficiez d'avantages !</strong></summary>

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou si vous souhaitez acc√©der √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez** üí¨ [**le groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Partagez vos astuces de piratage en soumettant des PR aux** [**d√©p√¥ts Github de HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>