# GCP - Filestore Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahramana kadar AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzdaki özel [**NFT'leri**](https://opensea.io/collection/the-peass-family) keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>

## Temel Bilgiler

Google Cloud Filestore, hem bir **dosya sistemi arabirimi** hem de **veri için paylaşılan bir dosya sistemi** gerektiren uygulamalar için özel olarak tasarlanmış bir **yönetilen dosya depolama hizmeti** olarak tanımlanır. Bu hizmet, yüksek performanslı dosya paylaşımları sunarak çeşitli GCP hizmetleriyle entegre edilebilme özelliğiyle öne çıkar. Geleneksel dosya sistemi arabirimleri ve semantiklerinin önemli olduğu medya işleme, içerik yönetimi ve veritabanı yedekleme gibi senaryolarda kullanışlıdır.

Bu, herhangi bir **NFS** **paylaşılan belge deposu** gibi düşünebilirsiniz - hassas bilgilerin potansiyel bir kaynağı.

### Bağlantılar

Filestore örneği oluştururken, **erişilebilir olacağı ağı seçmek mümkündür**.

Ayrıca, **varsayılan olarak seçilen VPC ağı ve bölgedeki tüm istemcilerin erişebileceği** ancak **erişimi IP adresine** veya aralığına göre **kısıtlayabileceğiniz ve istemcinin alacağı erişim ayrıcalığını (Yönetici, Yönetici Görüntüleyici, Düzenleyici, Görüntüleyici) belirtebileceğiniz** bir seçenek vardır.

Ayrıca, bir **Özel Hizmet Erişim Bağlantısı** aracılığıyla da erişilebilir:

* VPC ağına özgüdür ve Memorystore, Tensorflow ve SQL gibi tüm yönetilen hizmetlerde kullanılabilir.
* Google tarafından sahip olunan bir ağ ile VPC ağınız arasında bir VPC eşleme kullanarak, örneklerinizin ve hizmetlerinizin yalnızca **dahili IP adreslerini kullanarak iletişim kurmasını sağlar**.
* Hizmet üretici tarafında size özel bir proje oluşturur, başka müşterilerle paylaşılmaz. Sadece sağladığınız kaynaklar için faturalandırılırsınız.
* VPC eşlemesi, VPC'nize yeni rotaları içe aktarır

### Yedeklemeler

File paylaşımlarının **yedeklerini oluşturmak mümkündür**. Bu yedekler daha sonra **orijinal** yeni Fileshare örneğinde veya **yeni örneklerde** geri yüklenebilir.

### Şifreleme

Varsayılan olarak, verileri şifrelemek için bir **Google tarafından yönetilen şifreleme anahtarı** kullanılır, ancak bir **Müşteri tarafından yönetilen şifreleme anahtarı (CMEK)** seçmek mümkündür.

### Numaralandırma

Eğer projede bir filestore bulursanız, kompromize edilmiş Hesaplama Örneği içinden onu **bağlayabilirsiniz**. Var olup olmadığını görmek için aşağıdaki komutu kullanın.

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
Unutmayın ki bir dosya depolama servisi, onun için oluşturulan **tamamen yeni bir alt ağda** olabilir (bir **VPC eşlemesi** olan Özel Hizmet Erişimi Bağlantısı içinde).\
Bu nedenle, ağ aralıklarında nmap çalıştırmak için **VPC eşlemelerini sıralamanız gerekebilir**.

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
{% endcode %}
{% endhint %}

### Yetki Yükseltme ve Sonrası Saldırı

Bu hizmeti doğrudan istismar ederek GCP'de yetki yükseltme yolları bulunmamaktadır, ancak bazı **Sonrası Saldırı hileleri kullanarak verilere erişim sağlamak mümkün** ve belki de yetki yükseltmek için bazı kimlik bilgileri bulabilirsiniz:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### Kalıcılık

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ile sıfırdan kahramana kadar AWS hackleme öğrenin</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **tanıtmak** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>
