# GCP - Filestore Enum

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka mwanzo hadi mtaalamu na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalamu wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **nifuata** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## Taarifa Msingi

Google Cloud Filestore ni **huduma ya uhifadhi wa faili iliyosimamiwa** iliyoundwa kwa matumizi ya programu zinazohitaji **interface ya mfumo wa faili na mfumo wa faili ulioshirikiwa kwa data**. Huduma hii ina faida kwa kutoa hisa za faili zenye utendaji wa juu, ambazo zinaweza kuingizwa na huduma mbalimbali za GCP. Matumizi yake yanang'aa katika hali ambapo interface za mfumo wa faili za jadi na semantiki ni muhimu, kama vile katika usindikaji wa media, usimamizi wa maudhui, na nakala rudufu za maktaba za data.

Unaweza kufikiria hii kama **hifadhi ya nyaraka iliyoshirikiwa ya NFS** - chanzo kinachowezekana cha habari nyeti.

### Mawasiliano

Unapounda kifaa cha Filestore ni **chaguo kuchagua mtandao ambapo kitakuwa kinapatikana**.

Zaidi ya hayo, kwa **default wateja wote kwenye mtandao uliochaguliwa wa VPC na eneo wataweza kufikia**, hata hivyo, ni **chaguo kuzuia pia kwa anwani ya IP** au eneo na kuonyesha upendeleo wa ufikiaji (Msimamizi, Msimamizi Mwangalizi, Mhariri, Mwangalizi) mtumiaji anayepata **kulingana na anwani ya IP.**

Inaweza pia kupatikana kupitia **Uunganisho wa Kufikia Huduma ya Kibinafsi:**

* Ni kwa mtandao wa VPC na inaweza kutumika kwenye huduma zote zilizosimamiwa kama Memorystore, Tensorflow na SQL.
* Ni **kati ya mtandao wako wa VPC na mtandao ulio milikiwa na Google kwa kutumia VPC peering**, kuruhusu mifano na huduma zako kuwasiliana kipekee kwa **kutumia anwani za IP za ndani**.
* Unda mradi uliojitenga kwako upande wa mtengenezaji wa huduma, maana wateja wengine hawashiriki. Utalipwa kwa rasilimali unazotumia tu.
* VPC peering itaingiza njia mpya kwenye VPC yako

### Nakala Rudufu

Inawezekana kuunda **nakala rudufu za hisa za faili**. Hizi zinaweza baadaye **kurejeshwa kwenye asili** kwenye kifaa kipya cha Fileshare au kwenye **vipya**.

### Ufichaji

Kwa default **ufunguo wa kufichua uliosimamiwa na Google** utatumika kuficha data, lakini inawezekana kuchagua **ufunguo wa kufichua uliosimamiwa na Mteja (CMEK)**.

### Urambazaji

Ikiwa unapata filestore inayopatikana kwenye mradi, unaweza **kuimount** kutoka kwenye Kifaa chako cha Utekelezaji kilichodukuliwa. Tumia amri ifuatayo kuona kama kuna yoyote.

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
Tafadhali kumbuka kuwa huduma ya hifadhi ya faili inaweza kuwa katika **mtandao mpya kabisa ulioanzishwa kwa ajili yake** (ndani ya Uunganisho wa Upatikanaji wa Huduma ya Kibinafsi, ambao ni **rafiki wa VPC**).\
Kwa hivyo unaweza kuhitaji **kuorodhesha marafiki wa VPC** pia kufanya nmap kwenye hizo anuwai za mtandao.

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
### Upandishaji wa Mamlaka na Baada ya Kudukuliwa

Hakuna njia za kuongeza upendeleo moja kwa moja katika GCP kwa kudhuru huduma hii, lakini kwa kutumia **mbinu za Baada ya Kudukuliwa inawezekana kupata ufikiaji wa data** na labda unaweza kupata baadhi ya siri za kuongeza upendeleo:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### Uthabiti

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}
