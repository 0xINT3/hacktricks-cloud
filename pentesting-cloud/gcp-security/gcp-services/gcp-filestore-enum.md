# GCP - Filestore Enum

<details>

<summary><strong>рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ.

</details>

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

Google Cloud Filestore рдПрдХ рдкреНрд░рдмрдВрдзрд┐рдд рдлрд╝рд╛рдЗрд▓ рд╕реНрдЯреЛрд░реЗрдЬ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЙрди рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ **рдлрд╝рд╛рдЗрд▓рд╕рд┐рд╕реНрдЯрдо рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдФрд░ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдЭрд╛ рдлрд╝рд╛рдЗрд▓рд╕рд┐рд╕реНрдЯрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ**. Filestore рдЙрдЪреНрдЪ-рдкреНрд░рджрд░реНрд╢рди рд╡рд╛рд▓реЗ рдлрд╝рд╛рдЗрд▓ рд╢реЗрдпрд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рд╡рд┐рднрд┐рдиреНрди GCP рд╕реЗрд╡рд╛рдУрдВ рдкрд░ рдорд╛рдЙрдВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ. рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрди рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдФрд░ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ рдЬреЛ рдкрд╛рд░рдВрдкрд░рд┐рдХ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдФрд░ рд╕реЗрдореЗрдВрдЯрд┐рдХреНрд╕ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдореАрдбрд┐рдпрд╛ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ, рдХрдВрдЯреЗрдВрдЯ рдореИрдиреЗрдЬрдореЗрдВрдЯ, рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдмреИрдХрдЕрдкреНрд╕.

рдЖрдк рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп **NFS** **рд╕рд╛рдЭрд╛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рднрдВрдбрд╛рд░ рдХреА рддрд░рд╣ рд╕рдордЭ рд╕рдХрддреЗ рд╣реИрдВ -** рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рд╕рдВрднрд╛рд╡рд┐рдд рд╕реНрд░реЛрдд.

### рдХрдиреЗрдХреНрд╢рди

Filestore рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдмрдирд╛рддреЗ рд╕рдордп рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ **рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдЬрд╣рд╛рдБ рдпрд╣ рд╕реБрд▓рдн рд╣реЛрдиреЗ рд╡рд╛рд▓рд╛ рд╣реИ**.

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЪрдпрдирд┐рдд VPC рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд╕рднреА рдХреНрд▓рд╛рдЗрдВрдЯ рдЗрд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХреЗрдВрдЧреЗ**, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ **IP рдкрддреЗ** рдпрд╛ рд░реЗрдВрдЬ рджреНрд╡рд╛рд░рд╛ рднреА рдкрд╣реБрдБрдЪ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░реЗрдВ рдФрд░ рдкрд╣реБрдБрдЪ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ (Admin, Admin Viewer, Editor, Viewer) рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдмрддрд╛рдПрдВ **рдЬреЛ IP рдкрддреЗ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдорд┐рд▓рдиреЗ рд╡рд╛рд▓рд╛ рд╣реИ.**

рдпрд╣ рдПрдХ **Private Service Access Connection** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рднреА рд╕реБрд▓рдн рд╣реЛ рд╕рдХрддрд╛ рд╣реИ:

* рдпреЗ рдкреНрд░рддрд┐ VPC рдиреЗрдЯрд╡рд░реНрдХ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рд╕рднреА рдкреНрд░рдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛рдУрдВ рдЬреИрд╕реЗ рдХрд┐ Memorystore, Tensorflow рдФрд░ SQL рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ.
* рдпреЗ **рдЖрдкрдХреЗ VPC рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ Google рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реЗ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмреАрдЪ VPC рдкреАрдпрд░рд┐рдВрдЧ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реЛрддреЗ рд╣реИрдВ**, рдЬрд┐рд╕рд╕реЗ рдЖрдкрдХреЗ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдФрд░ рд╕реЗрд╡рд╛рдПрдВ рдХреЗрд╡рд▓ **рдЖрдВрддрд░рд┐рдХ IP рдкрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрд╡рд╛рдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**.
* рдпреЗ рд╕реЗрд╡рд╛-рдирд┐рд░реНрдорд╛рддрд╛ рдкрдХреНрд╖ рдкрд░ рдЖрдкрдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдХреЛрдИ рдЕрдиреНрдп рдЧреНрд░рд╛рд╣рдХ рдЗрд╕реЗ рд╕рд╛рдЭрд╛ рдирд╣реАрдВ рдХрд░рддрд╛. рдЖрдк рдХреЗрд╡рд▓ рдЙрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдмрд┐рд▓ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдкрдиреЗ рдкреНрд░рд╛рд╡рдзрд╛рди рдХрд┐рдпрд╛ рд╣реИ.
* VPC рдкреАрдпрд░рд┐рдВрдЧ рдЖрдкрдХреЗ VPC рдореЗрдВ рдирдП рдорд╛рд░реНрдЧреЛрдВ рдХреЛ рдЖрдпрд╛рдд рдХрд░реЗрдЧреА

### рдмреИрдХрдЕрдкреНрд╕

рдлрд╝рд╛рдЗрд▓ рд╢реЗрдпрд░реЛрдВ рдХреЗ **рдмреИрдХрдЕрдк рдмрдирд╛рдирд╛ рд╕рдВрднрд╡ рд╣реИ**. рдЗрдиреНрд╣реЗрдВ рдмрд╛рдж рдореЗрдВ **рдореВрд▓** рдирдП Fileshare рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдореЗрдВ рдпрд╛ **рдирдП рд▓реЛрдЧреЛрдВ рдореЗрдВ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**.

### рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдПрдХ **Google-рдкреНрд░рдмрдВрдзрд┐рдд рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреБрдВрдЬреА** рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдПрдХ **Customer-managed encryption key (CMEK)** рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ.

### рдПрдиреНрдпреБрдорд░реЗрд╢рди

рдпрджрд┐ рдЖрдкрдХреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдлрд╝рд╛рдЗрд▓рд╕реНрдЯреЛрд░ рдорд┐рд▓рддрд╛ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ рдЕрдкрдиреЗ рд╕рдордЭреМрддрд╛ рдХрд┐рдП рдЧрдП Compute Instance рд╕реЗ **рдорд╛рдЙрдВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**. рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреЛрдИ рдореМрдЬреВрдж рд╣реИ рдпрд╛ рдирд╣реАрдВ, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ.

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ filestore рд╕реЗрд╡рд╛ **рдЗрд╕рдХреЗ рд▓рд┐рдП рдмрдирд╛рдП рдЧрдП рдкреВрд░реА рддрд░рд╣ рдирдП рдЙрдкрдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ** рд╣реЛ рд╕рдХрддреА рд╣реИ (Private Service Access Connection рдХреЗ рдЕрдВрджрд░, рдЬреЛ рдХрд┐ рдПрдХ **VPC peer** рд╣реИ)ред\
рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдЙрди рдиреЗрдЯрд╡рд░реНрдХ рд░реЗрдВрдЬреЛрдВ рдкрд░ nmap рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП **VPC peers рдХрд╛ рднреА рдЕрдиреБрд╕рдВрдзрд╛рди рдХрд░рдирд╛** рдкрдбрд╝ рд╕рдХрддрд╛ рд╣реИред

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
{% endcode %}
{% endhint %}

### рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐ рдФрд░ рдкреЛрд╕реНрдЯ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯреЗрд╢рди

GCP рдореЗрдВ рд╕реАрдзреЗ рдЗрд╕ рд╕реЗрд╡рд╛ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреБрдЫ **рдкреЛрд╕реНрдЯ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯреЗрд╢рди рдЪрд╛рд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдБрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ** рдФрд░ рд╢рд╛рдпрдж рдЖрдкрдХреЛ рдХреБрдЫ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдирд╕реЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрд╕

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong>!</summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ **рдореБрдЭреЗ рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛрдЬрд╝ рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЪрд╛рд▓реЗрдВ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>
