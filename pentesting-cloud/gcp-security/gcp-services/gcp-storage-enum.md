# GCP - Απαρίθμηση Αποθήκευσης

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Αποθήκευση

Η αποθήκευση του Google Cloud Platform (GCP) είναι μια **λύση αποθήκευσης βασισμένη στο cloud** που παρέχει ανθεκτική και διαθέσιμη αποθήκευση αντικειμένων για μη δομημένα δεδομένα. Προσφέρει **διάφορες κατηγορίες αποθήκευσης** βασισμένες στην απόδοση, τη διαθεσιμότητα και το κόστος, συμπεριλαμβανομένων των Standard, Nearline, Coldline και Archive. Η αποθήκευση του GCP παρέχει επίσης προηγμένες δυνατότητες όπως **πολιτικές κύκλου ζωής, εκδόσεις και έλεγχο πρόσβασης** για τη διαχείριση και την ασφάλεια των δεδομένων.

Το κάδος μπορεί να αποθηκευτεί σε μια περιοχή, σε 2 περιοχές ή **πολλαπλές περιοχές (προεπιλογή)**.

### Τύποι Αποθήκευσης

* **Κανονική Αποθήκευση**: Αυτή είναι η προεπιλεγμένη επιλογή αποθήκευσης που **προσφέρει υψηλή απόδοση και χαμηλή καθυστέρηση πρόσβασης σε συχνά ανακτούμενα δεδομένα**. Είναι κατάλληλη για μια ευρεία γκάμα περιπτώσεων χρήσης, συμπεριλαμβανομένης της παροχής περιεχομένου ιστότοπου, της ροής πολυμέσων και της φιλοξενίας αγωγών ανάλυσης δεδομένων.
* **Αποθήκευση Nearline**: Αυτή η κατηγορία αποθήκευσης προσφέρει **χαμηλότερο κόστος αποθήκευσης** και **ελαφρώς υψηλότερο κόστος πρόσβασης** από την Κανονική Αποθήκευση. Είναι βελτιστοποιημένη για δεδομένα που ανακτώνται σπάνια, με ελάχιστη διάρκεια αποθήκευσης 30 ημερών. Είναι ιδανική για αντίγραφα ασφαλείας και αρχειοθέτηση.
* **Αποθήκευση Coldline**: Αυτή η κατηγορία αποθήκευσης είναι βελτιστοποιημένη για **μακροπρόθεσμη αποθήκευση δεδομένων που ανακτώνται σπάνια**, με ελάχιστη διάρκεια αποθήκευσης 90 ημερών. Προσφέρει το **χαμηλότερο κόστος αποθήκευσης** από την Αποθήκευση Nearline, αλλά με **υψηλότερο κόστος πρόσβασης**.
* **Αποθήκευση Archive**: Αυτή η κατηγορία αποθήκευσης είναι σχεδιασμένη για κρύα δεδομένα που ανακτώνται **πολύ σπάνια**, με ελάχιστη διάρκεια αποθήκευσης 365 ημερών. Προσφέρει το **χαμηλότερο κόστος αποθήκευσης από όλες τις επιλογές αποθήκευσης του GCP**, αλλά με το **υψηλότερο κόστος πρόσβασης**. Είναι κατάλληλη για τη μακροπρόθεσμη διατήρηση δεδομένων που πρέπει να αποθηκεύονται για λόγους συμμόρφωσης ή κανονιστικών απαιτήσεων.
* **Αυτόματη Κατηγοριοποίηση**: Εάν **δεν γνωρίζετε πόσο συχνά θα έχετε πρόσβαση** στα δεδομένα, μπορείτε να επιλέξετε την Αυτόματη Κατηγοριοποίηση και το GCP θα **
```bash
# List all storage buckets in project
gsutil ls

# Get each bucket configuration (protections, CLs, times, configs...)
gsutil ls -L

# List contents of a specific bucket
gsutil ls gs://bucket-name/
gsutil ls -r gs://bucket-name/ # Recursive
gsutil ls -a gs://bucket-name/ # Get ALL versions of objects

# Cat the context of a file without copying it locally
gsutil cat 'gs://bucket-name/folder/object'
gsutil cat 'gs://bucket-name/folder/object#<num>' # cat specific version

# Copy an object from the bucket to your local storage for review
gsutil cp gs://bucket-name/folder/object ~/

# List using a raw OAuth token
## Useful because "CLOUDSDK_AUTH_ACCESS_TOKEN" and "gcloud config set auth/access_token_file" doesn't work with gsutil
curl -H "Authorization: Bearer $TOKEN" "https://storage.googleapis.com/storage/v1/b/<storage-name>/o"
# Download file content from bucket
curl -H "Authorization: Bearer $TOKEN" "https://storage.googleapis.com/storage/v1/b/supportstorage-58249/o/flag.txt?alt=media" --output -

# Enumerate HMAC keys
gsutil hmac list
```
Εάν λάβετε ένα σφάλμα άρνησης άδειας κατά την καταγραφή των κάδων, ενδέχεται να έχετε ακόμα πρόσβαση στο περιεχόμενο. Έτσι, τώρα που γνωρίζετε για τον κανόνα ονομασίας των κάδων, μπορείτε να δημιουργήσετε μια λίστα με πιθανά ονόματα και να προσπαθήσετε να αποκτήσετε πρόσβαση σε αυτούς:
```bash
for i in $(cat wordlist.txt); do gsutil ls -r gs://"$i"; done
```
### Ανέβασμα Προνομίων

Στην ακόλουθη σελίδα μπορείτε να ελέγξετε πώς να **καταχραστείτε τα δικαιώματα αποθήκευσης για να αναβαθμίσετε τα προνόμια**:

{% content-ref url="../gcp-privilege-escalation/gcp-storage-privesc.md" %}
[gcp-storage-privesc.md](../gcp-privilege-escalation/gcp-storage-privesc.md)
{% endcontent-ref %}

### Ανεξουσιοδότητη Απαρίθμηση

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-storage-unauthenticated-enum/" %}
[gcp-storage-unauthenticated-enum](../gcp-unaunthenticated-enum-and-access/gcp-storage-unauthenticated-enum/)
{% endcontent-ref %}

### Μετά την Εκμετάλλευση

{% content-ref url="../gcp-post-exploitation/gcp-storage-post-exploitation.md" %}
[gcp-storage-post-exploitation.md](../gcp-post-exploitation/gcp-storage-post-exploitation.md)
{% endcontent-ref %}

### Διατήρηση

{% content-ref url="../gcp-persistence/gcp-storage-persistence.md" %}
[gcp-storage-persistence.md](../gcp-persistence/gcp-storage-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
