# GCP - рд╕рдВрдЧреНрд░рд╣рдг рдЬрд╛рдБрдЪ

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **рддрдХ** рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдХреЛ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## рд╕рдВрдЧреНрд░рд╣рдг

Google Cloud Platform (GCP) рд╕рдВрдЧреНрд░рд╣рдг рдПрдХ **рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд рд╕рдВрдЧреНрд░рд╣ рд╕рдорд╛рдзрд╛рди** рд╣реИ рдЬреЛ рдЕрд╡реНрдпрд╡рд╕реНрдерд┐рдд рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЙрдЪреНрдЪ рдЯрд┐рдХрд╛рдК рдФрд░ рдЙрдкрд▓рдмреНрдз рдСрдмреНрдЬреЗрдХреНрдЯ рд╕рдВрдЧреНрд░рд╣рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдкреНрд░рджрд░реНрд╢рди, рдЙрдкрд▓рдмреНрдзрддрд╛, рдФрд░ рд▓рд╛рдЧрдд рдХреЗ рдЖрдзрд╛рд░ рдкрд░ **рд╡рд┐рднрд┐рдиреНрди рд╕рдВрдЧреНрд░рд╣рдг рд╡рд░реНрдЧреЛрдВ** рдХреА рдкреЗрд╢рдХрд╢ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реНрдЯреИрдВрдбрд░реНрдб, рдирд┐рдпрд░рд▓рд╛рдЗрди, рдХреЛрд▓реНрдбрд▓рд╛рдЗрди, рдФрд░ рдЖрд░реНрдХрд╛рдЗрд╡ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред GCP рд╕рдВрдЧреНрд░рд╣рдг рдЕрджреНрдпрддрд┐рдд рд╕реБрд╡рд┐рдзрд╛рдПрдВ рднреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ **рд▓рд╛рдЗрдлрд╕рд╛рдЗрдХрд▓ рдиреАрддрд┐рдпрд╛рдБ, рд╕рдВрд╕реНрдХрд░рдгрди, рдФрд░ рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг** рдбреЗрдЯрд╛ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред

рдмрдХреЗрдЯ рдХреЛ рдПрдХ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ, 2 рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рдпрд╛ **рдмрд╣реБ-рдХреНрд╖реЗрддреНрд░ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ)** рдореЗрдВ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### рд╕рдВрдЧреНрд░рд╣рдг рдкреНрд░рдХрд╛рд░

* **рд╕реНрдЯреИрдВрдбрд░реНрдб рд╕рдВрдЧреНрд░рд╣рдг**: рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕рдВрдЧреНрд░рд╣рдг рд╡рд┐рдХрд▓реНрдк рд╣реИ рдЬреЛ **рдЕрдХреНрд╕рд░ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЙрдЪреНрдЪ рдкреНрд░рджрд░реНрд╢рди, рдХрдо рд▓реИрдЯреЗрдВрд╕реА рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ**ред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡реЗрдмрд╕рд╛рдЗрдЯ рд╕рд╛рдордЧреНрд░реА рдХреА рд╕реЗрд╡рд╛, рдореАрдбрд┐рдпрд╛ рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ, рдФрд░ рдбреЗрдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреА рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдЬреИрд╕реЗ рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдпреЛрдЧ рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред
* **рдирд┐рдпрд░рд▓рд╛рдЗрди рд╕рдВрдЧреНрд░рд╣рдг**: рдпрд╣ рд╕рдВрдЧреНрд░рд╣рдг рд╡рд░реНрдЧ **рд╕реНрдЯреИрдВрдбрд░реНрдб рд╕рдВрдЧреНрд░рд╣рдг рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХрдо рд╕рдВрдЧреНрд░рд╣рдг рд▓рд╛рдЧрдд** рдФрд░ **рдереЛрдбрд╝реА рдЕрдзрд┐рдХ рдкрд╣реБрдБрдЪ рд▓рд╛рдЧрдд** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЕрдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рд╣реИ, рдЬрд┐рд╕рдореЗрдВ 30 рджрд┐рдиреЛрдВ рдХреА рдиреНрдпреВрдирддрдо рд╕рдВрдЧреНрд░рд╣рдг рдЕрд╡рдзрд┐ рд╣реЛрддреА рд╣реИред рдпрд╣ рдмреИрдХрдЕрдк рдФрд░ рд╕рдВрдЧреНрд░рд╣рдг рдХреЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрджрд░реНрд╢ рд╣реИред
* **рдХреЛрд▓реНрдбрд▓рд╛рдЗрди рд╕рдВрдЧреНрд░рд╣рдг**: рдпрд╣ рд╕рдВрдЧреНрд░рд╣рдг рд╡рд░реНрдЧ **рдЕрдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдбреЗрдЯрд╛ рдХреЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд╕рдВрдЧреНрд░рд╣рдг рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рд╣реИ**, рдЬрд┐рд╕рдореЗрдВ 90 рджрд┐рдиреЛрдВ рдХреА рдиреНрдпреВрдирддрдо рд╕рдВрдЧреНрд░рд╣рдг рдЕрд╡рдзрд┐ рд╣реЛрддреА рд╣реИред рдпрд╣ рдирд┐рдпрд░рд▓рд╛рдЗрди рд╕рдВрдЧреНрд░рд╣рдг рдХреА рддреБрд▓рдирд╛ рдореЗрдВ **рдХрдо рд╕рдВрдЧреНрд░рд╣рдг рд▓рд╛рдЧрдд** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди **рдЕрдзрд┐рдХ рдкрд╣реБрдБрдЪ рд▓рд╛рдЧрдд** рдХреЗ рд╕рд╛рдеред
* **рдЖрд░реНрдХрд╛рдЗрд╡ рд╕рдВрдЧреНрд░рд╣рдг**: рдпрд╣ рд╕рдВрдЧреНрд░рд╣рдг рд╡рд░реНрдЧ рдардВрдбреЗ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬрд┐рд╕реЗ **рдмрд╣реБрдд рд╣реА рдЕрдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**, рдЬрд┐рд╕рдореЗрдВ 365 рджрд┐рдиреЛрдВ рдХреА рдиреНрдпреВрдирддрдо рд╕рдВрдЧреНрд░рд╣рдг рдЕрд╡рдзрд┐ рд╣реЛрддреА рд╣реИред рдпрд╣ рд╕рднреА GCP рд╕рдВрдЧреНрд░рд╣рдг рд╡рд┐рдХрд▓реНрдкреЛрдВ рдореЗрдВ **рд╕рдмрд╕реЗ рдХрдо рд╕рдВрдЧреНрд░рд╣рдг рд▓рд╛рдЧрдд** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди **рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдкрд╣реБрдБрдЪ рд▓рд╛рдЧрдд** рдХреЗ рд╕рд╛рдеред рдпрд╣ рдирд┐рдпрдорд┐рддрддрд╛ рдпрд╛ рдирд┐рдпрдорд╛рдиреБрд╕рд╛рд░ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред
* **рдСрдЯреЛрдХреНрд▓рд╛рд╕**: рдпрджрд┐ рдЖрдкрдХреЛ рдирд╣реАрдВ рдкрддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдХрд┐рддрдиреА рдмрд╛рд░ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдБрдЪреЗрдВрдЧреЗ, рддреЛ рдЖрдк рдСрдЯреЛрдХреНрд▓рд╛рд╕ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ GCP рдЖрдкрдХреЗ рд▓рд┐рдП рд╕рдВрдЧреНрд░рд╣рдг рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдмрджрд▓реЗрдЧрд╛ рддрд╛рдХрд┐ рд▓рд╛рдЧрдд рдХреЛ рдХрдо рд╕реЗ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

### рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ** рд░реВрдк рд╕реЗ рдпрд╣ **рд╕рд┐рдлрд╝рд░рдд рдХреА рдЬрд╛рддреА рд╣реИ** рдХрд┐ рдкрд╣реБрдБрдЪ рдХреЛ **IAM** рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдЖрдк **ACL рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ**ред\
рдпрджрд┐ рдЖрдк рдХреЗрд╡рд▓ IAM (рдбрд┐рдлрд╝реЙрд▓реНрдЯ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдЪрдпрди рдХрд░рддреЗ рд╣реИрдВ рдФрд░ **90 рдкрд╛рд╕** рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк **рдмрдХреЗрдЯ рдХреЗ рд▓рд┐рдП ACL рдХреЛ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ**ред

### рд╕рдВрдЧреНрд░рд╣рдг рдСрдмреНрдЬреЗрдХреНрдЯ рд╕рдВрд░рдХреНрд╖рдг

### рд╕рдВрд╕реНрдХрд░рдгрди

рд╕рдВрд╕реНрдХрд░рдгрди рдХреЛ рд╕рдХреНрд╖рдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд╕реЗ **рдмрдХреЗрдЯ рдХреЗ рднреАрддрд░ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рд╕рд╣реЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ**ред рдЖрдк
```bash
# List all storage buckets in project
gsutil ls

# Get each bucket configuration (protections, CLs, times, configs...)
gsutil ls -L

# List contents of a specific bucket
gsutil ls gs://bucket-name/
gsutil ls -r gs://bucket-name/ # Recursive
gsutil ls -a gs://bucket-name/ # Get ALL versions of objects

# Cat the context of a file without copying it locally
gsutil cat 'gs://bucket-name/folder/object'
gsutil cat 'gs://bucket-name/folder/object#<num>' # cat specific version

# Copy an object from the bucket to your local storage for review
gsutil cp gs://bucket-name/folder/object ~/

# List using a raw OAuth token
## Useful because "CLOUDSDK_AUTH_ACCESS_TOKEN" and "gcloud config set auth/access_token_file" doesn't work with gsutil
curl -H "Authorization: Bearer $TOKEN" "https://storage.googleapis.com/storage/v1/b/<storage-name>/o"
# Download file content from bucket
curl -H "Authorization: Bearer $TOKEN" "https://storage.googleapis.com/storage/v1/b/supportstorage-58249/o/flag.txt?alt=media" --output -
```
рдпрджрд┐ рдЖрдкрдХреЛ рдмрд╛рд▓реНрдЯреАрдпреЛрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдиреЗ рдореЗрдВ рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рдорд┐рд▓рддреА рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдлрд┐рд░ рднреА рд╕рд╛рдордЧреНрд░реА рддрдХ рдкрд╣реБрдВрдЪ рд╣реЛ рд╕рдХрддреА рд╣реИред рддреЛ, рдЕрдм рдЬрдм рдЖрдк рдмрд╛рд▓реНрдЯреАрдпреЛрдВ рдХреЗ рдирд╛рдо рд╕рдВрд╡реЗрджрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рд╕рдВрднрд╛рд╡рд┐рдд рдирд╛рдореЛрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
for i in $(cat wordlist.txt); do gsutil ls -r gs://"$i"; done
```
### рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкрд╣реБрдВрдЪ

рдмрд╛рд╣рд░реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ (GCP рдореЗрдВ рд▓реЙрдЧ рдЗрди рд╣реЛ рдпрд╛ рди рд╣реЛ) рдХреЛ рдмрдХреЗрдЯ рдХреА рд╕рд╛рдордЧреНрд░реА рддрдХ рдкрд╣реБрдВрдЪ рджреЗрдирд╛ рд╕рдВрднрд╡ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдмрдХреЗрдЯ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд░реВрдк рд╕реЗ рдПрдХреНрд╕рдкреЛрдЬрд╝ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдЕрдХреНрд╖рдо рд╣реЛрдЧрд╛:
```bash
# Disable public prevention
gcloud storage buckets update gs://BUCKET_NAME --no-public-access-prevention

# Make all objects in a bucket public
gcloud storage buckets add-iam-policy-binding gs://BUCKET_NAME --member=allUsers --role=roles/storage.objectViewer
## I don't think you can make specific objects public just with IAM

# Make a bucket or object public (via ACL)
gcloud storage buckets update gs://BUCKET_NAME --add-acl-grant=entity=AllUsers,role=READER
gcloud storage objects update gs://BUCKET_NAME/OBJECT_NAME --add-acl-grant=entity=AllUsers,role=READER
```
рдпрджрд┐ рдЖрдк **рдЕрдХреНрд╖рдо ACL рдХреЗ рд╕рд╛рде рдПрдХ рдмрдХреЗрдЯ рдХреЛ ACL рджреЗрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ** рддреЛ рдЖрдкрдХреЛ рдпрд╣ рддреНрд░реБрдЯрд┐ рдорд┐рд▓реЗрдЧреА: `ERROR: HTTPError 400: Cannot use ACL API to update bucket policy when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access`

рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЦреБрд▓реЗ рдмрдХреЗрдЯреНрд╕ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд URL рдкрд░ рдкрд╣реБрдВрдЪреЗрдВ `https://<bucket_name>.storage.googleapis.com/` рдпрд╛ `https://<bucket_name>.storage.googleapis.com/<object_name>`

### рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреГрд╖реНрда рдкрд░ рдЖрдк рдпрд╣ рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреИрд╕реЗ **рд╕рдВрдЧреНрд░рд╣ рд╕рдВрдмрдВрдзреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдХреЛ рдЙрдиреНрдирдпрди рдХрд░реЗрдВ**:

{% content-ref url="../gcp-privilege-escalation/gcp-storage-privesc.md" %}
[gcp-storage-privesc.md](../gcp-privilege-escalation/gcp-storage-privesc.md)
{% endcontent-ref %}

### рдореМрдЬреВрджрд╛ рдЦрд╛рддреЗ рдореЗрдВ рдЦреЛрдЬреЗрдВ рдЦреБрд▓реЗ рдмрдХреЗрдЯреНрд╕

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрдХреНрд░рд┐рдкреНрдЯ [рдпрд╣рд╛рдВ рд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ рдЧрдпрд╛](https://gitlab.com/gitlab-com/gl-security/security-operations/gl-redteam/gcp\_misc/-/blob/master/find\_open\_buckets.sh) рдЖрдк рд╕рднреА рдЦреБрд▓реЗ рдмрдХреЗрдЯреНрд╕ рдвреВрдВрдв рд╕рдХрддреЗ рд╣реИрдВ:
```bash
#!/bin/bash

############################
# Run this tool to find buckets that are open to the public anywhere
# in your GCP organization.
#
# Enjoy!
############################

for proj in $(gcloud projects list --format="get(projectId)"); do
echo "[*] scraping project $proj"
for bucket in $(gsutil ls -p $proj); do
echo "    $bucket"
ACL="$(gsutil iam get $bucket)"

all_users="$(echo $ACL | grep allUsers)"
all_auth="$(echo $ACL | grep allAuthenticatedUsers)"

if [ -z "$all_users" ]
then
:
else
echo "[!] Open to all users: $bucket"
fi

if [ -z "$all_auth" ]
then
:
else
echo "[!] Open to all authenticated users: $bucket"
fi
done
done
```
<details>

<summary><strong>рдмрдврд╝рд┐рдпрд╛ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣ рдЕрдирдиреНрдп [**NFTs**](https://opensea.io/collection/the-peass-family)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **рддрдХ** рдореБрдЭреЗ **Twitter** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
