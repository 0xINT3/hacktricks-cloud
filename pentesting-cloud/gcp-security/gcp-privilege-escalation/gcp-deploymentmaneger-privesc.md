# GCP - Escala√ß√£o de Privil√©gios do Deployment Manager

<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Obtenha o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>

## deploymentmanager

### `deploymentmanager.deployments.create`

Essa √∫nica permiss√£o permite que voc√™ **inicie novos deployments** de recursos no GCP com contas de servi√ßo arbitr√°rias. Voc√™ poderia, por exemplo, iniciar uma inst√¢ncia de computa√ß√£o com uma SA para escalar para ela.

Voc√™ poderia realmente **iniciar qualquer recurso** listado em `gcloud deployment-manager types list`

No [**pesquisa original**](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/) o [**script**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/deploymentmanager.deployments.create.py) a seguir √© usado para implantar uma inst√¢ncia de computa√ß√£o, no entanto, esse script n√£o funcionar√°. Verifique um script para automatizar a [**cria√ß√£o, explora√ß√£o e limpeza de um ambiente vulner√°vel aqui**](https://github.com/carlospolop/gcp\_privesc\_scripts/blob/main/tests/1-deploymentmanager.deployments.create.sh)**.**

### `deploymentmanager.deployments.update`

Isso √© semelhante ao abuso anterior, mas em vez de criar um novo deployment, voc√™ modifica um que j√° existe (ent√£o tenha cuidado)

Verifique um script para automatizar a [**cria√ß√£o, explora√ß√£o e limpeza de um ambiente vulner√°vel aqui**](https://github.com/carlospolop/gcp\_privesc\_scripts/blob/main/tests/e-deploymentmanager.deployments.update.sh)**.**

### `deploymentmanager.deployments.setIamPolicy`

Isso √© semelhante ao abuso anterior, mas em vez de criar diretamente um novo deployment, voc√™ primeiro concede esse acesso e depois abusa da permiss√£o conforme explicado na se√ß√£o anterior _deploymentmanager.deployments.create_.

## Refer√™ncias

* [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)
