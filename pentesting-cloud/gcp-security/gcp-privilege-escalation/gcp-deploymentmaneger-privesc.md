# GCP - Deploymentmaneger 권한 상승

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 상품**](https://peass.creator-spring.com)을 구매하세요.
* 독점적인 [**NFT 컬렉션인 The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* [**HackTricks**](https://github.com/carlospolop/hacktricks)와 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 **PR을 제출하여** 여러분의 해킹 기법을 공유하세요.

</details>

## deploymentmanager

### `deploymentmanager.deployments.create`

이 권한 하나만으로 임의의 서비스 계정을 사용하여 GCP에 새로운 배포를 시작할 수 있습니다. 예를 들어, SA를 사용하여 컴퓨팅 인스턴스를 시작하여 권한 상승할 수 있습니다.

실제로 `gcloud deployment-manager types list`에 나열된 **모든 리소스**를 시작할 수 있습니다.

[**원본 연구**](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)에서는 다음 [**스크립트**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/deploymentmanager.deployments.create.py)를 사용하여 컴퓨팅 인스턴스를 배포하지만, 해당 스크립트는 작동하지 않습니다. [**여기에서 취약한 환경의 생성, 공격 및 정리를 자동화하는 스크립트**](https://github.com/carlospolop/gcp\_privesc\_scripts/blob/main/tests/1-deploymentmanager.deployments.create.sh)**를 확인하세요.**

### `deploymentmanager.deployments.update`

이전과 유사한 남용 방법이지만, 새로운 배포를 생성하는 대신 이미 존재하는 배포를 수정합니다 (따라서 주의가 필요합니다).

[**여기에서 취약한 환경의 생성, 공격 및 정리를 자동화하는 스크립트**](https://github.com/carlospolop/gcp\_privesc\_scripts/blob/main/tests/e-deploymentmanager.deployments.update.sh)**를 확인하세요.**

### `deploymentmanager.deployments.setIamPolicy`

이전과 유사한 남용 방법이지만, 직접 새로운 배포를 생성하는 대신 먼저 해당 액세스 권한을 부여한 다음 이전 _deploymentmanager.deployments.create_ 섹션에서 설명한 대로 권한을 남용합니다.

## 참고 자료

* [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 상품**](https://peass.creator-spring.com)을 구매하세요.
* 독점적인 [**NFT 컬렉션인 The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* [**HackTricks**](https://github.com/carlospolop/hacktricks)와 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 **PR을 제출하여** 여러분의 해킹 기법을 공유하세요.

</details>
