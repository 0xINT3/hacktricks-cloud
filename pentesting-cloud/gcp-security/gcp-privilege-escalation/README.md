# GCP - рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдПрд╕реНрдХрд▓реЗрд╢рди

<details>

<summary><strong>рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВ.

</details>

## GCP рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдПрд╕реНрдХрд▓реЗрд╢рди рдХрд╛ рдкрд░рд┐рдЪрдп <a href="#introduction-to-gcp-privilege-escalation" id="introduction-to-gcp-privilege-escalation"></a>

GCP, рдЕрдиреНрдп рдХреНрд▓рд╛рдЙрдб рдХреА рддрд░рд╣, рдХреБрдЫ **рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕** рд╣реЛрддреЗ рд╣реИрдВ: рдпреВрдЬрд░реНрд╕, рдЧреНрд░реБрдкреНрд╕ рдФрд░ рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯреНрд╕, рдФрд░ рдХреБрдЫ **рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ** рдЬреИрд╕реЗ рдХрдВрдкреНрдпреВрдЯ рдЗрдВрдЬрди, рдХреНрд▓рд╛рдЙрдб рдлрдВрдХреНрд╢рдиреНрд╕...
рдлрд┐рд░, рд░реЛрд▓реНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, **рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ рдкрд░ рдЙрди рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдХреЛ рдкрд░рдорд┐рд╢рдиреНрд╕ рджреА рдЬрд╛рддреА рд╣реИрдВ**. рдпрд╣ GCP рдореЗрдВ рдПрдХ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЗ рдкрд╛рд╕ рдПрдХ рд░рд┐рд╕реЛрд░реНрд╕ рдкрд░ рдХреМрди рд╕реА рдкрд░рдорд┐рд╢рдиреНрд╕ рд╣реИрдВ, рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рд╣реИ.
рдХреБрдЫ рдкрд░рдорд┐рд╢рдиреНрд╕ рдРрд╕реА рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рдпреВрдЬрд░ рдХреЛ рд░рд┐рд╕реЛрд░реНрд╕ рдкрд░ рдпрд╛ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ рдкрд░ **рдФрд░ рдЕрдзрд┐рдХ рдкрд░рдорд┐рд╢рдиреНрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИрдВ**, рдФрд░ рдЗрд╕реЗ **рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдПрд╕реНрдХрд▓реЗрд╢рди** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ (рд╕рд╛рде рд╣реА, рдЕрдзрд┐рдХ рдкрд░рдорд┐рд╢рдиреНрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд▓реНрдирд░реЗрдмрд┐рд▓рд┐рдЯреАрдЬ рдХрд╛ рд╢реЛрд╖рдг рднреА).

рдЗрд╕рд▓рд┐рдП, рдореИрдВ GCP рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдПрд╕реНрдХрд▓реЗрд╢рди рддрдХрдиреАрдХреЛрдВ рдХреЛ **2 рд╕рдореВрд╣реЛрдВ** рдореЗрдВ рдЕрд▓рдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдБ:

* **рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЗ рд▓рд┐рдП рдкреНрд░рд┐рд╡реЗрд╕реНрдХ**: рдпрд╣ рдЖрдкрдХреЛ **рджреВрд╕рд░реЗ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХрд╛ рд░реВрдк рдзрд╛рд░рдг рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛**, рдФрд░ рдЗрд╕рд▓рд┐рдП рдЙрд╕рдХреА рд╕рднреА рдкрд░рдорд┐рд╢рдиреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рд░реНрдп рдХрд░реЗрдВ. рдЙрджрд╛рд╣рд░рдг: _getAccessToken_ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХрд╛ рд░реВрдк рдзрд╛рд░рдг рдХрд░рдирд╛.
* **рд░рд┐рд╕реЛрд░реНрд╕ рдкрд░ рдкреНрд░рд┐рд╡реЗрд╕реНрдХ**: рдпрд╣ рдЖрдкрдХреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░рд┐рд╕реЛрд░реНрд╕ рдкрд░ **рдЕрдзрд┐рдХ рдкрд░рдорд┐рд╢рдиреНрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛**. рдЙрджрд╛рд╣рд░рдг: рдЖрдк рдХреНрд▓рд╛рдЙрдбрдлрдВрдХреНрд╢рдиреНрд╕ рдкрд░ _setIamPolicy_ рдкрд░рдорд┐рд╢рди рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдЖрдк рдлрдВрдХреНрд╢рди рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░ рд╕рдХреЗрдВ.
* рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреБрдЫ **рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ рдкрд░рдорд┐рд╢рдиреНрд╕ рдЖрдкрдХреЛ рдПрдХ рдордирдорд╛рдиреЗ рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ** рдХреЛ рд░рд┐рд╕реЛрд░реНрд╕ рд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреА рднреА рдЕрдиреБрдорддрд┐ рджреЗрдВрдЧреА. рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рд░рд┐рд╕реЛрд░реНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ SA рд▓реЙрдиреНрдЪ рдХрд░ рдкрд╛рдПрдВрдЧреЗ, рд░рд┐рд╕реЛрд░реНрд╕ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░реЗрдВрдЧреЗ, рдФрд░ **SA рдЯреЛрдХрди рдЪреБрд░рд╛ рд╕рдХреЗрдВрдЧреЗ**. рдЗрд╕рд▓рд┐рдП, рдпрд╣ рдЖрдкрдХреЛ рдПрдХ рд░рд┐рд╕реЛрд░реНрд╕ рдПрд╕реНрдХрд▓реЗрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рддрдХ рдПрд╕реНрдХрд▓реЗрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛. рдпрд╣ рдХрдИ рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ рдореЗрдВ рдкрд╣рд▓реЗ рд╣реЛ рдЪреБрдХрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдм рдпрд╣ рдХрдо рдЖрдо рд╣реИ (рд▓реЗрдХрд┐рди рдЕрднреА рднреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ).

рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ, рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдПрд╕реНрдХрд▓реЗрд╢рди рддрдХрдиреАрдХреЗрдВ **рджреВрд╕рд░реЗ рд╕рдореВрд╣** рдХреА рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЖрдкрдХреЛ **рдЙрди рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ рдХреЗ рдмрд╛рд╣рд░ рдЕрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ рдЬрд┐рди рдкрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рдХреБрдЫ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╣реИрдВ**. рд╣рд╛рд▓рд╛рдВрдХрд┐, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **рд░рд┐рд╕реЛрд░реНрд╕реЗрдЬ рдореЗрдВ рдПрд╕реНрдХрд▓реЗрдЯрд┐рдВрдЧ** рдЖрдкрдХреЛ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рддрдХ рдпрд╛ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ **рдЕрдиреНрдп рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕** рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреА рд╣реИ (рд╢рд╛рдпрдж рдПрдХ рд╕реАрдХреНрд░реЗрдЯ рдХреЛ рдкрдврд╝рдХрд░ рдЬрд┐рд╕рдореЗрдВ рдПрдХ SA рдХрд╛ рдЯреЛрдХрди рд╣реЛрддрд╛ рд╣реИ).

{% hint style="warning" %}
рдпрд╣ рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ **GCP рдореЗрдВ рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯреНрд╕ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдФрд░ рдкрд░рдорд┐рд╢рдиреНрд╕ рджреЛрдиреЛрдВ рд╣реИрдВ**, рдЗрд╕рд▓рд┐рдП SA рдореЗрдВ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдПрд╕реНрдХрд▓реЗрдЯ рдХрд░рдирд╛ рдЖрдкрдХреЛ рдЗрд╕реЗ рднреА рд░реВрдк рдзрд╛рд░рдг рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛.
{% endhint %}

{% hint style="info" %}
рдкрд░рдВрдереЗрд╕рд┐рд╕ рдореЗрдВ рджреА рдЧрдИ рдкрд░рдорд┐рд╢рдиреНрд╕ рд╡рд▓реНрдирд░реЗрдмрд┐рд▓рд┐рдЯреА рдХрд╛ рд╢реЛрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `gcloud` рдХреЗ рд╕рд╛рде рдЖрд╡рд╢реНрдпрдХ рдкрд░рдорд┐рд╢рдиреНрд╕ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИрдВ. рдпрджрд┐ рдЖрдк API рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрд╕рдХрд╛ рд╢реЛрд╖рдг рдХрд░ рд░рд╣реЗ рд╣реИрдВ рддреЛ рдпреЗ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ.
{% endhint %}

## рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдПрд╕реНрдХрд▓реЗрд╢рди рдкрджреНрдзрддрд┐ рдХреЗ рд▓рд┐рдП рдкрд░рдорд┐рд╢рдиреНрд╕

рдпрд╣ рд╣реИ рдХрд┐ рдореИрдВ GCP рдХреЗ рдЕрдВрджрд░ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд░рдорд┐рд╢рдиреНрд╕ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдХрд░рддрд╛ рд╣реВрдБ**.

1. github рд░реЗрдкреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ [https://github.com/carlospolop/gcp\_privesc\_scripts](https://github.com/carlospolop/gcp\_privesc\_scripts)
2. tests/ рдореЗрдВ рдирдИ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬреЛрдбрд╝реЗрдВ

## рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдкреНрд╕ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдирд╛ <a href="#bypassing-access-scopes" id="bypassing-access-scopes"></a>

GCP рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╕рд░реНрд╡рд┐рд╕ рд╕реЗ рд▓реАрдХ рд╣реБрдП SA рдХреЗ рдЯреЛрдХрдиреНрд╕ рдореЗрдВ **рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдкреНрд╕** рд╣реЛрддреЗ рд╣реИрдВ. рдпреЗ рдЯреЛрдХрди рдХреА рдкрд░рдорд┐рд╢рдиреНрд╕ рдкрд░ **рдкреНрд░рддрд┐рдмрдВрдз** рд╣реЛрддреЗ рд╣реИрдВ. рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдЧрд░ рдЯреЛрдХрди рдХреЗ рдкрд╛рд╕ **`https://www.googleapis.com/auth/cloud-platform`** рд╕реНрдХреЛрдк рд╣реИ, рддреЛ рдЗрд╕рдХреЗ рдкрд╛рд╕ рд╕рднреА GCP рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ **рдкреВрд░реНрдг рдПрдХреНрд╕реЗрд╕** рд╣реЛрдЧрд╛. рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдЧрд░ рдЯреЛрдХрди рдХреЗ рдкрд╛рд╕ **`https://www.googleapis.com/auth/cloud-platform.read-only`** рд╕реНрдХреЛрдк рд╣реИ, рддреЛ рдЗрд╕рдХреЗ рдкрд╛рд╕ рдХреЗрд╡рд▓ рд╕рднреА GCP рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ **рдХреЗрд╡рд▓-рдкрдврд╝рдиреЗ рдХрд╛ рдПрдХреНрд╕реЗрд╕** рд╣реЛрдЧрд╛ рднрд▓реЗ рд╣реА SA рдХреЗ рдкрд╛рд╕ IAM рдореЗрдВ рдЕрдзрд┐рдХ рдкрд░рдорд┐рд╢рдиреНрд╕ рд╣реЛрдВ.

рдЗрди рдкрд░рдорд┐рд╢рдиреНрд╕ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рд╕реАрдзрд╛ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдк рд╣рдореЗрд╢рд╛ рд╕рдордЭреМрддрд╛ рдХрд┐рдП рдЧрдП рд╣реЛрд╕реНрдЯ рдореЗрдВ **рдирдИ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреА рдЦреЛрдЬ** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, **рд╕рд░реНрд╡рд┐рд╕ рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ** рддрд╛рдХрд┐ рдмрд┐рдирд╛ рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ рдПрдХ OAuth рдЯреЛрдХрди рдЬрдирд░реЗрдЯ рдХрд░ рд╕рдХреЗрдВ рдпрд╛ **рдХрдо рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдЕрд▓рдЧ VM рдкрд░ рдЬрд╛рдПрдВ**.

рдЬрдм [рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдкреНрд╕](https://cloud.google.com/compute/docs/access/service-accounts#accesscopesiam) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдЗрдВрд╕реНрдЯреЗрдВрд╕ (VM) рдХреЗ рд▓рд┐рдП рдЬрдирд░реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ OAuth рдЯреЛрдХрди рдореЗрдВ [**рд╕реНрдХреЛрдк**](https://oauth.net/2/scope/) **рд╕реАрдорд╛ рд╢рд╛рдорд┐рд▓ рд╣реЛрдЧреА**. рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдк рд╕рдордЭреМрддрд╛ рдХрд┐рдП рдЧрдП рдЕрдХрд╛рдЙрдВрдЯ рдХреА рдкрд░рдорд┐рд╢рдиреНрд╕ рдХрд╛ рд╢реЛрд╖рдг рдХрд░рдХреЗ рдЗрд╕ рд╕реАрдорд╛ рдХреЛ **рдмрд╛рдпрдкрд╛рд╕** рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ.

рдЗрд╕ рдкреНрд░рддрд┐рдмрдВрдз рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХрд╛ **рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛** рдпрд╛ рддреЛ рд╕рдордЭреМрддрд╛ рдХрд┐рдП рдЧрдП рд╣реЛрд╕реНрдЯ рдореЗрдВ **рдирдИ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреА рдЦреЛрдЬ рдХрд░рдирд╛** рд╣реИ, **рд╕рд░реНрд╡рд┐рд╕ рдХреА рдЦреЛрдЬ рдХрд░рдирд╛ рддрд╛рдХрд┐ рдмрд┐рдирд╛ рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ рдПрдХ OAuth рдЯреЛрдХрди рдЬрдирд░реЗрдЯ рдХрд░ рд╕рдХреЗрдВ** рдпрд╛ **рдХрдо рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд SA рдХреЗ рд╕рд╛рде рдЕрд▓рдЧ VM рдХреЛ рд╕рдордЭреМрддрд╛ рдХрд░рдирд╛** рд╣реИ.

SA рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ рдЬрд┐рд╕рдореЗрдВ рдХреАрдЬ рдЬрдирд░реЗрдЯ рдХреА рдЧрдИ рд╣реИрдВ:
```bash
for i in $(gcloud iam service-accounts list --format="table[no-heading](email)"); do
echo "Looking for keys for $i:"
gcloud iam service-accounts keys list --iam-account $i
done
```
## рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐ рддрдХрдиреАрдХреЗрдВ

AWS рдореЗрдВ рдЖрдкрдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдВ рд╣реЛрдВ рдЬрд┐рд╕рд╕реЗ рдЖрдк, рдХрд┐рд╕реА рддрд░рд╣, рдЕрдиреНрдп рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛/рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛/рд╕рдореВрд╣реЛрдВ рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХреЗрдВред рд╢реНрд░реГрдВрдЦрд▓рд╛ рд╡реГрджреНрдзрд┐ рдЬрдм рддрдХ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╕рдВрдЧрдарди рдкрд░ рдкреНрд░рд╢рд╛рд╕рдирд┐рдХ рдкрд╣реБрдБрдЪ рди рд╣реЛ рдЬрд╛рдПред

{% hint style="warning" %}
GCP рдореЗрдВ **рд╕реИрдХрдбрд╝реЛрдВ** (рдпрджрд┐ рд╣рдЬрд╛рд░реЛрдВ рдирд╣реАрдВ) **рдЕрдиреБрдорддрд┐рдпрд╛рдВ** рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рдПрдХ рд╕рдВрд╕реНрдерд╛ рдХреЛ рджреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред рдЗрд╕ рдкреБрд╕реНрддрдХ рдореЗрдВ рдЖрдк **рд╕рднреА рдЕрдиреБрдорддрд┐рдпрд╛рдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдореИрдВ рдЬрд╛рдирддрд╛ рд╣реВрдБ** рдЬрд┐рдирдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк **рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк **рдХреЛрдИ рдкрде рдЬрд╛рдирддреЗ рд╣реИрдВ** рдЬреЛ рдпрд╣рд╛рдБ рдЙрд▓реНрд▓реЗрдЦрд┐рдд рдирд╣реАрдВ рд╣реИ, рддреЛ **рдХреГрдкрдпрд╛ рдЙрд╕реЗ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ**ред
{% endhint %}

рдЖрдк рд╕рднреА **рдкреНрд░рд┐рд╡реЗрд╕реНрдХ рдкрдереЛрдВ рдХреЛ рд╕реЗрд╡рд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рд╡рд┐рднрд╛рдЬрд┐рдд** рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ:

* [**Apikeys Privesc**](gcp-apikeys-privesc.md)
* [**Cloudbuild Privesc**](gcp-cloudbuild-privesc.md)
* [**Cloudfunctions Privesc**](gcp-cloudfunctions-privesc.md)
* [**Cloudscheduler Privesc**](gcp-cloudscheduler-privesc.md)
* [**Compute Privesc**](../../gcp-pentesting/gcp-privilege-escalation/gcp-compute-privesc/)
* [**Composer Privesc**](gcp-composer-privesc.md)
* [**Container Privesc**](gcp-container-privesc.md)
* [**Deploymentmanager Privesc**](gcp-deploymentmaneger-privesc.md)
* [**IAM Privesc**](gcp-iam-privesc.md)
* [**KMS Privesc**](gcp-kms-privesc.md)
* [**Orgpolicy Privesc**](gcp-orgpolicy-privesc.md)
* [**Pubsub Privesc**](gcp-pubsub-privesc.md)
* [**Resourcemanager Privesc**](gcp-resourcemanager-privesc.md)
* [**Run Privesc**](gcp-run-privesc.md)
* [**Secretmanager Privesc**](gcp-secretmanager-privesc.md)
* [**Serviceusage Privesc**](gcp-serviceusage-privesc.md)
* [**Source Repos Privesc**](gcp-sourcerepos-privesc.md)
* [**Storage Privesc**](gcp-storage-privesc.md)
* [**Misc Privesc**](gcp-misc-perms-privesc.md)

### GCP рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐ рдХрд░рдирд╛

рдпрджрд┐ рдЖрдк GCP рдореЗрдВ рдХрд┐рд╕реА рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ рд╣реИрдВ рддреЛ рдЖрдк рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рднреА рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

{% content-ref url="gcp-local-privilege-escalation-ssh-pivoting.md" %}
[gcp-local-privilege-escalation-ssh-pivoting.md](gcp-local-privilege-escalation-ssh-pivoting.md)
{% endcontent-ref %}

## рд╕рдВрджрд░реНрдн

* [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)
* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/#gcp-privesc-scanner)
* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВред**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>
