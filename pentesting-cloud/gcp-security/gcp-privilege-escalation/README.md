# GCP - рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рдЬреАрд░реЛ рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ **PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

## GCP рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди рдХрд╛ рдкрд░рд┐рдЪрдп <a href="#introduction-to-gcp-privilege-escalation" id="introduction-to-gcp-privilege-escalation"></a>

GCP, рдЬреИрд╕реЗ рдХрд┐ рдХреЛрдИ рднреА рдмрд╛рджрд▓, рдХреБрдЫ **рдореВрд▓ рд╕рд┐рджреНрдзрд╛рдВрдд** рд░рдЦрддрд╛ рд╣реИ: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рд╕рдореВрд╣ рдФрд░ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ, рдФрд░ рдХреБрдЫ **рд╕рдВрд╕рд╛рдзрди** рдЬреИрд╕реЗ рдХрдВрдкреНрдпреВрдЯ рдЗрдВрдЬрди, рдХреНрд▓рд╛рдЙрдб рдлрдВрдХреНрд╢рди...\
рдлрд┐рд░, рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ **рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ рдЙрди рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**. рдпрд╣ GCP рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рдкрд░ рдПрдХ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рдкрд╛рд╕ рдХрд┐рддрдиреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ, рдЗрд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рд╣реИред\
рдХреБрдЫ рдРрд╕реА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ рдЬреЛ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрди рдпрд╛ рддреГрддреАрдп рдкрдХреНрд╖ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ **рдФрд░ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВрдЧреА, рдФрд░ рдЙрд╕реЗ рд╣реА **рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ (рдФрд░ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреЛрд╖реЛрдВ рдХрд╛ рд╢реЛрдзрди рдХрд░рдирд╛ред)

рдЗрд╕рд▓рд┐рдП, рдореИрдВ GCP рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди рддрдХрдиреАрдХреЛрдВ рдХреЛ **2 рд╕рдореВрд╣реЛрдВ** рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛:

* **рдореБрдЦреНрдп рд╕рд┐рджреНрдзрд╛рдВрдд рдкрд░ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░**: рдпрд╣ рдЖрдкрдХреЛ **рдПрдХ рдЕрдиреНрдп рд╕рд┐рджреНрдзрд╛рдВрдд рдХреА рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛**, рдФрд░ рдЗрд╕рд▓рд┐рдП рдЙрд╕рдХреЗ рд╕рднреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред рдЙрджрд╛ред: рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреА рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП _getAccessToken_ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рд╕рдВрд╕рд╛рдзрди рдкрд░ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░**: рдпрд╣ рдЖрдкрдХреЛ **рд╡рд┐рд╢реЗрд╖ рд╕рдВрд╕рд╛рдзрди рдкрд░ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛**ред рдЙрджрд╛ред: рдЖрдк _setIamPolicy_ рдЕрдиреБрдорддрд┐ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреНрд▓рд╛рдЙрдб рдлрдВрдХреНрд╢рдиреНрд╕ рдкрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреБрдЫ **рд╕рдВрд╕рд╛рдзрди рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЖрдкрдХреЛ рд╕рдВрд╕рд╛рдзрди рдкрд░ рдПрдХ рд╡рд┐рдЪрд┐рддреНрд░ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рдЬреЛрдбрд╝рдиреЗ рдХреА рднреА рдЕрдиреБрдорддрд┐ рджреЗрдВрдЧреА**ред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрд╕рд╛рдзрди рд▓реЙрдиреНрдЪ рдХрд░ рд╕рдХреЗрдВрдЧреЗ, рд╕рдВрд╕рд╛рдзрди рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░ рд╕рдХреЗрдВрдЧреЗ, рдФрд░ **рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдЯреЛрдХрди** рдЪреБрд░рд╛ рд╕рдХреЗрдВрдЧреЗред рдЗрд╕рд▓рд┐рдП, рдЗрд╕рд╕реЗ рдПрдХ рд╕рд┐рджреНрдзрд╛рдВрдд рддрдХ рдЙрдиреНрдирдпрди рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓реЗрдЧреА рд╕рдВрд╕рд╛рдзрди рдЙрдиреНрдирдпрди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред рдпрд╣ рдкрд╣рд▓реЗ рдХрдИ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рд╣реБрдЖ рдерд╛, рд▓реЗрдХрд┐рди рдЕрдм рдпрд╣ рдХрдо рд╣реЛ рдЧрдпрд╛ рд╣реИ (рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ)ред

рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ, рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рддрдХрдиреАрдХреЗрдВ **рджреВрд╕рд░реЗ рд╕рдореВрд╣** рдХреА рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЖрдкрдХреЛ **рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдиреБрдорддрд┐рдпреЛрдВ рд╡рд╛рд▓реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдмрд╛рд╣рд░ рдЕрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧреАред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рдЙрдиреНрдирдпрди** рдЖрдкрдХреЛ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ **рдЕрдиреНрдп рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ** рддрдХ (рд╢рд╛рдпрдж рдХрд┐рд╕реА рдЧреБрдкреНрдд рд╕реАрдорд╛ рдХреЛ рдкрдврд╝рдХрд░ рдЬреЛ рдПрдХ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХрд╛ рдЯреЛрдХрди рд╕рдорд╛рд╣рд┐рдд рдХрд░рддрд╛ рд╣реИ)ред

{% hint style="warning" %}
рдпрд╣ рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ **GCP рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдПрдХ рд╕рд┐рджреНрдзрд╛рдВрдд рдФрд░ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЛрдиреЛрдВ** рд╣реЛрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдПрдХ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдореЗрдВ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди рдХрд░рдиреЗ рд╕реЗ рдЖрдк рдЙрд╕рдХреА рдЕрдиреБрдХрд░рдг рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
{% endhint %}

{% hint style="info" %}
рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдмреАрдЪ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЙрд╕ рдЕрдиреБрдорддрд┐ рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИрдВ рдЬрд┐рд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рддрд╛рдХрд┐ `gcloud` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреЛрд╖ рдХрд╛ рд╢реЛрдзрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред рдпрджрд┐ рдЗрд╕реЗ API рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреЛрд╖ рдХрд╛ рд╢реЛрдзрди рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реЛ рддреЛ рд╡реЗ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреАрдВред
{% endhint %}

## рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди рд╡рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпрд╛рдБ

рдпрд╣ рдореИрдВ **рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рдЕрдиреБрдорддрд┐рдпреЛрдВ** рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдХрд░рддрд╛ рд╣реВрдВред

1. рдЧрд┐рдЯрд╣рдм рд░реЗрдкреЛ [https://github.com/carlospolop/gcp\_privesc\_scripts](https://github.com/carlospolop/gcp\_privesc\_scripts) рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ
2. рдирдП рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ tests/ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ

## рдкрд╣реБрдВрдЪ рд╕реНрдХреЛрдкреНрд╕ рдХреЛ рдЫрд▓рдХрд░рдирд╛ <a href="#bypassing-access-scopes" id="bypassing-access-scopes"></a>

GCP рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╕реЗрд╡рд╛ рд╕реЗ рд▓реАрдХ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ SA рдХреЗ рдЯреЛрдХрди рдореЗрдВ **рдкрд╣реБрдВрдЪ рд╕реНрдХреЛрдкреНрд╕** рд╣реЛрддреЗ рд╣реИрдВред рдпреЗ **рдЕрдиреБрдорддрд┐рдпреЛрдВ** рдкрд░ **рдкреНрд░рддрд┐рдмрдВрдз** рд╣реЛрддреЗ рд╣реИрдВ рдЬрд┐рдирдХреА рдЯреЛрдХрди рдореЗрдВ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЯреЛрдХрди рдореЗрдВ **`https://www.googleapis.com/auth/cloud-platform`** рд╕реНрдХреЛрдк рд╣реИ, рддреЛ рдЗрд╕рдХреЗ рдкрд╛рд╕ рд╕рднреА GCP рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ **рдкреВрд░реНрдг рдкрд╣реБрдВрдЪ** рд╣реЛрдЧрд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдЯреЛрдХрди рдореЗрдВ **`https://www.googleapis.com/auth/cloud-platform.read-only`** рд╕реНрдХреЛрдк рд╣реИ, рддреЛ рдЗрд╕рдХреЗ рдкрд╛рд╕ IAM рдореЗрдВ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рд╡рдЬреВрдж, рд╕рднреА GCP рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ **рдХреЗрд╡рд▓ рдкрдврд╝рдиреЗ рдХреА рдкрд╣реБрдВрдЪ** рд╣реЛрдЧреАред

рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдЫрд▓рдХрд░рдиреЗ рдХрд╛ рд╕реАрдзрд╛ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдк рд╣рдореЗрд╢рд╛ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рд╣реЛрд╕реНрдЯ рдореЗрдВ **рдирдП рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕** рдЦреЛрдЬрдиреЗ, **рд╕реЗрд╡рд╛ рдХреБрдВрдЬреА рдЦреЛрдЬрдиреЗ** рдХреЗ рд▓рд┐рдП рддрддреНрдХрд╛рд▓ рдЯреЛрдХрди рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдпрд╛ **рдХрдо рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд** рдПрдХ рд╡рд┐рднрд┐рдиреНрди рд╡реАрдПрдо рдкрд░ рдЬрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЬрдм [рдкрд╣реБрдВрдЪ рд╕реНрдХреЛрдкреНрд╕](https://cloud.google.com/compute/docs/access/service-accounts#accesscopesiam) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдЗрдВрд╕реНрдЯреЗрдВрд╕ (рд╡реАрдПрдо) рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рдУрдЖрде рдЯреЛрдХрди рдореЗрдВ рдПрдХ [**рд╕реНрдХреЛрдк**](https://oauth.net/2/scope/) **рд╕реАрдорд╛ рд╕рдорд╛рд╡реЗрд╢рд┐рдд рд╣реЛрддреА рд╣реИ**ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдк рдЗрд╕ рд╕реАрдорд╛ рдХреЛ **рдЫрд▓рдХрд░рдиреЗ** рдФрд░ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рдЦрд╛рддреЗ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рд╢реЛрдзрди рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕ рдкреНрд░рддрд┐рдмрдВрдз рдХреЛ **рдЫрд▓рдХрд░рдиреЗ** рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рдпрд╛ рддреЛ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рд╣реЛрд╕реНрдЯ рдореЗрдВ **рдирдП рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕** рдЦреЛрдЬрдирд╛ рд╣реИ, рддрддреНрдХрд╛рд▓ рдЯреЛрдХрди рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рд╕реЗрд╡рд╛ рдХреБрдВрдЬреА рдЦреЛрдЬрдирд╛** рдпрд╛ **рдХрдо рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд** рдПрдХ рд╡рд┐рднрд┐рдиреНрди рд╡реАрдПрдо рдХреЛ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рдХрд░рдирд╛ рд╣реИред

рдХреБрдВрдЬреА рдЬрдирд░реЗрдЯ рдХрд┐рдП рдЧрдП SA рдХреЗ
```bash
for i in $(gcloud iam service-accounts list --format="table[no-heading](email)"); do
echo "Looking for keys for $i:"
gcloud iam service-accounts keys list --iam-account $i
done
```
## рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди рддрдХрдиреАрдХреЗрдВ

AWS рдореЗрдВ рдЕрдкрдиреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдЖрдк рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рд╕реЗ рдЕрдиреНрдп рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛/рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛/рд╕рдореВрд╣реЛрдВ рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреЗрдВред рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХрд░рдиреЗ рддрдХ рдЪреЗрдирд┐рдВрдЧ рдЙрдиреНрдирдпрди рдХрд░реЗрдВ рдЬрдм рддрдХ рдЖрдк рд╕рдВрдЧрдарди рдкрд░ рдкреНрд░рд╢рд╛рд╕рдХ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ред

{% hint style="warning" %}
GCP рдореЗрдВ **рд╕реИрдХрдбрд╝реЛрдВ** (рдпрджрд┐ рди рд╣рдЬрд╛рд░реЛрдВ) **рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рд╣реИрдВ рдЬреЛ рдХрд┐рд╕реА рдПрдВрдЯрд┐рдЯреА рдХреЛ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред рдЗрд╕ рдкреБрд╕реНрддрдХ рдореЗрдВ рдЖрдкрдХреЛ **рд╕рднреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдорд┐рд▓ рд╕рдХрддреА рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк **рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдкрдХреЛ рдпрд╣рд╛рдБ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдХрд┐рд╕реА рдорд╛рд░реНрдЧ рдХрд╛ **рдЬреНрдЮрд╛рди рд╣реИ**, рддреЛ **рдХреГрдкрдпрд╛ рдЗрд╕реЗ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ**ред
{% endhint %}

**рдЗрд╕ рдЦрдВрдб рдХреЗ рдЙрдкрдкреГрд╖реНрда рд╕реЗрд╡рд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдХреНрд░рдордмрджреНрдз рд╣реИрдВред рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдкрд░ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХрд░рдиреЗ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЗ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред**

### GCP рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд╛рдиреАрдп рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХрд░рдирд╛

рдпрджрд┐ рдЖрдк GCP рдореЗрдВ рдПрдХ рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ рд╣реИрдВ рддреЛ рдЖрдк рд╕рдВрднрд╡рддрдГ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рднреА рдЙрдиреНрдирдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

{% content-ref url="gcp-local-privilege-escalation-ssh-pivoting.md" %}
[gcp-local-privilege-escalation-ssh-pivoting.md](gcp-local-privilege-escalation-ssh-pivoting.md)
{% endcontent-ref %}

## рд╕рдВрджрд░реНрдн

* [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)
* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/#gcp-privesc-scanner)
* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди **HackTricks** рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб** рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** рджреНрд╡рд╛рд░рд╛ **PRs** рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>
