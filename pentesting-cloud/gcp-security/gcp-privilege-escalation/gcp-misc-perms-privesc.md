# GCP - Escalonamento de Privil√©gios Diversos

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Permiss√µes Gen√©ricas Interessantes

### \*.setIamPolicy

Se voc√™ possui um usu√°rio com a permiss√£o **`setIamPolicy`** em um recurso, voc√™ pode **escalonar privil√©gios naquele recurso** porque ser√° capaz de alterar a pol√≠tica de IAM do recurso e conceder a si mesmo mais privil√©gios sobre ele.\
Esta permiss√£o tamb√©m pode permitir **escalonar para outros principais** se o recurso permitir executar c√≥digo e o iam.ServiceAccounts.actAs n√£o for necess√°rio.

* _cloudfunctions.functions.setIamPolicy_
* Modifique a pol√≠tica de uma Cloud Function para permitir que voc√™ a invoque.

Existem dezenas de tipos de recursos com esse tipo de permiss√£o, voc√™ pode encontrar todos eles em [https://cloud.google.com/iam/docs/permissions-reference](https://cloud.google.com/iam/docs/permissions-reference) procurando por setIamPolicy.

### \*.create, \*.update

Essas permiss√µes podem ser muito √∫teis para tentar escalar privil√©gios em recursos **criando um novo ou atualizando um existente**. Esse tipo de permiss√£o √© especialmente √∫til se voc√™ tamb√©m tem a permiss√£o **iam.serviceAccounts.actAs** sobre uma Conta de Servi√ßo e o recurso que voc√™ tem .create/.update pode anexar uma conta de servi√ßo.

### \*ServiceAccount\*

Esta permiss√£o geralmente permitir√° **acessar ou modificar uma Conta de Servi√ßo em algum recurso** (por exemplo: compute.instances.setServiceAccount). Isso **pode levar a um vetor de escalonamento de privil√©gios**, mas depender√° de cada caso.



<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
