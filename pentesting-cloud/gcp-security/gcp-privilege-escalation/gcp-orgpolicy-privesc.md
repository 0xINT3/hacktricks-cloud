# GCP - Orgpolicy Privesc

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no github.

</details>

## orgpolicy

### `orgpolicy.policy.set`

Este m√©todo **n√£o necessariamente concede mais permiss√µes do IAM**, mas pode **desativar algumas barreiras** que est√£o impedindo certas a√ß√µes. Por exemplo, h√° uma restri√ß√£o de Pol√≠tica de Organiza√ß√£o chamada _appengine.disableCodeDownload_ que impede que o c√≥digo-fonte do App Engine seja baixado pelos usu√°rios do projeto. Se isso estiver habilitado, voc√™ n√£o poder√° baixar esse c√≥digo-fonte, mas poder√° usar _orgpolicy.policy.set_ para desativar a restri√ß√£o e, em seguida, continuar com o download do c√≥digo-fonte.

![](https://rhinosecuritylabs.com/wp-content/uploads/2020/04/image5-1.png)

A captura de tela acima mostra que a restri√ß√£o _appengine.disableCodeDownload_ est√° sendo aplicada, o que significa que est√° nos impedindo de baixar o c√≥digo-fonte. Usando _orgpolicy.policy.set_, podemos desativar essa restri√ß√£o e, em seguida, continuar com o download do c√≥digo-fonte.

O script de explora√ß√£o para este m√©todo pode ser encontrado [aqui](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/orgpolicy.policy.set.py).

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou se deseja acessar a **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no github.

</details>