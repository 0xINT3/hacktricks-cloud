# GCP - AppEngine Yetki Yükseltme

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family)
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>

## App Engine

App Engine hakkında daha fazla bilgi için:

{% content-ref url="../gcp-services/gcp-app-engine-enum.md" %}
[gcp-app-engine-enum.md](../gcp-services/gcp-app-engine-enum.md)
{% endcontent-ref %}

### `appengine.applications.get`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.operations.list`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.create`, `appengine.versions.get`, `appengine.versions.list`, `cloudbuild.builds.get`,`iam.serviceAccounts.actAs`, `resourcemanager.projects.get`, `storage.objects.create`, `storage.objects.list`

Bunlar, **`gcloud` cli kullanarak bir Uygulama dağıtmak için gereken izinlerdir**. Belki **`get`** ve **`list`** olanlar **önlenilebilir**.

Python kod örneklerini [https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine](https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine) adresinde bulabilirsiniz.

Varsayılan olarak, Uygulama hizmetinin adı **`default`** olacak ve aynı ada sahip sadece 1 örnek olabilir.\
Bunu değiştirmek ve ikinci bir Uygulama oluşturmak için **`app.yaml`** içinde, kök anahtarının değerini **`service: my-second-app`** gibi bir şeye değiştirin.
```bash
cd python-docs-samples/appengine/flexible/hello_world
gcloud app deploy #Upload and start application inside the folder
```
En az 10-15 dakika bekleyin, eğer işe yaramazsa **birkaç kez yeniden dağıtın** ve birkaç dakika bekleyin.

{% hint style="info" %}
**Kullanılacak Hizmet Hesabını belirtmek mümkündür**, ancak varsayılan olarak App Engine varsayılan SA kullanılır.
{% endhint %}

Uygulamanın URL'si `https://<proj-adı>.oa.r.appspot.com/` veya `https://<service_adı>-dot-<proj-adı>.oa.r.appspot.com` gibi bir şeydir.

### `appengine.instances.enableDebug`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.get`, `appengine.versions.list`, `compute.projects.get`

Bu izinlerle, **esnek** (standart olmayan) türdeki App Engine örneklerine ssh üzerinden **giriş yapmak mümkündür**. **`list`** ve **`get`** izinlerinin bazıları **gerçekten gerekli olmayabilir**.
```bash
gcloud app instances ssh --service <app-name> --version <version-id> <ID>
```
### `appengine.applications.update`, `appengine.operations.get`

Bu, uygulamaları kurmak için Google'ın arka planda kullanacağı SA'nın değiştirilmesini sağlar, bu nedenle hizmet hesabını çalmak için bunu kötüye kullanamazsınız.

{% code overflow="wrap" %}
```bash
gcloud app update --service-account=<sa_email>
```
{% endcode %}

### `appengine.versions.getFileContents`, `appengine.versions.update`

Bu izinleri nasıl kullanacağınızdan veya bunların faydalı olup olmadığından emin değilim (kod değiştirildiğinde yeni bir sürüm oluşturulduğu için kodu veya bir IAM rolünü güncelleyebileceğinizi bilmiyorum, ancak sanırım bunu yapabilirsiniz, belki kovada kodu değiştirerek??).

### Kovalar üzerinde yazma erişimi

Kaynak kodunun bulunduğu kovalara yazma erişimi olsa bile, kaynak kodunu ve `manifest.json`'ı değiştirerek keyfi kodu yürütmek MÜMKÜN DEĞİLDİR.\
Belki yeni bir sürümün oluşturulduğu ve kaynak kodunun ve manifestin yüklendiği anı izliyorsanız, bunları değiştirerek yeni sürümün backdoored olanları kullanmasını sağlamak mümkün olabilir mi??

Ayrıca, konteyner katmanlarının kovada depolandığı görünüyor, belki onları değiştirmek?

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmaya kadar AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek paylaşın**.

</details>
