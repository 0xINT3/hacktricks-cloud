# GCP - AppEngine Privesc

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repos.

</details>

## App Engine

Vir meer inligting oor App Engine, kyk na:

{% content-ref url="../gcp-services/gcp-app-engine-enum.md" %}
[gcp-app-engine-enum.md](../gcp-services/gcp-app-engine-enum.md)
{% endcontent-ref %}

### `appengine.applications.get`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.operations.list`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.create`, `appengine.versions.get`, `appengine.versions.list`, `cloudbuild.builds.get`,`iam.serviceAccounts.actAs`, `resourcemanager.projects.get`, `storage.objects.create`, `storage.objects.list`

Dit is die nodige toestemmings om **'n App te implementeer met behulp van die `gcloud`-opdraglynkoppelvlak**. Miskien kan die **`get`** en **`list`** een vermy word.

Jy kan Python-kodevoorbeelde vind by [https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine](https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine)

Standaard sal die naam van die App-diens **`default`** wees, en daar kan slegs 1 instansie met dieselfde naam wees.\
Om dit te verander en 'n tweede App te skep, verander die waarde van die hoof sleutel na iets soos **`service: my-second-app`**.
```bash
cd python-docs-samples/appengine/flexible/hello_world
gcloud app deploy #Upload and start application inside the folder
```
Gee dit ten minste 10-15 minute, as dit nie werk nie, roep **implementeer nog 'n paar keer** en wag 'n paar minute.

{% hint style="info" %}
Dit is **moontlik om die Diensrekening aan te dui** maar die standaard App Engine SA word gebruik.
{% endhint %}

Die URL van die aansoek is iets soos `https://<proj-naam>.oa.r.appspot.com/` of `https://<diens_naam>-dot-<proj-naam>.oa.r.appspot.com`

### `appengine.instances.enableDebug`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.get`, `appengine.versions.list`, `compute.projects.get`

Met hierdie toestemmings is dit moontlik om **in te teken via ssh in App Engine-instanties** van die tipe **flexible** (nie standaard). Sommige van die **`list`** en **`get`** toestemmings **is moontlik nie regtig nodig nie**.
```bash
gcloud app instances ssh --service <app-name> --version <version-id> <ID>
```
### `appengine.applications.update`, `appengine.operations.get`

Ek dink dit verander net die agtergrond SA wat Google gebruik om die toepassings op te stel, so ek dink nie jy kan dit misbruik om die diensrekening te steel nie.

{% code overflow="wrap" %}
```bash
gcloud app update --service-account=<sa_email>
```
{% endcode %}

### `appengine.versions.getFileContents`, `appengine.versions.update`

Nie seker hoe om hierdie toestemmings te gebruik of as hulle nuttig is (let op dat wanneer jy die kode verander, 'n nuwe weergawe geskep word, so ek weet nie of jy net die kode of die IAM-rol van een kan opdateer nie, maar ek dink jy moet in staat wees om dit te doen, dalk deur die kode binne die emmer te verander??).

### Skryftoegang oor die emmers

Selfs met skryftoegang oor die emmers waar die bronkode gele√´ is, **was dit NIE moontlik om willekeurige kode uit te voer deur die bronkode en die `manifest.json` te wysig**.\
Miskien as jy die emmer monitor en die oomblik waar 'n nuwe weergawe geskep word en die bronkode en manifest opgelaai word, kan opspoor, is dit moontlik om hulle te verander sodat die nuwe weergawe die agterdeur-eksemplare gebruik??

Dit lyk ook asof houerlae in die emmer gestoor word, dalk deur dit te verander?

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks-uitrusting**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
