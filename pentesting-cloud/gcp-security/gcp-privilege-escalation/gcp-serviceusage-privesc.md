# GCP - Serviceusage Privesc

<details>

<summary><strong>AWSハッキングをゼロからヒーローまで学ぶには</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックする
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)を**フォローする**。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有する。

</details>

## serviceusage

以下の権限はAPIキーを作成し、盗むのに役立ちます。ドキュメントからのこの注記に注意してください：_APIキーは、**任意のプリンシパルなしにアプリケーションを識別する**単純な暗号化された文字列です。**公開データに匿名でアクセスする**ために役立ち、APIリクエストをクォータと**課金**のためにプロジェクトに**関連付ける**ために使用されます。_

したがって、APIキーを使用すると、APIの使用料金をその会社に支払わせることができますが、権限を昇格させることはできません。

他の権限とAPIキーを生成する方法を学ぶには、以下をチェックしてください：

{% content-ref url="gcp-apikeys-privesc.md" %}
[gcp-apikeys-privesc.md](gcp-apikeys-privesc.md)
{% endcontent-ref %}

### `serviceusage.apiKeys.create`

文書化されていないAPIが見つかりました。これを使用して**APIキーを作成**できます：

{% code overflow="wrap" %}
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### `serviceusage.apiKeys.list`

既に作成されたAPIキーをリストするための文書化されていないAPIが見つかりました（APIキーはレスポンスに表示されます）：

{% code overflow="wrap" %}
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

これらの権限を持つ攻撃者は、プロジェクトで新しいサービスを有効にして使用することができます。これにより、**攻撃者がWorkspaceの情報にアクセスしようとするためにadminやcloudidentityのようなサービスを有効にする**、または他のサービスを有効にして興味深いデータにアクセスする可能性があります。

## **参考文献**

* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>HackTricksをサポートし、特典を得る！</strong></summary>

**サイバーセキュリティ会社**で働いていますか？**HackTricksであなたの会社を宣伝**したいですか？または、**PEASSの最新バージョンにアクセスしたり、HackTricksをPDFでダウンロード**したいですか？[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！

[**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見してください。私たちの独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションです。

[**公式のPEASS & HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう。

**[**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)や[**テレグラムグループ**](https://t.me/peass)に**参加するか、**Twitter**で私を**フォロー**してください [**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**。**

**ハッキングのトリックを共有するために、**[**hacktricks githubリポジトリ**](https://github.com/carlospolop/hacktricks)にPRを提出してください。**

**。**

</details>
