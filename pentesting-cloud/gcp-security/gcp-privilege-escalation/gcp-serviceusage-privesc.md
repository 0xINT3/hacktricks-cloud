# GCP - Serviceusage Privesc

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo [**telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do GitHub** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## serviceusage

As seguintes permiss√µes s√£o √∫teis para criar e roubar chaves de API, note isto dos documentos: _Uma chave de API √© uma string criptografada simples que **identifica uma aplica√ß√£o sem qualquer principal**. Elas s√£o √∫teis para acessar **dados p√∫blicos anonimamente**, e s√£o usadas para **associar** solicita√ß√µes de API ao seu projeto para cota e **faturamento**._

Portanto, com uma chave de API voc√™ pode fazer com que a empresa pague pelo seu uso da API, mas voc√™ n√£o ser√° capaz de escalar privil√©gios.

Para aprender outras permiss√µes e maneiras de gerar chaves de API, confira:

{% content-ref url="gcp-apikeys-privesc.md" %}
[gcp-apikeys-privesc.md](gcp-apikeys-privesc.md)
{% endcontent-ref %}

### `serviceusage.apiKeys.create`

Uma API n√£o documentada foi encontrada que pode ser usada para **criar chaves de API:**

{% code overflow="wrap" %}
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### `serviceusage.apiKeys.list`

Outra API n√£o documentada foi encontrada para listar chaves de API que j√° foram criadas (as chaves de API aparecem na resposta):

{% code overflow="wrap" %}
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### **`serviceusage.services.enable`**, **`serviceusage.services.use`**

Com essas permiss√µes, um atacante pode habilitar e usar novos servi√ßos no projeto. Isso poderia permitir que um **atacante habilite servi√ßos como admin ou cloudidentity** para tentar acessar informa√ß√µes do Workspace, ou outros servi√ßos para acessar dados interessantes.

## **Refer√™ncias**

* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>Apoie o HackTricks e obtenha benef√≠cios!</strong></summary>

Voc√™ trabalha em uma **empresa de ciberseguran√ßa**? Quer ver sua **empresa anunciada no HackTricks**? ou deseja acessar a **vers√£o mais recente do PEASS ou baixar o HackTricks em PDF**? Confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!

Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos

Adquira o [**material oficial do PEASS & HackTricks**](https://peass.creator-spring.com)

**Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Compartilhe suas t√©cnicas de hacking enviando PRs para o** [**reposit√≥rio github do HackTricks**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>
