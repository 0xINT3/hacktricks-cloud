# GCP - Serviceusage 권한 상승

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* 회사를 **HackTricks에서 광고**하거나 **PDF로 HackTricks 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 상품**](https://peass.creator-spring.com)을 구매하세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)을 **팔로우**하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 트릭을 공유**하세요.

</details>

## serviceusage

다음 권한은 API 키를 생성하고 도용하는 데 유용합니다. 문서에서는 다음과 같이 설명됩니다: _API 키는 **주체 없이 응용 프로그램을 식별하는 간단한 암호화된 문자열**입니다. 이들은 **공개 데이터에 익명으로 액세스**하는 데 유용하며, 할당량 및 **청구**를 위해 API 요청을 **프로젝트와 연결**하는 데 사용됩니다._

따라서 API 키를 사용하면 회사가 API 사용에 대한 비용을 지불하지만 권한 상승은 할 수 없습니다.

다른 권한과 API 키 생성 방법을 알아보려면 다음을 확인하세요:

{% content-ref url="gcp-apikeys-privesc.md" %}
[gcp-apikeys-privesc.md](gcp-apikeys-privesc.md)
{% endcontent-ref %}

### `serviceusage.apiKeys.create`

**API 키를 생성하는 데 사용할 수 있는 문서화되지 않은 API**를 발견했습니다:

{% code overflow="wrap" %}
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
### `serviceusage.apiKeys.list`

이미 생성된 API 키를 나열하기 위해 다른 문서화되지 않은 API가 발견되었습니다 (응답에 API 키가 표시됩니다):

{% code overflow="wrap" %}
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### **`serviceusage.services.enable`**, **`serviceusage.services.use`**

이 권한을 가진 공격자는 프로젝트에서 새로운 서비스를 활성화하고 사용할 수 있습니다. 이를 통해 **공격자는 관리자(admin) 또는 cloudidentity와 같은 서비스를 활성화하여 Workspace 정보에 접근하거나, 다른 서비스를 통해 흥미로운 데이터에 접근할 수 있습니다.**

## **참고 자료**

* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>HackTricks를 지원하고 혜택을 받으세요!</strong></summary>

**사이버 보안 회사**에서 일하시나요? **회사를 HackTricks에서 광고**하고 싶으신가요? 아니면 **PEASS의 최신 버전에 액세스하거나 HackTricks를 PDF로 다운로드**하고 싶으신가요? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인해보세요!

[**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견해보세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.

[**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.

[**💬**](https://emojipedia.org/speech-balloon/) [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter**에서 **저를 팔로우**하세요. [**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**당신의 해킹 기술을 공유하고 PR을** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\* **에 제출하세요.**

**.**

</details>
