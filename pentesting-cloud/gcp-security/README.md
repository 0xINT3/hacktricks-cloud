# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–æ–Ω–∏–∫–Ω–µ–Ω–Ω—è GCP

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é —Ä–µ–∫–ª–∞–º–æ–≤–∞–Ω—É –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **—ñ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub**.

</details>

## –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**–ü–µ—Ä—à –Ω—ñ–∂ –ø–æ—á–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–æ–Ω–∏–∫–Ω–µ–Ω–Ω—è** —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ **GCP**, —î –∫—ñ–ª—å–∫–∞ **–æ—Å–Ω–æ–≤–Ω–∏—Ö —Ä–µ—á–µ–π, —è–∫—ñ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞—Ç–∏** –ø—Ä–æ –π–æ–≥–æ —Ä–æ–±–æ—Ç—É, —â–æ–± –¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∞–º –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–±–∏—Ç–∏, —è–∫ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ç–∞ —è–∫ —ó—Ö –µ–∫—Å–ø–ª—É–∞—Ç—É–≤–∞—Ç–∏.

–ö–æ–Ω—Ü–µ–ø—Ü—ñ—ó, —Ç–∞–∫—ñ —è–∫ —ñ—î—Ä–∞—Ä—Ö—ñ—è **–æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó**, **–¥–æ–∑–≤–æ–ª–∏** —Ç–∞ —ñ–Ω—à—ñ –æ—Å–Ω–æ–≤–Ω—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó –ø–æ—è—Å–Ω–µ–Ω—ñ –≤:

{% content-ref url="gcp-basic-information.md" %}
[gcp-basic-information.md](gcp-basic-information.md)
{% endcontent-ref %}

## –õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—ó –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è

* [https://gcpgoat.joshuajebaraj.com/](https://gcpgoat.joshuajebaraj.com/)
* [https://github.com/ine-labs/GCPGoat](https://github.com/ine-labs/GCPGoat)
* [https://github.com/lacioffi/GCP-pentest-lab/](https://github.com/lacioffi/GCP-pentest-lab/)
* [https://github.com/carlospolop/gcp\_privesc\_scripts](https://github.com/carlospolop/gcp\_privesc\_scripts)

## –ú–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–æ–Ω–∏–∫–Ω–µ–Ω–Ω—è GCP/Red Team

–î–ª—è –∞—É–¥–∏—Ç—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ GCP –¥—É–∂–µ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏: —è–∫—ñ **—Å–µ—Ä–≤—ñ—Å–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è**, —â–æ **–≤–∏–∫–ª–∞–¥–µ–Ω–æ**, —Ö—Ç–æ –º–∞—î **–¥–æ—Å—Ç—É–ø** –¥–æ —á–æ–≥–æ —ñ —è–∫ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ GCP –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ **–∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏**.

–ó —Ç–æ—á–∫–∏ –∑–æ—Ä—É Red Team, **–ø–µ—Ä—à–∏–º –∫—Ä–æ–∫–æ–º –¥–ª—è –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—ó —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ GCP** —î –∑–¥–æ–±—É—Ç—Ç—è **–¥–∞–Ω–∏—Ö –¥–ª—è –≤—Ö–æ–¥—É**. –û—Å—å –¥–µ—è–∫—ñ —ñ–¥–µ—ó, —è–∫ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏:

* **–í–∏—Ç–æ–∫–∏** –≤ github (–∞–±–æ –ø–æ–¥—ñ–±–Ω—ñ) - OSINT
* **–°–æ—Ü—ñ–∞–ª—å–Ω–∞** —ñ–Ω–∂–µ–Ω–µ—Ä—ñ—è (–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É [**–ë–µ–∑–ø–µ–∫–∞ Workspace**](../workspace-security/))
* **–ü–æ–≤—Ç–æ—Ä–Ω–µ** –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ (–≤–∏—Ç–æ–∫–∏ –ø–∞—Ä–æ–ª—ñ–≤)
* –í—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∞—Ö, —Ä–æ–∑–º—ñ—â–µ–Ω–∏—Ö –≤ GCP
* [**–ü—ñ–¥—Ä–æ–±–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ –±—ñ–∫ —Å–µ—Ä–≤–µ—Ä–∞**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) –∑ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ –∫—ñ–Ω—Ü–µ–≤–æ—ó —Ç–æ—á–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö
* **–ß–∏—Ç–∞–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤**
* `/home/USERNAME/.config/gcloud/*`
* `C:\Users\USERNAME\.config\gcloud\*`
* 3-—Ç—ñ **—Å—Ç–æ—Ä–æ–Ω–∏ –ø–æ—Ä—É—à–µ–Ω—ñ**
* **–í–Ω—É—Ç—Ä—ñ—à–Ω—ñ** —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∏

–ê–±–æ —à–ª—è—Ö–æ–º **–∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—ó –Ω–µ–≤–ø—ñ–∑–Ω–∞–Ω–æ—ó —Å–ª—É–∂–±–∏**, —è–∫–∞ –≤–∏–∫–ª–∞–¥–µ–Ω–∞:

{% content-ref url="gcp-unaunthenticated-enum-and-access/" %}
[gcp-unaunthenticated-enum-and-access](gcp-unaunthenticated-enum-and-access/)
{% endcontent-ref %}

–ê–±–æ —è–∫—â–æ –≤–∏ —Ä–æ–±–∏—Ç–µ **–æ–≥–ª—è–¥**, –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ **–∑–∞–ø–∏—Ç–∞—Ç–∏ –¥–∞–Ω—ñ –¥–ª—è –≤—Ö–æ–¥—É** –∑ —Ç–∞–∫–∏–º–∏ —Ä–æ–ª—è–º–∏:

{% content-ref url="gcp-permissions-for-a-pentest.md" %}
[gcp-permissions-for-a-pentest.md](gcp-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
–ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –≤–∞–º –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –¥–ª—è –≤—Ö–æ–¥—É, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞—Ç–∏, **–∫–æ–º—É –Ω–∞–ª–µ–∂–∞—Ç—å —Ü—ñ –¥–∞–Ω—ñ –¥–ª—è –≤—Ö–æ–¥—É**, —ñ **–¥–æ —á–æ–≥–æ –≤–æ–Ω–∏ –º–∞—é—Ç—å –¥–æ—Å—Ç—É–ø**, —Ç–æ–º—É –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥–µ—è–∫—É –±–∞–∑–æ–≤—É –ø–µ—Ä–µ–ª—ñ–∫:
{% endhint %}

## –ë–∞–∑–æ–≤–∞ –ø–µ—Ä–µ–ª—ñ–∫

### **SSRF**

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ç–µ, —è–∫ **–ø–µ—Ä–µ–ª—ñ—á–∏—Ç–∏ –º–µ—Ç–∞–¥–∞–Ω—ñ GCP**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É hacktricks:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

### –•—Ç–æ —è

–£ GCP –≤–∏ –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤, —â–æ–± –≤–≥–∞–¥–∞—Ç–∏, —Ö—Ç–æ –≤–∏:

{% code overflow="wrap" %}
```bash
#If you are inside a compromise machine
gcloud auth list
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=$(gcloud auth print-access-token)" https://www.googleapis.com/oauth2/v1/tokeninfo
gcloud auth print-identity-token #Get info from the token

#If you compromised a metadata token or somehow found an OAuth token
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=<token>" https://www.googleapis.com/oauth2/v1/tokeninfo
```
### –ü–µ—Ä–µ–ª—ñ–∫ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ–π
```bash
# Get organizations
gcloud organizations list #The DIRECTORY_CUSTOMER_ID is the Workspace ID
gcloud resource-manager folders list --organization <org_number> # Get folders
gcloud projects list # Get projects
```
### –ü—Ä–∏–Ω—Ü–∏–ø–∏ —Ç–∞ –ø–µ—Ä–µ–ª—ñ–∫ IAM

–Ø–∫—â–æ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–æ–∑–≤–æ–ª—ñ–≤, **–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ –∫–æ–∂–Ω–æ—ó —Å—É—Ç–Ω–æ—Å—Ç—ñ –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ GCP** –¥–æ–ø–æ–º–æ–∂–µ –≤–∞–º –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ –≤–∏ —Ç–∞ —ñ–Ω—à—ñ —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—ñ –º–æ–∂–µ—Ç–µ —Ä–æ–±–∏—Ç–∏ —Ç–∞ —è–∫ **–ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–∏–≤—ñ–ª–µ—ó**.

–Ø–∫—â–æ —É –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–æ–∑–≤–æ–ª—ñ–≤ –¥–ª—è –ø–µ—Ä–µ–ª—ñ–∫—É IAM, –≤–∏ –º–æ–∂–µ—Ç–µ —ó—Ö **–≤–∏–∫—Ä–∞—Å—Ç–∏ –∞–±–æ –ø–µ—Ä–µ–±—Ä–∞—Ç–∏**, —â–æ–± —ó—Ö –≤–∏–∑–Ω–∞—á–∏—Ç–∏.\
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, **—è–∫ –≤–∏–∫–æ–Ω–∞—Ç–∏ –ø–µ—Ä–µ–ª—ñ–∫ —Ç–∞ –ø–µ—Ä–µ–±–æ—Ä** –≤:

{% content-ref url="gcp-services/gcp-iam-and-org-policies-enum.md" %}
[gcp-iam-and-org-policies-enum.md](gcp-services/gcp-iam-and-org-policies-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ —É –≤–∞—Å **—î –¥–µ—è–∫–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤–∞—à—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ** (—ñ —è–∫—â–æ –≤–∏ - —á–µ—Ä–≤–æ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞, —Å–ø–æ–¥—ñ–≤–∞—î–º–æ—Å—è, –≤–∞—Å **–Ω–µ –≤–∏—è–≤–∏–ª–∏**), –Ω–∞—Å—Ç–∞–≤ —á–∞—Å –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —è–∫—ñ —Å–ª—É–∂–±–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.\
–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–µ—è–∫—ñ —Å–ø–æ—Å–æ–±–∏ **–ø–µ—Ä–µ–ª—ñ–∫—É –¥–µ—è–∫–∏—Ö –∑–∞–≥–∞–ª—å–Ω–∏—Ö —Å–ª—É–∂–±.**
{% endhint %}

## –ü–µ—Ä–µ–ª—ñ–∫ —Å–ª—É–∂–±

–£ GCP —î –≤—Ä–∞–∂–∞—é—á–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—É–∂–±, –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ **–æ—Å–Ω–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, —à–ø–∞—Ä–≥–∞–ª–∫–∏ –∑ –ø–µ—Ä–µ–ª—ñ–∫—É**, —è–∫ —É–Ω–∏–∫–Ω—É—Ç–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—è, –æ—Ç—Ä–∏–º–∞—Ç–∏ **–ø–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å** —Ç–∞ —ñ–Ω—à—ñ **–ø—ñ—Å–ª—è–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ–π–Ω—ñ** —Ç—Ä—é–∫–∏ —â–æ–¥–æ –¥–µ—è–∫–∏—Ö –∑ –Ω–∏—Ö:

{% content-ref url="gcp-services/" %}
[gcp-services](gcp-services/)
{% endcontent-ref %}

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –≤–∞–º **–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –≤—Å—é —Ä–æ–±–æ—Ç—É** **–≤—Ä—É—á–Ω—É**, –Ω–∏–∂—á–µ –≤ —Ü—å–æ–º—É –¥–æ–ø–∏—Å—ñ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ **—Ä–æ–∑–¥—ñ–ª –ø—Ä–æ** [**–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏**](./#automatic-tools).

–ë—ñ–ª—å—à–µ —Ç–æ–≥–æ, –Ω–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –≤–∏ –º–æ–∂–ª–∏ –≤–∏—è–≤–∏—Ç–∏, —â–æ **–±—ñ–ª—å—à–µ —Å–ª—É–∂–± –≤—ñ–¥–∫—Ä–∏—Ç–æ –¥–ª—è –Ω–µ–∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤,** –≤–∏ –º–æ–∂–µ—Ç–µ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏:

{% content-ref url="gcp-unaunthenticated-enum-and-access/" %}
[gcp-unaunthenticated-enum-and-access](gcp-unaunthenticated-enum-and-access/)
{% endcontent-ref %}

## –ü—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤, –ü—ñ—Å–ª—è–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—è —Ç–∞ –ü–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å

–ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–±, —è–∫ —Ç—ñ–ª—å–∫–∏ –≤–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –¥–µ—è–∫—ñ —Ö–º–∞—Ä–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ –∞–±–æ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞–ª–∏ –¥–µ—è–∫—É —Å–ª—É–∂–±—É, —â–æ –ø—Ä–∞—Ü—é—î –≤ —Ö–º–∞—Ä—ñ, —Ü–µ **–∑–ª–æ–≤–∂–∏–≤–∞—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–º–∏ –ø—Ä–∏–≤—ñ–ª–µ—è–º–∏**, —è–∫—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —É —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–æ–≤–∞–Ω–æ–º—É –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –ø–µ—Ä—à –∑–∞ –≤—Å–µ –≤–∞–º —Å–ª—ñ–¥ –ø–µ—Ä–µ–ª—ñ—á–∏—Ç–∏ —Å–≤–æ—ó –ø—Ä–∏–≤—ñ–ª–µ—ó.

–ë—ñ–ª—å—à–µ —Ç–æ–≥–æ, –ø—ñ–¥ —á–∞—Å —Ü—å–æ–≥–æ –ø–µ—Ä–µ–ª—ñ–∫—É –ø–∞–º'—è—Ç–∞–π—Ç–µ, —â–æ **–¥–æ–∑–≤–æ–ª–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –Ω–∞ –Ω–∞–π–≤–∏—â–æ–º—É —Ä—ñ–≤–Ω—ñ "–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è"** —Ç–∞–∫–æ–∂.

{% content-ref url="gcp-privilege-escalation/" %}
[gcp-privilege-escalation](gcp-privilege-escalation/)
{% endcontent-ref %}

{% content-ref url="gcp-post-exploitation/" %}
[gcp-post-exploitation](gcp-post-exploitation/)
{% endcontent-ref %}

{% content-ref url="gcp-persistence/" %}
[gcp-persistence](gcp-persistence/)
{% endcontent-ref %}

### –ü—É–±–ª—ñ—á–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç—ñ —Å–ª—É–∂–±–∏

–ü—ñ–¥ —á–∞—Å –ø–µ—Ä–µ–ª—ñ–∫—É —Å–ª—É–∂–± GCP –≤–∏ –º–æ–∂–ª–∏ –∑–Ω–∞–π—Ç–∏ –¥–µ—è–∫—ñ –∑ –Ω–∏—Ö, —è–∫—ñ **–≤–∏–∫–ª–∞–¥–µ–Ω—ñ –≤ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç** (–ø–æ—Ä—Ç–∏ –í–ú/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤, –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∞–±–æ —Å–ª—É–∂–±–∏ —á–µ—Ä–≥, –∑–Ω—ñ–º–∫–∏ –∞–±–æ –∫–æ—à–∏–∫–∏...).\
–Ø–∫ –ø–µ–Ω—Ç–µ—Å—Ç–µ—Ä/—á–µ—Ä–≤–æ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞, –≤–∞–º –∑–∞–≤–∂–¥–∏ —Å–ª—ñ–¥ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏, —á–∏ –º–æ–∂–µ—Ç–µ –≤–∏ –∑–Ω–∞–π—Ç–∏ **—á—É—Ç–ª–∏–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é / –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ** –Ω–∞ –Ω–∏—Ö, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –Ω–∞–¥–∞—Ç–∏ –≤–∞–º **–¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É AWS**.

–£ —Ü—ñ–π –∫–Ω–∏–∑—ñ –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –∑–Ω–∞–π—Ç–∏ **—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é** –ø—Ä–æ —Ç–µ, —è–∫ –∑–Ω–∞–π—Ç–∏ **–≤—ñ–¥–∫—Ä–∏—Ç—ñ —Å–ª—É–∂–±–∏ GCP —Ç–∞ —è–∫ —ó—Ö –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏**. –©–æ–¥–æ —Ç–æ–≥–æ, —è–∫ –∑–Ω–∞–π—Ç–∏ **–≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ –≤ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –º–µ—Ä–µ–∂–µ–≤–∏—Ö —Å–ª—É–∂–±–∞—Ö**, —è –± —Ä–µ–∫–æ–º–µ–Ω–¥—É–≤–∞–≤ –≤–∞–º **—à—É–∫–∞—Ç–∏** –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É **—Å–ª—É–∂–±—É** –≤:

{% embed url="https://book.hacktricks.xyz/" %}

## GCP <--> Workspace –ü–µ—Ä–µ—Ö—ñ–¥

**–ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—è** –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª—ñ–≤ –≤ **–æ–¥–Ω—ñ–π** –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ –º–æ–∂–µ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—É **–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞—Ç–∏ —ñ–Ω—à—É**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ü–µ –≤:

{% content-ref url="gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

* –£ –∫–æ–Ω—Å–æ–ª—ñ **GCloud**, –Ω–∞ [https://console.cloud.google.com/iam-admin/asset-inventory/dashboard](https://console.cloud.google.com/iam-admin/asset-inventory/dashboard) –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏ —Ç–∞ IAM, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –ø—Ä–æ–µ–∫—Ç–æ–º.
* –¢—É—Ç –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –∞–∫—Ç–∏–≤–∏, —è–∫—ñ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è —Ü–∏–º API: [https://cloud.google.com/asset-inventory/docs/supported-asset-types](https://cloud.google.com/asset-inventory/docs/supported-asset-types)
* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ **—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏**, —è–∫—ñ –º–æ–∂–Ω–∞ [**–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ –¥–µ–∫—ñ–ª—å–∫–æ—Ö —Ö–º–∞—Ä–∞—Ö —Ç—É—Ç**](../pentesting-cloud-methodology.md).
* [**gcp\_scanner**](https://github.com/google/gcp\_scanner): –¶–µ —Å–∫–∞–Ω–µ—Ä —Ä–µ—Å—É—Ä—Å—ñ–≤ GCP, —è–∫–∏–π –º–æ–∂–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —è–∫–∏–π **—Ä—ñ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø—É –º–∞—é—Ç—å –ø–µ–≤–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ** –Ω–∞ GCP.
```bash
# Install
git clone https://github.com/google/gcp_scanner.git
cd gcp_scanner
virtualenv -p python3 venv
source venv/bin/activate
pip install -r requirements.txt
# Execute with gcloud creds
python3 __main__.py -o /tmp/output/ -g "$HOME/.config/gcloud"
```
* [**gcp\_enum**](https://gitlab.com/gitlab-com/gl-security/threatmanagement/redteam/redteam-public/gcp\_enum): –°—Ü–µ–Ω–∞—Ä—ñ–π Bash –¥–ª—è –ø–µ—Ä–µ–ª—ñ–∫—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ GCP –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é gcloud cli —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —É —Ñ–∞–π–ª—ñ.
* [**GCP-IAM-Privilege-Escalation**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation): –°—Ü–µ–Ω–∞—Ä—ñ—ó –¥–ª—è –ø–µ—Ä–µ–ª—ñ–∫—É –≤–∏—Å–æ–∫–∏—Ö –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ IAM —Ç–∞ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ –≤ GCP, –∑–ª–æ–≤–∂–∏–≤–∞—é—á–∏ –Ω–∏–º–∏ (—è –Ω–µ –∑–º—ñ–≥ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å—Ü–µ–Ω–∞—Ä—ñ–π –ø–µ—Ä–µ–ª—ñ–∫—É).

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è gcloud —Ç–∞ –≤—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è
```bash
# Login so gcloud can use your credentials
gcloud auth login
gcloud config set project security-devbox
gcloud auth print-access-token

# Login so SDKs can use your user credentials
gcloud auth application-default login
gcloud auth application-default set-quota-project security-devbox
gcloud auth application-default print-access-token

# Update gcloud
gcloud components update
```
### –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –º–µ—Ä–µ–∂—ñ gcloud, gsutil...

–ü–∞–º'—è—Ç–∞–π—Ç–µ, —â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–ø–∞—Ä–∞–º–µ—Ç—Ä** **`--log-http`** –∑ **–∫–æ–º–∞–Ω–¥–Ω–∏–º —Ä—è–¥–∫–æ–º gcloud**, —â–æ–± **–≤–∏–≤–µ—Å—Ç–∏** **–∑–∞–ø–∏—Ç–∏**, —è–∫—ñ –≤–∏–∫–æ–Ω—É—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –Ø–∫—â–æ –≤–∏ –Ω–µ —Ö–æ—á–µ—Ç–µ, —â–æ–± –∂—É—Ä–Ω–∞–ª–∏ –º–∞—Å–∫—É–≤–∞–ª–∏ –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `gcloud config set log_http_redact_token false`

–ö—Ä—ñ–º —Ç–æ–≥–æ, –¥–ª—è –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó:
```bash
gcloud config set proxy/address 127.0.0.1
gcloud config set proxy/port 8080
gcloud config set proxy/type http
gcloud config set auth/disable_ssl_validation True

# If you don't want to completely disable ssl_validation use:
gcloud config set core/custom_ca_certs_file cert.pem

# Back to normal
gcloud config unset proxy/address
gcloud config unset proxy/port
gcloud config unset proxy/type
gcloud config unset auth/disable_ssl_validation
gcloud config unset core/custom_ca_certs_file
```
### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—É OAuth –≤ gcloud

–î–ª—è —Ç–æ–≥–æ —â–æ–± **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–∏—Ç—ñ–∫–∞–Ω–∏–π —Ç–æ–∫–µ–Ω OAuth –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É —Å–ª—É–∂–±–∏ –∑ –∫—ñ–Ω—Ü–µ–≤–æ—ó —Ç–æ—á–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö**, –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ–Ω–∞—Ç–∏:
```bash
# Via env vars
export CLOUDSDK_AUTH_ACCESS_TOKEN=<token>
gcloud projects list

# Via setup
echo "<token>" > /some/path/to/token
gcloud config set auth/access_token_file /some/path/to/token
gcloud projects list
gcloud config unset auth/access_token_file
```
## –ü–æ—Å–∏–ª–∞–Ω–Ω—è

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é —Ä–µ–∫–ª–∞–º–æ–≤–∞–Ω—É –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤.

</details>
