# GCP рд╕реЗ Workspace рдкрд░ рдкрд┐рд╡рдЯрд┐рдВрдЧ

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ **Twitter** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХреЛ** **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВред**
* **HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

рдпрд╣ рдкреЛрд╕реНрдЯ [https://www.hunters.security/en/blog/delefriend-a-newly-discovered-design-flaw-in-domain-wide-delegation-could-leave-google-workspace-vulnerable-for-takeover](https://www.hunters.security/en/blog/delefriend-a-newly-discovered-design-flaw-in-domain-wide-delegation-could-leave-google-workspace-vulnerable-for-takeover) рдХреА рд╕рд╛рд░рд╛рдВрд╢ рд╣реИ рдЬрд┐рд╕реЗ рдЕрдзрд┐рдХ рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

## **рдбреЛрдореЗрди-рд╡рд╛рдЗрдб рдбрд┐рд▓реАрдЧреЗрд╢рди рдХреЛ рд╕рдордЭрдирд╛**

Google Workspace рдХрд╛ рдбреЛрдореЗрди-рд╡рд╛рдЗрдб рдбрд┐рд▓реАрдЧреЗрд╢рди рдПрдХ рдкрд╣рдЪрд╛рди рд╡рд╕реНрддреБ, рдпрд╛ рддреЛ Google Workspace Marketplace рд╕реЗ рдПрдХ **рдмрд╛рд╣рд░реА рдРрдк** рдпрд╛ рдЖрдВрддрд░рд┐рдХ **GCP рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛**, рдХреЛ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдирд╛рдо рдкрд░ Workspace рдкрд░ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ**ред рдЗрд╕ рд╕реБрд╡рд┐рдзрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ, рдЬреЛ Google API рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдРрдкреНрд╕ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЕрдиреБрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИ рдФрд░ рдорд╛рдирд╡реАрдп рддреНрд░реБрдЯрд┐ рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред OAuth 2.0 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдРрдк рдбреЗрд╡рд▓рдкрд░ рдФрд░ рдкреНрд░рд╢рд╛рд╕рдХ рдЗрди рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ рдмрд┐рдирд╛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рд╣рдорддрд┐ рдХреЗред\
\
Google Workspace рджреЛ рдкреНрд░рдореБрдЦ рдкреНрд░рдХрд╛рд░ рдХреА рд╡реИрд╢реНрд╡рд┐рдХ рдбрд┐рд▓реАрдЧреЗрдЯреЗрдб рд╡рд╕реНрддреБ рдкрд╣рдЪрд╛рди рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ:

* **GWS рдРрдкреНрд▓рд┐рдХреЗрд╢рди:** Workspace Marketplace рд╕реЗ рдРрдкреНрд▓рд┐рдХреЗрд╢рди рдбрд┐рд▓реАрдЧреЗрдЯреЗрдб рдкрд╣рдЪрд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдорд╛рд░реНрдХреЗрдЯрдкреНрд▓реЗрд╕ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рд░ Workspace рдРрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ Google рджреНрд╡рд╛рд░рд╛ рд╕рдореАрдХреНрд╖рд╛ рдХреА рдЬрд╛рддреА рд╣реИ рддрд╛рдХрд┐ рд╕рдВрднрд╛рд╡рд┐рдд рджреБрд░реБрдкрдпреЛрдЧ рдХреЛ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред рдпрд╣ рдмрд┐рд▓реНрдХреБрд▓ рдЗрд╕ рдЖрдкрддреНрддрд┐ рдХреЛ рд╕рдорд╛рдкреНрдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдРрд╕реЗ рдШрдЯрдирд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХрдард┐рдирд╛рдИ рдХреЛ рдмрдбрд╝рд╛рддрд╛ рд╣реИред
* **GCP рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛:** [**рдпрд╣рд╛рдВ**](gcp-basic-information.md#service-accounts) GCP рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВред

### **рдбреЛрдореЗрди-рд╡рд╛рдЗрдб рдбрд┐рд▓реАрдЧреЗрд╢рди: рдЕрдВрджрд░ рдХреА рдУрд░**

рдпрд╣рд╛рдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ GCP рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рдХреИрд╕реЗ Google API рдХрд╛ рдЙрдкрдпреЛрдЧ Google Workspace рдХреЗ рдЕрдиреНрдп рдкрд╣рдЪрд╛рдиреЛрдВ рдХреЗ рдирд╛рдо рдкрд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИ:

<figure><img src="../../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure>

1. &#x20;**рдкрд╣рдЪрд╛рди рдПрдХ JWT рдмрдирд╛рддреА рд╣реИ:** рдкрд╣рдЪрд╛рди рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреА рдирд┐рдЬреА рдХреБрдВрдЬреА (JSON рдХреБрдВрдЬреА рдЬреЛрдбрд╝реА рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ JWT рдХреЛ рд╕рд╛рдЗрди рдХрд░рддреА рд╣реИред рдЗрд╕ JWT рдореЗрдВ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ, рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рдХреНрд╖реНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдЕрдиреБрд░реЛрдзрд┐рдд REST API рдХреЗ рд▓рд┐рдП рдПрдХреНрд╕реЗрд╕ рдХреЗ OAuth рд╕реНрдХреЛрдк рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рджрд╛рд╡реЗ рд╣реЛрддреЗ рд╣реИрдВред
2. &#x20;**рдкрд╣рдЪрд╛рди рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдХреЗ рд▓рд┐рдП JWT рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИ:** рдРрдкреНрд▓рд┐рдХреЗрд╢рди/рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ JWT рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Google рдХреЗ OAuth 2.0 рд╕реЗрд╡рд╛ рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред рдЕрдиреБрд░реЛрдз рдореЗрдВ рд▓рдХреНрд╖реНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ Workspace рдИрдореЗрд▓) рдФрд░ рдЬрд┐рди рд╕реНрдХреЛрдкреНрд╕ рдХреЗ рд▓рд┐рдП рдПрдХреНрд╕реЗрд╕ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╡реЗ рднреА рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред
3. **Google рдХрд╛ OAuth 2.0 рд╕реЗрд╡рд╛ рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рд╡рд╛рдкрд╕ рдХрд░рддрд╛ рд╣реИ:** рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреА рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдХреЛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдирд┐рд░реНрджрд┐рд╖
### рд╕рдВрдЧрдардиреЛрдВ рдХреЗ рдмреАрдЪ рдЕрдзрд┐рдХрд╛рд░ рджреЗрдирд╛

OAuth SA ID рд╡реИрд╢реНрд╡рд┐рдХ рд╣реИ рдФрд░ рдЗрд╕реЗ **рд╕рдВрдЧрдардиреЛрдВ рдХреЗ рдмреАрдЪ рдЕрдзрд┐рдХрд╛рд░ рджреЗрдиреЗ** рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдХреЛрдИ рдкреНрд░рддрд┐рдмрдВрдз рд▓рд╛рдЧреВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬреЛ рд╕рдВрдЧрдардиреЛрдВ рдХреЗ рдмреАрдЪ рдЕрдзрд┐рдХрд╛рд░ рджреЗрдиреЗ рдХреЛ рд░реЛрдХреЗред рд╕рд╛рджрд╛ рд╢рдмреНрджреЛрдВ рдореЗрдВ рдХрд╣реЗрдВ рддреЛ, **рд╡рд┐рднрд┐рдиреНрди GCP рд╕рдВрдЧрдардиреЛрдВ рдХреЗ рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреНрдп Workspace рд╕рдВрдЧрдардиреЛрдВ рдкрд░ рдбреЛрдореЗрди-рд╡рд╛рдЗрдб рдЕрдзрд┐рдХрд╛рд░ рджреЗрдиреЗ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред рдЗрд╕рд╕реЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, **рдХреЗрд╡рд▓ Workspace рдХреЗ рд▓рд┐рдП рд╕реБрдкрд░ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА**, рдФрд░ рдЙрд╕реА GCP рдЦрд╛рддреЗ рдХреА рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрдЧреА, рдХреНрдпреЛрдВрдХрд┐ рдЖрдкрджрд╛ рдХреЛ рдЕрдкрдиреЗ рдирд┐рдЬреА рдирд┐рдпрдВрддреНрд░рдг рд╡рд╛рд▓реЗ GCP рдЦрд╛рддреЗ рдкрд░ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдФрд░ рдирд┐рдЬреА рдХреБрдВрдЬреАрдпреЛрдВ рдХреЛ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

## рдореМрдЬреВрджрд╛ рдЕрдзрд┐рдХрд╛рд░ рдХреЛ рдЦрддрд░реЗ рдореЗрдВ рдбрд╛рд▓реЗрдВ - DeleFriend

рдпрджрд┐ рд╣рдореЗрдВ рдЙрдкрдпреБрдХреНрдд GCP рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪ рд╣реИ рдЬрд┐рд╕рдореЗрдВ **рдореМрдЬреВрджрд╛ рдбреЛрдореЗрди-рд╡рд╛рдЗрдб рдЕрдзрд┐рдХрд╛рд░** рд╣реИ IAM рдиреАрддрд┐ рдХреЗ рдЕрдВрджрд░, рддреЛ рд╣рдореЗрдВ рдирдП рдХреБрдВрдЬреА рдмрдирд╛рдиреЗ, рдореМрдЬреВрджрд╛ JWT рд╕рдВрднрд╛рд╡рдирд╛рдУрдВ рдХреЛ рд╕рдВрдЦреНрдпрд╛рдВрдХрди рдХрд░рдиреЗ рдФрд░ рдЙрд╕ рдореМрдЬреВрджрд╛ рдЕрдзрд┐рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЛрдореЗрди рдореЗрдВ рдЕрдиреНрдп рдкрд╣рдЪрд╛рдиреЛрдВ рдХреЗ рдирд╛рдо рдкрд░ Google Workspace рдХреЛ API рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд░реЛрдХ рдирд╣реАрдВ рд╣реЛрддреАред

{% hint style="danger" %}
рдХрд┐рд╕реА рднреА рддрд░реАрдХреЗ рд╕реЗ GCP рд╕рдВрдЧрдарди/рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдХрдВрдкреНрд░рдорд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╡рд╣ GCP рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдХреЗ рд╕рд╛рде **json рдХреБрдВрдЬреА** рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрдиреНрд╣реЗрдВ рдмрдирд╛рдПрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдХреНрдпрд╛ **SA рдХреЗ рдкрд╛рд╕ рдХрд┐рд╕реА Workspace OAuth scopes рдХреЗ рдирд╛рдо рдкрд░ рдЕрдиреНрдп рдкрд╣рдЪрд╛рдиреЛрдВ рдХреЗ рдирд╛рдо рдкрд░ рдкрд╣реБрдВрдЪ рд╣реИ**ред
{% endhint %}

рдпреЗ рд╣реИрдВ рдпрдерд╛рд░реНрде рдХрджрдо:

1. **Resource Manager API рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ GCP рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреА рдЧрдгрдирд╛** рдХрд░реЗрдВред
2. рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕рдВрд╕рд╛рдзрди рдкрд░ рдЪрд░рдгрдмрджреНрдз рд╣реЛрдВ рдФрд░ **GetIAMPolicy** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╣реБрдВрдЪ рдХреЗ рд╕рд╛рде рдЙрдкрдпреБрдХреНрдд GCP рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдВред
3. рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рднреВрдорд┐рдХрд╛ рдкрд░ рдЪрд░рдгрдмрджреНрдз рд╣реЛрдВ рдФрд░ рдЙрджреНрдШрд╛рдЯрдирдХрд░реНрддрд╛, рдореВрд▓рднреВрдд рдФрд░ рдЕрдиреБрдХреВрд▓ рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рдЦреЛрдЬреЗрдВ рдЬрд┐рдирдореЗрдВ рд▓рдХреНрд╖рд┐рдд рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рд╕рдВрд╕рд╛рдзрди рдкрд░ **serviceAccountKeys.create** рдЕрдиреБрдорддрд┐ рд╣реЛред рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рд╕рдВрдкрд╛рджрдХ рднреВрдорд┐рдХрд╛ рдореЗрдВ рдЗрд╕ рдЕрдиреБрдорддрд┐ рдХрд╛ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рд╣реЛрдирд╛ рд╣реЛрддрд╛ рд╣реИред
4. рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рд╕рдВрд╕рд╛рдзрди рдХреЗ рд▓рд┐рдП рдПрдХ **рдирдИ **_**KEY\_ALG\_RSA\_2048**_** рдирд┐рдЬреА рдХреБрдВрдЬреА** рдмрдирд╛рдПрдВ рдЬрд┐рд╕реЗ IAM рдиреАрддрд┐ рдореЗрдВ рдЙрдкрдпреБрдХреНрдд рдЕрдиреБрдорддрд┐ рдХреЗ рд╕рд╛рде рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
5. рдкреНрд░рддреНрдпреЗрдХ рдирдП рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдкрд░ рдЪрд░рдгрдмрджреНрдз рд╣реЛрдВ рдФрд░ рдЙрд╕рдХреЗ рд▓рд┐рдП рдПрдХ **JWT** рд╡рд╕реНрддреНрд░ рдмрдирд╛рдПрдВ рдЬрд┐рд╕рдореЗрдВ SA рдирд┐рдЬреА рдХреБрдВрдЬреА рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдФрд░ рдПрдХ OAuth scope рд╣реЛрддрд╛ рд╣реИред рдПрдХ рдирдП _JWT_ рд╡рд╕реНрддреНрд░ рдмрдирд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ **oauth\_scopes.txt** рд╕реВрдЪреА рд╕реЗ рдореМрдЬреВрджрд╛ OAuth scopes рдХреЗ рд╕рднреА рд╕рдВрдпреЛрдЬрдиреЛрдВ рдкрд░ рдЪрд░рдгрдмрджреНрдз рд╣реЛрдЧреА, рддрд╛рдХрд┐ рд╕рднреА рдЕрдзрд┐рдХрд╛рд░ рджреЗрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛рдПрдВ рдкрддрд╛ рдЪрд▓ рд╕рдХреЗрдВред рд╕реВрдЪреА **oauth\_scopes.txt** рдореЗрдВ рд╣рдордиреЗ Workspace рдкрд╣рдЪрд╛рдиреЛрдВ рдХреЛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╕рднреА OAuth scopes рдХреЛ рдЕрджреНрдпрддрд┐рдд рдХрд┐рдпрд╛ рд╣реИред
6. _\_make\_authorization\_grant\_assertion_ рд╡рд┐рдзрд┐ рдореЗрдВ рдПрдХ **рд▓рдХреНрд╖рд┐рдд Workspace рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреА рдШреЛрд╖рдгрд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕реЗ _subject_ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП JWTs рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛрддрд╛ рд╣реИред рдпрд╣ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ **DWD рд╣рд░ рдбреЛрдореЗрди рдХреА рд╣рд░ рдкрд╣рдЪрд╛рди рдкрд░ рдкреНрд░рднрд╛рд╡ рдбрд╛рд▓рддрд╛ рд╣реИ**ред рдЗрд╕рд▓рд┐рдП, рдХрд┐рд╕реА рднреА рдбреЛрдореЗрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд╛рдиреНрдп JWT рдкрд░ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд╛рдиреНрдп Workspace рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред\
рдЗрд╕ рдЙрдкрдХрд░рдг рдХреЗ DeleFriend рдХреЗ _config.yaml_ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рдХреНрд╖рд┐рдд Workspace рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрджрд┐ рд▓рдХреНрд╖рд┐рдд Workspace рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд╣рд▓реЗ рд╕реЗ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдпрд╣ рдЙрдкрдХрд░рдг GCP рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рднреВрдорд┐рдХрд╛ рд╡рд╛рд▓реЗ рдбреЛрдореЗрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕реНрдХреИрдирд┐рдВрдЧ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдорд╛рдиреНрдп Workspace рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдкрд╣рдЪрд╛рди рдХреА рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ (рдлрд┐рд░ рд╕реЗ рдзреНрдпрд╛рди рджреЗрдВ) рдХрд┐ JWTs рдбреЛрдореЗрди-рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рд╣рд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ; рдЗрд╕рд▓рд┐рдП, рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдПрдХрдорд╛рддреНрд░ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдкрд╣рдЪрд╛рди рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рд╣реЛрддреА рд╣реИред
7.
