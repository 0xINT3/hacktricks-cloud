# GCP - Cloud Build Ongeverifieerde Enum

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>

## Cloud Build

Vir meer inligting oor Cloud Build, kyk:

{% content-ref url="../gcp-services/gcp-cloud-build-enum.md" %}
[gcp-cloud-build-enum.md](../gcp-services/gcp-cloud-build-enum.md)
{% endcontent-ref %}

### cloudbuild.yml

As jy skryftoegang oor 'n argief wat 'n l√™er met die naam **`cloudbuild.yml`** bevat, kompromitteer, kan jy hierdie l√™er **agterdeur** maak, wat die **opdragte spesifiseer wat binne 'n Cloud Build uitgevoer gaan word** en die geheime uitlek, kompromitteer wat gedoen word en ook die **Cloud Build-diensrekening** kompromitteer.

{% hint style="info" %}
Let daarop dat GCP die opsie het om administrateurs toe te laat om die uitvoering van boustelsels vanaf eksterne PR's te beheer via "Comment Control". Comment Control is 'n kenmerk waar medewerkers/projekteienaars **" /gcbrun" moet kommentaar lewer om die bou te aktiveer** teen die PR en deur hierdie kenmerk te gebruik, verhoed dit inherent dat enigiemand op die internet jou boustelsels aktiveer.
{% endhint %}

Vir enige verwante inligting kan jy die bladsy oor hoe om Github Actions aan te val (soortgelyk aan hierdie) nagaan:

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

### PR Goedkeurings

Wanneer die aansporing PR is omdat **enigiemand PR's na openbare argiewe kan doen** sou dit baie gevaarlik wees om net **die uitvoering van die aansporing met enige PR toe te laat**. Daarom sal die uitvoering standaard slegs **outomaties wees vir eienaars en medewerkers**, en om die aansporing met ander gebruikers se PR's uit te voer, moet 'n eienaar of medewerker kommentaar lewer `/gcbrun`.

<figure><img src="../../../.gitbook/assets/image (339).png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="danger" %}
Daarom, as dit op **`Nie vereis nie`** ingestel is, kan 'n aanvaller 'n **PR na die tak** uitvoer wat die uitvoering sal aktiveer deur die kwaadwillige kode-uitvoering by die **`cloudbuild.yml`**-l√™er te voeg en die cloudbuild-uitvoering te kompromitteer (let daarop dat cloudbuild die kode VAN die PR sal aflaai, dus dit sal die kwaadwillige **`cloudbuild.yml`** uitvoer).
{% endhint %}

Daarbenewens is dit maklik om te sien of 'n sekere cloudbuild-uitvoering uitgevoer moet word wanneer jy 'n PR stuur omdat dit in Github verskyn:

<figure><img src="../../../.gitbook/assets/image (340).png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Dus, selfs al word die cloudbuild nie uitgevoer nie, sal die aanvaller in staat wees om die **projeknaam van 'n GCP-projek** wat aan die maatskappy behoort, te sien.
{% endhint %}

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
