# GCP - Cloud Build Unauthenticated Enum

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Ειδικός Ερυθρού Συνεργείου HackTricks AWS)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας διαφημισμένη στο HackTricks** ή να **κατεβάσετε το HackTricks σε PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα τηλεγραφήματος**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στα [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Cloud Build

Για περισσότερες πληροφορίες σχετικά με το Cloud Build ελέγξτε:

{% content-ref url="../gcp-services/gcp-cloud-build-enum.md" %}
[gcp-cloud-build-enum.md](../gcp-services/gcp-cloud-build-enum.md)
{% endcontent-ref %}

### cloudbuild.yml

Αν καταφέρετε να έχετε πρόσβαση εγγραφής σε ένα αποθετήριο που περιέχει ένα αρχείο με το όνομα **`cloudbuild.yml`**, θα μπορούσατε να **εισάγετε πίσω πόρτα** σε αυτό το αρχείο, το οποίο καθορίζει τις **εντολές που θα εκτελεστούν** μέσα σε ένα Cloud Build και να εξαγάγετε τα μυστικά, να καταστρέψετε το τι γίνεται και επίσης να καταστρέψετε το **λογαριασμό υπηρεσίας Cloud Build.**

{% hint style="info" %}
Σημειώστε ότι η GCP έχει τη δυνατότητα να επιτρέπει στους διαχειριστές να ελέγχουν την εκτέλεση συστημάτων κατασκευής από εξωτερικά PR μέσω του "Έλεγχου Σχολίων". Ο Έλεγχος Σχολίων είναι μια λειτουργία όπου οι συνεργάτες/ιδιοκτήτες έργων **πρέπει να σχολιάσουν “/gcbrun” για να ενεργοποιήσουν την κατασκευή** ενάντια στο PR και χρησιμοποιώντας αυτήν τη λειτουργία αποτρέπει κατ’ ουσίαν οποιονδήποτε στο διαδίκτυο από το να ενεργοποιήσει τα συστήματα κατασκευής σας.
{% endhint %}

Για κάποιες σχετικές πληροφορίες μπορείτε να ελέγξετε τη σελίδα σχετικά με το πώς να επιτεθείτε στις ενέργειες του Github (παρόμοιο με αυτό):

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

### Έγκριση PR

Όταν το trigger είναι PR επειδή **οποιοσδήποτε μπορεί να κάνει PR σε δημόσια αποθετήρια** θα ήταν πολύ επικίνδυνο να **επιτρέψετε απλά την εκτέλεση του trigger με οποιοδήποτε PR**. Επομένως, από προεπιλογή, η εκτέλεση θα είναι μόνο **αυτόματη για τους ιδιοκτήτες και τους συνεργάτες**, και προκειμένου να εκτελέσετε το trigger με PR άλλων χρηστών ένας ιδιοκτήτης ή συνεργάτης πρέπει να σχολιάσει `/gcbrun`.

<figure><img src="../../../.gitbook/assets/image (150).png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="danger" %}
Συνεπώς, αν αυτό είναι ορισμένο σε **`Δεν απαιτείται`**, ένας επιτιθέμενος θα μπορούσε να κάνει ένα **PR στο κλαδί** που θα ενεργοποιήσει την εκτέλεση προσθέτοντας την κακόβουλη εκτέλεση κώδικα στο **`cloudbuild.yml`** αρχείο και να καταστρέψει την εκτέλεση cloudbuild (σημειώστε ότι το cloudbuild θα κατεβάσει τον κώδικα ΑΠΟ το PR, οπότε θα εκτελέσει το κακόβουλο **`cloudbuild.yml`**).
{% endhint %}

Επιπλέον, είναι εύκολο να δείτε αν πρέπει να εκτελεστεί μια εκτέλεση cloudbuild όταν στέλνετε ένα PR επειδή εμφανίζεται στο Github:

<figure><img src="../../../.gitbook/assets/image (151).png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Έτσι, ακόμη κι αν το cloudbuild δεν εκτελείται ο επιτιθέμενος θα μπορεί να δει το **όνομα έργου ενός έργου GCP** που ανήκει στην εταιρεία.
{% endhint %}

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Ειδικός Ερυθρού Συνεργείου HackTricks AWS)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας διαφημισμένη στο HackTricks** ή να **κατεβάσετε το HackTricks σε PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα τηλεγραφήματος**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στα [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
