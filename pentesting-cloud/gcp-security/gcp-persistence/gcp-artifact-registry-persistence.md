# GCP - Volharding van Artefakte-Registrasie

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSKRIPSIEPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks-uitrusting**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-opslagplekke.

</details>

## Artefakte-Registrasie

Vir meer inligting oor Artefakte-Registrasie, kyk na:

{% content-ref url="../gcp-services/gcp-artifact-registry-enum.md" %}
[gcp-artifact-registry-enum.md](../gcp-services/gcp-artifact-registry-enum.md)
{% endcontent-ref %}

### Afhanklikheidsverwarring

* Wat gebeur as 'n **afgele√´ en 'n standaard** argiewe **gemeng word in 'n virtuele** een en 'n pakkie in beide bestaan?
* Die een met die **hoogste prioriteit wat in die virtuele argief gestel is**, word gebruik.
* As die **prioriteit dieselfde is**:
* As die **weergawe** dieselfde is, word die **beleidsnaam alfabeties eerste in die virtuele argief** gebruik.
* As dit nie die geval is nie, word die **hoogste weergawe** gebruik.

{% hint style="danger" %}
Daarom is dit moontlik om 'n hoogste weergawe (afhanklikheidsverwarring) in 'n openbare pakkie-argief te **misbruik as die afgele√´ argief 'n ho√´r of dieselfde prioriteit het**.
{% endhint %}

Hierdie tegniek kan nuttig wees vir **volharding** en **ongeagte toegang**, omdat dit net vereis dat jy 'n biblioteeknaam ken wat in die Artefakte-Registrasie gestoor is en dieselfde biblioteek in die openbare argief (byvoorbeeld PyPi vir Python) met 'n ho√´r weergawe skep.

Vir volharding moet jy die volgende stappe volg:

* **Vereistes**: 'n **virtuele argief** moet **bestaan** en gebruik word, 'n **interne pakkie** met 'n **naam** wat nie in die **openbare argief** bestaan nie, moet gebruik word.
* Skep 'n afgele√´ argief as dit nie bestaan nie.
* Voeg die afgele√´ argief by die virtuele argief.
* Wysig die beleid van die virtuele argief om 'n ho√´r prioriteit (of dieselfde) aan die afgele√´ argief te gee.\
Voer iets soos die volgende uit:
* [gcloud artifacts repositories update --upstream-policy-file ...](https://cloud.google.com/sdk/gcloud/reference/artifacts/repositories/update#--upstream-policy-file)
* Laai die legitieme pakkie af, voeg jou skadelike kode by en registreer dit in die openbare argief met dieselfde weergawe. Elke keer as 'n ontwikkelaar dit installeer, sal hy joune installeer!

Vir meer inligting oor afhanklikheidsverwarring, kyk na:

{% embed url="https://book.hacktricks.xyz/pentesting-web/dependency-confusion" %}

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSKRIPSIEPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks-uitrusting**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-opslagplekke.

</details>
