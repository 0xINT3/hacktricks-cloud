# GCP - Διατήρηση Αποθετηρίου Τεχνολογικού Αντικειμένου

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΠΛΑΝΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github.

</details>

## Αποθετήριο Τεχνολογικού Αντικειμένου

Για περισσότερες πληροφορίες σχετικά με το Αποθετήριο Τεχνολογικού Αντικειμένου, ανατρέξτε στο:

{% content-ref url="../gcp-services/gcp-artifact-registry-enum.md" %}
[gcp-artifact-registry-enum.md](../gcp-services/gcp-artifact-registry-enum.md)
{% endcontent-ref %}

### Σύγχυση Εξαρτήσεων

* Τι συμβαίνει αν ένα **απομακρυσμένο και ένα τυπικό** αποθετήριο **αναμειγνύονται σε ένα εικονικό** και υπάρχει ένα πακέτο και στα δύο;
* Χρησιμοποιείται το πακέτο με τη **υψηλότερη προτεραιότητα που έχει οριστεί στο εικονικό αποθετήριο**
* Εάν η **προτεραιότητα είναι η ίδια**:
* Εάν η **έκδοση** είναι **ίδια**, χρησιμοποιείται το **όνομα της πολιτικής με το πρώτο αλφαβητικά** στο εικονικό αποθετήριο
* Διαφορετικά, χρησιμοποιείται η **υψηλότερη έκδοση**

{% hint style="danger" %}
Επομένως, είναι δυνατόν να **καταχραστείτε μια υψηλότερη έκδοση (σύγχυση εξάρτησης)** σε ένα δημόσιο αποθετήριο πακέτων εάν το απομακρυσμένο αποθετήριο έχει υψηλότερη ή ίδια προτεραιότητα
{% endhint %}

Αυτή η τεχνική μπορεί να είναι χρήσιμη για **διατήρηση** και **μη εξουσιοδοτημένη πρόσβαση**, καθώς για να την καταχραστείτε απαιτείται απλώς να **γνωρίζετε το όνομα μιας βιβλιοθήκης** που αποθηκεύεται στο Αποθετήριο Τεχνολογικού Αντικειμένου και να **δημιουργήσετε αυτήν την ίδια βιβλιοθήκη στο δημόσιο αποθετήριο (π.χ. PyPi για την Python)** με μια υψηλότερη έκδοση.

Για τη διατήρηση, πρέπει να ακολουθήσετε τα παρακάτω βήματα:

* **Απαιτήσεις**: Πρέπει να υπάρχει ένα **εικονικό αποθετήριο** και να χρησιμοποιείται, πρέπει να χρησιμοποιείται ένα **εσωτερικό πακέτο** με ένα **όνομα** που δεν υπάρχει στο **δημόσιο αποθετήριο**.
* Δημιουργήστε ένα απομακρυσμένο αποθετήριο εάν δεν υπάρχει
* Προσθέστε το απομακρυσμένο αποθετήριο στο εικονικό αποθετήριο
* Επεξεργαστείτε τις πολιτικές του εικονικού αποθετηρίου για να δώσετε υψηλότερη προτεραιότητα (ή ίδια) στο απομακρυσμένο αποθετήριο.\
Εκτελέστε κάτι παρόμοιο με:
* [gcloud artifacts repositories update --upstream-policy-file ...](https://cloud.google.com/sdk/gcloud/reference/artifacts/repositories/update#--upstream-policy-file)
* Κατεβάστε το νόμιμο πακέτο, προσθέστε το κακόβουλο κώδικά σας και καταχωρίστε το στο δημόσιο αποθετήριο με την ίδια έκδοση. Κάθε φορά που ένας προγραμματιστής το εγκαθιστά, θα εγκαθιστά το δικό σας!

Για περισσότερες πληροφορίες σχετικά με τη σύγχυση εξάρτησης, ανατρέξτε στο:

{% embed url="https://book.hacktricks.xyz/pentesting-web/dependency-confusion" %}

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΠΛΑΝΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/s
