# GCP - рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ **рдореБрдЭреЗ рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

## **рд╕рдВрд╕рд╛рдзрди рдкрджрд╛рдиреБрдХреНрд░рдо**

Google Cloud рдПрдХ [рд╕рдВрд╕рд╛рдзрди рдкрджрд╛рдиреБрдХреНрд░рдо](https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдХрд┐ рд╕рдВрдХрд▓реНрдкрдирд╛рддреНрдордХ рд░реВрдк рд╕реЗ рдПрдХ рдкрд╛рд░рдВрдкрд░рд┐рдХ рдлрд╛рдЗрд▓рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рдорд╛рди рд╣реИред рдпрд╣ рдиреАрддрд┐рдпреЛрдВ рдФрд░ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЕрдЯреИрдЪрдореЗрдВрдЯ рдкреЙрдЗрдВрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рддрд╛рд░реНрдХрд┐рдХ рдорд╛рддрд╛/рдкреБрддреНрд░ рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

рдЙрдЪреНрдЪ рд╕реНрддрд░ рдкрд░, рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ:
```
Organization
--> Folders
--> Projects
--> Resources
```
рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди (рдЬрд┐рд╕реЗ Compute Instance рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ) рдПрдХ рд╕рдВрд╕рд╛рдзрди рд╣реИред рдПрдХ рд╕рдВрд╕рд╛рдзрди рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рд░рд╣рддрд╛ рд╣реИ, рд╢рд╛рдпрдж рдЕрдиреНрдп Compute Instances, рд╕реНрдЯреЛрд░реЗрдЬ рдмрдХреЗрдЯреНрд╕, рдЖрджрд┐ рдХреЗ рд╕рд╛рдеред

<figure><img src="../../.gitbook/assets/image (5) (1).png" alt=""><figcaption></figcaption></figure>

## **рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдорд╛рдЗрдЧреНрд░реЗрд╢рди**

рдмрд┐рдирд╛ рдХрд┐рд╕реА рд╕рдВрдЧрдарди рдХреЗ **рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░рдирд╛ рд╕рдВрднрд╡** рд╣реИ рдПрдХ рд╕рдВрдЧрдарди рдореЗрдВ рдЬрд┐рд╕рдХреЗ рдкрд╛рд╕ `roles/resourcemanager.projectCreator` рдФрд░ `roles/resourcemanager.projectMover` рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдВред рдЕрдЧрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд┐рд╕реА рдЕрдиреНрдп рд╕рдВрдЧрдарди рдХреЗ рдЕрдВрджрд░ рд╣реИ, рддреЛ рдЙрд╕реЗ рдкрд╣рд▓реЗ рд╕рдВрдЧрдарди рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП GCP рд╕рдкреЛрд░реНрдЯ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП [**рдпрд╣**](https://medium.com/google-cloud/migrating-a-project-from-one-organization-to-another-gcp-4b37a86dd9e6) рджреЗрдЦреЗрдВред

## **рд╕рдВрдЧрдарди рдиреАрддрд┐рдпрд╛рдБ**

рдЖрдкрдХреЗ рд╕рдВрдЧрдарди рдХреЗ рдХреНрд▓рд╛рдЙрдб рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ рдХреЗрдВрджреНрд░реАрдХреГрдд рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВ:

* рдЖрдкрдХреЗ рд╕рдВрдЧрдарди рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЗрд╕ рдкрд░ **рдкреНрд░рддрд┐рдмрдВрдз рдХреЙрдиреНрдлрд╝рд┐рдЧрд░** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЗрдВрджреНрд░реАрдХреГрдд рдирд┐рдпрдВрддреНрд░рдгред
* рдЕрдкрдиреА рд╡рд┐рдХрд╛рд╕ рдЯреАрдореЛрдВ рдХреЗ рд▓рд┐рдП **рдЧрд╛рд░реНрдбрд░реЗрд▓реНрд╕** рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВ рдФрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рддрд╛рдХрд┐ рд╡реЗ рдЕрдиреБрдкрд╛рд▓рди рд╕реАрдорд╛рдУрдВ рдХреЗ рднреАрддрд░ рд░рд╣реЗрдВред
* рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдорд╛рд▓рд┐рдХреЛрдВ рдФрд░ рдЙрдирдХреА рдЯреАрдореЛрдВ рдХреЛ рдмрд┐рдирд╛ рдЕрдиреБрдкрд╛рд▓рди рддреЛрдбрд╝рдиреЗ рдХреА рдЪрд┐рдВрддрд╛ рдХреЗ рддреЗрдЬреА рд╕реЗ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВред

рдпреЗ рдиреАрддрд┐рдпрд╛рдБ **рдкреВрд░реЗ рд╕рдВрдЧрдарди, рдлреЛрд▓реНрдбрд░(рдУрдВ) рдпрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ(рдУрдВ)** рдкрд░ рдкреНрд░рднрд╛рд╡ рдбрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред рд▓рдХреНрд╖рд┐рдд рд╕рдВрд╕рд╛рдзрди рдкрджрд╛рдиреБрдХреНрд░рдо рдиреЛрдб рдХреЗ рд╡рдВрд╢рдЬ **рд╕рдВрдЧрдарди рдиреАрддрд┐ рдХреЛ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ**ред

рдПрдХ рд╕рдВрдЧрдарди рдиреАрддрд┐ **рдкрд░рд┐рднрд╛рд╖рд┐рдд** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, **рдЖрдк рдПрдХ** [**рдкреНрд░рддрд┐рдмрдВрдз**](https://cloud.google.com/resource-manager/docs/organization-policy/overview#constraints) рдЪреБрдирддреЗ рд╣реИрдВ, рдЬреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдкреНрд░рддрд┐рдмрдВрдз рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдпрд╛ рддреЛ рдПрдХ Google Cloud рд╕реЗрд╡рд╛ рдпрд╛ Google Cloud рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЗ рдЦрд┐рд▓рд╛рдл рд╣реЛрддрд╛ рд╣реИред рдЖрдк **рдЕрдкрдиреА рд╡рд╛рдВрдЫрд┐рдд рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреЗ рд╕рд╛рде рдЙрд╕ рдкреНрд░рддрд┐рдмрдВрдз рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╣реИрдВ**ред

<figure><img src="../../.gitbook/assets/image (5) (4).png" alt=""><figcaption></figcaption></figure>

#### рд╕рд╛рдорд╛рдиреНрдп рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ <a href="#common_use_cases" id="common_use_cases"></a>

* рдбреЛрдореЗрди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рдВрд╕рд╛рдзрди рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреА рд╕реАрдорд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВред
* Identity and Access Management рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рд╕реАрдорд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВред
* рдирдП рдмрдирд╛рдП рдЧрдП рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рднреМрддрд┐рдХ рд╕реНрдерд╛рди рдкрд░ рдкреНрд░рддрд┐рдмрдВрдз рд▓рдЧрд╛рдПрдВред
* рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рдирд┐рд░реНрдорд╛рдг рдХреЛ рдЕрдХреНрд╖рдо рдХрд░реЗрдВред

<figure><img src="../../.gitbook/assets/image (83).png" alt=""><figcaption></figcaption></figure>

рдЖрдкрдХреЗ рд╕рдВрдЧрдарди рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдмрд╛рд░реАрдХ рдирд┐рдпрдВрддреНрд░рдг рдХреЗ рд▓рд┐рдП рдФрд░ рднреА рдХрдИ рдкреНрд░рддрд┐рдмрдВрдз рд╣реИрдВред **рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рд╕рднреА рд╕рдВрдЧрдарди рдиреАрддрд┐ рд╕реЗрд╡рд╛ рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреА** [**рд╕реВрдЪреА рджреЗрдЦреЗрдВ**](https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints)**ред**

## **IAM рднреВрдорд┐рдХрд╛рдПрдБ**

рдпреЗ AWS рдореЗрдВ IAM рдиреАрддрд┐рдпреЛрдВ рдХреА рддрд░рд╣ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ **рдкреНрд░рддреНрдпреЗрдХ рднреВрдорд┐рдХрд╛ рдореЗрдВ рдПрдХ рд╕реЗрдЯ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВред**

рд╣рд╛рд▓рд╛рдВрдХрд┐, AWS рдХреЗ рд╡рд┐рдкрд░реАрдд, рднреВрдорд┐рдХрд╛рдУрдВ рдХрд╛ **рдХреЛрдИ рдХреЗрдВрджреНрд░реАрдХреГрдд рд░реЗрдкреЛ** рдирд╣реАрдВ рд╣реИред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, **рд╕рдВрд╕рд╛рдзрди Y рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ X рдПрдХреНрд╕реЗрд╕ рднреВрдорд┐рдХрд╛рдПрдБ рджреЗрддреЗ рд╣реИрдВ**, рдФрд░ рдпрд╣ рдЬрд╛рдирдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рдХрд┐ рдХрд┐рд╕реА рд╕рдВрд╕рд╛рдзрди рддрдХ рдХрд┐рд╕рдХреА рдкрд╣реБрдБрдЪ рд╣реИ рд╡рд╣ рд╣реИ **рдЙрд╕ рд╕рдВрд╕рд╛рдзрди рдкрд░ `get-iam-policy` рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛**ред\
рдпрд╣ рдПрдХ рд╕рдорд╕реНрдпрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпрд╣ рдЬрд╛рдирдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ **рдХрд┐ рдХрд┐рд╕реА рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рдкрд╛рд╕ рдХреМрди рд╕реА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ рд╡рд╣ рд╣реИ рд╣рд░ рд╕рдВрд╕рд╛рдзрди рд╕реЗ рдкреВрдЫрдирд╛ рдХрд┐ рд╡рд╣ рдХрд┐рд╕реЗ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЗ рд░рд╣рд╛ рд╣реИ**, рдФрд░ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИред

IAM рдореЗрдВ **рддреАрди рдкреНрд░рдХрд╛рд░** рдХреА рднреВрдорд┐рдХрд╛рдПрдБ рд╣реЛрддреА рд╣реИрдВ:

* **рдмреЗрд╕рд┐рдХ/рдкреНрд░рд╛рдЗрдорд┐рдЯрд┐рд╡ рднреВрдорд┐рдХрд╛рдПрдБ**, рдЬрд┐рдирдореЗрдВ **рдорд╛рд▓рд┐рдХ**, **рд╕рдВрдкрд╛рджрдХ**, рдФрд░ **рджрд░реНрд╢рдХ** рднреВрдорд┐рдХрд╛рдПрдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдЬреЛ IAM рдХреА рд╢реБрд░реБрдЖрдд рд╕реЗ рдкрд╣рд▓реЗ рдореМрдЬреВрдж рдереАрдВред
* **рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рднреВрдорд┐рдХрд╛рдПрдБ**, рдЬреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╕реНрддреГрдд рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВ рдФрд░ Google Cloud рджреНрд╡рд╛рд░рд╛ рдкреНрд░рдмрдВрдзрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИрдВред рдмрд╣реБрдд рд╕рд╛рд░реА рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рднреВрдорд┐рдХрд╛рдПрдБ рд╣реИрдВ, рдЖрдк рдЙрдиреНрд╣реЗрдВ рдФрд░ рдЙрдирдХреЗ рдкрд╛рд╕ рдореМрдЬреВрдж рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде **рдпрд╣рд╛рдБ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ** [**рдпрд╣рд╛рдБ**](https://cloud.google.com/iam/docs/understanding-roles#predefined\_roles)ред
* **рдХрд╕реНрдЯрдо рднреВрдорд┐рдХрд╛рдПрдБ**, рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛-рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╡рд┐рд╕реНрддреГрдд рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВред

GCP рдореЗрдВ рд╣рдЬрд╛рд░реЛрдВ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВред рдпрджрд┐ рдЖрдк рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдХрд┐рд╕реА рднреВрдорд┐рдХрд╛ рдореЗрдВ рдЕрдиреБрдорддрд┐ рд╣реИ рддреЛ рдЖрдк [**рдпрд╣рд╛рдБ рдЕрдиреБрдорддрд┐ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ**](https://cloud.google.com/iam/docs/permissions-reference) рдФрд░ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХрд┐рди рднреВрдорд┐рдХрд╛рдУрдВ рдореЗрдВ рд╡рд╣ рд╣реИред&#x20;

рдЖрдк [**рдпрд╣рд╛рдБ рдкреНрд░рддреНрдпреЗрдХ рдЙрддреНрдкрд╛рдж рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рднреВрдорд┐рдХрд╛рдПрдБ рднреА рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ**](https://cloud.google.com/iam/docs/understanding-roles#product\_specific\_documentation) **ред** рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреБрдЫ **рднреВрдорд┐рдХрд╛рдПрдБ** рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдирд╣реАрдВ рдЬреЛрдбрд╝реА рдЬрд╛ рд╕рдХрддреАрдВ рдФрд░ **рдХреЗрд╡рд▓ SAs рдХреЛ рдХреНрдпреЛрдВрдХрд┐ рдХреБрдЫ рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рд╡реЗ рд╢рд╛рдорд┐рд▓ рдХрд░рддреА рд╣реИрдВред\
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдХреЗрд╡рд▓ **рдкреНрд░рднрд╛рд╡реА рд╣реЛрдВрдЧреА** рдЕрдЧрд░ рд╡реЗ **рд╕рдВрдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛ рд╕реЗ рдЬреБрдбрд╝реА рд╣реЛрдВ**ред

рдпрд╛ рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдПрдХ **рдХрд╕реНрдЯрдо рднреВрдорд┐рдХрд╛ рдПрдХ** [**рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЕрдиреБрдорддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреА рд╣реИ рдпрд╣рд╛рдБ**](https://cloud.google.com/iam/docs/custom-roles-permissions-support)**ред**

{% content-ref url="gcp-services/gcp-iam-and-org-policies-enum.md" %}
[gcp-iam-and-org-policies-enum.md](gcp-services/gcp-iam-and-org-policies-enum.md)
{% endcontent-ref %}

## рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ <a href="#default-credentials" id="default-credentials"></a>

**GCP рдХрдВрд╕реЛрд▓** рдореЗрдВ **рдХреЛрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рд╕рдореВрд╣** рдкреНрд░рдмрдВрдзрди рдирд╣реАрдВ рд╣реИ, рд╡рд╣ **Google Workspace** рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЖрдк Google Workspace рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЖрдк Workspaces **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдФрд░ рд╕рдореВрд╣реЛрдВ рдХреЛ рдпрд╣рд╛рдБ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** [**https://admin.google.com**](https://admin.google.com/)ред

**MFA** рдХреЛ Workspaces рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП **рдЕрдирд┐рд╡рд╛рд░реНрдп** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ **рд╣рдорд▓рд╛рд╡рд░** GCP **рдХреНрд▓рд╛рдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ MFA рджреНрд╡рд╛рд░рд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рдирд╣реАрдВ рд╣реЛрдЧрд╛** (рдпрд╣ рдХреЗрд╡рд▓ рддрдм MFA рджреНрд╡рд╛рд░рд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реЛрдЧрд╛ рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓реЙрдЧрд┐рди рдХрд░рддрд╛ рд╣реИ: `gcloud auth login`)ред

## рд╕рдореВрд╣

рдЬрдм рдПрдХ рд╕рдВрдЧрдарди рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдХрдИ рд╕рдореВрд╣реЛрдВ рдХреЛ **рдмрдирд╛рдиреЗ рдХреА рджреГрдврд╝ рд╕реБрдЭрд╛рд╡ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред** рдЕрдЧрд░ рдЖрдк рдЙрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдЖрдкрдиреЗ рд╕рдВ
<table data-header-hidden><thead><tr><th width="320"></th><th></th></tr></thead><tbody><tr><td><strong>рд╕рдореВрд╣</strong></td><td><strong>рдХрд╛рд░реНрдп</strong></td></tr><tr><td><strong><code>grp-gcp-organization-admins</code></strong><br><em>(рдЪреЗрдХрд▓рд┐рд╕реНрдЯ рдХреЗ рд▓рд┐рдП рд╕рдореВрд╣ рдпрд╛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЦрд╛рддреЗ рдЖрд╡рд╢реНрдпрдХ)</em></td><td>рд╕рдВрдЧрдарди рдХреЗ рдХрд┐рд╕реА рднреА рд╕рдВрд╕рд╛рдзрди рдХрд╛ рдкреНрд░рд╢рд╛рд╕рди рдХрд░рдирд╛ред рдЗрд╕ рднреВрдорд┐рдХрд╛ рдХреЛ рдХрдо рд╕реЗ рдХрдо рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ; рд╕рдВрдЧрдарди рдХреЗ рдкреНрд░рд╢рд╛рд╕рдХреЛрдВ рдХреЛ рдЖрдкрдХреЗ Google Cloud рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдкреВрд░реА рдкрд╣реБрдВрдЪ рд╣реЛрддреА рд╣реИред рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рдЪреВрдВрдХрд┐ рдпрд╣ рдХрд╛рд░реНрдп рдЕрддреНрдпрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕рдореВрд╣ рдмрдирд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЦрд╛рддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред</td></tr><tr><td><strong><code>grp-gcp-network-admins</code></strong><br><em>(рдЪреЗрдХрд▓рд┐рд╕реНрдЯ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ)</em></td><td>рдиреЗрдЯрд╡рд░реНрдХ, рд╕рдмрдиреЗрдЯ, рдлрд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЙрдкрдХрд░рдг рдЬреИрд╕реЗ рдХрд┐ Cloud Router, Cloud VPN, рдФрд░ рдХреНрд▓рд╛рдЙрдб рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ рдмрдирд╛рдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-billing-admins</code></strong><br><em>(рдЪреЗрдХрд▓рд┐рд╕реНрдЯ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ)</em></td><td>рдмрд┐рд▓рд┐рдВрдЧ рдЦрд╛рддреЗ рд╕реЗрдЯрдЕрдк рдХрд░рдирд╛ рдФрд░ рдЙрдирдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-developers</code></strong><br><em>(рдЪреЗрдХрд▓рд┐рд╕реНрдЯ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ)</em></td><td>рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбрд┐рдЬрд╛рдЗрди рдХрд░рдирд╛, рдХреЛрдбрд┐рдВрдЧ рдХрд░рдирд╛, рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-security-admins</code></strong><br></td><td>рдкреВрд░реЗ рд╕рдВрдЧрдарди рдХреЗ рд▓рд┐рдП рд╕реБрд░рдХреНрд╖рд╛ рдиреАрддрд┐рдпреЛрдВ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдФрд░ рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛, рдЬрд┐рд╕рдореЗрдВ рдкрд╣реБрдВрдЪ рдкреНрд░рдмрдВрдзрди рдФрд░ <a href="https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints">рд╕рдВрдЧрдарди рдмрд╛рдзрд╛ рдиреАрддрд┐рдпрд╛рдВ</a> рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдЕрдкрдиреЗ Google Cloud рд╕реБрд░рдХреНрд╖рд╛ рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП <a href="https://cloud.google.com/architecture/security-foundations/authentication-authorization#users_and_groups">Google Cloud рд╕реБрд░рдХреНрд╖рд╛ рдЖрдзрд╛рд░ рдЧрд╛рдЗрдб</a> рджреЗрдЦреЗрдВред</td></tr><tr><td><strong><code>grp-gcp-devops</code></strong></td><td>рдирд┐рд░рдВрддрд░ рдПрдХреАрдХрд░рдг рдФрд░ рд╡рд┐рддрд░рдг, рдирд┐рдЧрд░рд╛рдиреА, рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рд╛рд╡рдзрд╛рди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рд╡рд╛рд▓реА рдЕрдВрдд-рд╕реЗ-рдЕрдВрдд рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдмрдирд╛рдирд╛ рдпрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-billing-viewer</code></strong></td><td>рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдкрд░ рдЦрд░реНрдЪ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдирд╛ред рдЖрдо рддреМрд░ рдкрд░ рд╕рджрд╕реНрдп рд╡рд┐рддреНрдд рдЯреАрдо рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрддреЗ рд╣реИрдВред</td></tr><tr><td><strong><code>grp-gcp-platform-viewer</code></strong></td><td>Google Cloud рд╕рдВрдЧрдарди рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рдЬрд╛рдирдХрд╛рд░реА рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХрд░рдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-security-reviewer</code></strong></td><td>рдХреНрд▓рд╛рдЙрдб рд╕реБрд░рдХреНрд╖рд╛ рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХрд░рдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-network-viewer</code></strong></td><td>рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХрд░рдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-audit-viewer</code></strong></td><td>рдСрдбрд┐рдЯ рд▓реЙрдЧ рджреЗрдЦрдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-scc-admin</code></strong></td><td>рд╕реБрд░рдХреНрд╖рд╛ рдХрдорд╛рдВрдб рд╕реЗрдВрдЯрд░ рдХрд╛ рдкреНрд░рд╢рд╛рд╕рди рдХрд░рдирд╛ред</td></tr><tr><td><strong><code>grp-gcp-secrets-admin</code></strong></td><td>Secret Manager рдореЗрдВ рдЧреЛрдкрдиреАрдп рдЬрд╛рдирдХрд╛рд░рд┐рдпреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛ред</td></tr></tbody></table>

## **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкрд╛рд╕рд╡рд░реНрдб рдиреАрддрд┐**

<figure><img src="../../.gitbook/assets/image (1) (9).png" alt=""><figcaption></figcaption></figure>

## **рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ**

рдпреЗ рд╡реЗ рд╕рд┐рджреНрдзрд╛рдВрдд рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ **рд╕рдВрд╕рд╛рдзрди** **рдЬреЛрдбрд╝рд╛** рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ GCP рдХреЗ рд╕рд╛рде рдЖрд╕рд╛рдиреА рд╕реЗ рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рд╣реЛ рд╕рдХрддреА рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдореЗрдВ рдПрдХ VM рд╕реЗ рдЬреБрдбрд╝реЗ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреЗ **auth token** рддрдХ рдкрд╣реБрдВрдЪ рд╕рдВрднрд╡ рд╣реИред\
**IAM рдФрд░ рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдк** рджреЛрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рдХреБрдЫ **рд╕рдВрдШрд░реНрд╖** рд╕рд╛рдордиреЗ рдЖ рд╕рдХрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЗ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреЗ рдкрд╛рд╕ `compute.instanceAdmin` рдХреА IAM рднреВрдорд┐рдХрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ рд▓реЗрдХрд┐рди рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рднрдВрдЧ рдХрд┐рдП рдЧрдП рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкрд░ `https://www.googleapis.com/auth/compute.readonly` рдХреА рд╕реНрдХреЛрдк рд╕реАрдорд╛ рдХреЗ рд╕рд╛рде рдХрдордЬреЛрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛред рдпрд╣ рдЖрдкрдХреЗ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реМрдВрдкреЗ рдЧрдП OAuth рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рд╕реА рднреА рдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХреЗрдЧрд╛ред

рдпрд╣ **AWS рд╕реЗ IAM рднреВрдорд┐рдХрд╛рдУрдВ** рдХреЗ рд╕рдорд╛рди рд╣реИред рд▓реЗрдХрд┐рди AWS рдХреА рддрд░рд╣ рдирд╣реАрдВ, **рдХреЛрдИ рднреА** рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ **рдХрд┐рд╕реА рднреА рд╕реЗрд╡рд╛** рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рдЗрд╕реЗ рдиреАрддрд┐ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ)ред

рдЖрдкрдХреЛ рдЬреЛ рдХрдИ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдорд┐рд▓реЗрдВрдЧреЗ рд╡реЗ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ **GCP рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди** рд╣реЛрддреЗ рд╣реИрдВ рдЬрдм рдЖрдк рдХрд┐рд╕реА рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ:
```
PROJECT_NUMBER-compute@developer.gserviceaccount.com
PROJECT_ID@appspot.gserviceaccount.com
```
рд╣рд╛рд▓рд╛рдВрдХрд┐, **custom service accounts** рдмрдирд╛рдирд╛ рдФрд░ рдЙрдирд╕реЗ рдЬреБрдбрд╝рдирд╛ рднреА рд╕рдВрднрд╡ рд╣реИ, рдЬреЛ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдВрдЧреЗ:
```
SERVICE_ACCOUNT_NAME@PROJECT_NAME.iam.gserviceaccount.com
```
### **рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдкреНрд╕**

рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдк GCP API рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП **рдЬрдирд░реЗрдЯ рдХрд┐рдП рдЧрдП OAuth рдЯреЛрдХрдиреНрд╕ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВ**ред рд╡реЗ OAuth рдЯреЛрдХрди рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ **рд╕реАрдорд┐рдд рдХрд░рддреЗ рд╣реИрдВ**ред\
рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЕрдЧрд░ рдПрдХ рдЯреЛрдХрди рдХрд┐рд╕реА рд╕рдВрд╕рд╛рдзрди рдХреЗ рдорд╛рд▓рд┐рдХ рдХрд╛ рд╣реИ рд▓реЗрдХрд┐рди рдЙрд╕рдХреЗ рдкрд╛рд╕ рдЙрд╕ рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЯреЛрдХрди рд╕реНрдХреЛрдк рдореЗрдВ рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЯреЛрдХрди **рдЙрди рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХрд╛ (рджреБрд░реБрдкрдпреЛрдЧ) рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛**ред

Google рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ [рд╕рд┐рдлрд╛рд░рд┐рд╢](https://cloud.google.com/compute/docs/access/service-accounts#service\_account\_permissions) рдХрд░рддрд╛ рд╣реИ рдХрд┐ **рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдкреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд┐рдпрд╛ рдЬрд╛рдП рдФрд░ рдкреВрд░реА рддрд░рд╣ рд╕реЗ IAM рдкрд░ рдирд┐рд░реНрднрд░ рд░рд╣рд╛ рдЬрд╛рдП**ред рд╡реЗрдм рдореИрдиреЗрдЬрдореЗрдВрдЯ рдкреЛрд░реНрдЯрд▓ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдкреНрд╕ рдХреЛ рдЕрднреА рднреА рдХрд╕реНрдЯрдо рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдореЗрдЯрд┐рдХ рд░реВрдк рд╕реЗ рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрд╕ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЖрдк рдпрд╣ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреМрди рд╕реЗ **рд╕реНрдХреЛрдкреНрд╕** **рдЕрд╕рд╛рдЗрди рдХрд┐рдП рдЧрдП рд╣реИрдВ** рдЗрд╕реЗ **рдкреВрдЫрддрд╛рдЫ рдХрд░рдХреЗ:**

{% code overflow="wrap" %}
```bash
curl 'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=<access_token>'

{
"issued_to": "223044615559.apps.googleusercontent.com",
"audience": "223044615559.apps.googleusercontent.com",
"user_id": "139746512919298469201",
"scope": "openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/appengine.admin https://www.googleapis.com/auth/sqlservice.login https://www.googleapis.com/auth/compute https://www.googleapis.com/auth/accounts.reauth",
"expires_in": 2253,
"email": "username@testing.com",
"verified_email": true,
"access_type": "offline"
}
```
{% endcode %}

рдкрд┐рдЫрд▓реЗ **scopes** рд╡реЗ рд╣реИрдВ рдЬреЛ **`gcloud`** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП **рдбрд┐рдлрд╝реЙрд▓реНрдЯ** рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЬрдм рдЖрдк **`gcloud`** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдЖрдк рдкрд╣рд▓реЗ рдПрдХ OAuth рдЯреЛрдХрди рдмрдирд╛рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЙрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░рддреЗ рд╣реИрдВред

рдЙрдирдореЗрдВ рд╕реЗ рд╕рдВрднрд╡рддрдГ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕реНрдХреЛрдк **`cloud-platform`** рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдореВрд▓ рд░реВрдк рд╕реЗ рдпрд╣ рдЕрд░реНрде рд╣реИ рдХрд┐ **GCP рдореЗрдВ рдХрд┐рд╕реА рднреА рд╕реЗрд╡рд╛ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдВрднрд╡ рд╣реИ**ред

рдЖрдк **рдпрд╣рд╛рдБ** [**рд╕рднреА рд╕рдВрднрд╛рд╡рд┐рдд рд╕реНрдХреЛрдкреНрд╕ рдХреА рд╕реВрдЪреА рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ**](https://developers.google.com/identity/protocols/googlescopes)**ред**

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ **`gcloud`** рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рд╣реИрдВ, рддреЛ рдЕрдиреНрдп рд╕реНрдХреЛрдкреНрд╕ рдХреЗ рд╕рд╛рде рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рдЬреИрд╕реЗ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рдХрд░рдХреЗ:

{% code overflow="wrap" %}
```bash
# Maybe you can get a user token with other scopes changing the scopes array from ~/.config/gcloud/credentials.db

# Set new scopes for SDKs credentials
gcloud auth application-default login --scopes=https://www.googleapis.com/auth/userinfo.email,https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/sqlservice.login,https://www.googleapis.com/auth/appengine.admin,https://www.googleapis.com/auth/compute,https://www.googleapis.com/auth/accounts.reauth,https://www.googleapis.com/auth/admin.directory.user,https://www.googleapis.com/auth/admin.directory.group,https://www.googleapis.com/auth/admin.directory.domain

# Print new token
gcloud auth application-default print-access-token

# To use this token with some API you might need to use curl to indicate the project header with --header "X-Goog-User-Project: <project-name>"
```
{% endcode %}

## **Terraform IAM рдиреАрддрд┐рдпрд╛рдБ, рдмрд╛рдЗрдВрдбрд┐рдВрдЧреНрд╕ рдФрд░ рд╕рджрд╕реНрдпрддрд╛**

Terraform рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд [https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google\_project\_iam](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google\_project\_iam) рдореЗрдВ GCP рдХреЗ рд╕рд╛рде terraform рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд╕рдВрд╕рд╛рдзрди рдкрд░ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЛ рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЗ рд╣реИрдВ:

* **рд╕рджрд╕реНрдпрддрд╛**: рдЖрдк **рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рд╕рджрд╕реНрдп рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдХреЛ рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ** **рдмрд┐рдирд╛ рдХрд┐рд╕реА рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ** рднреВрдорд┐рдХрд╛ рдпрд╛ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдкрд░ред рдЖрдк рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдПрдХ рднреВрдорд┐рдХрд╛ рдХрд╛ рд╕рджрд╕реНрдп рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдлрд┐рд░ рдПрдХ рд╕рдореВрд╣ рдХреЛ рдЙрд╕реА рднреВрдорд┐рдХрд╛ рдХрд╛ рд╕рджрд╕реНрдп рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрди рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рд╕рдореВрд╣) рдХреЛ рдЕрдиреНрдп рднреВрдорд┐рдХрд╛рдУрдВ рдХрд╛ рд╕рджрд╕реНрдп рднреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред
* **рдмрд╛рдЗрдВрдбрд┐рдВрдЧреНрд╕**: рдХрдИ **рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдХреЛ рдПрдХ рднреВрдорд┐рдХрд╛ рд╕реЗ рдмрд╛рдЗрдВрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред рдпреЗ **рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдЕрднреА рднреА рдЕрдиреНрдп рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рд╕рджрд╕реНрдп рдпрд╛ рдмрд╛рдЗрдВрдб рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ**ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдЧрд░ рдПрдХ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдЬреЛ рднреВрдорд┐рдХрд╛ рд╕реЗ рдмрд╛рдЗрдВрдб рдирд╣реАрдВ рд╣реИ, рдЙрд╕реЗ **рдмрд╛рдЗрдВрдб рднреВрдорд┐рдХрд╛ рдХрд╛ рд╕рджрд╕реНрдп рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**, рддреЛ рдЕрдЧрд▓реА рдмрд╛рд░ рдЬрдм **рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рд▓рд╛рдЧреВ рдХреА рдЬрд╛рддреА рд╣реИ, рд╕рджрд╕реНрдпрддрд╛ рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рдПрдЧреА**ред
* **рдиреАрддрд┐рдпрд╛рдБ**: рдПрдХ рдиреАрддрд┐ **рдЖрдзрд┐рдХрд╛рд░рд┐рдХ** рд╣реЛрддреА рд╣реИ, рдпрд╣ рднреВрдорд┐рдХрд╛рдУрдВ рдФрд░ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИ рдФрд░ рдлрд┐рд░, **рдЙрди рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдХреЗ рдкрд╛рд╕ рдЕрдзрд┐рдХ рднреВрдорд┐рдХрд╛рдПрдБ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ рдФрд░ рдЙрди рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рдкрд╛рд╕ рдЕрдзрд┐рдХ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓реНрд╕ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ** рдЬрдм рддрдХ рдХрд┐ рдЙрд╕ рдиреАрддрд┐ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ (рдЕрдиреНрдп рдиреАрддрд┐рдпреЛрдВ, рдмрд╛рдЗрдВрдбрд┐рдВрдЧреНрд╕ рдпрд╛ рд╕рджрд╕реНрдпрддрд╛рдУрдВ рдореЗрдВ рднреА рдирд╣реАрдВ)ред рдЗрд╕рд▓рд┐рдП, рдЬрдм рдПрдХ рднреВрдорд┐рдХрд╛ рдпрд╛ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЛ рдиреАрддрд┐ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдЙрд╕рдХреЗ рд╕рднреА рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ **рдЙрд╕ рдиреАрддрд┐ рджреНрд╡рд╛рд░рд╛ рд╕реАрдорд┐рдд рд╣реЛрддреЗ рд╣реИрдВ**ред рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ, рдпрд╣ рддрдм рдмрд╛рдпрдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬрдм рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХреЛ рдиреАрддрд┐ рдпрд╛ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЬреИрд╕реЗ рдХрд┐ рдПрдХ рдирдпрд╛ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдмрдирд╛рдирд╛ рдФрд░ рдЙрд╕реЗ рдПрдХ рдирдИ рднреВрдорд┐рдХрд╛ рдмрд╛рдЗрдВрдб рдХрд░рдирд╛)ред

## рд╕рдВрджрд░реНрдн

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдУрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ред
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>
