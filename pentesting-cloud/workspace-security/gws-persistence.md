# GWS - Kalıcılık

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)'u takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek paylaşın**.

</details>

{% hint style="danger" %}
Bu bölümde bahsedilen ayarları değiştiren tüm işlemler, hesapla ilişkili e-postaya bir **güvenlik uyarısı gönderecek** ve hatta **hesapla senkronize olan herhangi bir mobil cihaza bir bildirim gönderecektir**.
{% endhint %}

## **Gmail'de Kalıcılık**

* Google'dan gelen **güvenlik bildirimlerini gizlemek için filtreler oluşturabilirsiniz**
* `from: (no-reply@accounts.google.com) "Security Alert"`
* Bu, güvenlik e-postalarının e-postaya ulaşmasını engelleyecektir (ancak mobil cihaza bildirim göndermeyi engellemez)

<details>

<summary>Gmail filtresi oluşturma adımları</summary>

([**Buradan**](https://support.google.com/mail/answer/6579) talimatlar)

1. [Gmail'i](https://mail.google.com/) açın.
2. Üstteki arama kutusunda, Arama seçeneklerini göster ![photos tune](https://lh3.googleusercontent.com/cD6YR\_YvqXqNKxrWn2NAWkV6tjJtg8vfvqijKT1\_9zVCrl2sAx9jROKhLqiHo2ZDYTE=w36) düğmesine tıklayın.
3. Arama kriterlerinizi girin. Aramanızın doğru çalışıp çalışmadığını kontrol etmek için **Aramayı** tıklayarak hangi e-postaların geldiğini görün.&#x20;
4. Arama penceresinin alt kısmında **Filtre oluştur**'a tıklayın.
5. Filtrenin ne yapmasını istediğinizi seçin.
6. **Filtre oluştur**'a tıklayın.

Mevcut filtrelerinizi kontrol etmek için [https://mail.google.com/mail/u/0/#settings/filters](https://mail.google.com/mail/u/0/#settings/filters) adresine gidin.

</details>

<figure><img src="../../.gitbook/assets/image (142).png" alt=""><figcaption></figcaption></figure>

* **Hassas bilgileri** (veya her şeyi) **iletmek için yönlendirme adresi oluşturabilirsiniz** - Manuel erişime ihtiyacınız vardır.
* [https://mail.google.com/mail/u/2/#settings/fwdandpop](https://mail.google.com/mail/u/2/#settings/fwdandpop) adresinde bir yönlendirme adresi oluşturun
* Alıcı adresin bunu onaylaması gerekecektir
* Ardından, tüm e-postaları yönlendirmek için ayarlayın ve bir kopyasını saklayın (değişiklikleri kaydetmeyi unutmayın):

<figure><img src="../../.gitbook/assets/image (143).png" alt=""><figcaption></figcaption></figure>

Ayrıca, filtreler oluşturabilir ve yalnızca belirli e-postaları diğer e-posta adresine yönlendirebilirsiniz.

## Uygulama şifreleri

Eğer bir google kullanıcısının oturumunu ele geçirmeyi başardıysanız ve kullanıcının **2FA**'sı varsa, bir [**uygulama şifresi**](https://support.google.com/accounts/answer/185833?hl=en) oluşturabilirsiniz (adımları görmek için bağlantıya gidin). **Google artık uygulama şifrelerini önermiyor ve kullanıcı Google hesap şifresini değiştirdiğinde iptal ediliyor**.

**Açık bir oturumunuz olsa bile, bir uygulama şifresi oluşturmak için kullanıcının şifresini bilmeniz gerekecektir.**

{% hint style="info" %}
Uygulama şifreleri, **2 Adımlı Doğrulama**'ya sahip hesaplarla **kullanılabilir**.
{% endhint %}

## 2-FA ve benzerini değiştirme

Bu sayfada [**https://myaccount.google.com/security**](https://myaccount.google.com/security) **2-FA'yı kapatmak veya yeni bir cihaz** (veya telefon numarası) **kaydetmek** mümkündür.\
**Kendi cihazınızı eklemek, şifreyi değiştirmek, doğrulama telefonları ve kurtarma için mobil numaralar eklemek, kurtarma e-postasını değiştirmek ve güvenlik sorularını değiştirmek** de mümkündür.

{% hint style="danger" %}
Kullanıcının telefonuna **güvenlik bildirimlerinin ulaşmasını engellemek** için, buradan onun telefonundan oturumu **kapatabilirsiniz** (bu garip olurdu) çünkü buradan tekrar oturum açamazsınız.

Cihazı **yerini de tespit etmek** de mümkündür.
{% endhint %}

**Açık bir oturumunuz olsa bile, bu ayarları değiştirmek için kullanıcının şifresini bilmeniz gerekecektir.**

## OAuth Uygulamaları aracılığıyla Kalıcılık

Bir kullanıcının hesabını **ele geçirdiyseniz**, tüm olası izinleri bir **OAuth Uygulamasına** vermek için sadece **kabul edebilirsiniz**. Tek sorun, Workspace'in **incelemesi yapılmamış harici ve/veya dahili OAuth uygulamalarına izin vermemesi** şeklinde yapılandırılabileceğidir.\
Genellikle, Workspace Organizasyonlarının varsayılan olarak harici OAuth uygulamalarına güvenmediği, ancak dahili uygulamalara güvendiği yaygındır, bu nedenle yeterli izinlere sahipseniz ve harici uygulamalara izin verilmiyorsa, yeni bir dahili OAuth uygulaması oluşturun ve **bu yeni dahili OAuth uygulamasını kalıcılığı sürdürmek için kullanın**.

OAuth Uygulamaları hakkında daha fazla bilgi için aşağıdaki sayfaya bakın:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

## Delege Ederek Kalıcılık

Hesabı, saldırgan tarafından kontrol edilen farklı bir hesaba **delege edebilirsiniz** (bunu yapmanıza izin veriliyorsa). Workspace **Organizasyonlarında** bu seçeneğin **etkinleştirilmesi** gerekmektedir. Herkes için devre dışı bırakılabilir, belirli kullanıcı/gruplar için etkinleştirilebilir veya herkes için (genellikle yalnızca belirli kullanıcı/gruplar için etkinleştirilir veya tamamen devre dışı bırakılır).

<details>

<summary>Ö
### Adım 1: Kullanıcılarınız için Gmail yetkilendirmesini etkinleştirin&#x20;

**Başlamadan önce:** Belirli kullanıcılar için ayarı uygulamak için hesaplarınızı bir [kuruluş birimine](https://support.google.com/a/topic/1227584) yerleştirin.

1. [Google Yönetici konsoluna](https://support.google.com/a/answer/182076) [giriş yapın](https://admin.google.com/).

Mevcut hesabınız CarlosPolop@gmail.com değil, bir _yönetici hesabı_ kullanarak oturum açın.
2. Yönetici konsolunda, Menü'ye gidin ![](https://storage.googleapis.com/support-kms-prod/JxKYG9DqcsormHflJJ8Z8bHuyVI5YheC0lAp)![ve ardından](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)![](https://storage.googleapis.com/support-kms-prod/ocGtUSENh4QebLpvZcmLcNRZyaTBcolMRSyl) **Uygulamalar**![ve ardından](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Google Workspace**![ve ardından](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Gmail**![ve ardından](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Kullanıcı ayarları**.
3. Ayarı herkese uygulamak için üst kuruluş birimini seçili bırakın. Aksi takdirde, bir alt [kuruluş birimi](https://support.google.com/a/topic/1227584) seçin.
4. **Posta yetkilendirmesi**'ne tıklayın.
5. **Kullanıcıların etki alanlarındaki posta kutularına başka kullanıcılara yetkilendirme erişimi vermesine izin ver** kutusunu işaretleyin.
6. (İsteğe bağlı) Kullanıcıların hesaplarından gönderilen yetkilendirilmiş iletilerde hangi gönderen bilgilerinin dahil edileceğini belirlemelerine izin vermek için **Bu ayarı özelleştirmelerine izin ver** kutusunu işaretleyin.
7. Delege tarafından gönderilen iletilerde varsayılan gönderen bilgileri için bir seçenek seçin:&#x20;
* **Hesap sahibini ve e-postayı gönderen delegeyi göster** - İletiler, Gmail hesabı sahibinin e-posta adresini ve delegeyi içerir.
* **Yalnızca hesap sahibini göster** - İletiler yalnızca Gmail hesabı sahibinin e-posta adresini içerir. Delege e-posta adresi dahil edilmez.
8. (İsteğe bağlı) Kullanıcıların bir Grup'u bir delege olarak eklemelerine izin vermek için **Kullanıcıların posta kutularına bir Google Grubuna erişim yetkisi vermesine izin ver** kutusunu işaretleyin.
9. **Kaydet**'e tıklayın. Bir alt kuruluş birimi yapılandırdıysanız, üst kuruluş biriminin ayarlarını **Devral** veya **Geçersiz kıl** seçenekleriyle değiştirebilirsiniz.
10. (İsteğe bağlı) Başka kuruluş birimleri için Gmail yetkilendirmesini etkinleştirmek için adımları 3-9 tekrarlayın.

Değişiklikler 24 saate kadar sürebilir, ancak genellikle daha hızlı gerçekleşir. [Daha fazla bilgi edinin](https://support.google.com/a/answer/7514107)

### Adım 2: Kullanıcıların hesapları için delege ayarlamalarını yapmalarını sağlayın

Yetkilendirmeyi etkinleştirdikten sonra, kullanıcılarınız Gmail ayarlarına giderek delege atamaları yapabilir. Delegeler, kullanıcı adına mesajları okuyabilir, gönderebilir ve alabilir. &#x20;

Ayrıntılar için kullanıcıları [E-posta üzerinde delege ve işbirliği](https://support.google.com/a/users/answer/138350) sayfasına yönlendirin.

</details>

<details>

<summary>Normal bir kullanıcıdan, erişimi delege etmeye yönelik talimatları buradan kontrol edin</summary>

(Bilgiler [**dokümantasyondan**](https://support.google.com/mail/answer/138350) kopyalandı)

En fazla 10 delege ekleyebilirsiniz.

Eğer işiniz, okulunuz veya başka bir kuruluşunuz aracılığıyla Gmail kullanıyorsanız:

* Kuruluşunuz içinde en fazla 1000 delege ekleyebilirsiniz.
* Tipik kullanımda, 40 delege aynı anda bir Gmail hesabına erişebilir.&#x20;
* API'ler veya tarayıcı uzantıları gibi otomatik süreçler kullanıyorsanız, birkaç delege aynı anda bir Gmail hesabına erişebilir.

1. Bilgisayarınızda [Gmail](https://mail.google.com/) adresini açın. Delegeleri Gmail uygulamasından ekleyemezsiniz.
2. Sağ üst köşede, Ayarlar'a tıklayın ![Ayarlar](https://lh3.googleusercontent.com/p3J-ZSPOLtuBBR\_ofWTFDfdgAYQgi8mR5c76ie8XQ2wjegk7-yyU5zdRVHKybQgUlQ=w36-h36) ![ve ardından](https://lh3.googleusercontent.com/3\_l97rr0GvhSP2XV5OoCkV2ZDTIisAOczrSdzNCBxhIKWrjXjHucxNwocghoUa39gw=w36-h36) **Tüm ayarları görüntüle**'ye tıklayın.
3. **Hesaplar ve İçe Aktarma** veya **Hesaplar** sekmesine tıklayın.
4. "Hesabınıza erişimi yetkilendir" bölümünde, **Başka bir hesap ekle**'ye tıklayın. Gmail'i işiniz veya okulunuz aracılığıyla kullanıyorsanız, kuruluşunuz e-posta yetkilendirmesini sınırlayabilir. Bu ayarı görmüyorsanız, yöneticinizle iletişime geçin.
* Hesabınıza erişimi yetkilendir seçeneğini görmüyorsanız, bu işlev kısıtlanmıştır.
5. Eklemek istediğiniz kişinin e-posta adresini girin. Gmail'i işiniz, okulunuz veya başka bir kuruluşunuz aracılığıyla kullanıyorsanız ve yöneticiniz izin veriyorsa, bir grupun e-posta adresini girebilirsiniz. Bu grup, kuruluşunuzla aynı etki alanına sahip olmalıdır. Grubun dış üyeleri yetkilendirme erişimine izin verilmez. \
\
**Önemli:** Delege olarak atadığınız hesap yeni bir hesap ise veya şifre sıfırlanmışsa, Yönetici, ilk oturum açtığınızda şifreyi değiştirme gereksinimini kapatmalıdır.

* [Bir kullanıcı oluşturmanın nasıl yapıldığını öğrenin](https://support.google.com/a/answer/33310).
* [Yöneticinin nasıl
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ve** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github depolarına PR göndererek paylaşın.**
