# GWS - Google 平台网络钓鱼

<details>

<summary><strong>从零开始学习 AWS 黑客技术，成为英雄</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS 红队专家)</strong></a><strong>！</strong></summary>

支持 HackTricks 的其他方式：

* 如果您想在 **HackTricks** 中看到您的**公司广告**或**下载 HackTricks 的 PDF**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方的 PEASS & HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们独家的[**NFTs 集合**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass) 或在 **Twitter** 🐦 上**关注**我 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来分享您的黑客技巧。

</details>

## 通用网络钓鱼方法论

{% embed url="https://book.hacktricks.xyz/generic-methodologies-and-resources/phishing-methodology" %}

## Google Groups 网络钓鱼

显然，默认情况下，在 workspace 中成员[**可以创建群组**](https://groups.google.com/all-groups) **并邀请人加入**。然后，您可以修改将发送给用户的电子邮件，**添加一些链接**。**电子邮件将来自 Google 地址**，因此看起来**合法**，人们可能会点击链接。

还可以将 **FROM** 地址设置为 **Google 群组电子邮件**，向群组内的用户**发送更多电子邮件**，如下图所示，创建了群组 **`google--support@googlegroups.com`** 并向群组的所有成员**发送了电子邮件**（他们被添加而无需任何同意）

<figure><img src="../../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure>

## Google Chat 网络钓鱼

您可能能够仅凭电子邮件地址**开始与某人聊天**或发送**聊天邀请**。此外，可以**创建一个空间**，可以有任何名称（例如“Google 支持”），并**邀请**成员加入。如果他们接受，他们可能会认为他们正在与 Google 支持交谈：

<figure><img src="../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

{% hint style="success" %}
**然而，在我的测试中，被邀请的成员甚至没有收到邀请。**
{% endhint %}

您可以在以下链接中查看过去的工作方式：[https://www.youtube.com/watch?v=KTVHLolz6cE\&t=904s](https://www.youtube.com/watch?v=KTVHLolz6cE\&t=904s)

## Google Doc 网络钓鱼

过去可以创建一个**看似合法的文档**，然后在评论中**提及某些电子邮件（如 @user@gmail.com）**。Google **会向该电子邮件地址发送电子邮件**，通知他们在文档中被提及。\
如今，这种方法不再有效，但如果您**授予受害者电子邮件访问文档的权限**，Google 会发送电子邮件表明这一点。当您提及某人时，会出现以下消息：

<figure><img src="../../.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

{% hint style="success" %}
受害者可能有保护机制，不允许指示与他们共享外部文档的电子邮件到达他们的邮箱。
{% endhint %}

## Google Calendar 网络钓鱼

您可以**创建日历事件**并添加尽可能多的您正在攻击的公司的电子邮件地址。将此日历事件安排在当前时间**5分钟或15分钟后**。使事件看起来合法，并**添加评论和标题，指示他们需要阅读某些内容**（带有**网络钓鱼链接**）。

以下是浏览器中会出现的提醒，会议标题为“Firing People”，因此您可以设置更像网络钓鱼的标题（甚至更改与您电子邮件关联的名称）。

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

为了使其看起来不那么可疑：

* 设置为**接收者无法看到其他被邀请的人**
* **不要发送有关事件的电子邮件通知**。然后，人们只会看到他们关于5分钟内会议的警告，并且他们需要阅读那个链接。
* 显然使用 API，您可以将**人们**已**接受**事件设置为**True**，甚至可以代表他们**创建评论**。

## OAuth 应用程序网络钓鱼

之前的任何技术都可能被用来让用户访问一个**Google OAuth 应用程序**，该应用程序将**请求**用户一些**访问权限**。如果用户**信任**来源，他们可能会**信任**应用程序（即使它正在请求高权限）。

{% hint style="info" %}
请注意，Google 在多种情况下会出现一个丑陋的提示，警告应用程序不受信任，Workspace 管理员甚至可以阻止人们接受 OAuth 应用程序。
{% endhint %}

**Google** 允许创建可以代表用户与多个**Google 服务**交互的应用程序：Gmail、Drive、GCP...

当创建一个应用程序以**代表其他用户行动**时，开发者需要在 GCP 内创建一个**OAuth 应用程序**并指明应用程序需要访问用户数据的权限范围。\
当**用户**想要**使用**那个**应用程序**时，他们将被**提示**接受应用程序将访问其在权限范围内指定的数据。

这是一种非常有吸引力的方式，用于**钓鱼**非技术用户使用**访问敏感信息的应用程序**，因为他们可能不理解后果。然而，在组织账户中，有方法可以防止这种情况发生。

### 未验证应用程序提示

如前所述，google 将始终向用户**提示接受**他们代表自己给予应用程序的权限。然而，如果应用程序被认为是**危险的**，google 将**首先**显示一个**提示**，指出它是**危险的**，并**使用户更难**授予应用程序权限。

以下应用程序会出现这个提示：

* 使用任何可以访问私人数据的权限范围（Gmail、Drive、GCP、BigQuery...）
* 用户少于 100 个的应用程序（> 100 用户的应用程序也需要一个审查过程才能停止显示未验证提示）

### 有趣的权限范围

[**这里**](https://developers.google.com/identity/protocols/oauth2/scopes)您可以找到所有 Google OAuth 权限范围的列表。

* **cloud-platform**：查看和管理您在**Google Cloud Platform**服务中的数据。您可以冒充用户在 GCP 中。
* **directory.readonly**：查看和下载您组织的 GSuite 目录。获取所有用户的姓名、电话、日历 URL。

## 参考资料

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - 黑客 G Suite：暗黑 Apps Script 魔法的力量
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch 和 Beau Bullock - OK Google，我如何红队 GSuite？

<details>

<summary><strong>从零开始学习 AWS 黑客技术，成为英雄</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS 红队专家)</strong></a><strong>！</strong></summary>

支持 HackTricks 的其他方式：

* 如果您想在 **HackTricks** 中看到您的**公司广告**或**下载 HackTricks 的 PDF**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方的 PEASS & HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们独家的[**NFTs 集合**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass) 或在 **Twitter** 🐦 上**关注**我 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来分享您的黑客技巧。

</details>
