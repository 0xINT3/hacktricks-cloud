# GWS - 権限昇格後の活動

<details>

<summary><strong>AWSハッキングをゼロからヒーローまで学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください。
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する。
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見する。私たちの独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクション。
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)を**フォローする**。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有する。

</details>

## Googleグループの権限昇格

デフォルトでは、Workspace内の**グループ**は組織のメンバーなら誰でも**自由にアクセス**できます。\
Workspaceでは**グループに権限を付与**することも可能です（GCP権限も含む）。そのため、グループに参加できて追加の権限がある場合、攻撃者はその道を悪用して**権限を昇格**させる可能性があります。

組織内の誰でも参加できるグループに参加するためには、コンソールへのアクセスが必要になることがあります。[**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)でグループ情報を確認してください。

### グループメール情報へのアクセス

Googleユーザーセッションを**侵害**した場合、[**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)からユーザーがメンバーであるメールグループに送信されたメールの履歴を見ることができ、**認証情報**やその他の**機密データ**を見つけることができるかもしれません。

## GCP <--> GWS ピボット

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Takeout - アカウントに関するGoogleの情報をすべてダウンロードする

被害者のGoogleアカウント内に**セッション**がある場合、[**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)からそのアカウントについてGoogleが保存しているすべての情報をダウンロードできます。

## Vault - ユーザーのWorkspaceデータをすべてダウンロードする

組織で**Google Vaultが有効**になっている場合、[**https://vault.google.com**](https://vault.google.com/u/1/)にアクセスして、すべての**情報**を**ダウンロード**することができるかもしれません。

## 連絡先のダウンロード

[**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es\&tab=mC)からユーザーのすべての**連絡先**をダウンロードできます。

## Cloudsearch

[**https://cloudsearch.google.com/**](https://cloudsearch.google.com)では、ユーザーがアクセスできるすべてのWorkspaceコンテンツ（メール、ドライブ、サイトなど）を検索できます。**機密情報**を**迅速に見つける**のに理想的です。

## Google Chat

[**https://mail.google.com/chat**](https://mail.google.com/chat)でGoogle **Chat**にアクセスでき、会話の中に機密情報があるかもしれません（もしあれば）。

## Google Driveのマイニング

ドキュメントを**共有**する際に、アクセスできる**人々**を一人ひとり**指定**するか、**リンクを生成**して**会社全体**（**または**特定の**グループ**）と**共有**することができます。

ドキュメントを共有する際、詳細設定でこのファイルを検索できるように**許可**することもできます（**デフォルト**では**無効**）。ただし、一度ユーザーがドキュメントを閲覧すると、それは彼らによって検索可能になることに注意が必要です。

簡単のために、ほとんどの人はリンクを生成して共有する代わりに、ドキュメントにアクセスできる人々を一人ひとり追加することを選びます。

すべてのドキュメントを見つけるための提案された方法:

* 内部チャット、フォーラムなどで検索する。
* 既知の**ドキュメント**を**スパイダー**して他のドキュメントへの**参照**を探す。これはApp Script内で[**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)を使って行うことができます。

## **Keep Notes**

[**https://keep.google.com/**](https://keep.google.com)でユーザーのノートにアクセスでき、ここに**機密情報**が保存されている可能性があります。

### App Scriptsの変更

[**https://script.google.com/**](https://script.google.com/)でユーザーのAPPスクリプトを見つけることができます。

## **Workspaceの管理**

[**https://admin.google.com**/](https://admin.google.com)で、十分な権限があれば、組織全体のWorkspace設定を変更することができるかもしれません。

また、[**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)でユーザーのすべての請求書を検索することによってメールを見つけることもできます。

## 参考文献

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - G Suiteのハッキング: Dark Apps Script Magicの力
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch and Beau Bullock - OK Google, GSuiteのレッドチームはどうやって行うの？

<details>

<summary><strong>AWSハッキングをゼロからヒーローまで学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください。
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する。
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見する。私たちの独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクション。
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)を**フォローする**。
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有する。

</details>
