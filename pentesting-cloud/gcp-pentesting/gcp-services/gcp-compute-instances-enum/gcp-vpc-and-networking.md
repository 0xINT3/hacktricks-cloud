# GCP - VPC рдФрд░ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **рддреБрд░рдВрдд** рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ рдлреЙрд▓реЛ рдХрд░реЗрдВ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks рдФрд░ HackTricks Cloud** рдЧрд┐рдЯрд╣рдм рд░реЗрдкреЛ рдореЗрдВ **рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗ**ред

</details>

## **GCP рдХрдВрдкреНрдпреВрдЯ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ**

**VPCs** рдореЗрдВ **рдлрд╝рд╛рдпрд░рд╡реЙрд▓** рдирд┐рдпрдо рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ VPC рдХреЛ рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрддреЗ рд╣реИрдВред VPCs рдореЗрдВ **рд╕рдмрдиреЗрдЯрд╡рд░реНрдХ** рднреА рд╣реЛрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ **рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди** рдХрдиреЗрдХреНрдЯ рд╣реЛрддреА рд╣реИрдВред\
AWS рдХреА рддреБрд▓рдирд╛ рдореЗрдВ, **рдлрд╝рд╛рдпрд░рд╡реЙрд▓** рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣реЛрдВ рдХреЗ рдирдЬрджреАрдХреА рдЪреАрдЬ рд╣реЛрдЧреА, рд▓реЗрдХрд┐рди рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдпреЗ **VPC рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╣реЛрддреЗ рд╣реИрдВ** рдФрд░ рд╣рд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдореЗрдВ рдирд╣реАрдВред

## **GCP рдореЗрдВ VPC, рд╕рдмрдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдлрд╝рд╛рдпрд░рд╡реЙрд▓**

рдХрдВрдкреНрдпреВрдЯ рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝ **рд╕рдмрдиреЗрдЯрд╡рд░реНрдХ** рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ **VPCs** ([рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреНрд▓рд╛рдЙрдб](https://cloud.google.com/vpc/docs/vpc)) рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрддреЗ рд╣реИрдВред GCP рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдпрд╣рд╛рдВ [**VPC рдлрд╝рд╛рдпрд░рд╡реЙрд▓**](https://cloud.google.com/vpc/docs/firewalls) рд╣реЛрддреЗ рд╣реИрдВ рдЬрд┐рдирдХреЗ рдирд┐рдпрдо рдЗрд╕ рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрддрд░ рдкрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╣реЛрддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рд╣рд░ VM рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддреЗ рд╣реИрдВред

### рд╕рдмрдиреЗрдЯрд╡рд░реНрдХ

рдПрдХ **VPC** рдореЗрдВ **рдХрдИ рд╕рдмрдиреЗрдЯрд╡рд░реНрдХ** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред рдкреНрд░рддреНрдпреЗрдХ **рд╕рдмрдиреЗрдЯрд╡рд░реНрдХ 1 рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ**ред

### рдлрд╝рд╛рдпрд░рд╡реЙрд▓

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рд╣рд░ рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рджреЛ [**рдирд┐рдпрдорд┐рдд рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо**](https://cloud.google.com/vpc/docs/firewalls#default\_firewall\_rules) рд╣реЛрддреЗ рд╣реИрдВ: **рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдХреА рдЕрдиреБрдорддрд┐** рдФрд░ **рдЗрдирдмрд╛рдЙрдВрдб рдХреА рдЕрдиреБрдорддрд┐**ред

рдЬрдм рдПрдХ GCP рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдПрдХ VPC рднреА рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИ рдЬрд┐рд╕рдХрд╛ рдирд╛рдо рд╣реЛрддрд╛ рд╣реИ **`default`**, рдЬрд┐рд╕рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо рд╣реЛрддреЗ рд╣реИрдВ:

* **default-allow-internal:** `default` рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдЕрдиреНрдп рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝ рд╕реЗ рд╕рднреА рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЕрдиреБрдорддрд┐
* **default-allow-ssh:** рд╣рд░ рдЬрдЧрд╣ рд╕реЗ 22 рдХреА рдЕрдиреБрдорддрд┐
* **default-allow-rdp:** рд╣рд░ рдЬрдЧрд╣ рд╕реЗ 3389 рдХреА рдЕрдиреБрдорддрд┐
* **default-allow-icmp:** рд╣рд░ рдЬрдЧрд╣ рд╕реЗ рдкрд┐рдВрдЧ рдХреА рдЕрдиреБрдорддрд┐

{% hint style="warning" %}
рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, **рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо** рдЖрдорддреМрд░ рдкрд░ **рдЖрдВрддрд░рд┐рдХ рдЖрдИрдкреА рдкрддреЛрдВ** рдХреЗ рд▓рд┐рдП **рдЕрдзрд┐рдХ рдкрд░рд╡рд╛рдирдЧреАрдкреВрд░реНрдг** рд╣реЛрддреЗ рд╣реИрдВред рдбрд┐рдлрд╝реЙрд▓реНрдЯ VPC рдХрдВрдкреНрдпреВрдЯ рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝ рдХреЗ рдмреАрдЪ рд╕рднреА рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред
{% endhint %}

рдбрд┐рдлрд╝реЙрд▓реНрдЯ VPC рдпрд╛ рдирдП VPC рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ **рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо** рдмрдирд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред [**рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо**](https://cloud.google.com/vpc/docs/firewalls) рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд **рддрд░реАрдХреЛрдВ** рд╕реЗ рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

* [**рдиреЗрдЯрд╡рд░реНрдХ рдЯреИрдЧ**](https://cloud.google.com/vpc/docs/add-remove-network-tags)
* [**рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ**](https://cloud.google.com/vpc/docs/firewalls#serviceaccounts)
* **VPC рдХреЗ рднреАрддрд░ рд╕рднреА рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝**

рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЦреБрд▓реЗ рдкреЛрд░реНрдЯреНрд╕ рд╡рд╛рд▓реЗ рд╕рднреА рдХрдВрдкреНрдпреВрдЯ рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝ рдХреЛ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рд▓ `gcloud` рдХрдорд╛рдВрдб рдирд╣реАрдВ рд╣реИред рдЖрдкрдХреЛ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо, рдиреЗрдЯрд╡рд░реНрдХ рдЯреИрдЧ, рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдФрд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝ рдХреЗ рдмреАрдЪ рд╕рдВрдмрдВрдз рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рд╣реЛрдВрдЧреЗред

рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ [рдЗрд╕ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ](https://gitlab.com/gitlab-com/gl-security/gl-redteam/gcp\_firewall\_enum) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛
## рд╕рдВрджрд░реНрдн

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)
* [https://cloud.google.com/vpc/docs/firewall-policies-overview#rule-evaluation](https://cloud.google.com/vpc/docs/firewall-policies-overview#rule-evaluation)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ рдЯреНрд╡рд┐рдЯрд░ рдкрд░ рдлрд╝реЙрд▓реЛ рдХрд░реЗрдВ** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред

</details>
