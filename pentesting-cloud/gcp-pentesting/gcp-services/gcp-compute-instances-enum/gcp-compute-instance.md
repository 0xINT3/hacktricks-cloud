# GCP - рдХрдВрдкреНрдпреВрдЯ рдЗрдВрд╕реНрдЯреЗрдВрд╕

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **рддрд╛рдЬрдЧреА** рдХреЗ рд▓рд┐рдП **рдореЗрд░рд╛ рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдкрд╛рд▓рди** рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks рдХреЛ PR рдЬрдорд╛ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

### рдЧреЛрдкрдиреАрдп VM

рдЧреЛрдкрдиреАрдп VMs рдирд╡реАрдирддрдо рдкреАрдврд╝реА рдХреЗ AMD EPYC рдкреНрд░реЛрд╕реЗрд╕рд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА **рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рдЖрдзрд╛рд░рд┐рдд рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрд╡рд┐рдзрд╛рдПрдВ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рдореЗрдореЛрд░реА рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдпреЗ рд╕реБрд╡рд┐рдзрд╛рдПрдВ VM рдХреЛ рдбреЗрдЯрд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреА рд╣реИрдВ рдЬреЛ рдЗрд╕рдореЗрдВ рдкреНрд░реЛрд╕реЗрд╕ рдХреА рдЬрд╛рддреА рд╣реИ рдФрд░ рдЬрд┐рд╕реЗ рдЗрд╕рдореЗрдВ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд╣реЛрд╕реНрдЯ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдФрд░ рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рднреА рдирд╣реАрдВ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред

рдЧреЛрдкрдиреАрдп VM рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ **рдорд╢реАрди рдХреЗ рдкреНрд░рдХрд╛рд░**, рдиреЗрдЯрд╡рд░реНрдХ **рдЗрдВрдЯрд░рдлрд╝реЗрд╕**, **рдмреВрдЯ рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬ** рдЬреИрд╕реА рдЪреАрдЬреЗрдВ рдмрджрд▓рдиреА рдкрдбрд╝ рд╕рдХрддреА рд╣реИрдВред

### рдбрд┐рд╕реНрдХ рдФрд░ рдбрд┐рд╕реНрдХ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди

рдЗрд╕реЗ **рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ рдХрд╛ рдЪрдпрди** рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдпрд╛ **рдирдпрд╛ рдмрдирд╛рдирд╛** рд╕рдВрднрд╡ рд╣реИред рдпрджрд┐ рдЖрдк рдирдпрд╛ рдЪреБрдирддреЗ рд╣реИрдВ рддреЛ рдЖрдк:

* рдбрд┐рд╕реНрдХ рдХрд╛ **рдЖрдХрд╛рд░ рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ**
* **рдУрдПрд╕** рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ
* рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╣рдЯрд╛рдП рдЬрд╛рдиреЗ рдкрд░ рдбрд┐рд╕реНрдХ рдХреЛ **рд╣рдЯрд╛рдирд╛ рдЪрд╛рд╣реЗрдВ** рдпрд╛ рдирд╣реАрдВ
* **рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди**: **рдбрд┐рдлрд╝реЙрд▓реНрдЯ** рд░реВрдк рд╕реЗ рдПрдХ **Google рджреНрд╡рд╛рд░рд╛ рдкреНрд░рдмрдВрдзрд┐рдд рдХреБрдВрдЬреА** рдХрд╛ рдЙрдкрдпреЛрдЧ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдЖрдк KMS рд╕реЗ **рдХреБрдВрдЬреА рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рдпрд╛ **рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдЪреНрдЪреА рдХреБрдВрдЬреА рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред

### рдХрдВрдЯреЗрдирд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░реЗрдВ

рдирд┐рд░реНрдорд┐рдд рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ рдПрдХ рдХрдВрдЯреЗрдирд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдФрд░ рдЗрд╕ рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓рд┐рдП рдХрдИ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ, stdin, pseudo TTY...

### рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, **рдХрдВрдкреНрдпреВрдЯ рдЗрдВрдЬрди рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛** рдХрд╛ рдЙрдкрдпреЛрдЧ рд╣реЛрдЧрд╛ред рдЗрд╕ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХрд╛ рдИрдореЗрд▓ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реЛрддрд╛ рд╣реИ: `<proj-num>-compute@developer.gserviceaccount.com`\
рдЗрд╕ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХрд╛ **рд╕рдВрдкрд╛рджрдХ рднреВрдорд┐рдХрд╛ рдкреВрд░реЗ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдкрд░ рд╣реЛрддреА рд╣реИ (рдЙрдЪреНрдЪ рдЕрдзрд┐рдХрд╛рд░)**ред

рдФрд░ **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдк** рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣реИрдВ:

* **https://www.googleapis.com/auth/devstorage.read\_only** -- рдмрдХреЗрдЯ рдХреЗ рд▓рд┐рдП рдкрдврд╝рдиреЗ рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ :)
* https://www.googleapis.com/auth/logging.write
* https://www.googleapis.com/auth/monitoring.write
* https://www.googleapis.com/auth/servicecontrol
* https://www.googleapis.com/auth/service.management.readonly
* https://www.googleapis.com/auth/trace.append

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕реЗ **рдПрдХ рдХреНрд▓рд┐рдХ рдХреЗ рд╕рд╛рде `cloud-platform` рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** рдпрд╛ **рдХрд╕реНрдЯрдо рд╡рд╛рд▓реЗ** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред

### рдлрд╝рд╛рдпрд░рд╡реЙрд▓

HTTP рдФрд░ HTTPS рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛ рд╕рдХрддреА рд╣реИ

### IP рдлрд╝реЙрд░рд╡рд░реНрдбрд┐рдВрдЧ

рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рдирд┐рд░реНрдорд╛рдг рд╕реЗ **IP рдлрд╝реЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рд╕рдХреНрд╖рдо** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реБрд░рдХреНрд╖рд╛

рдпреЗ рд╡рд┐рдХрд▓реНрдк VM рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ **рдмрдврд╝рд╛рдПрдВрдЧреЗ** рдФрд░ рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ:

* **рд╕реБрд░рдХреНрд╖рд┐рдд рдмреВрдЯ**
* **vTPM рд╕рдХреНрд╖рдо рдХрд░реЗрдВ**
* **рдЕрдЦрдВрдбрддрд╛ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдг**

### VM рдПрдХреНрд╕реЗрд╕

VM рдХреЛ рдПрдХреНрд╕реЗрд╕ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХрд╛ рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХрд╛ рд╣реИ **рдирд┐рд╢реНрдЪрд┐рдд SSH рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреБрдВрдЬреАрдпреЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдирд╛**ред\
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕реЗ рдЗрд╕ рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ VM рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ **IAM рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ os-config рд╕реЗрд╡рд╛ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП** рднреА рд╕рдВрднрд╡ рд╣реИред рдЗрд╕ рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ VM рддрдХ рдкрд╣реБрдВрдЪ рдХреЛ 2FA рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рднреА рд╕рдВрднрд╡ рд╣реИред\
рдЬрдм рдпрд╣ **рд╕реЗрд╡рд╛ рд╕рдХреНрд╖рдо рд╣реЛрддреА рд╣реИ**, рддреЛ **SSH рдХреБрдВрдЬреАрдпреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╣реБрдВрдЪ рдЕрдХреНрд╖рдо рд╣реЛ рдЬрд╛рддреА рд╣реИ**ред

### рдореЗрдЯрд╛рдбреЗрдЯрд╛

**рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛** рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ: рд╣рд░ рдмрд╛рд░ рдорд╢реАрди рдЪрд╛рд▓реВ рд╣реЛрдиреЗ рдпрд╛ рдкреБрдирд░рд╛рд░рдВрдн рд╣реЛрдиреЗ рдкрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ **рд╢реИрд▓ рдХрдорд╛рдВрдб**ред

рдпрд╣ рднреА рд╕рдВрднрд╡ рд╣реИ рдХрд┐ **рдЕрддрд┐рд░рд┐рдХреНрдд рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреБ
```bash
# view project metadata
curl "http://metadata.google.internal/computeMetadata/v1/project/attributes/?recursive=true&alt=text" \
-H "Metadata-Flavor: Google"

# view instance metadata
curl "http://metadata.google.internal/computeMetadata/v1/instance/attributes/?recursive=true&alt=text" \
-H "Metadata-Flavor: Google"
```
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, **рд╕рдВрд▓рдЧреНрди рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЯреЛрдХрди** рдФрд░ **рдЗрдВрд╕реНрдЯреЗрдВрд╕, рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдп рдЬрд╛рдирдХрд╛рд░реА** рднреА **рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ** рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реЛрдЧреАред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:&#x20;

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ рдлрд╝реЙрд▓реЛ рдХрд░реЗрдВ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред

</details>
