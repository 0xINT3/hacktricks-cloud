# GCP - Compute Instance

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

рдЕрдиреНрдп рддрд░реАрдХреЗ HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ **рдореБрдЭреЗ рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>

### Confidential VM

Confidential VMs **рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рдЖрдзрд╛рд░рд┐рдд рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрд╡рд┐рдзрд╛рдУрдВ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ AMD EPYC рдкреНрд░реЛрд╕реЗрд╕рд░реНрд╕ рдХреА рдирд╡реАрдирддрдо рдкреАрдврд╝реА рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдореЗрдореЛрд░реА рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдпреЗ рд╕реБрд╡рд┐рдзрд╛рдПрдБ VM рдХреЛ рдЗрд╕рдХреЗ рднреАрддрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдФрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдбреЗрдЯрд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рддреА рд╣реИрдВ, рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд╣реЛрд╕реНрдЯ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдФрд░ рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд░ рд╕реЗ рднреАред

Confidential VM рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП **рдорд╢реАрди рдХреЗ рдкреНрд░рдХрд╛рд░**, рдиреЗрдЯрд╡рд░реНрдХ **рдЗрдВрдЯрд░рдлреЗрд╕**, **рдмреВрдЯ рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬ** рдЬреИрд╕реА рдЪреАрдЬреЛрдВ рдореЗрдВ **рдкрд░рд┐рд╡рд░реНрддрди** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред

### Disk & Disk Encryption

рдЖрдк **рдбрд┐рд╕реНрдХ рдХрд╛ рдЪрдпрди** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ **рдирдпрд╛ рдПрдХ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ**ред рдпрджрд┐ рдЖрдк рдирдпрд╛ рдЪреБрдирддреЗ рд╣реИрдВ рддреЛ рдЖрдк:

* рдбрд┐рд╕реНрдХ рдХрд╛ **рдЖрдХрд╛рд░** рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ
* **OS** рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ
* рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ рд╣рдЯрд╛рдП рдЬрд╛рдиреЗ рдкрд░ **рдбрд┐рд╕реНрдХ рдХреЛ рднреА рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдП**
* **рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди**: **рдбрд┐рдлрд╝реЙрд▓реНрдЯ** рд░реВрдк рд╕реЗ **Google рдкреНрд░рдмрдВрдзрд┐рдд рдХреБрдВрдЬреА** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдЖрдк **KMS рд╕реЗ рдХреБрдВрдЬреА рдЪреБрди** рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ **рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдХрдЪреНрдЪреА рдХреБрдВрдЬреА рдЗрдВрдЧрд┐рдд рдХрд░** рд╕рдХрддреЗ рд╣реИрдВред

### Deploy Container

рдмрдирд╛рдИ рдЧрдИ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ рдПрдХ рдХрдВрдЯреЗрдирд░ рдХреЛ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдФрд░ рдЗрд╕ рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓рд┐рдП рдХрдИ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬреНрдб рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛, stdin, рдкреНрд╕реНрдпреВрдбреЛ TTY...

### Service Account

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, **Compute Engine рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдЗрд╕ SA рдХрд╛ рдИрдореЗрд▓ рдЗрд╕ рддрд░рд╣ рд╣реЛрдЧрд╛: `<proj-num>-compute@developer.gserviceaccount.com`\
рдЗрд╕ рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рдкрд╛рд╕ рдкреВрд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд░ **Editor рд░реЛрд▓ (рдЙрдЪреНрдЪ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░)** рд╣реЛрддрд╛ рд╣реИред

рдФрд░ **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдХреНрд╕реЗрд╕ рд╕реНрдХреЛрдкреНрд╕** рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣реИрдВ:

* **https://www.googleapis.com/auth/devstorage.read\_only** -- рдмрдХреЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдкрдврд╝рдиреЗ рдХреА рдкрд╣реБрдВрдЪ :)
* https://www.googleapis.com/auth/logging.write
* https://www.googleapis.com/auth/monitoring.write
* https://www.googleapis.com/auth/servicecontrol
* https://www.googleapis.com/auth/service.management.readonly
* https://www.googleapis.com/auth/trace.append

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕реЗ **`cloud-platform` рдХреЗ рд╕рд╛рде рдПрдХ рдХреНрд▓рд┐рдХ рд╕реЗ рдЕрдиреБрджрд╛рди рджреЗрдирд╛** рд╕рдВрднрд╡ рд╣реИ рдпрд╛ **рдХрд╕реНрдЯрдо рд╡рд╛рд▓реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛** рд╕рдВрднрд╡ рд╣реИред

### Firewall

HTTP рдФрд░ HTTPS рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдирд╛ рд╕рдВрднрд╡ рд╣реИред

### IP Forwarding

рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рдирд┐рд░реНрдорд╛рдг рд╕реЗ **IP рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдирд╛** рд╕рдВрднрд╡ рд╣реИред

### Extra Security

рдпреЗ рд╡рд┐рдХрд▓реНрдк VM рдХреА рд╕реБрд░рдХреНрд╖рд╛ **рдмрдврд╝рд╛рдПрдВрдЧреЗ** рдФрд░ рдЕрдиреБрд╢рдВрд╕рд┐рдд рд╣реИрдВ:

* **рд╕реБрд░рдХреНрд╖рд┐рдд рдмреВрдЯ**
* **vTPM рд╕рдХреНрд╖рдо рдХрд░реЗрдВ**
* **рдЕрдЦрдВрдбрддрд╛ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдг**

### VM Access

VM рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХрд╛ рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХрд╛ **рдХреБрдЫ SSH рдкрдмреНрд▓рд┐рдХ рдХреАрдЬрд╝ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдирд╛** рд╣реИред\
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рднреА рд╕рдВрднрд╡ рд╣реИ рдХрд┐ **`os-config` рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ VM рддрдХ рдкрд╣реБрдВрдЪ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ IAM рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ**ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕ рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ VM рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП 2FA рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред\
рдЬрдм рдпрд╣ **рд╕реЗрд╡рд╛** **рд╕рдХреНрд╖рдо** рд╣реЛрддреА рд╣реИ, рддреЛ **SSH рдХреАрдЬрд╝ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╣реБрдВрдЪ рдЕрдХреНрд╖рдо рд╣реЛ рдЬрд╛рддреА рд╣реИред**

### Metadata

**userdata** рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ: **Shell commands** рдЬреЛ рд╣рд░ рдмрд╛рд░ рдорд╢реАрди рдЪрд╛рд▓реВ рд╣реЛрдиреЗ рдпрд╛ рдкреБрдирдГ рдЖрд░рдВрдн рд╣реЛрдиреЗ рдкрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред

рдпрд╣ рднреА рд╕рдВрднрд╡ рд╣реИ рдХрд┐ **рдЕрддрд┐рд░рд┐рдХреНрдд рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреБрдВрдЬреА-рдореВрд▓реНрдп рдорд╛рдиреЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ** рдЬреЛ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╕реЗ рд╕реБрд▓рдн рд╣реЛрдВрдЧреЗред рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдЖрдорддреМрд░ рдкрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдФрд░ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк/рд╢рдЯрдбрд╛рдЙрди рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕реЗ **`describe` method** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдХрдорд╛рдВрдб рд╕реЗ рдПрдиреНрдпреВрдорд░реЗрд╢рди рд╕реЗрдХреНрд╢рди рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рдЕрдВрджрд░ рд╕реЗ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ рддрдХ рдкрд╣реБрдВрдЪрдХрд░ рднреА рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
```bash
# view project metadata
curl "http://metadata.google.internal/computeMetadata/v1/project/attributes/?recursive=true&alt=text" \
-H "Metadata-Flavor: Google"

# view instance metadata
curl "http://metadata.google.internal/computeMetadata/v1/instance/attributes/?recursive=true&alt=text" \
-H "Metadata-Flavor: Google"
```
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, **рд╕рдВрд▓рдЧреНрди рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рдорд╛рдгрди рдЯреЛрдХрди** рдФрд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕, рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ **рд╕рд╛рдорд╛рдиреНрдп рдЬрд╛рдирдХрд╛рд░реА** рднреА **рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ** рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реЛрдиреЗ рд╡рд╛рд▓реА рд╣реИред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**ред
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>
