# GCP - App Engine Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahramana kadar AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)'ı takip edin.
* Hacking hilelerinizi göndererek HackTricks ve HackTricks Cloud github reposuna **katkıda bulunun**.

</details>

## Temel Bilgiler <a href="#reviewing-app-engine-configurations" id="reviewing-app-engine-configurations"></a>


Google Cloud Platform'un (GCP) App Engine'i, **büyük ölçekte web uygulamalarının geliştirilmesi ve barındırılması için tasarlanmış güçlü, sunucusuz bir platformdur**. Bu platformun tasarımı, geliştirme sürecini basitleştirmeye ve uygulamaların yönetilebilirliğini artırmaya odaklanmaktadır. GCP'nin App Engine'inin temel özellikleri ve faydaları şunlardır:

1. **Sunucusuz Mimarisi**: App Engine, sunucu sağlama, yapılandırma ve ölçeklendirme dahil olmak üzere altyapıyı otomatik olarak yönetir. Bu, geliştiricilerin altta yatan donanımla ilgilenmeden kod yazmaya odaklanmasını sağlar.
2. **Otomatik Ölçeklendirme**: App Engine, uygulamanızın aldığı trafiğe yanıt olarak otomatik olarak ölçeklendirilebilir. Trafik arttığında ölçeklendirilir ve trafik azaldığında ölçek küçültülerek maliyeti ve performansı optimize etmeye yardımcı olur.
3. **Dil ve Çalışma Zamanı Desteği**: Java, Python, Node.js, Go, Ruby, PHP ve .NET gibi popüler programlama dillerini destekler. Uygulamalarınızı standart veya esnek bir ortamda çalıştırabilirsiniz. Standart ortam, daha kısıtlayıcıdır, ancak belirli diller için yüksek optimize edilmiştir, esnek ortam ise daha fazla özelleştirme imkanı sunar.
4. **Entegre Hizmetler**: App Engine, Cloud SQL, Cloud Storage, Cloud Datastore ve daha birçok GCP hizmetiyle entegre çalışır. Bu entegrasyon, bulut tabanlı uygulamaların mimarisini basitleştirir.
5. **Sürümleme ve Trafik Bölümlendirme**: Uygulamanızın birden fazla sürümünü kolayca dağıtabilir ve ardından A/B testi veya aşamalı dağıtımlar için bunlar arasında trafik bölümlendirebilirsiniz.
6. **Uygulama İzleme**: App Engine, günlükleme, kullanıcı kimlik doğrulama ve uygulamaları izlemek ve yönetmek için bir dizi geliştirici aracı gibi yerleşik hizmetler sağlar.
7. **Güvenlik**: Uygulama sürümleme, güvenli bağlantılar için SSL/TLS sertifikaları ve kimlik ve erişim yönetimi gibi yerleşik güvenlik özellikleri sunar.

### Güvenlik Duvarı

Uygulamaları çalıştıran örnekler için basit bir **güvenlik duvarı** aşağıdaki seçeneklerle yapılandırılabilir:

<figure><img src="../../../.gitbook/assets/image (3) (1) (2).png" alt=""><figcaption></figcaption></figure>

### SA

Bu Uygulamalar tarafından kullanılan varsayılan hizmet hesabı **`<proj-name>@appspot.gserviceaccount.com`**'dur ve projeye ve APP Engine örneğindeki SA'lara **Editor** rolüne sahiptir.

### Depolama

Kaynak kodu ve meta verileri, `<proj-id>.appspot.com` ve `staging.<proj-id>.appspot.com` ve `<country>.<proj-id>.appspot.com` gibi adlara sahip kovalarda **otomatik olarak depolanır**.

Uygulamanın **her dosyası**, içeriğin sha1'i ile dosya adı olarak depolanır:

<figure><img src="../../../.gitbook/assets/image (4) (6).png" alt=""><figcaption></figcaption></figure>

`staging.<proj-id>.appspot.com` klasöründeki **`ae`** klasörü içinde, **her sürüm için bir klasör** bulunur ve bu klasörde uygulamanın **kaynak kodu** dosyaları ve **`manifest.json`** dosyası bulunur, bu dosya uygulamanın bileşenlerini tanımlar:

{% code overflow="wrap" %}
```json
{"requirements.txt":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/a270eedcbe2672c841251022b7105d340129d108","sha1Sum":"a270eedc_be2672c8_41251022_b7105d34_0129d108"},"main_test.py":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/0ca32fd70c953af94d02d8a36679153881943f32","sha1Sum":"0ca32fd7_0c953af9_4d02d8a ...
```
{% endcode %}

### Konteynerler

Web uygulaması sonunda bir konteyner içinde **çalıştırılacak** ve konteyneri oluşturmak için **Code Build** kullanılır.

### URL'ler ve Bölgeler

**Varsayılan** web sayfası URL **`<proje-benzersiz-adı>.appspot.com`** şeklinde açığa çıkarılacak, ancak daha eski sürümlerin URL'si biraz farklı olabilir, örneğin **`https://20240117t001540-dot-<proje-benzersiz-adı>.uc.r.appspot.com`** (başlangıç zaman damgasına dikkat edin).

Tek bir bölgeye yalnızca 1 uygulama motoru web uygulaması dağıtmanın mümkün olduğu gibi görünebilir, ancak **`app.yml`** içinde **`service: <servisadı>`** belirtebilir ve yeni bir servis (yeni bir web) oluşturabilirsiniz. Bu yeni web için URL formatı **`<servisadı>-dot-<proje-benzersiz-adı>.appspot.com`** olacaktır.

### Numaralandırma

{% hint style="danger" %}
Her yeni kodu App'e yüklediğinizde, **yeni bir sürüm oluşturulur**. **Tüm sürümler saklanır** ve hatta bunlara erişmek için bir **URL'leri vardır**. Bu nedenle, eski bir sürümün kodunu değiştirmek büyük bir kalıcılık tekniği olabilir.
{% endhint %}

Cloud Functions ile olduğu gibi, uygulamanın çalışma zamanında erişilen gizli bilgilere dayanabileceği bir olasılık vardır. Bu değişkenler, aşağıdaki gibi erişilebilen bir **`app.yaml`** dosyasında saklanır:
```bash
# List the apps
gcloud app services list
gcloud app services describe <app-name>
# Access via browser to the specified app
gcloud app services browse <app-name>

# Get App versions
gcloud app versions list
# Get all the info of the app and version, included specific verion URL and the env
gcloud app versions describe -s <app-name> <version-id>

# Logs
gcloud app logs tail -s <app-name>

# Instances
## This is only valid if a flexible environment is used and not a standard one
gcloud app instances list
gcloud app instances describe -s <app-name> --version <version-id> <ID>
## Connect to the instance via ssh
gcloud app instances ssh --service <app-name> --version <version-id> <ID>

# Firewalls
gcloud app firewall-rules list
gcloud app firewall-rules describe <num_fw>

# Get domains
gcloud app domain-mappings list
gcloud app domain-mappings describe <name>

# SSl certificates
gcloud app ssl-certificates list
gcloud app ssl-certificates describe <name>
```
### Yetki Yükseltme

{% content-ref url="../gcp-privilege-escalation/gcp-appengine-privesc.md" %}
[gcp-appengine-privesc.md](../gcp-privilege-escalation/gcp-appengine-privesc.md)
{% endcontent-ref %}

### Kimlik Doğrulaması Yapılmamış Enum

{% content-ref url="../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md" %}
[gcp-app-engine-unauthenticated-enum.md](../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md)
{% endcontent-ref %}

### Saldırı Sonrası

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-app-engine-post-exploitation.md" %}
[gcp-app-engine-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-app-engine-post-exploitation.md)
{% endcontent-ref %}

### Kalıcılık

{% content-ref url="../../gcp-security/gcp-persistence/gcp-app-engine-persistence.md" %}
[gcp-app-engine-persistence.md](../../gcp-security/gcp-persistence/gcp-app-engine-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya bizi **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da takip edin.**
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>
