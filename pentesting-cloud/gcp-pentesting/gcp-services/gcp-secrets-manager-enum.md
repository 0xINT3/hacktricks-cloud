# GCP - Απαρίθμηση του Secrets Manager

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF**, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Secret Manager

Το [**Secret Manager**](https://cloud.google.com/solutions/secrets-management/) της Google είναι μια λύση αποθήκευσης για κωδικούς πρόσβασης, κλειδιά API, πιστοποιητικά, αρχεία (έως 64KB) και άλλα ευαίσθητα δεδομένα, παρόμοια με έναν θησαυροφυλάκιο.

Ένα μυστικό μπορεί να έχει **διάφορες εκδόσεις που αποθηκεύουν διαφορετικά δεδομένα**.

Τα μυστικά από προεπιλογή είναι **κρυπτογραφημένα χρησιμοποιώντας ένα διαχειριζόμενο κλειδί της Google**, αλλά είναι **δυνατόν να επιλεγεί ένα κλειδί από το KMS** για να χρησιμοποιηθεί για την κρυπτογράφηση του μυστικού.

Όσον αφορά την **περιστροφή**, είναι δυνατόν να διαμορφωθούν **μηνύματα που θα αποστέλλονται στο pub-sub κάθε αριθμό ημερών**, ο κώδικας που ακούει αυτά τα μηνύματα μπορεί να **περιστρέψει το μυστικό**.

Είναι δυνατόν να διαμορφωθεί μια ημέρα για την **αυτόματη διαγραφή**, όταν η καθορισμένη ημέρα **φτάσει**, το **μυστικό θα διαγραφεί αυτόματα**.

### Απαρίθμηση
```bash
# First, list the entries
gcloud secrets list
gcloud secrets get-iam-policy <secret_name>

# Then, pull the clear-text of any version of any secret
gcloud secrets versions list <secret_name>
gcloud secrets versions access 1 --secret="<secret_name>"
```
### Ανέβασμα Προνομίων

Στην ακόλουθη σελίδα μπορείτε να ελέγξετε πώς να **καταχραστείτε τα δικαιώματα του secretmanager για να ανεβάσετε προνόμια.**

{% content-ref url="../../gcp-security/gcp-privilege-escalation/gcp-secretmanager-privesc.md" %}
[gcp-secretmanager-privesc.md](../../gcp-security/gcp-privilege-escalation/gcp-secretmanager-privesc.md)
{% endcontent-ref %}

### Μετά την Εκμετάλλευση

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-secretmanager-post-exploitation.md" %}
[gcp-secretmanager-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-secretmanager-post-exploitation.md)
{% endcontent-ref %}

### Διατήρηση

{% content-ref url="../../gcp-security/gcp-persistence/gcp-secret-manager-persistence.md" %}
[gcp-secret-manager-persistence.md](../../gcp-security/gcp-persistence/gcp-secret-manager-persistence.md)
{% endcontent-ref %}

### Κατάχρηση Περιστροφής

Ένας επιτιθέμενος μπορεί να ενημερώσει το μυστικό για να **σταματήσει τις περιστροφές** (ώστε να μην τροποποιηθεί), ή να **κάνει περιστροφές πολύ λιγότερο συχνά** (ώστε το μυστικό να μην τροποποιηθεί) ή να **δημοσιεύσει το μήνυμα περιστροφής σε διαφορετικό pub/sub**, ή να τροποποιήσει τον κώδικα περιστροφής που εκτελείται (αυτό συμβαίνει σε ένα διαφορετικό υπηρεσία, πιθανώς σε μια Cloud Function, οπότε ο επιτιθέμενος θα χρειαστεί προνομιακή πρόσβαση στη Cloud Function ή οποιαδήποτε άλλη υπηρεσία)

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** Ελέγξτε τα [**ΠΑΚΕΤΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
