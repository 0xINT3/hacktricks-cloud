# Kubernetes рд░реЛрд▓-рдЖрдзрд╛рд░рд┐рдд рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг (RBAC)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ **рддреБрд░рдВрдд** рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ рдлрд╝реЙрд▓реЛ рдХрд░реЗрдВ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## рд░реЛрд▓-рдЖрдзрд╛рд░рд┐рдд рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг (RBAC)

Kubernetes рдореЗрдВ рдПрдХ **рдЕрдзрд┐рдХреГрддрд┐ рдореЙрдбреНрдпреВрд▓ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдирд╛рдо рд░реЛрд▓-рдЖрдзрд╛рд░рд┐рдд рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг (RBAC)** рд╣реИ рдЬреЛ API рд╕рд░реНрд╡рд░ рдХреЛ рдЙрдкрдпреЛрдЧ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕реЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред

RBAC рдХреА рдЕрдиреБрдорддрд┐ рдореЙрдбрд▓ рддреАрди рдЕрд▓рдЧ-рдЕрд▓рдЧ рднрд╛рдЧреЛрдВ рд╕реЗ рдорд┐рд▓рдХрд░ рдмрдиреА рд╣реЛрддреА рд╣реИ:

1. **рд░реЛрд▓/рдХреНрд▓рд╕реНрдЯрд░рд░реЛрд▓ -** рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрдорддрд┐ред рдЗрд╕рдореЗрдВ _**рдирд┐рдпрдо**_ рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ рд╕реЗрдЯ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рддрд┐рд╖реНрдард╛рдирд┐рдд рдХрд░рддреЗ рд╣реИрдВред рдкреНрд░рддреНрдпреЗрдХ рдирд┐рдпрдо рдореЗрдВ [рд╕рдВрд╕рд╛рдзрди](https://kubernetes.io/docs/reference/kubectl/overview/#resource-types) рдФрд░ [рдХреНрд░рд┐рдпрд╛рдПрдБ](https://kubernetes.io/docs/reference/access-authn-authz/authorization/#determine-the-request-verb) рд╣реЛрддреА рд╣реИрдВред рдХреНрд░рд┐рдпрд╛ рд╕рдВрд╕рд╛рдзрди рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рд╡рд╛рд▓рд╛ рдХрд╛рд░реНрдп рд╣реИред
2. **рд╡рд┐рд╖рдп (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рд╕рдореВрд╣ рдпрд╛ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛) -** рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рд╡рд╕реНрддреБред
3. **рд░реЛрд▓рдмрд╛рдЗрдВрдбрд┐рдВрдЧ/рдХреНрд▓рд╕реНрдЯрд░рд░реЛрд▓рдмрд╛рдЗрдВрдбрд┐рдВрдЧ -** рд░реЛрд▓/рдХреНрд▓рд╕реНрдЯрд░рд░реЛрд▓ рдФрд░ рд╡рд┐рд╖рдп рдХреЗ рдмреАрдЪ рдХрдиреЗрдХреНрд╢рдиред

![](https://www.cyberark.com/wp-content/uploads/2018/12/rolebiding\_serviceaccount\_and\_role-1024x551.png)

"рд░реЛрд▓" рдФрд░ "рдХреНрд▓рд╕реНрдЯрд░рд░реЛрд▓" рдХреЗ рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░ рдХреЗрд╡рд▓ рдпрд╣ рд╣реИ рдХрд┐ рд░реЛрд▓ рдХреЗрд╡рд▓ **рдПрдХ** **рдирд┐рд╢реНрдЪрд┐рдд** **рдиреЗрдорд╕реНрдкреЗрд╕** рдХреЗ рд▓рд┐рдП рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛, рдЬрдмрдХрд┐ "рдХреНрд▓рд╕реНрдЯрд░рд░реЛрд▓" рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ **рд╕рднреА рдиреЗрдорд╕реНрдкреЗрд╕** рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, **рдХреНрд▓рд╕реНрдЯрд░рд░реЛрд▓** рджреНрд╡рд╛рд░рд╛ рдкрд╣реБрдБрдЪ рджреА рдЬрд╛ рд╕рдХрддреА рд╣реИ:

* **рдХреНрд▓рд╕реНрдЯрд░-рд╕реНрддрд░реАрдп** рд╕рдВрд╕рд╛рдзрди (рдЬреИрд╕реЗ рдиреЛрдбреНрд╕)ред
* **рдЧреИрд░-рд╕рдВрд╕рд╛рдзрди** рдЕрдВрдд-рдмрд┐рдВрджреБ (рдЬреИрд╕реЗ /healthz)ред
* рдиреЗрдорд╕реНрдкреЗрд╕рд╡рд╛рд░ рд╕рдВрд╕рд╛рдзрди (рдЬреИрд╕реЗ рдкреЙрдб), **рд╕рднреА рдиреЗрдорд╕реНрдкреЗрд╕** рдореЗрдВред

**Kubernetes** 1.6 рд╕реЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА **RBAC** рдиреАрддрд┐рдпрд╛рдБ **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рдХреНрд╖рдо** рд╣реИрдВред рд▓реЗрдХрд┐рди RBAC рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
kube-apiserver --authorization-mode=Example,RBAC --other-options --more-options
```
## рдЯреЗрдореНрдкрд▓реЗрдЯ

**Role** рдпрд╛ **ClusterRole** рдХреЗ рдЯреЗрдореНрдкрд▓реЗрдЯ рдореЗрдВ рдЖрдкрдХреЛ **рд░реЛрд▓ рдХрд╛ рдирд╛рдо**, **рдиреЗрдорд╕реНрдкреЗрд╕** (рд░реЛрд▓ рдореЗрдВ) рдФрд░ рдлрд┐рд░ рд░реЛрд▓ рдХреЗ **apiGroups**, **resources** рдФрд░ **verbs** рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА:

* **apiGroups** рдПрдХ рдРрд░реЗ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЗрд╕ рдирд┐рдпрдо рдХрд╛ рдкреНрд░рдпреЛрдЧ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рднрд┐рдиреНрди **API рдиреЗрдорд╕реНрдкреЗрд╕** рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ Pod рдкрд░рд┐рднрд╛рд╖рд╛ apiVersion: v1 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИред _рдЗрд╕рдореЗрдВ rbac.authorization.k8s.io рдпрд╛ \[\*] рдЬреИрд╕реЗ рдорд╛рдиреНрдпрддрд╛рдПрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ_ред
* **resources** рдПрдХ рдРрд░реЗ рд╣реИ рдЬреЛ **рдЗрд╕ рдирд┐рдпрдо рдХрд╛ рдкреНрд░рдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред рдЖрдк `kubectl api-resources --namespaced=true` рдХреЗ рд╕рд╛рде рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВред
* **verbs** рдПрдХ рдРрд░реЗ рд╣реИ рдЬрд┐рд╕рдореЗрдВ **рдЕрдиреБрдорддрд┐ рджреА рдЧрдИ рдХреНрд░рд┐рдпрд╛рдПрдВ** рд╢рд╛рдорд┐рд▓ рд╣реЛрддреА рд╣реИрдВред Kubernetes рдореЗрдВ рдХреНрд░рд┐рдпрд╛ рд╕рдВрд╕рд╛рдзрди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд╛ рдкреНрд░рдХрд╛рд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕реВрдЪреА рдХреНрд░рд┐рдпрд╛ рд╕рдВрдЧреНрд░рд╣реЛрдВ рдХреЗ рдЦрд┐рд▓рд╛рдл рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдмрдХрд┐ "рдкреНрд░рд╛рдкреНрдд" рдПрдХрд▓ рд╕рдВрд╕рд╛рдзрди рдХреЗ рдЦрд┐рд▓рд╛рдл рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

### рдирд┐рдпрдо рдХреНрд░рд┐рдпрд╛рдПрдВ

(_рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА_ [_**рдпрд╣рд╛рдВ рд╕реЗ рд▓реА рдЧрдИ рдереА**_](https://kubernetes.io/docs/reference/access-authn-authz/authorization/#determine-the-request-verb))

| HTTP рдХреНрд░рд┐рдпрд╛ | рдЕрдиреБрд░реЛрдз рдХреНрд░рд┐рдпрд╛                                                                                                                                                  |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| POST      | create                                                                                                                                                        |
| GET, HEAD | get (рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП), list (рд╕рдВрдЧреНрд░рд╣реЛрдВ рдХреЗ рд▓рд┐рдП, рдкреВрд░реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде), watch (рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рдВрд╕рд╛рдзрди рдпрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╕рдВрдЧреНрд░рд╣ рдХреЗ рд▓рд┐рдП рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП) |
| PUT       | update                                                                                                                                                        |
| PATCH     | patch                                                                                                                                                         |
| DELETE    | delete (рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП), deletecollection (рд╕рдВрдЧреНрд░рд╣реЛрдВ рдХреЗ рд▓рд┐рдП)                                                                                         |

рдХрднреА-рдХрднреА Kubernetes рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:

* [PodSecurityPolicy](https://kubernetes.io/docs/concepts/policy/pod-security-policy/)
* `policy` API рд╕рдореВрд╣ рдореЗрдВ `podsecuritypolicies` рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ `use` рдХреНрд░рд┐рдпрд╛ред
* [RBAC](https://kubernetes.io/docs/reference/access-authn-authz/rbac/#privilege-escalation-prevention-and-bootstrapping)
* `rbac.authorization.k8s.io` API рд╕рдореВрд╣ рдореЗрдВ `roles` рдФрд░ `clusterroles` рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ `bind` рдФрд░ `escalate` рдХреНрд░рд┐рдпрд╛рдПрдВред
* [Authentication](https://kubernetes.io/docs/reference/access-authn-authz/authentication/)
* рдореВрд▓ API рд╕рдореВрд╣ рдореЗрдВ `users`, `groups`, рдФрд░ `serviceaccounts` рдкрд░ `impersonate` рдХреНрд░рд┐рдпрд╛, рдФрд░ `authentication.k8s.io` API рд╕рдореВрд╣ рдореЗрдВ `userextras` рдкрд░ред

{% hint style="warning" %}
рдЖрдк `kubectl api-resources --sort-by name -o wide` рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдХреЗ **рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрд╕рд╛рдзрди рдХрд╛ рд╕рдорд░реНрдерд┐рдд рд╕рднреА рдХреНрд░рд┐рдпрд╛рдПрдВ** рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ
{% endhint %}

### рдЙрджрд╛рд╣рд░рдг

{% code title="Role" %}
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
namespace: defaultGreen
name: pod-and-pod-logs-reader
rules:
- apiGroups: [""]
resources: ["pods", "pods/log"]
verbs: ["get", "list", "watch"]
```
{% code title="ClusterRole" %}
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
# "namespace" omitted since ClusterRoles are not namespaced
name: secret-reader
rules:
- apiGroups: [""]
resources: ["secrets"]
verbs: ["get", "watch", "list"]
```
{% endcode %}

рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ **ClusterRole** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ:
```
kubectl get pods --all-namespaces
```
### **RoleBinding рдФрд░ ClusterRoleBinding**

рдПрдХ **role binding** рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рд╕реЗрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рднреВрдорд┐рдХрд╛ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рдПрдХ рд╡рд┐рд╖рдпреЛрдВ рдХреА рд╕реВрдЪреА (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рд╕рдореВрд╣ рдпрд╛ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ) рдФрд░ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛ рд░рд╣реА рднреВрдорд┐рдХрд╛ рдХрд╛ рд╕рдВрджрд░реНрдн рд╣реЛрддрд╛ рд╣реИред **RoleBinding** рдПрдХ рд╡рд┐рд╢реЗрд╖ **рдиреЗрдорд╕реНрдкреЗрд╕** рдХреЗ рднреАрддрд░ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрдмрдХрд┐ **ClusterRoleBinding** рдЙрд╕ рдкрд╣реБрдВрдЪ рдХреЛ **рдХреНрд▓рд╕реНрдЯрд░-рд╡реНрдпрд╛рдкреА** рджреЗрддрд╛ рд╣реИред

{% code title="" %}
```yaml
piVersion: rbac.authorization.k8s.io/v1
# This role binding allows "jane" to read pods in the "default" namespace.
# You need to already have a Role named "pod-reader" in that namespace.
kind: RoleBinding
metadata:
name: read-pods
namespace: default
subjects:
# You can specify more than one "subject"
- kind: User
name: jane # "name" is case sensitive
apiGroup: rbac.authorization.k8s.io
roleRef:
# "roleRef" specifies the binding to a Role / ClusterRole
kind: Role #this must be Role or ClusterRole
name: pod-reader # this must match the name of the Role or ClusterRole you wish to bind to
apiGroup: rbac.authorization.k8s.io
```
{% code title="ClusterRoleBinding" %}
```yaml
apiVersion: rbac.authorization.k8s.io/v1
# This cluster role binding allows anyone in the "manager" group to read secrets in any namespace.
kind: ClusterRoleBinding
metadata:
name: read-secrets-global
subjects:
- kind: Group
name: manager # Name is case sensitive
apiGroup: rbac.authorization.k8s.io
roleRef:
kind: ClusterRole
name: secret-reader
apiGroup: rbac.authorization.k8s.io
```
{% endcode %}

**рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЬреЛрдбрд╝рддреА рд╣реИрдВ** рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ "рд╕реВрдЪреА" рдФрд░ "рд╣рдЯрд╛рдПрдВ" рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рд░реЛрд▓ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ "рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ" рдХреЗ рд╕рд╛рде рдПрдХ рд░реЛрд▓ рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рд▓рд┐рдП рд╕рддрд░реНрдХ рд░рд╣реЗрдВ рдФрд░ рд╣рдореЗрд╢рд╛ рдЕрдкрдиреЗ рд░реЛрд▓ рдФрд░ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ рдФрд░ **рд╡рд┐рд╢реЗрд╖ рдХрд░реЗрдВ рдХрд┐ рдХреНрдпрд╛ рдЕрдиреБрдорддрд┐ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рдм рдХреБрдЫ рдирд┐рд╖реЗрдзрд┐рдд рд╣реИред**

## **RBAC рдХреА рдЬрд╛рдБрдЪ рдХрд░рдирд╛**
```bash
# Get current privileges
kubectl auth can-i --list
# use `--as=system:serviceaccount:<namespace>:<sa_name>` to impersonate a service account

# List Cluster Roles
kubectl get clusterroles
kubectl describe clusterroles

# List Cluster Roles Bindings
kubectl get clusterrolebindings
kubectl describe clusterrolebindings

# List Roles
kubectl get roles
kubectl describe roles

# List Roles Bindings
kubectl get rolebindings
kubectl describe rolebindings
```
### рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди рдХреЗ рд▓рд┐рдП рднреВрдорд┐рдХрд╛ / рдХреНрд▓рд╕реНрдЯрд░ рднреВрдорд┐рдХрд╛ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░реЗрдВ

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ рдЯреНрд╡рд┐рдЯрд░ рдкрд░ рдлрд╝реЙрд▓реЛ рдХрд░реЗрдВ** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред

</details>
