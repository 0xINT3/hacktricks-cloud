# Kubernetes Sekuriteitskonteks(se)

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repos.

</details>

## PodSecurityContext <a href="#podsecuritycontext-v1-core" id="podsecuritycontext-v1-core"></a>

[**Uit die dokumentasie:**](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core)

Wanneer jy die sekuriteitskonteks van 'n Pod spesifiseer, kan jy verskeie eienskappe gebruik. Vanuit 'n verdedigende sekuriteitsperspektief moet jy oorweeg:

* Om **runASNonRoot** as **True** te h√™
* Om **runAsUser** te konfigureer
* Indien moontlik, oorweeg om **beperkings** aan te dui deur middel van **seLinuxOptions** en **seccompProfile**
* Moenie **privilege** **group** toegang gee deur middel van **runAsGroup** en **supplementaryGroups** nie

| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>fsGroup</strong></a><br><em>integer</em></p>                                                                                                                                                                                                                                                 | <p>'n Spesiale aanvullende groep wat van toepassing is op <strong>alle houers in 'n pod</strong>. Sommige volume-tipes laat die Kubelet toe om die eienaarskap van daardie volume te verander sodat dit deur die pod besit word:<br>1. Die eienaar-GID sal die FSGroup wees<br>2. Die setgid-bit word ingestel (nuwe l√™ers wat in die volume geskep word, sal deur FSGroup besit word)<br>3. Die toestemmingsbits word OR'd met rw-rw---- As dit nie gespesifiseer is nie, sal die Kubelet nie die eienaarskap en toestemmings van enige volume wysig nie</p> |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>fsGroupChangePolicy</strong></a><br><em>string</em></p>                                                                                                                                                                                                                                      | Dit definieer die gedrag van **verandering van eienaarskap en toestemmings van die volume** voordat dit binne die Pod blootgestel word.                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsGroup</strong></a><br><em>integer</em></p>                                                                                                                                                                                                                                              | Die **GID om die ingangspunt van die houerproses uit te voer**. Gebruik die verstekwaarde as dit nie gespesifiseer is nie. Dit kan ook in SecurityContext gespesifiseer word.                                                                                                                                                                                                                                                                                                                                                        |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsNonRoot</strong></a><br><em>boolean</em></p>                                                                                                                                                                                                                                            | Dui aan dat die houer as 'n nie-root-gebruiker moet uitgevoer word. As dit waar is, sal die Kubelet die beeld tydens uitvoering valideer om te verseker dat dit nie as UID 0 (root) uitgevoer word nie en sal die houer nie begin as dit wel die geval is nie.                                                                                                                                                                                                                                                                          |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsUser</strong></a><br><em>integer</em></p>                                                                                                                                                                                                                                               | Die **UID om die ingangspunt van die houerproses uit te voer**. Verstek na die gebruiker wat in die beeldmetadata gespesifiseer is as dit nie gespesifiseer is nie.                                                                                                                                                                                                                                                                                                                                                              |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>seLinuxOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#selinuxoptions-v1-core"><em>SELinuxOptions</em></a><br><em>Meer inligting oor</em> <em><strong>seLinux</strong></em></p>                                                           | Die **SELinux-konteks wat op alle houers toegepas moet word**. As dit nie gespesifiseer is nie, sal die houer-runtime 'n lukrake SELinux-konteks toewys vir elke houer.                                                                                                                                                                                                                                                                                                                             |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>seccompProfile</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#seccompprofile-v1-core"><em>SeccompProfile</em></a><br><em>Meer inligting oor</em> <em><strong>Seccomp</strong></em></p>                                                           | Die **seccomp-opsies wat deur die houers** in hierdie pod gebruik moet word.                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>supplementalGroups</strong></a><br><em>integer array</em></p>                                                                                                                                                                                                                                | 'n Lys van **groepe wat op die eerste proses wat in elke houer uitgevoer word**, van toepassing is, bo en behalwe die prim√™re GID van die houer.                                                                                                                                                                                                                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>sysctls</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#sysctl-v1-core"><em>Sysctl</em></a> <em>array</em><br><em>Meer inligting oor</em> <a href="https://www.garron.me/en/go2linux/sysctl-linux.html"><em><strong>sysctls</strong></em></a></p> | Sysctls bevat 'n lys van **genaamruimte-spesifieke sysctls wat vir die pod gebruik word**. Pods met nie-ondersteunde sysctls (deur die houer-runtime) kan misluk om te begin.                                                                                                                                                                                                                                                                                                                                        |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>windowsOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#windowssecuritycontextoptions-v1-core"><em>WindowsSecurityContextOptions</em></a></p>                                                                                           | Die Windows-spesifieke instellings wat op alle houers toegepas word. As dit nie gespesifiseer is nie, sal die opsies binne 'n houer se SecurityContext gebruik word.                                                                                                                                                                                                                                                                                                                                               |
## SecurityContext

[**Uit die dokumentasie:**](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core)

Hierdie konteks word binne die **houersdefinisies** ingestel. Vanuit 'n verdedigende veiligheidsoogpunt moet jy oorweeg:

* **allowPrivilegeEscalation** as **False**
* Moenie sensitiewe **vermo√´ns** byvoeg nie (en verwyder diegene wat jy nie nodig het nie)
* **privileged** as **False**
* Indien moontlik, stel **readOnlyFilesystem** as **True**
* Stel **runAsNonRoot** as **True** en stel 'n **runAsUser** in
* Indien moontlik, oorweeg om **beperkings** aan te dui deur **seLinuxOptions** en **seccompProfile**
* Gee **nie** **privilege** **groep** toegang via **runAsGroup**

Let daarop dat die eienskappe in **beide SecurityContext en PodSecurityContext** ingestel word, en die waarde wat in **SecurityContext** gespesifiseer is, neem **voorrang**.

| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>allowPrivilegeEscalation</strong></a><br><em>boolean</em></p>                                                                                                                                                                      | **AllowPrivilegeEscalation** beheer of 'n proses **meer bevoegdhede kan verkry** as sy ouerproses. Hierdie bool beheer direk of die no\_new\_privs-vlag op die houerproses ingestel sal word. AllowPrivilegeEscalation is altyd waar wanneer die houer as **Privileged** uitgevoer word of **CAP\_SYS\_ADMIN** het |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>capabilities</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#capabilities-v1-core"><em>Capabilities</em></a><br><em>Meer inligting oor</em> <em><strong>Capabilities</strong></em></p>  | Die **vermo√´ns om by te voeg/af te skakel wanneer houers uitgevoer word**. Standaard is dit die verstekstel van vermo√´ns.                                                                                                                                                                                                                    |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>privileged</strong></a><br><em>boolean</em></p>                                                                                                                                                                                    | Voer houer in bevoorregte modus uit. Prosesse in bevoorregte houers is in wese **gelykwaardig aan root op die gasheer**. Standaard is dit vals.                                                                                                                                                                               |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>procMount</strong></a><br><em>string</em></p>                                                                                                                                                                                      | procMount dui die **tipe proc-mount aan wat vir die houers gebruik moet word**. Die verstek is DefaultProcMount wat die houer-runtime-verstekinstellings vir skryfbeskermde paaie en gemaskerde paaie gebruik.                                                                                                                                    |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>readOnlyRootFilesystem</strong></a><br><em>boolean</em></p>                                                                                                                                                                        | Of hierdie **houer 'n skryfbeskermde stam-l√™ersisteem het**. Die verstek is vals.                                                                                                                                                                                                                                             |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsGroup</strong></a><br><em>integer</em></p>                                                                                                                                                                                    | Die **GID om die ingangspunt** van die houerproses uit te voer. Gebruik die runtime-verstek as dit nie ingestel is nie.                                                                                                                                                                                                |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsNonRoot</strong></a><br><em>boolean</em></p>                                                                                                                                                                                  | Dui aan dat die houer as 'n nie-root-gebruiker moet **uitgevoer word**. As waar, sal die Kubelet die beeld tydens uitvoering valideer om te verseker dat dit nie as UID 0 (root) uitgevoer word nie en sal die houer nie begin as dit wel die geval is nie.                                                                                                          |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsUser</strong></a><br><em>integer</em></p>                                                                                                                                                                                     | Die **UID om die ingangspunt** van die houerproses uit te voer. Standaard is dit die gebruiker wat in die beeldmetadata gespesifiseer is as dit nie gespesifiseer is nie.                                                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>seLinuxOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#selinuxoptions-v1-core"><em>SELinuxOptions</em></a><br><em>Meer inligting oor</em> <em><strong>seLinux</strong></em></p> | Die **SELinux-konteks wat op die houer toegepas moet word**. As dit nie gespesifiseer is nie, sal die houer-runtime 'n ewekansige SELinux-konteks vir elke houer toewys.                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>seccompProfile</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#seccompprofile-v1-core"><em>SeccompProfile</em></a></p>                                                               | Die **seccomp-opsies** wat deur hierdie houer gebruik moet word.                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>windowsOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#windowssecuritycontextoptions-v1-core"><em>WindowsSecurityContextOptions</em></a></p>                                 | Die **Windows-spesifieke instellings** wat op alle houers toegepas word.                                                                                                                                                                                                                                                              |

## Verwysings

* [https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core)
* [https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core)

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy in HackTricks wil adverteer** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks-uitrusting**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
