# Kubernetes рд╣рд╛рд░реНрдбрдирд┐рдВрдЧ

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos** рдХреЛ рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>

## рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдХрд░рдг

### Kubescape

[**Kubescape**](https://github.com/armosec/kubescape) рдПрдХ K8s рдУрдкрди-рд╕реЛрд░реНрд╕ рдЙрдкрдХрд░рдг рд╣реИ рдЬреЛ рдПрдХ рдорд▓реНрдЯреА-рдХреНрд▓рд╛рдЙрдб K8s рд╕рд┐рдВрдЧрд▓ рдкреЗрди рдСрдл рдЧреНрд▓рд╛рд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд░рд┐рд╕реНрдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг, рд╕реБрд░рдХреНрд╖рд╛ рдЕрдиреБрдкрд╛рд▓рди, RBAC рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝рд░ рдФрд░ рдЗрдореЗрдЬ рдЬреЛрдЦрд┐рдореЛрдВ рдХреА рд╕реНрдХреИрдирд┐рдВрдЧ рд╢рд╛рдорд┐рд▓ рд╣реИред Kubescape K8s рдХреНрд▓рд╕реНрдЯрд░, YAML рдлрд╝рд╛рдЗрд▓реЗрдВ рдФрд░ HELM рдЪрд╛рд░реНрдЯ рдХреЛ рд╕реНрдХреИрди рдХрд░рддрд╛ рд╣реИ, рдПрдирдПрд╕рдП-рд╕реАрдЖрдИрдПрд╕рдП (NSA-CISA) рдФрд░ MITRE ATT\&CK┬о рдЬреИрд╕реЗ рдЕрдиреЗрдХ рдлрд╝реНрд░реЗрдорд╡рд░реНрдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЧрд▓рддрд┐рдпреЛрдВ, рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдЬреЛрдЦрд┐рдореЛрдВ рдФрд░ RBAC (рд░реЛрд▓-рдЖрдзрд╛рд░рд┐рдд-рдкрд╣реБрдБрдЪ-рдирд┐рдпрдВрддреНрд░рдг) рдЙрд▓реНрд▓рдВрдШрдиреЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рддрд╛ рд╣реИ, рд╕реАрдЖрдИ/рд╕реАрдбреА рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЗ рдкрд╣рд▓реЗ рдЪрд░рдгреЛрдВ рдореЗрдВ рд░рд┐рд╕реНрдХ рд╕реНрдХреЛрд░ рдХреА рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рдордп рдХреЗ рд╕рд╛рде рд░рд┐рд╕реНрдХ рд░реБрдЭрд╛рди рджрд┐рдЦрд╛рддрд╛ рд╣реИред
```bash
kubescape scan --verbose
```
### Kube-bench

рдЯреВрд▓ [**kube-bench**](https://github.com/aquasecurity/kube-bench) рдПрдХ рдЯреВрд▓ рд╣реИ рдЬреЛ [**CIS Kubernetes Benchmark**](https://www.cisecurity.org/benchmark/kubernetes/) рдореЗрдВ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХреГрдд рдЬрд╛рдВрдЪреЛрдВ рдХреЛ рдЪрд▓рд╛рдХрд░ рдпрд╣ рдЬрд╛рдВрдЪрддрд╛ рд╣реИ рдХрд┐ Kubernetes рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдбрд┐рдкреНрд▓реЙрдп рд╣реЛ рд░рд╣рд╛ рд╣реИред\
рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореЗрдВ рд╕реЗ рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ:

* рдХрдВрдЯреЗрдирд░ рдХреЗ рдЕрдВрджрд░ рд╕реЗ kube-bench рдЪрд▓рд╛рдПрдВ (рд╣реЛрд╕реНрдЯ рдХреЗ рд╕рд╛рде PID рдиреЗрдорд╕реНрдкреЗрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ)
* рд╣реЛрд╕реНрдЯ рдкрд░ kube-bench рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХрдВрдЯреЗрдирд░ рдХреЛ рдЪрд▓рд╛рдПрдВ, рдФрд░ рдлрд┐рд░ рд╕реАрдзреЗ рд╣реЛрд╕реНрдЯ рдкрд░ kube-bench рдЪрд▓рд╛рдПрдВ
* [рд░рд┐рд▓реАрдЬрд╝ рдкреЗрдЬ](https://github.com/aquasecurity/kube-bench/releases) рд╕реЗ рдирд╡реАрдирддрдо рдмрд╛рдЗрдирд░реА рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ,
* рд╕реНрд░реЛрдд рд╕реЗ рдЗрд╕реЗ рдХрдВрдкрд╛рдЗрд▓ рдХрд░реЗрдВред

### Kubeaudit

рдЯреВрд▓ [**kubeaudit**](https://github.com/Shopify/kubeaudit) рдПрдХ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдЯреВрд▓ рдФрд░ рдПрдХ Go рдкреИрдХреЗрдЬ рд╣реИ рдЬреЛ **рдХрдИ рд╡рд┐рднрд┐рдиреНрди рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореНрдмрдВрдзрд┐рдд рдЪрд┐рдВрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП Kubernetes рдХреНрд▓рд╕реНрдЯрд░реЛрдВ рдХреА рдСрдбрд┐рдЯ** рдХрд░ рд╕рдХрддрд╛ рд╣реИред

Kubeaudit рдпрд╣ рдЬрд╛рдВрдЪ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рднреАрддрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИред рдпрджрд┐ рд╣рд╛рдВ, рддреЛ рдпрд╣ рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдЧрд╛ рдХрд┐ рдЙрд╕ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╕рднреА Kubernetes рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдСрдбрд┐рдЯ рдХрд░реЗрдВ:
```
kubeaudit all
```
рдЗрд╕ рдЯреВрд▓ рдореЗрдВ `autofix` рддрд░реНрдХ рднреА рд╣реЛрддрд╛ рд╣реИ рдЬреЛ **рдЦреЛрдЬреА рдЧрдИ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдареАрдХ рдХрд░рддрд╛ рд╣реИред**

### **Kube-hunter**

рдпрд╣ рдЯреВрд▓ [**kube-hunter**](https://github.com/aquasecurity/kube-hunter) Kubernetes рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдХреА рдЦреЛрдЬ рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЯреВрд▓ Kubernetes рдкрд░реНрдпрд╛рд╡рд░рдг рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЬрд╛рдЧрд░реВрдХрддрд╛ рдФрд░ рджреГрд╢реНрдпрддрд╛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
```bash
kube-hunter --remote some.node.com
```
### **Kubei**

[**Kubei**](https://github.com/Erezf-p/kubei) рдПрдХ vulnerabilities scanning рдФрд░ CIS Docker benchmark рдЯреВрд▓ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЙрдирдХреЗ рдХреБрдмрд░рдиреЗрдЯреАрдЬрд╝ рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рд╕рдЯреАрдХ рдФрд░ рддрддреНрдХрд╛рд▓рд┐рдХ рдЬреЛрдЦрд┐рдо рдореВрд▓реНрдпрд╛рдВрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред Kubei рдХреБрдмрд░рдиреЗрдЯреАрдЬрд╝ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЙрдкрдпреЛрдЧ рд╣реЛ рд░рд╣реА рд╕рднреА рдЗрдореЗрдЬреЛрдВ рдХреА рд╕реНрдХреИрдирд┐рдВрдЧ рдХрд░рддрд╛ рд╣реИ, рд╕рд╣рд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдкреЙрдб рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдкреЙрдбреЛрдВ рдХреА рдЗрдореЗрдЬреЗрдЬрд╝ред

### KubiScan

[**KubiScan**](https://github.com/cyberark/KubiScan) рдХреБрдмрд░рдиреЗрдЯреАрдЬрд╝ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рд╕реНрдХреИрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯреВрд▓ рд╣реИ рдЬреЛ рдХреБрдмрд░рдиреЗрдЯреАрдЬрд╝ рдХреЗ рднреВрдорд┐рдХрд╛-рдЖрдзрд╛рд░рд┐рдд рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг (RBAC) рдЕрдзрд┐рдХрд╛рд░рд╛рдзрд┐рдХрд╛рд░ рдореЙрдбрд▓ рдореЗрдВ рдЬреЛрдЦрд┐рдордкреВрд░реНрдг рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИред

## **IaC рдХреЛрдб рдХреА рд▓реЗрдЦреАрдХрд░рдг**

### **Popeye**

[**Popeye**](https://github.com/derailed/popeye) рдПрдХ рдЙрдкрдпреЛрдЧреАрддрд╛ рд╣реИ рдЬреЛ рд▓рд╛рдЗрд╡ рдХреБрдмрд░рдиреЗрдЯреАрдЬрд╝ рдХреНрд▓рд╕реНрдЯрд░ рдХреА рд╕реНрдХреИрди рдХрд░рддреА рд╣реИ рдФрд░ **рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдП рдЧрдП рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рд╕рдВрдмрдВрдзрд┐рдд рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреА рд░рд┐рдкреЛрд░реНрдЯ** рдХрд░рддреА рд╣реИред рдпрд╣ рдЖрдкрдХреЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рд╡рд╣реА рдЬрд╛рдВрдЪрддрд╛ рд╣реИ рдЬреЛ рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдирд╣реАрдВ рдЬреЛ рдбрд┐рд╕реНрдХ рдкрд░ рд╣реИред рдЕрдкрдиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреА рд╕реНрдХреИрдирд┐рдВрдЧ рдХрд░рдХреЗ, рдпрд╣ рдЧрд▓рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рдкрд╣рдЪрд╛рди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╕рд░реНрд╡реЛрддреНрддрдо рдЕрднреНрдпрд╛рд╕ рд╕реНрдерд╛рди рдореЗрдВ рд╣реИрдВ, рдЗрд╕рд╕реЗ рднрд╡рд┐рд╖реНрдп рдХреА рдкрд░реЗрд╢рд╛рдирд┐рдпреЛрдВ рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХреЗред рдпрд╣ рдЬрдВрдЧрд▓реА рдореЗрдВ рдПрдХ рдХреБрдмрд░рдиреЗрдЯреАрдЬрд╝ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд╕рдордп рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдХреЛ рд╕рд╛рдордЬрд┐рдХ рджрдмрд╛рд╡ рдХреЛ рдХрдо рдХрд░рдиреЗ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рд░рдЦрддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдЖрдкрдХреЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдХ рдореАрдЯреНрд░рд┐рдХ-рд╕рд░реНрд╡рд░ рд╣реИ, рддреЛ рдпрд╣ рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдВрд╕рд╛рдзрди рдЕрдзрд┐рд░реЛрд╣рдг/рдЕрдзрд┐рд░реЛрд╣рдг рдФрд░ рдЪреЗрддрд╛рд╡рдиреА рджреЗрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреА рдХреНрд╖рдорддрд╛ рдХреА рдХрдореА рд╣реЛ рдЬрд╛рдПред

### **Kicks**

[**KICS**](https://github.com/Checkmarx/kics) рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд **рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдЬреИрд╕реЗ рдХреЛрдб рд╕рдорд╛рдзрд╛рдиреЛрдВ** рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рдЬреЛрдЦрд┐рдо, рдЕрдиреБрдкрд╛рд▓рди рд╕рдорд╕реНрдпрд╛рдПрдВ рдФрд░ рдврд╛рдВрдЪрд╛ рдЧрд▓рддрд┐рдпреЛрдВ рдХреА рдЦреЛрдЬ рдХрд░рддрд╛ рд╣реИ: Terraform, Kubernetes, Docker, AWS CloudFormation, Ansible, Helm, Microsoft ARM, рдФрд░ OpenAPI 3.0 рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдБ

### Checkov

[**Checkov**](https://github.com/bridgecrewio/checkov) рдПрдХ рд╕реНрдерд┐рд░ рдХреЛрдб рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЯреВрд▓ рд╣реИ рдЬреЛ рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░-рдЬреИрд╕реЗ рдХреЛрдб рдХреЗ рд▓рд┐рдП рд╣реИред

рдпрд╣ [Terraform](https://terraform.io), Terraform рдкреНрд▓рд╛рди, [Cloudformation](https://aws.amazon.com/cloudformation/), [AWS SAM](https://aws.amazon.com/serverless/sam/), [Kubernetes](https://kubernetes.io), [Dockerfile](https://www.docker.com), [Serverless](https://www.serverless.com) рдпрд╛ [ARM Templates](https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/overview) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдП рдЧрдП рдХреНрд▓рд╛рдЙрдб рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдХреА рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдиреНрдпрд╛рд╕ рдХреА рд╕реНрдерд┐рд░рддрд╛ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдЧрд▓рддрд┐рдпреЛрдВ рдХрд╛ рдЧреНрд░рд╛рдл-рдЖрдзрд╛рд░рд┐рдд рд╕реНрдХреИрди рдХрд░рддрд╛ рд╣реИред

### Kube-score

[**kube-score**](https://github.com/zegl/kube-score) рдПрдХ рдЯреВрд▓ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдХреБрдмрд░рдиреЗрдЯреАрдЬрд╝ рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд░рд┐рднрд╛рд╖рд╛рдУрдВ рдХрд╛ рд╕реНрдерд┐рд░ рдХреЛрдб рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддрд╛ рд╣реИред

рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:

| рд╡рд┐рддрд░рдг | рдХрдорд╛рдВрдб / рд▓рд┐рдВрдХ |
| --------------------------------------------------- | --------------------------------------------------------------------------------------- |
| macOS, Linux, рдФрд░ Windows рдХреЗ рд▓рд┐рдП рдкреВрд░реНрд╡-рдирд┐рд░реНрдорд┐рдд рдмрд╛рдЗрдирд░реА | [GitHub releases](https://github.com/zegl/kube-score/releases)                          |
| Docker                                              | `docker pull zegl/kube-score` ([Docker Hub)](https://hub.docker.com/r/zegl/kube-score/) |
| Homebrew (macOS рдФрд░ Linux)                          | `brew install kube-score`                                                               |
| [Krew](https://krew.sigs.k8s.io/) (macOS рдФрд░ Linux) | `kubectl krew install score`                                                            |

## рд╕реБрдЭрд╛рд╡

### Falco рдХреЗ рд╕рд╛рде рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ

{% content-ref url="monitoring-with-falco.md" %}
[monitoring-with-falco.md](monitoring-with-falco.md)
{% endcontent-ref %}

### Kubernetes PodSecurityContext рдФрд░ SecurityContext

рдЖрдк **рдкреЙрдб рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕рдВрджрд░реНрдн** (PodSecurityContext рдХреЗ рд╕рд╛рде) рдФрд░ рдЪрд▓рд╛рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ **рдХрдВрдЯреЗрдирд░реНрд╕** рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕рдВрджрд░реНрдн (SecurityContext рдХреЗ рд╕рд╛рде) рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдкрдврд╝реЗрдВ:

{% content-ref url="kubernetes-securitycontext-s.md" %}
[kubernetes-securitycontext-s.md](kubernetes-securitycontext-s.md)
{% endcontent-ref %}

### Kubernetes API Hardening

рдХреБрдмрд░рдиреЗрдЯреАрдЬрд╝ рдПрдкреАрдЖрдИ рд╕рд░реНрд╡рд░ рдХреА **рдкрд╣реБрдБрдЪ рдХреА рд╕реБрд░рдХреНрд╖рд╛** рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдирд╛ рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рджреБрд╖реНрдЯ рдХрд╛рд░рдХ рд╡реНрдпрдХреНрддрд┐ рдЗрд╕рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЛ рдХрдИ рддрд░реАрдХреЛрдВ рд╕реЗ рдХреНрд╖рддрд┐ рдкрд╣реБрдБрдЪрд╛ рд╕рдХрддрд╛ рд╣реИред\
рдЗрд╕рдХреЗ рд▓рд┐рдП **рдкрд╣реБрдБрдЪ** (**рд╡реНрд╣рд╛рдЗрдЯрд▓рд┐рд╕реНрдЯ** рдореВрд▓реНрдпреЛрдВ рдХреЛ рдПрдкреАрдЖрдИ рд╕рд░реНрд╡рд░ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ рдФрд░ рдХрд┐рд╕реА рдЕрдиреНрдп рдХрдиреЗрдХреНрд╢рди рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ) рдФрд░ [**рдкреНрд░рдорд╛рдгреАрдХрд░рдг**](https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet-authentication-authorization/) (рдиреНрдпреВрдирддрдо рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ) рджреЛрдиреЛрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред рдФрд░ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ **рдХрднреА рднреА** **рдЕрдирд╛рдорд┐рдд** **рдЕрдиреБрд░реЛрдзреЛрдВ** рдХреА **рдЕрдиреБрдорддрд┐** **рди рджреЗрдВ**ред

**рд╕рд╛рдорд╛рдиреНрдп рдЕрдиреБрд░реЛрдз рдкреНрд░рдХреНрд░рд┐рдпрд╛:**\
рдЙрдкрдпреЛрдЧрдХ
```yaml
apiVersion: v1
kind: Pod
metadata:
name: security-context-demo
spec:
securityContext:
runAsUser: 1000
runAsGroup: 3000
fsGroup: 2000
volumes:
- name: sec-ctx-vol
emptyDir: {}
containers:
- name: sec-ctx-demo
image: busybox
command: [ "sh", "-c", "sleep 1h" ]
securityContext:
runAsNonRoot: true
volumeMounts:
- name: sec-ctx-vol
mountPath: /data/demo
securityContext:
allowPrivilegeEscalation: true
```
* [https://kubernetes.io/docs/tasks/configure-pod-container/security-context/](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/)
* [https://kubernetes.io/docs/concepts/policy/pod-security-policy/](https://kubernetes.io/docs/concepts/policy/pod-security-policy/)

### Kubernetes NetworkPolicies

{% content-ref url="kubernetes-networkpolicies.md" %}
[kubernetes-networkpolicies.md](kubernetes-networkpolicies.md)
{% endcontent-ref %}

### рд╕рд╛рдорд╛рдиреНрдп рд╣рд╛рд░реНрдбрдирд┐рдВрдЧ

рдЖрдкрдХреЛ рдЕрдкрдиреЗ Kubernetes рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЛ рдирд╡реАрдирддрдо рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐:

* рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рдЖрдкрдХреЗ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬ рдЕрдкрдбреЗрдЯ рд╣реЛрдВред
* рдмрдЧ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдкреИрдЪреЗрд╕ рд╣реЛрдВред

[**рд░рд┐рд▓реАрдЬ рд╕рд╛рдЗрдХрд▓**](https://kubernetes.io/docs/setup/release/version-skew-policy/): рд╣рд░ 3 рдорд╣реАрдиреЗ рдореЗрдВ рдПрдХ рдирдпрд╛ рдорд╛рдЗрдирд░ рд░рд┐рд▓реАрдЬ рд╣реЛрддрд╛ рд╣реИ -- 1.20.3 = 1(рдореЗрдЬрд░).20(рдорд╛рдЗрдирд░).3(рдкреИрдЪ)

**Kubernetes рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ (рдпрд╣рд╛рдВ рд╕реЗ)** [**рдпрд╣рд╛рдВ**](https://kubernetes.io/docs/tasks/administer-cluster/cluster-upgrade/)**):**

* рдЗрд╕ рдХреНрд░рдо рдореЗрдВ рдорд╛рд╕реНрдЯрд░ рдиреЛрдб рдХреЗ рдХрдВрдкреЛрдиреЗрдВрдЯреНрд╕ рдХреЛ рдЕрдкрдЧреНрд░реЗрдб рдХрд░реЗрдВ:
* etcd (рд╕рднреА рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝)ред
* kube-apiserver (рд╕рднреА рдХрдВрдЯреНрд░реЛрд▓ рдкреНрд▓реЗрди рд╣реЛрд╕реНрдЯреНрд╕)ред
* kube-controller-managerред
* kube-schedulerред
* рдпрджрд┐ рдЖрдк рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХреНрд▓рд╛рдЙрдб рдХрдВрдЯреНрд░реЛрд▓рд░ рдореИрдиреЗрдЬрд░ред
* kube-proxy, kubelet рдЬреИрд╕реЗ рд╡рд░реНрдХрд░ рдиреЛрдб рдХреЗ рдХрдВрдкреЛрдиреЗрдВрдЯреНрд╕ рдХреЛ рдЕрдкрдЧреНрд░реЗрдб рдХрд░реЗрдВред

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рд╣реИ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рд╣реИ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ рдЯреНрд╡рд┐рдЯрд░ рдкрд░ рдлрд╝реЙрд▓реЛ рдХрд░реЗрдВ** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos рдореЗрдВ рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред**

</details>
