# Kubernetes 네임스페이스 승격

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* HackTricks에서 **회사 광고를 보거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family)인 [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)을 **팔로우**하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 트릭을 공유**하세요.

</details>

Kubernetes에서는 어떤 방식으로든 **네임스페이스 내부로 들어갈 수 있습니다** (사용자 자격 증명을 도용하거나 pod를 침투함으로써). 그러나 일반적으로 **더 흥미로운 정보를 얻을 수 있는 다른 네임스페이스로 승격하는 것이 관심사일 것입니다**.

다음은 다른 네임스페이스로 탈출할 수 있는 몇 가지 기술입니다:

### K8s 권한 남용

당연히 도용한 계정이 승격하려는 네임스페이스에 대해 민감한 권한을 가지고 있다면, NS 내에서 서비스 계정으로 **pod를 생성**하거나 이미 존재하는 pod에서 **쉘을 실행**하거나 **비밀 토큰** SA를 읽는 등의 작업을 남용할 수 있습니다.

어떤 권한을 남용할 수 있는지에 대한 자세한 정보는 다음을 참조하세요:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### 노드로 탈출

pod를 침투하고 탈출할 수 있거나 특권이 있는 pod를 생성하고 탈출할 수 있기 때문에 노드로 탈출할 수 있다면 다음과 같은 작업을 수행하여 다른 SA 토큰을 도용할 수 있습니다:

* 노드에서 실행 중인 다른 도커 컨테이너에 **SAs 토큰이 마운트**되어 있는지 확인합니다.
* 노드에 부여된 **추가 권한이 있는 kubeconfig 파일**을 확인합니다.
* 활성화된 경우 (또는 직접 활성화) 다른 네임스페이스의 **기본 토큰 계정에 액세스**할 수 있도록 다른 네임스페이스의 미러 pod를 생성해 보세요 (아직 테스트하지 않았습니다).

이러한 기술에 대한 자세한 내용은 다음에서 설명합니다:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* HackTricks에서 **회사 광고를 보거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family)인 [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)을 **팔로우**하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 트릭을 공유**하세요.

</details>
