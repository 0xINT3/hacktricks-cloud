# Kubernetesネームスペースのエスカレーション

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* **HackTricksで会社を宣伝したい**場合や、**最新バージョンのPEASSを入手したい**場合、またはHackTricksをPDFでダウンロードしたい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をご確認ください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを発見しましょう
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしてください 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ハッキングのトリックを共有するには、**[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

Kubernetesでは、何らかの方法で**ネームスペースに侵入する**ことが一般的です（ユーザーの資格情報を盗むか、ポッドを侵害することによって）。ただし、通常は**別のネームスペースにエスカレーションすることがより興味深い情報を見つけるために必要**です。

以下は、別のネームスペースにエスカレーションするために試すことができるいくつかのテクニックです：

### K8s特権の悪用

明らかに、盗んだアカウントがエスカレーションすることができるネームスペースに対して重要な特権を持っている場合、NS内でサービスアカウントを使用してポッドを作成したり、既存のポッド内でシェルを**実行**したり、**シークレット**SAトークンを読み取るなどのアクションを悪用することができます。

どの特権を悪用できるかの詳細については、次を参照してください：

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### ノードへのエスケープ

ポッドを侵害してエスケープすることができるか、特権付きのポッドを作成してエスケープすることができるため、ノードへのエスケープが可能な場合、他のSAトークンを盗むために次のことができます：

* ノードで実行されている他のDockerコンテナにマウントされた**SAトークンをチェック**します。
* ノードに**追加の権限を与えたkubeconfigファイル**をチェックします。
* 有効になっている場合（または自分で有効にする場合）、他のネームスペースのミラーポッドを作成してみてください。これにより、それらのネームスペースのデフォルトトークンアカウントにアクセスできるかもしれません（これはまだテストしていません）。

これらのテクニックの詳細は次のとおりです：

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* **HackTricksで会社を宣伝したい**場合や、**最新バージョンのPEASSを入手したい**場合、またはHackTricksをPDFでダウンロードしたい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をご確認ください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを発見しましょう
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしてください 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ハッキングのトリックを共有するには、**[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>
