# DO - 基本情報

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)でAWSハッキングをゼロからヒーローまで学ぶ</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**PEASSファミリー**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)コレクションをチェックする
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)を**フォローする**。
* **HackTricks**と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のgithubリポジトリにPRを提出して、あなたのハッキングのコツを共有する。

</details>

## 基本情報

DigitalOceanは、仮想プライベートサーバー(VPS)やアプリケーションの構築、展開、管理のためのリソースなど、さまざまなサービスをユーザーに提供する**クラウドコンピューティングプラットフォーム**です。**DigitalOceanのサービスはシンプルで使いやすく設計されており**、開発者や中小企業に**人気があります**。

DigitalOceanの主な特徴には以下があります:

* **仮想プライベートサーバー(VPS)**: DigitalOceanは、ウェブサイトやアプリケーションをホストするために使用できるVPSを提供しています。これらのVPSは、そのシンプルさと使いやすさで知られており、さまざまな事前構築された「ドロップレット」やカスタム設定を使用して迅速かつ簡単に展開することができます。
* **ストレージ**: DigitalOceanは、ウェブサイトやアプリケーションのデータを保存および管理するために使用できる、オブジェクトストレージ、ブロックストレージ、管理されたデータベースなど、さまざまなストレージオプションを提供しています。
* **開発および展開ツール**: DigitalOceanは、APIや事前構築されたドロップレットなど、アプリケーションの構築、展開、管理に使用できるさまざまなツールを提供しています。
* **セキュリティ**: DigitalOceanはセキュリティに強い重点を置いており、データとアプリケーションを安全に保つためのツールや機能の範囲を提供しています。これには暗号化、バックアップ、その他のセキュリティ対策が含まれます。

全体として、DigitalOceanは、クラウド内でアプリケーションを構築、展開、および管理するために必要なツールとリソースをユーザーに提供するクラウドコンピューティングプラットフォームです。そのサービスはシンプルで使いやすく設計されており、開発者や中小企業に人気があります。

### AWSとの主な違い

DigitalOceanとAWSの主な違いの一つは、**提供するサービスの範囲**です。**DigitalOceanはシンプルで使いやすい**仮想プライベートサーバー(VPS)、ストレージ、開発および展開ツールに焦点を当てています。一方、**AWS**は、VPS、ストレージ、データベース、機械学習、分析など、**はるかに幅広い範囲のサービス**を提供しています。これは、AWSが複雑なエンタープライズレベルのアプリケーションに適しているのに対し、DigitalOceanは中小企業や開発者により適していることを意味します。

もう一つの重要な違いは、**価格構造**です。**DigitalOceanの価格設定は一般的により直感的で理解しやすく**、使用するドロップレットやその他のリソースの数に基づいた価格プランの範囲があります。一方、AWSは、使用するリソースの種類や量など、さまざまな要因に基づいたより複雑な価格構造を持っています。これにより、AWSを使用する際のコストを予測することがより困難になります。

## 階層

### ユーザー

ユーザーとは、期待通りのユーザーです。彼は**チームを作成**し、**異なるチームのメンバーになる**ことができます。

### **チーム**

チームは、**ユーザー**のグループです。ユーザーがチームを作成すると、そのチームに対して**オーナーの役割**を持ち、初めに**請求情報を設定します**。**他の**ユーザーはその後、チームに**招待される**ことができます。

チーム内にはいくつかの**プロジェクト**が存在するかもしれません。プロジェクトは、**実行中のサービスのセット**に過ぎません。これは、プロダクション、ステージング、開発など、異なるインフラステージを**分離するために使用**されることがあります。

### プロジェクト

説明したように、プロジェクトは、その中で**一緒に実行されているサービス**（ドロップレット、スペース、データベース、kubernetes...）のコンテナに過ぎません。\
Digital Oceanプロジェクトは、IAMがないGCPプロジェクトに非常に似ています。

## 権限

### チーム

基本的に、チームの全メンバーは、チーム内で作成されたすべてのプロジェクトのDOリソースに**アクセスできます（権限の多寡によります）。**

### 役割

チーム内の**各ユーザー**は、以下の三つの**役割**のうち**一つ**を持つことができます:

| 役割       | 共有リソース | 請求情報 | チーム設定 |
| ---------- | ------------ | --------- | ----------- |
| **オーナー**  | 全アクセス      | 全アクセス         | 全アクセス   |
| **ビラー** | アクセスなし        | 全アクセス         | アクセスなし     |
| **メンバー** | 全アクセス      | アクセスなし           | アクセスなし     |

**オーナー**と**メンバー**はユーザーをリストアップし、その**役割**を確認することができます（ビラーはできません）。

## アクセス

### ユーザー名 + パスワード (MFA)

ほとんどのプラットフォームと同様に、GUIにアクセスするためには、クラウド**リソース**に**アクセス**するための**有効なユーザー名とパスワード**のセットを使用できます。ログインすると、[https://cloud.digitalocean.com/account/profile](https://cloud.digitalocean.com/account/profile)で**あなたが参加しているすべてのチーム**を見ることができます。\
また、[https://cloud.digitalocean.com/account/activity](https://cloud.digitalocean.com/account/activity)であなたのすべてのアクティビティを見ることができます。

**MFA**はユーザーに**有効にする**ことができ、チームにアクセスするためにチーム内のすべてのユーザーに**強制する**ことができます。

### APIキー

APIを使用するために、ユーザーは**APIキーを生成**することができます。これらは常に読み取り権限を持っていますが、**書き込み権限はオプションです**。\
APIキーは次のようになります：
```
dop_v1_1946a92309d6240274519275875bb3cb03c1695f60d47eaa1532916502361836
```
CLIツールは[**doctl**](https://github.com/digitalocean/doctl#installing-doctl)です。初期化するには（トークンが必要です）次のコマンドを使用します：
```bash
doctl auth init # Asks for the token
doctl auth init --context my-context # Login with a different token
doctl auth list # List accounts
```
デフォルトでは、このトークンはMacの`/Users/<username>/Library/Application Support/doctl/config.yaml`にクリアテキストで書かれます。

### Spacesアクセスキー

これらは**Spacesへのアクセス**を許可するキーです（AWSのS3やGCPのStorageのように）。

これらは**名前**、**keyid**、**シークレット**で構成されています。例えば：
```
Name: key-example
Keyid: DO00ZW4FABSGZHAABGFX
Secret: 2JJ0CcQZ56qeFzAJ5GFUeeR4Dckarsh6EQSLm87MKlM
```
### OAuth アプリケーション

OAuth アプリケーションは **Digital Ocean へのアクセス権を付与** することができます。

[https://cloud.digitalocean.com/account/api/applications](https://cloud.digitalocean.com/account/api/applications) で **OAuth アプリケーションを作成** し、[https://cloud.digitalocean.com/account/api/access](https://cloud.digitalocean.com/account/api/access) で **許可された OAuth アプリケーションを確認** することが可能です。

### SSH キー

[https://cloud.digitalocean.com/account/security](https://cloud.digitalocean.com/account/security) の **コンソール** から **Digital Ocean チームに SSH キーを追加** することができます。

この方法で、**新しいドロップレットを作成すると、SSH キーが設定され**、パスワードなしで **SSH 経由でログイン** できるようになります（セキュリティ上の理由から、[アップロードされた SSH キーは既存のドロップレットには設定されません](https://docs.digitalocean.com/products/droplets/how-to/add-ssh-keys/to-existing-droplet/)）。

### Functions 認証トークン

**REST API 経由で関数をトリガーする** 方法（常に有効で、cli が使用する方法）は、次のような **認証トークン** を使用したリクエストをトリガーすることです：
```bash
curl -X POST "https://faas-lon1-129376a7.doserverless.co/api/v1/namespaces/fn-c100c012-65bf-4040-1230-2183764b7c23/actions/functionname?blocking=true&result=true" \
-H "Content-Type: application/json" \
-H "Authorization: Basic MGU0NTczZGQtNjNiYS00MjZlLWI2YjctODk0N2MyYTA2NGQ4OkhwVEllQ2t4djNZN2x6YjJiRmFGc1FERXBySVlWa1lEbUxtRE1aRTludXA1UUNlU2VpV0ZGNjNqWnVhYVdrTFg="
```
## ログ

### ユーザーログ

**ユーザーのログ**は[**https://cloud.digitalocean.com/account/activity**](https://cloud.digitalocean.com/account/activity)で見つけることができます。

### チームログ

**チームのログ**は[**https://cloud.digitalocean.com/account/security**](https://cloud.digitalocean.com/account/security)で見つけることができます。

## 参考文献

* [https://docs.digitalocean.com/products/teams/how-to/manage-membership/](https://docs.digitalocean.com/products/teams/how-to/manage-membership/)

<details>

<summary><strong>AWSハッキングをゼロからヒーローまで学ぶには</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>をご覧ください！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式のPEASS & HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見してください。私たちの独占的な[**NFTコレクション**](https://opensea.io/collection/the-peass-family)です。
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)や[**テレグラムグループ**](https://t.me/peass)に**参加する**か、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォローしてください。**
* **HackTricks**の[**GitHubリポジトリ**](https://github.com/carlospolop/hacktricks)や[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有してください。

</details>
