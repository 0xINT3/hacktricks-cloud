# DO - 基本信息

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass)，或在 **Twitter** 上关注我 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub 仓库提交 PR 来分享您的黑客技巧。

</details>

## 基本信息

DigitalOcean 是一个**云计算平台，为用户提供各种服务**，包括虚拟专用服务器（VPS）和其他用于构建、部署和管理应用程序的资源。**DigitalOcean 的服务旨在简单易用**，因此**受到开发人员和小型企业的欢迎**。

DigitalOcean 的一些关键特点包括：

* **虚拟专用服务器（VPS）**：DigitalOcean 提供 VPS，可用于托管网站和应用程序。这些 VPS 以其简单性和易用性而闻名，并且可以使用各种预构建的“droplets”或自定义配置快速轻松地部署。
* **存储**：DigitalOcean 提供一系列存储选项，包括对象存储、块存储和托管数据库，可用于存储和管理网站和应用程序的数据。
* **开发和部署工具**：DigitalOcean 提供一系列工具，可用于构建、部署和管理应用程序，包括 API 和预构建的 droplets。
* **安全性**：DigitalOcean 强调安全性，并提供一系列工具和功能，帮助用户保护其数据和应用程序的安全。这包括加密、备份和其他安全措施。

总体而言，DigitalOcean 是一个云计算平台，为用户提供构建、部署和管理云中应用程序所需的工具和资源。其服务旨在简单易用，因此受到开发人员和小型企业的欢迎。

### 与 AWS 的主要区别

DigitalOcean 和 AWS 之间的主要区别之一是它们提供的**服务范围**。**DigitalOcean 专注于提供简单易用的虚拟专用服务器（VPS）、存储和开发部署工具**。而 AWS 则提供**更广泛的服务范围**，包括 VPS、存储、数据库、机器学习、分析等许多其他服务。这意味着 AWS 更适用于复杂的企业级应用程序，而 DigitalOcean 更适用于小型企业和开发人员。

两个平台之间的另一个关键区别是**定价结构**。**DigitalOcean 的定价通常更直观易懂**，其基于使用的 droplets 和其他资源数量的一系列定价计划。而 AWS 则有更复杂的定价结构，其基于多种因素，包括使用的资源类型和数量。这可能使在使用 AWS 时更难预测成本。

## 层次结构

### 用户

用户就是您所期望的用户。他可以**创建团队**并成为不同团队的成员。

### 团队

团队是一组**用户**。当用户创建团队时，他在该团队中拥有**所有者角色**，并最初**设置计费信息**。然后可以邀请其他用户加入团队。

团队内部可能有多个**项目**。项目只是一组**一起运行的服务**。它可以用于**分隔不同的基础设施阶段**，如生产、暂存、开发...

### 项目

如前所述，项目只是包含所有**服务**（droplets、spaces、databases、kubernetes...）**一起运行**的容器。\
DigitalOcean 项目与 GCP 项目（不包括 IAM）非常相似。

## 权限

### 团队

基本上，团队的所有成员都可以在团队内创建的所有项目中**访问 DO 资源（权限多少不同）**。

### 角色

团队中的**每个用户**可以拥有以下三个**角色**之一：

| 角色       | 共享资源         | 计费信息           | 团队设置       |
| ---------- | ---------------- | ------------------- | ------------- |
| **所有者**  | 全部访问权限     | 全部访问权限       | 全部访问权限   |
| **计费人** | 无访问权限       | 全部访问权限       | 无访问权限     |
| **成员**   | 全部访问权限     | 无访问权限         | 无访问权限     |

**所有者**和**成员**可以列出用户并检查其**角色**（计费人无法）。

## 访问

### 用户名 + 密码（MFA）

与大多数平台一样，为了访问 GUI，您可以使用一组**有效的用户名和密码**来**访问**云**资源**。登录后，您可以在[https://cloud.digitalocean.com/account/profile](https://cloud.digitalocean.com/account/profile)中看到您所在的**所有团队**。\
您可以在[https://cloud.digitalocean.com/account/activity](https://cloud.digitalocean.com/account/activity)中查看您的所有活动。

可以在用户中**启用 MFA**，并**强制**所有团队成员使用 MFA 访问团队。

### API 密钥

为了使用 API，用户可以**生成 API 密钥**。这些密钥始终具有读取权限，但**写入权限是可选的**。\
API 密钥的格式如下：
```
dop_v1_1946a92309d6240274519275875bb3cb03c1695f60d47eaa1532916502361836
```
cli工具是[**doctl**](https://github.com/digitalocean/doctl#installing-doctl)。使用以下命令进行初始化（需要一个令牌）：
```bash
doctl auth init # Asks for the token
doctl auth init --context my-context # Login with a different token
doctl auth list # List accounts
```
默认情况下，此令牌将以明文形式写入Mac中的`/Users/<username>/Library/Application Support/doctl/config.yaml`。

### Spaces访问密钥

这些密钥提供对Spaces（类似于AWS中的S3或GCP中的存储）的访问权限。

它们由一个**名称**、一个**密钥ID**和一个**密钥**组成。一个示例可能是：
```
Name: key-example
Keyid: DO00ZW4FABSGZHAABGFX
Secret: 2JJ0CcQZ56qeFzAJ5GFUeeR4Dckarsh6EQSLm87MKlM
```
### OAuth应用程序

OAuth应用程序可以获得对Digital Ocean的访问权限。

可以在[https://cloud.digitalocean.com/account/api/applications](https://cloud.digitalocean.com/account/api/applications)中创建OAuth应用程序，并在[https://cloud.digitalocean.com/account/api/access](https://cloud.digitalocean.com/account/api/access)中查看所有允许的OAuth应用程序。

### SSH密钥

可以从[https://cloud.digitalocean.com/account/security](https://cloud.digitalocean.com/account/security)的控制台中向Digital Ocean团队添加SSH密钥。

这样，如果创建一个新的droplet，SSH密钥将被设置在其中，您将能够通过SSH登录而无需密码（请注意，出于安全原因，新上传的SSH密钥不会设置在已存在的droplets中）。

### 函数身份验证令牌

通过REST API触发函数的方法（始终启用，这是cli使用的方法）是通过触发带有身份验证令牌的请求，例如：
```bash
curl -X POST "https://faas-lon1-129376a7.doserverless.co/api/v1/namespaces/fn-c100c012-65bf-4040-1230-2183764b7c23/actions/functionname?blocking=true&result=true" \
-H "Content-Type: application/json" \
-H "Authorization: Basic MGU0NTczZGQtNjNiYS00MjZlLWI2YjctODk0N2MyYTA2NGQ4OkhwVEllQ2t4djNZN2x6YjJiRmFGc1FERXBySVlWa1lEbUxtRE1aRTludXA1UUNlU2VpV0ZGNjNqWnVhYVdrTFg="
```
## 日志

### 用户日志

**用户的日志**可以在[**https://cloud.digitalocean.com/account/activity**](https://cloud.digitalocean.com/account/activity)找到。

### 团队日志

**团队的日志**可以在[**https://cloud.digitalocean.com/account/security**](https://cloud.digitalocean.com/account/security)找到。

## 参考资料

* [https://docs.digitalocean.com/products/teams/how-to/manage-membership/](https://docs.digitalocean.com/products/teams/how-to/manage-membership/)

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的**公司广告**，或者如果您想访问**PEASS 的最新版本或下载 HackTricks 的 PDF 版本**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来**分享您的黑客技巧**。

</details>
