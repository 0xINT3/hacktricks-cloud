# DO - 基本情報

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* もし **HackTricks であなたの会社を宣伝したい**場合や、**最新版の PEASS を入手したい**場合、または HackTricks を PDF でダウンロードしたい場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) をチェックしてください！
* [**公式の PEASS & HackTricks スワッグ**](https://peass.creator-spring.com) を手に入れましょう
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) を見つけてください。これは、私たちの独占的な [**NFT**](https://opensea.io/collection/the-peass-family) のコレクションです
* 💬 [**Discord グループ**](https://discord.gg/hRep4RUj7f) または [**telegram グループ**](https://t.me/peass) に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm) をフォローしてください。
* **HackTricks** と **HackTricks Cloud** の GitHub リポジトリに **PR を提出**して、あなたのハッキングテクニックを共有してください。

</details>

## 基本情報

DigitalOcean は、**仮想プライベートサーバー (VPS) やその他のリソースを提供するクラウドコンピューティングプラットフォーム**であり、ユーザーにさまざまなサービスを提供します。**DigitalOcean のサービスはシンプルで使いやすく設計されており**、開発者や小規模ビジネスの間で人気があります。

DigitalOcean の主な特徴には、次のものがあります。

* **仮想プライベートサーバー (VPS)**: DigitalOcean は、ウェブサイトやアプリケーションのホスティングに使用できる VPS を提供しています。これらの VPS はシンプルで使いやすいことで知られており、さまざまなプリビルドの "ドロップレット" やカスタム構成を使用して迅速かつ簡単に展開することができます。
* **ストレージ**: DigitalOcean は、オブジェクトストレージ、ブロックストレージ、マネージドデータベースなど、ウェブサイトやアプリケーションのデータを保存および管理するためのさまざまなストレージオプションを提供しています。
* **開発および展開ツール**: DigitalOcean は、API やプリビルドのドロップレットなど、アプリケーションの構築、展開、管理に使用できるさまざまなツールを提供しています。
* **セキュリティ**: DigitalOcean はセキュリティに重点を置いており、データとアプリケーションを安全に保つためのさまざまなツールと機能を提供しています。これには、暗号化、バックアップ、その他のセキュリティ対策が含まれます。

全体として、DigitalOcean はクラウドコンピューティングプラットフォームであり、ユーザーにクラウド上でアプリケーションを構築、展開、管理するためのツールとリソースを提供しています。そのサービスはシンプルで使いやすく設計されており、開発者や小規模ビジネスの間で人気があります。

### AWS との主な違い

DigitalOcean と AWS の主な違いの一つは、**提供するサービスの範囲**です。**DigitalOcean はシンプルで使いやすい**仮想プライベートサーバー (VPS)、ストレージ、開発および展開ツールに焦点を当てています。一方、**AWS** は、VPS、ストレージ、データベース、機械学習、分析など、**より幅広い範囲のサービス**を提供しています。これにより、AWS は複雑なエンタープライズレベルのアプリケーションに適しており、DigitalOcean は小規模ビジネスや開発者に適しています。

両プラットフォームのもう一つの主な違いは、**価格体系**です。**DigitalOcean の価格体系は一般的にわかりやすく簡単**であり、使用するドロップレットやその他のリソースの数に基づいてさまざまな価格プランが提供されています。一方、AWS の価格体系は、使用するリソースの種類や量など、さまざまな要素に基づいており、AWS を使用する際にはコストを予測するのがより難しくなる場合があります。

## 階層

### ユーザー

ユーザーは、ユーザーそのものです。彼は**チームを作成**し、**さまざまなチームのメンバー**になることができます。

### チーム

チームは、**ユーザー**のグループです。ユーザーがチームを作成すると、そのチームで**オーナーの役割**を持ち、最初に**請求情報を設定**します。その後、他のユーザーをチームに**招待**することができます。

チーム内には複数の**プロジェクト**が存在する場合があります。プロジェクトは、単に**一緒に実行されるさまざまなサービスのセット**です。これは、本番、ステージング、開発など、異なるインフラステージを区別するために使用できます。

### プロジェクト

前述のように、プロジェクトは**すべてのサービス**（ドロップレット、スペース、データベース、Kubernetes など）**を一緒に実行するためのコンテナ**です。\
Digital Ocean のプロジェクトは、IAM を持たない GCP プロジェクトに非常に似ています。

## 権限

### チーム

基本的に、チームのすべてのメンバーは、**チーム内で作成されたすべてのプロジェクトの DO リソースにアクセス**できます（より多くまたは少ない権限で）。

### 役割

チーム内の**各ユーザー**は、次の三つの**役割**のいずれかを持つことができます。

| 役割       | 共有リソース | 請求情報 | チーム設定 |
| ---------- | ------------ | --------- | ----------- |
| **オーナー**  | フルアクセス | フルアクセス | フルアクセス   |
| **請求者** | アクセスなし | フルアクセス | アクセスなし     |
| **メンバー** | フルアクセス | アクセスなし | アクセスなし     |

**オーナー**と**メンバー**は、ユーザーを一覧表示し、役割を確認することができます（請求者はできません）。

## アクセス

### ユーザー名 + パスワード（MFA）

ほとんどのプラットフォームと同様に、GUI にアクセスするためには、**有効なユーザー名とパスワード**を使用して**クラウドリソースにアクセス**することができます。ログインすると、[https://cloud.digitalocean.com/account/profile](https://cloud.digitalocean.com/account/profile) で所属する**すべてのチーム**を確認することができます。\
また、[https://cloud.digitalocean.com/account/activity](https://cloud.digitalocean.com/account/activity) ですべてのアクティビティを確認することができます。

**MFA**は、ユーザーに**有効化**され、チームのすべてのユーザーがチームにアクセスする際に**強制される**ことがあります。

### API キー

API を使用するために、ユーザーは**API キーを生成**することができます。これらは常に読み取り権限を持っていますが、**書き込み権限はオプション**です。\
API キーは次のような形式です：
```
dop_v1_1946a92309d6240274519275875bb3cb03c1695f60d47eaa1532916502361836
```
cliツールは[**doctl**](https://github.com/digitalocean/doctl#installing-doctl)です。トークンが必要なので、次のように初期化します：
```bash
doctl auth init # Asks for the token
doctl auth init --context my-context # Login with a different token
doctl auth list # List accounts
```
デフォルトでは、このトークンはMacの`/Users/<username>/Library/Application Support/doctl/config.yaml`にクリアテキストで書かれます。

### Spacesアクセスキー

これらは、Spaces（AWSのS3やGCPのストレージのような）へのアクセスを提供するキーです。

それらは**名前**、**キーID**、**シークレット**で構成されています。例えば、以下のようなものです。
```
Name: key-example
Keyid: DO00ZW4FABSGZHAABGFX
Secret: 2JJ0CcQZ56qeFzAJ5GFUeeR4Dckarsh6EQSLm87MKlM
```
### OAuthアプリケーション

OAuthアプリケーションは**Digital Ocean上でアクセス権限を付与**することができます。

[https://cloud.digitalocean.com/account/api/applications](https://cloud.digitalocean.com/account/api/applications)でOAuthアプリケーションを**作成**し、[https://cloud.digitalocean.com/account/api/access](https://cloud.digitalocean.com/account/api/access)で**許可されたOAuthアプリケーション**を確認することができます。

### SSHキー

[https://cloud.digitalocean.com/account/security](https://cloud.digitalocean.com/account/security)の**コンソール**から**SSHキーをDigital Oceanチームに追加**することができます。

これにより、**新しいドロップレットを作成すると、SSHキーが設定**され、パスワードなしで**SSH経由でログイン**することができます（ただし、セキュリティ上の理由から、新しくアップロードされたSSHキーは既存のドロップレットには設定されません）。

### 関数の認証トークン

REST APIを介して関数をトリガーする方法（常に有効で、CLIが使用する方法）は、以下のように**認証トークンを含むリクエストをトリガー**することです：
```bash
curl -X POST "https://faas-lon1-129376a7.doserverless.co/api/v1/namespaces/fn-c100c012-65bf-4040-1230-2183764b7c23/actions/functionname?blocking=true&result=true" \
-H "Content-Type: application/json" \
-H "Authorization: Basic MGU0NTczZGQtNjNiYS00MjZlLWI2YjctODk0N2MyYTA2NGQ4OkhwVEllQ2t4djNZN2x6YjJiRmFGc1FERXBySVlWa1lEbUxtRE1aRTludXA1UUNlU2VpV0ZGNjNqWnVhYVdrTFg="
```
## ログ

### ユーザーログ

**ユーザーのログ**は[**https://cloud.digitalocean.com/account/activity**](https://cloud.digitalocean.com/account/activity)で見つけることができます。

### チームログ

**チームのログ**は[**https://cloud.digitalocean.com/account/security**](https://cloud.digitalocean.com/account/security)で見つけることができます。

## 参考文献

* [https://docs.digitalocean.com/products/teams/how-to/manage-membership/](https://docs.digitalocean.com/products/teams/how-to/manage-membership/)

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* もしもあなたの**会社をHackTricksで宣伝したい**場合や、**最新版のPEASSを入手したい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)を手に入れましょう。
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で私をフォローしましょう🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **ハッキングのトリックを共有するために、PRを** [**HackTricks**](https://github.com/carlospolop/hacktricks) **および** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **のGitHubリポジトリに提出してください。**

</details>
