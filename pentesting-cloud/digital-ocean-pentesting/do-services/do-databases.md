# DO - Baze podataka

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Osnovne informacije

Sa DigitalOcean bazama podataka, možete lako **kreirati i upravljati bazama podataka u oblaku** bez brige o infrastrukturi ispod. Usluga nudi različite opcije baza podataka, uključujući **MySQL**, **PostgreSQL**, **MongoDB** i **Redis**, i pruža alate za administraciju i praćenje vaših baza podataka. DigitalOcean baze podataka su dizajnirane da budu visoko skalabilne, pouzdane i sigurne, što je idealan izbor za napajanje modernih aplikacija i veb sajtova.

### Detalji veza

Prilikom kreiranja baze podataka možete odabrati da je konfigurišete **dostupnu sa javne mreže**, ili samo iznutra **VPC-a**. Osim toga, traži od vas da **dodate IP adrese koje mogu pristupiti** (vaš IPv4 može biti jedan od njih).

**Host**, **port**, **dbname**, **username** i **password** se prikazuju u **konzoli**. Čak možete preuzeti AD sertifikat za sigurno povezivanje.

{% code overflow="wrap" %}
```bash
sql -h db-postgresql-ams3-90864-do-user-2700959-0.b.db.ondigitalocean.com -U doadmin -d defaultdb -p 25060
```
{% endcode %}

### Enumeracija

{% code-tabs %}
{% code-tabs-item title="Naredba" %}
```bash
nmap -p 5432 --script postgresql-brute <IP>
```
{% endcode-tabs-item %}
{% endcode-tabs %}

Koristite naredbu `nmap` sa opcijom `-p` da biste skenirali port 5432 i koristili skriptu `postgresql-brute` za pokušaj napada na bazu podataka PostgreSQL. Zamijenite `<IP>` sa stvarnom IP adresom ciljnog servera.

{% code-tabs %}
{% code-tabs-item title="Rezultat" %}
```plaintext
PORT     STATE SERVICE
5432/tcp open  postgresql
| postgresql-brute:
|   VULNERABLE:
|   PostgreSQL: User Enumeration
|     State: VULNERABLE (Exploitable)
|     IDs:  CVE:CVE-2019-9193
|       PostgreSQL versions 9.3 - 11 are vulnerable to information disclosure in error messages. An attacker with the ability to issue database queries can obtain potentially sensitive information from error messages. The attack method is known as an error-based side-channel attack.
|     Disclosure date: 2019-03-28
|     References:
|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9193
|_      https://nvd.nist.gov/vuln/detail/CVE-2019-9193
|_postgresql-databases: ERROR: Script execution failed (use -d to debug)
```
{% endcode-tabs-item %}
{% endcode-tabs %}

Rezultat skeniranja pokazuje da je port 5432 otvoren i da se na njemu izvršava PostgreSQL servis. Takođe, otkrivena je ranjivost u verzijama PostgreSQL baza podataka od 9.3 do 11, koja omogućava otkrivanje informacija putem poruka o greškama. Napadač sa mogućnošću izdavanja upita bazi podataka može dobiti potencijalno osetljive informacije iz poruka o greškama. Ranjivost je poznata kao napad zasnovan na greškama sa strane kanala.
```bash
# Databse clusters
doctl databases list

# Auth
doctl databases get <db-id> # This shows the URL with CREDENTIALS to access
doctl databases connection <db-id> # Another way to egt credentials
doctl databases user list <db-id> # Get all usernames and passwords

# Dbs inside a database cluster
doctl databases db list <cluster-id>

# Firewall (allowed IPs), you can also add
doctl databases firewalls list <cluster-id>

# Backups
doctl databases backups <db-id> # List backups of DB

# Pools
doctl databases pool list <db-id> # List pools of DB
```
<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
