# DO - Database

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Informazioni di base

Con DigitalOcean Databases, puoi facilmente **creare e gestire database nel cloud** senza preoccuparti dell'infrastruttura sottostante. Il servizio offre una variet√† di opzioni di database, tra cui **MySQL**, **PostgreSQL**, **MongoDB** e **Redis**, e fornisce strumenti per l'amministrazione e il monitoraggio dei tuoi database. DigitalOcean Databases √® progettato per essere altamente scalabile, affidabile e sicuro, rendendolo una scelta ideale per alimentare applicazioni e siti web moderni.

### Dettagli di connessione

Durante la creazione di un database, puoi selezionare se configurarlo **accessibile da una rete pubblica**, o solo dall'interno di una **VPC**. Inoltre, ti richiede di **inserire gli IP che possono accedervi** (il tuo IPv4 pu√≤ essere uno di questi).

L'**host**, la **porta**, il **nome del database**, l'**username** e la **password** vengono mostrati nella **console**. Puoi anche scaricare il certificato AD per connetterti in modo sicuro.

{% code overflow="wrap" %}
```bash
sql -h db-postgresql-ams3-90864-do-user-2700959-0.b.db.ondigitalocean.com -U doadmin -d defaultdb -p 25060
```
{% endcode %}

### Enumerazione

{% code-tabs %}
{% code-tabs-item title="1. Enumerazione dei servizi" %}
```bash
nmap -p 5432 --script postgresql-brute <IP>
```
{% endcode-tabs-item %}

{% code-tabs-item title="2. Enumerazione dei database" %}
```bash
psql -h <IP> -U <username> -d <database_name> -c "SELECT datname FROM pg_database"
```
{% endcode-tabs-item %}

{% code-tabs-item title="3. Enumerazione delle tabelle" %}
```bash
psql -h <IP> -U <username> -d <database_name> -c "SELECT table_name FROM information_schema.tables WHERE table_schema='public'"
```
{% endcode-tabs-item %}

{% code-tabs-item title="4. Enumerazione delle colonne" %}
```bash
psql -h <IP> -U <username> -d <database_name> -c "SELECT column_name FROM information_schema.columns WHERE table_name='<table_name>'"
```
{% endcode-tabs-item %}
{% endcode %}

La fase di enumerazione √® fondamentale nel processo di pentesting di un database DigitalOcean. Durante questa fase, l'obiettivo √® raccogliere informazioni sulle porte aperte e sui servizi in esecuzione sul server. 

1. Per enumerare i servizi, √® possibile utilizzare il comando `nmap` con lo script `postgresql-brute` specificando l'indirizzo IP del server DigitalOcean.

2. Per enumerare i database, √® possibile utilizzare il comando `psql` specificando l'indirizzo IP del server, il nome utente e il nome del database. Utilizzando la query SQL `SELECT datname FROM pg_database`, verranno restituiti i nomi dei database presenti.

3. Per enumerare le tabelle, √® possibile utilizzare il comando `psql` specificando l'indirizzo IP del server, il nome utente e il nome del database. Utilizzando la query SQL `SELECT table_name FROM information_schema.tables WHERE table_schema='public'`, verranno restituiti i nomi delle tabelle presenti nel database.

4. Per enumerare le colonne di una specifica tabella, √® possibile utilizzare il comando `psql` specificando l'indirizzo IP del server, il nome utente e il nome del database. Utilizzando la query SQL `SELECT column_name FROM information_schema.columns WHERE table_name='<table_name>'`, verranno restituiti i nomi delle colonne presenti nella tabella specificata.
```bash
# Databse clusters
doctl databases list

# Auth
doctl databases get <db-id> # This shows the URL with CREDENTIALS to access
doctl databases connection <db-id> # Another way to egt credentials
doctl databases user list <db-id> # Get all usernames and passwords

# Dbs inside a database cluster
doctl databases db list <cluster-id>

# Firewall (allowed IPs), you can also add
doctl databases firewalls list <cluster-id>

# Backups
doctl databases backups <db-id> # List backups of DB

# Pools
doctl databases pool list <db-id> # List pools of DB
```
<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT**](https://opensea.io/collection/the-peass-family) esclusivi
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository di** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) su GitHub.

</details>
