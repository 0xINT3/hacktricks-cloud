# DO - Rejestr kontenerów

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

DigitalOcean Container Registry to usługa dostarczana przez DigitalOcean, która **pozwala przechowywać i zarządzać obrazami Docker**. Jest to **prywatny** rejestr, co oznacza, że obrazy przechowywane w nim są dostępne tylko dla Ciebie i użytkowników, którym udzielisz dostępu. Pozwala to na bezpieczne przechowywanie i zarządzanie obrazami Docker oraz ich wykorzystywanie do wdrażania kontenerów w DigitalOcean lub w dowolnym innym środowisku obsługującym Docker.

Podczas tworzenia Rejestru Kontenerów możliwe jest **utworzenie tajemnicy z dostępem do pobierania obrazów (odczytu) we wszystkich przestrzeniach nazw** klastrów Kubernetes.

### Połączenie
```bash
# Using doctl
doctl registry login

# Using docker (You need an API token, use it as username and as password)
docker login registry.digitalocean.com
Username: <paste-api-token>
Password: <paste-api-token>
```
### Wyliczanie

#### Wyliczanie kontenerów

Aby rozpocząć proces testowania penetracyjnego kontenerów w DigitalOcean Container Registry, możemy zastosować następujące techniki wyliczania:

1. **Przeszukiwanie DNS**: Możemy przeszukać rekordy DNS, takie jak rekordy A, CNAME i TXT, aby znaleźć informacje o kontenerach i ich adresach IP.

2. **Przeszukiwanie subdomen**: Możemy przeszukać subdomeny, takie jak `registry.example.com`, aby znaleźć kontenery w DigitalOcean Container Registry.

3. **Przeszukiwanie API**: Możemy przeszukać publiczne interfejsy API, takie jak `https://registry.example.com/v2/_catalog`, aby uzyskać listę dostępnych kontenerów.

4. **Przeszukiwanie metadanych**: Możemy przeszukać metadane kontenerów, takie jak etykiety, opisy i tagi, aby uzyskać więcej informacji o nich.

5. **Przeszukiwanie repozytoriów**: Możemy przeszukać repozytoria kontenerów, takie jak `https://registry.example.com/v2/<repository>/tags/list`, aby uzyskać listę tagów dla danego repozytorium.

6. **Przeszukiwanie historii zmian**: Możemy przeszukać historię zmian kontenerów, taką jak `https://registry.example.com/v2/<repository>/manifests/<tag>`, aby uzyskać informacje o zmianach w danym kontenerze.

#### Wyliczanie uprawnień

Podczas testowania penetracyjnego kontenerów w DigitalOcean Container Registry, możemy również przeprowadzić wyliczanie uprawnień, aby zidentyfikować potencjalne luki w zabezpieczeniach. Oto kilka technik, które możemy zastosować:

1. **Przeszukiwanie publicznych repozytoriów**: Możemy przeszukać publiczne repozytoria kontenerów, takie jak `https://registry.example.com/v2/_catalog`, aby znaleźć repozytoria, które są publicznie dostępne i mogą zawierać poufne informacje.

2. **Przeszukiwanie prywatnych repozytoriów**: Możemy przeszukać prywatne repozytoria kontenerów, takie jak `https://registry.example.com/v2/_catalog`, aby znaleźć repozytoria, które są dostępne tylko dla uprawnionych użytkowników, ale mogą mieć słabe zabezpieczenia.

3. **Przeszukiwanie uprawnień**: Możemy przeszukać uprawnienia kontenerów, takie jak role, grupy i użytkownicy, aby znaleźć potencjalne luki w zabezpieczeniach.

4. **Przeszukiwanie uwierzytelniania**: Możemy przeszukać metody uwierzytelniania, takie jak klucze API, tokeny i hasła, aby znaleźć słabe lub niewłaściwie skonfigurowane metody uwierzytelniania.

5. **Przeszukiwanie logów**: Możemy przeszukać logi kontenerów, takie jak logi uwierzytelniania i logi dostępu, aby znaleźć podejrzane aktywności lub próby nieautoryzowanego dostępu.

6. **Przeszukiwanie podatności**: Możemy przeszukać podatności związane z kontenerami, takie jak znane luki w zabezpieczeniach w oprogramowaniu kontenerów, aby znaleźć potencjalne zagrożenia.
```bash
# Get creds to access the registry from the API
doctl registry docker-config

# List
doctl registry repository list-v2
```
<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriów github.

</details>
