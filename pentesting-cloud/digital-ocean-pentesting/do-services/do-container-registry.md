# DO - 컨테이너 레지스트리

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**를** **팔로우**하세요.
* **Hacking 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하세요.

</details>

## 기본 정보

DigitalOcean 컨테이너 레지스트리는 DigitalOcean에서 제공하는 서비스로, **Docker 이미지를 저장하고 관리**할 수 있습니다. 이는 **개인용** 레지스트리로, 레지스트리에 저장하는 이미지는 본인과 액세스 권한을 부여한 사용자만 액세스할 수 있습니다. 이를 통해 Docker 이미지를 안전하게 저장하고 관리하며, DigitalOcean 또는 Docker를 지원하는 다른 환경에서 컨테이너를 배포하는 데 사용할 수 있습니다.

컨테이너 레지스트리를 생성할 때, Kubernetes 클러스터의 모든 네임스페이스에서 이미지를 가져오는 (읽기) 액세스를 위한 **시크릿을 생성**할 수 있습니다.

### 연결
```bash
# Using doctl
doctl registry login

# Using docker (You need an API token, use it as username and as password)
docker login registry.digitalocean.com
Username: <paste-api-token>
Password: <paste-api-token>
```
### 열거

#### 컨테이너 레지스트리 열거

컨테이너 레지스트리는 Docker 이미지를 저장하고 관리하는 서비스입니다. DigitalOcean에서는 Docker Hub 대신에 컨테이너 레지스트리를 사용할 수 있습니다. 컨테이너 레지스트리에는 공개 및 비공개 이미지가 포함될 수 있습니다.

컨테이너 레지스트리를 열거하기 위해 다음 단계를 따릅니다.

1. 도메인 또는 IP 주소 확인

   컨테이너 레지스트리의 도메인 또는 IP 주소를 확인합니다. 일반적으로 도메인은 `registry.<도메인>` 또는 `docker-registry.<도메인>`과 같은 형식을 따릅니다.

2. 포트 스캔

   컨테이너 레지스트리가 사용하는 포트를 스캔합니다. 기본적으로 Docker 레지스트리는 TCP 포트 5000을 사용합니다.

3. 컨테이너 레지스트리에 대한 정보 수집

   컨테이너 레지스트리에 대한 정보를 수집합니다. 이를 위해 다음 명령을 사용할 수 있습니다.

   ```plaintext
   curl -X GET http://<도메인 또는 IP 주소>:<포트>/v2/
   ```

   응답에서는 사용 가능한 이미지 목록이 포함됩니다.

4. 이미지 열거

   컨테이너 레지스트리에 있는 이미지를 열거합니다. 이를 위해 다음 명령을 사용할 수 있습니다.

   ```plaintext
   curl -X GET http://<도메인 또는 IP 주소>:<포트>/v2/<이미지 이름>/tags/list
   ```

   응답에서는 이미지의 태그 목록이 포함됩니다.

5. 이미지 다운로드

   컨테이너 레지스트리에서 이미지를 다운로드합니다. 이를 위해 다음 명령을 사용할 수 있습니다.

   ```plaintext
   docker pull <도메인 또는 IP 주소>:<포트>/<이미지 이름>:<태그>
   ```

   다운로드한 이미지를 분석하여 취약점을 찾을 수 있습니다.
```bash
# Get creds to access the registry from the API
doctl registry docker-config

# List
doctl registry repository list-v2
```
<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 제로부터 AWS 해킹을 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **Hacking 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하세요.

</details>
