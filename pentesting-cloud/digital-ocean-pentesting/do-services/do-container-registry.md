# DO - 容器注册表

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来**分享您的黑客技巧**。

</details>

## 基本信息

DigitalOcean 容器注册表是由 DigitalOcean 提供的一项服务，**允许您存储和管理 Docker 镜像**。它是一个**私有**注册表，这意味着您存储在其中的镜像只能由您和您授权的用户访问。这使您能够安全地存储和管理 Docker 镜像，并将其用于在 DigitalOcean 或任何其他支持 Docker 的环境中部署容器。

在创建容器注册表时，可以**创建一个具有在所有 Kubernetes 集群的命名空间中拉取镜像访问权限（只读）的密钥**。

### 连接
```bash
# Using doctl
doctl registry login

# Using docker (You need an API token, use it as username and as password)
docker login registry.digitalocean.com
Username: <paste-api-token>
Password: <paste-api-token>
```
### 枚举

#### 列出容器注册表

在进行容器注册表渗透测试时，首先需要列出目标环境中的容器注册表。可以使用以下方法来执行此操作：

1. **搜索引擎**：使用搜索引擎（如Google）搜索目标域名或IP地址，以查找与容器注册表相关的信息。

2. **子域枚举**：使用子域枚举工具（如Sublist3r、Amass等）来查找与目标域名相关的子域。然后，对每个子域进行进一步的分析，以确定是否存在容器注册表。

3. **端口扫描**：使用端口扫描工具（如Nmap）扫描目标IP地址，以查找开放的容器注册表端口。常见的容器注册表端口包括5000、5001、8080等。

4. **DNS记录**：查找目标域名的DNS记录，以确定是否存在与容器注册表相关的记录。可以使用DNS查询工具（如Dig）来执行此操作。

5. **社交媒体**：搜索目标组织在社交媒体平台上的信息，以查找与容器注册表相关的线索。有时，组织可能会在社交媒体上公开其容器注册表的信息。

6. **公开资源**：搜索公开资源库（如GitHub、GitLab等）以查找与目标组织相关的代码库。有时，组织可能会在代码库中包含与容器注册表相关的配置文件或代码。

通过执行这些枚举方法，您可以收集有关目标环境中容器注册表的信息，为后续的渗透测试工作做好准备。
```bash
# Get creds to access the registry from the API
doctl registry docker-config

# List
doctl registry repository list-v2
```
<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想看到您的公司在 HackTricks 中被广告，或者如果您想访问最新版本的 PEASS 或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获得[**官方 PEASS & HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来**分享您的黑客技巧**。

</details>
