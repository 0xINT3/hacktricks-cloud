# DO - Kubernetes (DOKS)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 트릭을 공유**하세요.

</details>

## 기본 정보

### DigitalOcean Kubernetes (DOKS)

DOKS는 DigitalOcean에서 제공하는 관리형 Kubernetes 서비스입니다. 이 서비스는 DigitalOcean 플랫폼에서 Kubernetes 클러스터를 **배포하고 관리**하는 데 사용됩니다. DOKS의 주요 특징은 다음과 같습니다:

1. **관리의 용이성**: 기반 인프라의 설정과 유지 관리 요구 사항이 제거되어 Kubernetes 클러스터의 관리가 간소화됩니다.
2. **사용자 친화적 인터페이스**: 직관적인 인터페이스를 제공하여 클러스터의 생성과 관리를 용이하게 합니다.
3. **DigitalOcean 서비스와의 통합**: 로드 밸런서 및 블록 스토리지와 같은 DigitalOcean에서 제공하는 다른 서비스와 원활하게 통합됩니다.
4. **자동 업데이트 및 업그레이드**: 클러스터의 자동 업데이트 및 업그레이드가 포함되어 최신 상태를 유지합니다.


### 연결
```bash
# Generate kubeconfig from doctl
doctl kubernetes cluster kubeconfig save <cluster-id>

# Use a kubeconfig file that you can download from the console
kubectl --kubeconfig=/<pathtodirectory>/k8s-1-25-4-do-0-ams3-1670939911166-kubeconfig.yaml get nodes
```
### 열거

#### 1. 클러스터 정보 수집

- `kubectl` 명령어를 사용하여 클러스터 정보를 수집할 수 있습니다.
- `kubectl cluster-info` 명령어를 사용하여 클러스터의 정보를 확인할 수 있습니다.
- `kubectl get nodes` 명령어를 사용하여 클러스터의 노드 목록을 확인할 수 있습니다.
- `kubectl get pods --all-namespaces` 명령어를 사용하여 모든 네임스페이스의 파드 목록을 확인할 수 있습니다.

#### 2. 서비스 및 네임스페이스 열거

- `kubectl get services --all-namespaces` 명령어를 사용하여 모든 네임스페이스의 서비스 목록을 확인할 수 있습니다.
- `kubectl get namespaces` 명령어를 사용하여 클러스터의 네임스페이스 목록을 확인할 수 있습니다.

#### 3. RBAC 열거

- `kubectl get roles --all-namespaces` 명령어를 사용하여 모든 네임스페이스의 롤 목록을 확인할 수 있습니다.
- `kubectl get rolebindings --all-namespaces` 명령어를 사용하여 모든 네임스페이스의 롤바인딩 목록을 확인할 수 있습니다.

#### 4. 스토리지 열거

- `kubectl get pv --all-namespaces` 명령어를 사용하여 모든 네임스페이스의 영구 볼륨 목록을 확인할 수 있습니다.
- `kubectl get pvc --all-namespaces` 명령어를 사용하여 모든 네임스페이스의 영구 볼륨 클레임 목록을 확인할 수 있습니다.

#### 5. 시크릿 열거

- `kubectl get secrets --all-namespaces` 명령어를 사용하여 모든 네임스페이스의 시크릿 목록을 확인할 수 있습니다.

#### 6. 컨테이너 이미지 열거

- `kubectl get pods --all-namespaces -o jsonpath="{..image}" | tr -s '[[:space:]]' '\n' | sort | uniq -c` 명령어를 사용하여 모든 네임스페이스의 컨테이너 이미지 목록을 확인할 수 있습니다.
```bash
# Get clusters
doctl kubernetes cluster list

# Get node pool of cluster (number of nodes)
doctl kubernetes cluster node-pool list <cluster-id>

# Get DO resources used by the cluster
doctl kubernetes cluster list-associated-resources <cluster-id>
```
<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **Hacking 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하세요.

</details>
