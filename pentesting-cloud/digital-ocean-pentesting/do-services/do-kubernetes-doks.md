# DO - Kubernetes (DOKS)

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

### DigitalOcean Kubernetes (DOKS)

DOKS to zarządzana usługa Kubernetes oferowana przez DigitalOcean. Usługa ta jest zaprojektowana do **wdrożenia i zarządzania klastrami Kubernetes na platformie DigitalOcean**. Kluczowe aspekty DOKS obejmują:

1. **Łatwość zarządzania**: Eliminuje się konieczność konfigurowania i utrzymywania infrastruktury podstawowej, upraszczając zarządzanie klastrami Kubernetes.
2. **Przyjazny interfejs użytkownika**: Zapewnia intuicyjny interfejs, który ułatwia tworzenie i administrowanie klastrami.
3. **Integracja z usługami DigitalOcean**: Bezproblemowo integruje się z innymi usługami oferowanymi przez DigitalOcean, takimi jak Load Balancers i Block Storage.
4. **Automatyczne aktualizacje i uaktualnienia**: Usługa obejmuje automatyczne aktualizowanie i uaktualnianie klastrów, aby zapewnić, że są one aktualne.


### Połączenie
```bash
# Generate kubeconfig from doctl
doctl kubernetes cluster kubeconfig save <cluster-id>

# Use a kubeconfig file that you can download from the console
kubectl --kubeconfig=/<pathtodirectory>/k8s-1-25-4-do-0-ams3-1670939911166-kubeconfig.yaml get nodes
```
### Wyliczanie

#### Wykrywanie klastra Kubernetes

Aby rozpocząć test penetracyjny klastra Kubernetes w DigitalOcean, pierwszym krokiem jest wykrycie istniejącego klastra. Można to zrobić, sprawdzając dostępne usługi w DigitalOcean lub korzystając z narzędzi do skanowania sieci, takich jak Nmap.

##### Sprawdzanie dostępnych usług w DigitalOcean

Można sprawdzić dostępne usługi w DigitalOcean, aby znaleźć informacje o klastrze Kubernetes. Można to zrobić, korzystając z interfejsu użytkownika DigitalOcean lub za pomocą API DigitalOcean.

##### Skanowanie sieci za pomocą Nmap

Innym sposobem na wykrycie klastra Kubernetes jest skanowanie sieci za pomocą narzędzia Nmap. Można to zrobić, skanując adresy IP w zakresie, który jest przypisany do klastra Kubernetes.

#### Wykrywanie wycieków informacji

Po wykryciu klastra Kubernetes, kolejnym krokiem jest wykrycie potencjalnych wycieków informacji. Można to zrobić, sprawdzając publicznie dostępne zasoby klastra, takie jak serwisy, podstrony, pliki konfiguracyjne itp.

##### Przeglądanie publicznie dostępnych zasobów

Można przeglądać publicznie dostępne zasoby klastra Kubernetes, takie jak serwisy, podstrony, pliki konfiguracyjne itp., aby znaleźć potencjalne wycieki informacji. Można to zrobić, korzystając z przeglądarki internetowej lub narzędzi do przeglądania zasobów, takich jak dirb czy gobuster.

##### Analiza plików konfiguracyjnych

Pliki konfiguracyjne klastra Kubernetes mogą zawierać poufne informacje, takie jak hasła, klucze API itp. Można przeprowadzić analizę tych plików, aby znaleźć potencjalne wycieki informacji. Można to zrobić, korzystając z narzędzi do analizy plików, takich jak grep czy awk.

#### Wykrywanie podatności

Po wykryciu klastra Kubernetes i potencjalnych wycieków informacji, kolejnym krokiem jest wykrycie podatności. Można to zrobić, przeprowadzając skanowanie podatności klastra Kubernetes za pomocą narzędzi do skanowania podatności, takich jak kube-hunter czy kube-bench.

##### Skanowanie podatności za pomocą kube-hunter

Narzędzie kube-hunter jest specjalnie zaprojektowane do skanowania podatności klastra Kubernetes. Można je użyć do przeprowadzenia skanowania podatności klastra Kubernetes i znalezienia potencjalnych luk w zabezpieczeniach.

##### Skanowanie podatności za pomocą kube-bench

Narzędzie kube-bench jest innym narzędziem do skanowania podatności klastra Kubernetes. Można je użyć do przeprowadzenia skanowania podatności klastra Kubernetes i sprawdzenia, czy klastr spełnia zalecane standardy bezpieczeństwa.
```bash
# Get clusters
doctl kubernetes cluster list

# Get node pool of cluster (number of nodes)
doctl kubernetes cluster node-pool list <cluster-id>

# Get DO resources used by the cluster
doctl kubernetes cluster list-associated-resources <cluster-id>
```
<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriów github.

</details>
