# DO - Kubernetes (DOKS)

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Osnovne informacije

### DigitalOcean Kubernetes (DOKS)

DOKS je upravljana Kubernetes usluga koju nudi DigitalOcean. Usluga je dizajnirana za **implementaciju i upravljanje Kubernetes klasterima na DigitalOcean platformi**. Ključni aspekti DOKS-a uključuju:

1. **Lako upravljanje**: Zahtev za postavljanje i održavanje osnovne infrastrukture je eliminisan, što pojednostavljuje upravljanje Kubernetes klasterima.
2. **Korisnički prijateljski interfejs**: Pruža intuitivan interfejs koji olakšava kreiranje i administraciju klastera.
3. **Integracija sa DigitalOcean uslugama**: Bez problema se integriše sa drugim uslugama koje pruža DigitalOcean, kao što su Load Balanceri i Block Storage.
4. **Automatsko ažuriranje i nadogradnja**: Usluga uključuje automatsko ažuriranje i nadogradnju klastera kako bi bili ažurirani. 

### Veza
```bash
# Generate kubeconfig from doctl
doctl kubernetes cluster kubeconfig save <cluster-id>

# Use a kubeconfig file that you can download from the console
kubectl --kubeconfig=/<pathtodirectory>/k8s-1-25-4-do-0-ams3-1670939911166-kubeconfig.yaml get nodes
```
### Enumeracija

#### Identifikacija klastera Kubernetes

Da biste započeli testiranje penetracije na klasteru DigitalOcean Kubernetes (DOKS), prvo morate identifikovati IP adresu klastera. Možete to uraditi na nekoliko načina:

1. **DigitalOcean API**: Koristite DigitalOcean API da biste dobili informacije o klasteru, uključujući IP adresu.

2. **DNS rezolucija**: Ako znate ime klastera, možete koristiti DNS rezoluciju da biste dobili IP adresu. Na primer, ako je ime klastera `my-cluster`, možete koristiti komandu `nslookup my-cluster` da biste dobili IP adresu.

3. **Port skeniranje**: Možete koristiti alat za skeniranje portova kao što je Nmap da biste pronašli otvorene portove na IP adresi klastera. Na primer, možete koristiti komandu `nmap -p- <IP_adresa>` da biste skenirali sve portove na određenoj IP adresi.

#### Identifikacija servisa

Nakon što identifikujete IP adresu klastera, sledeći korak je identifikacija servisa koji se izvršavaju na klasteru. Možete koristiti alate kao što su `kube-hunter` ili `kube-scan` da biste pronašli servise koji su izloženi na klasteru.

#### Skupljanje informacija o servisima

Kada identifikujete servise koji su izloženi na klasteru, sledeći korak je skupljanje informacija o tim servisima. Možete koristiti alate kao što su `kubectl` ili `kube-apiserver` da biste dobili informacije o servisima, kao što su verzija, konfiguracija i privilegije.

#### Identifikacija ranjivosti

Nakon što skupite informacije o servisima, sledeći korak je identifikacija potencijalnih ranjivosti. Možete koristiti alate kao što su `kube-bench` ili `kube-hunter` da biste pronašli ranjivosti u konfiguraciji klastera.

#### Identifikacija privilegija

Konačno, trebali biste identifikovati privilegije koje su dodeljene servisima na klasteru. Možete koristiti alate kao što su `kubectl` ili `kube-apiserver` da biste dobili informacije o privilegijama servisa, kao što su dozvole za čitanje, pisanje ili izvršavanje.
```bash
# Get clusters
doctl kubernetes cluster list

# Get node pool of cluster (number of nodes)
doctl kubernetes cluster node-pool list <cluster-id>

# Get DO resources used by the cluster
doctl kubernetes cluster list-associated-resources <cluster-id>
```
<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
