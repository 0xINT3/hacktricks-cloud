# DO - 网络

<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想在 HackTricks 中看到您的公司广告，或者如果您想访问 PEASS 的最新版本或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来**分享您的黑客技巧**。

</details>

### 域名
```bash
doctl compute domain list
doctl compute domain records list <domain>
# You can also create records
```
### 保留IP地址

DigitalOcean使用一些保留IP地址，这些地址不能分配给用户的Droplets。这些保留IP地址用于特定的网络功能和服务。以下是DigitalOcean保留IP地址的列表：

- `10.0.0.0/8`：这个IP地址范围用于私有网络功能。
- `169.254.0.0/16`：这个IP地址范围用于自动配置（例如DHCP）和本地链接（例如IPv4本地链接地址）。
- `192.0.2.0/24`：这个IP地址范围用于文档和示例目的。
- `198.51.100.0/24`：这个IP地址范围用于文档和示例目的。
- `203.0.113.0/24`：这个IP地址范围用于文档和示例目的。

请注意，这些保留IP地址不能用于您的Droplets，因为它们已经被DigitalOcean用于特定的网络功能和服务。
```bash
doctl compute reserved-ip list
doctl compute reserved-ip-action unassign <ip>
```
### 负载均衡器

Load balancers distribute incoming network traffic across multiple servers to ensure efficient utilization of resources and improve the availability and scalability of applications. In DigitalOcean, load balancers are used to distribute traffic to backend Droplets.

负载均衡器将传入的网络流量分发到多个服务器上，以确保资源的高效利用，并提高应用程序的可用性和可扩展性。在DigitalOcean中，负载均衡器用于将流量分发到后端的Droplets上。

DigitalOcean provides two types of load balancers: 

DigitalOcean提供两种类型的负载均衡器：

1. **Standard Load Balancers**: These load balancers are designed for HTTP/HTTPS traffic and support session persistence, SSL termination, and health checks. They operate at the transport layer (Layer 4) and distribute traffic based on IP addresses and ports.

   **标准负载均衡器**：这些负载均衡器专为HTTP/HTTPS流量设计，支持会话保持、SSL终止和健康检查。它们在传输层（第4层）操作，并根据IP地址和端口分发流量。

2. **Managed Databases Load Balancers**: These load balancers are specifically designed for distributing traffic to managed databases. They operate at the application layer (Layer 7) and distribute traffic based on domain names and paths.

   **托管数据库负载均衡器**：这些负载均衡器专门用于将流量分发到托管数据库。它们在应用层（第7层）操作，并根据域名和路径分发流量。

To configure a load balancer in DigitalOcean, you need to define the forwarding rules, health checks, and SSL settings. Once configured, the load balancer will distribute incoming traffic to the backend Droplets based on the defined rules.

要在DigitalOcean中配置负载均衡器，您需要定义转发规则、健康检查和SSL设置。配置完成后，负载均衡器将根据定义的规则将传入的流量分发到后端的Droplets上。
```bash
doctl compute load-balancer list
doctl compute load-balancer remove-droplets <id> --droplet-ids 12,33
doctl compute load-balancer add-forwarding-rules <id> --forwarding-rules entry_protocol:tcp,entry_port:3306,...
```
### VPC

虚拟私有云（VPC）是一种在云环境中创建和管理虚拟网络的服务。VPC允许您在云中划分逻辑隔离的网络空间，以便您可以在其中部署和管理云资源。通过使用VPC，您可以控制网络的IP地址范围、子网、路由表和网络访问控制列表（ACL），以及与其他VPC之间的连接。

#### VPC网络配置

在DigitalOcean中，VPC网络配置由以下组件组成：

- **VPC**：一个逻辑隔离的网络空间，用于托管您的云资源。
- **子网**：VPC中的一个IP地址范围，用于划分网络。
- **路由表**：定义VPC中数据包的流动方式。
- **网络访问控制列表（ACL）**：用于控制进出VPC的网络流量。
- **网关**：用于连接VPC与其他网络。

#### VPC网络安全

为了确保VPC网络的安全性，您可以采取以下措施：

- **网络隔离**：使用VPC将不同的云资源隔离开来，以防止未经授权的访问。
- **访问控制列表（ACL）**：配置ACL以限制进出VPC的网络流量。
- **安全组**：在VPC中的资源上配置安全组，以控制进出资源的网络流量。
- **VPN连接**：通过VPN连接将本地网络与VPC网络安全地连接起来。

#### VPC网络扫描

为了发现和修复潜在的安全漏洞，您可以使用网络扫描工具对VPC网络进行扫描。这些工具可以帮助您识别网络中的漏洞和弱点，并采取相应的措施加以修复。

#### VPC网络监控

监控VPC网络的活动和性能是确保网络安全和高效运行的关键。您可以使用监控工具来跟踪网络流量、带宽使用情况和连接状态，以及检测任何异常活动。

#### VPC网络最佳实践

以下是一些VPC网络的最佳实践：

- **网络规划**：在创建VPC之前，仔细规划网络的IP地址范围和子网划分。
- **安全性**：使用ACL、安全组和VPN连接来确保VPC网络的安全性。
- **监控**：定期监控VPC网络的活动和性能。
- **备份和恢复**：定期备份VPC网络的配置和数据，并确保有恢复计划。

通过遵循这些最佳实践，您可以建立一个安全、高效的VPC网络，并保护您的云资源免受潜在的安全威胁。
```
doctl vpcs list
```
### 防火墙

{% hint style="danger" %}
默认情况下，**Droplets（虚拟机）是没有防火墙的**（不像其他云平台如AWS或GCP）。因此，如果您希望DO保护Droplet的端口，您需要**创建并附加防火墙**。
{% endhint %}
```bash
doctl compute firewall list
doctl compute firewall list-by-droplet <droplet-id>
doctl compute firewall remove-droplets <fw-id> --droplet-ids <droplet-id>
```
<details>

<summary><strong>支持 HackTricks 并获得福利！</strong></summary>

* 如果您想看到您的公司在 HackTricks 中被广告，或者如果您想访问最新版本的 PEASS 或下载 HackTricks 的 PDF，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获得[**官方 PEASS 和 HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFT**](https://opensea.io/collection/the-peass-family)收藏品
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass) 或 **关注**我的 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* 通过向 [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来分享您的黑客技巧。

</details>
