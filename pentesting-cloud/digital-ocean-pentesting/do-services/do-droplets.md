# DO - Droplets

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir **votre entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Informations de base

Chez DigitalOcean, un "droplet" est un **serveur priv√© virtuel (VPS)** qui peut √™tre utilis√© pour h√©berger des sites web et des applications. Un droplet est un **ensemble pr√©configur√© de ressources informatiques**, incluant une certaine quantit√© de CPU, de m√©moire et de stockage, qui peut √™tre d√©ploy√© rapidement et facilement sur l'infrastructure cloud de DigitalOcean.

Vous pouvez choisir parmi des **syst√®mes d'exploitation courants**, des **applications d√©j√† en fonctionnement** (comme WordPress, cPanel, Laravel...), ou m√™me t√©l√©charger et utiliser **vos propres images**.

Les droplets prennent en charge les **scripts de donn√©es utilisateur**.

<details>

<summary>Diff√©rence entre un instantan√© et une sauvegarde</summary>

Chez DigitalOcean, un instantan√© est une copie √† un moment donn√© du disque d'un Droplet. Il capture l'√©tat du disque du Droplet au moment o√π l'instantan√© a √©t√© pris, y compris le syst√®me d'exploitation, les applications install√©es et tous les fichiers et donn√©es sur le disque.

Les instantan√©s peuvent √™tre utilis√©s pour cr√©er de nouveaux Droplets avec la m√™me configuration que le Droplet original, ou pour restaurer un Droplet √† l'√©tat dans lequel il se trouvait lorsque l'instantan√© a √©t√© pris. Les instantan√©s sont stock√©s sur le service de stockage d'objets de DigitalOcean, et ils sont incr√©mentiels, ce qui signifie que seuls les changements depuis le dernier instantan√© sont stock√©s. Cela les rend efficaces √† utiliser et √©conomiques √† stocker.

D'autre part, une sauvegarde est une copie compl√®te d'un Droplet, y compris le syst√®me d'exploitation, les applications install√©es, les fichiers et les donn√©es, ainsi que les param√®tres et m√©tadonn√©es du Droplet. Les sauvegardes sont g√©n√©ralement effectu√©es selon un calendrier r√©gulier, et elles capturent l'√©tat entier d'un Droplet √† un moment pr√©cis.

Contrairement aux instantan√©s, les sauvegardes sont stock√©es dans un format compress√© et chiffr√©, et elles sont transf√©r√©es en dehors de l'infrastructure de DigitalOcean vers un emplacement distant pour √™tre conserv√©es en s√©curit√©. Cela rend les sauvegardes id√©ales pour la r√©cup√©ration apr√®s sinistre, car elles fournissent une copie compl√®te d'un Droplet qui peut √™tre restaur√©e en cas de perte de donn√©es ou d'autres √©v√©nements catastrophiques.

En r√©sum√©, les instantan√©s sont des copies √† un moment donn√© du disque d'un Droplet, tandis que les sauvegardes sont des copies compl√®tes d'un Droplet, y compris ses param√®tres et m√©tadonn√©es. Les instantan√©s sont stock√©s sur le service de stockage d'objets de DigitalOcean, tandis que les sauvegardes sont transf√©r√©es en dehors de l'infrastructure de DigitalOcean vers un emplacement distant. Les deux instantan√©s et sauvegardes peuvent √™tre utilis√©s pour restaurer un Droplet, mais les instantan√©s sont plus efficaces √† utiliser et √† stocker, tandis que les sauvegardes offrent une solution de sauvegarde plus compl√®te pour la r√©cup√©ration apr√®s sinistre.

</details>

### Authentification

Pour l'authentification, il est possible d'**activer SSH** via un nom d'utilisateur et un **mot de passe** (mot de passe d√©fini lors de la cr√©ation du droplet). Ou **s√©lectionner une ou plusieurs des cl√©s SSH t√©l√©charg√©es**.

### Pare-feu

{% hint style="danger" %}
Par d√©faut, **les droplets sont cr√©√©s SANS PARE-FEU** (contrairement √† d'autres clouds tels que AWS ou GCP). Donc, si vous voulez que DO prot√®ge les ports du droplet (VM), vous devez **le cr√©er et l'attacher**.
{% endhint %}

Plus d'infos dans :

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### √ânum√©ration
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Les Droplets ont des points de terminaison de m√©tadonn√©es**, mais chez DO, il n'y a pas de IAM ou de choses telles que les r√¥les d'AWS ou les comptes de service de GCP.
{% endhint %}

### RCE

Avec un acc√®s √† la console, il est possible d'**obtenir un shell √† l'int√©rieur du Droplet** en acc√©dant √† l'URL : **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Il est √©galement possible de lancer une **console de r√©cup√©ration** pour ex√©cuter des commandes √† l'int√©rieur de l'h√¥te en acc√©dant √† une console de r√©cup√©ration sur **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** (mais dans ce cas, vous devrez conna√Ætre le mot de passe root).

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> !</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-moi** sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
