# DO - Droplets

<details>

<summary><strong>AWSハッキングをゼロからヒーローまで学ぶには</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックする
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)を**フォローする**。
* **HackTricks**の[**githubリポジトリ**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出して、あなたのハッキングのコツを共有する。

</details>

## 基本情報

DigitalOceanでは、"droplet"はウェブサイトやアプリケーションをホストするために使用できる**仮想プライベートサーバー(VPS)**です。dropletは、CPU、メモリ、ストレージの特定の量を含む**事前に設定されたコンピューティングリソースのパッケージ**であり、DigitalOceanのクラウドインフラストラクチャ上で迅速かつ容易に展開することができます。

**一般的なOS**から、すでに実行中の**アプリケーション**（WordPress、cPanel、Laravelなど）、または**独自のイメージ**をアップロードして使用することができます。

Dropletsは**ユーザーデータスクリプト**をサポートしています。

<details>

<summary>スナップショットとバックアップの違い</summary>

DigitalOceanでは、スナップショットはDropletのディスクの時点でのコピーです。スナップショットが取られた時点でのDropletのディスクの状態、オペレーティングシステム、インストールされたアプリケーション、およびディスク上のすべてのファイルとデータをキャプチャします。

スナップショットは、元のDropletと同じ設定の新しいDropletsを作成するために使用することができますし、スナップショットが取られた時点の状態にDropletを復元するためにも使用できます。スナップショットはDigitalOceanのオブジェクトストレージサービスに保存され、インクリメンタルであるため、最後のスナップショット以降の変更のみが保存されます。これにより、使用と保存が効率的でコスト効果的になります。

一方、バックアップはDropletの完全なコピーであり、オペレーティングシステム、インストールされたアプリケーション、ファイル、データ、およびDropletの設定とメタデータを含みます。バックアップは通常、定期的なスケジュールで実行され、特定の時点でのDropletの完全な状態をキャプチャします。

スナップショットとは異なり、バックアップは圧縮され暗号化された形式で保存され、DigitalOceanのインフラストラクチャからリモートの場所に転送されて安全を確保します。これにより、バックアップは災害復旧に理想的であり、データ損失やその他の壊滅的なイベントが発生した場合に復元できるDropletの完全なコピーを提供します。

要約すると、スナップショットはDropletのディスクの時点でのコピーであり、バックアップは設定とメタデータを含むDropletの完全なコピーです。スナップショットはDigitalOceanのオブジェクトストレージサービスに保存され、バックアップはDigitalOceanのインフラストラクチャからリモートの場所に転送されます。スナップショットもバックアップもDropletを復元するために使用できますが、スナップショットは使用と保存がより効率的であり、バックアップは災害復旧のためのより包括的なバックアップソリューションを提供します。

</details>

### 認証

認証には、ユーザー名と**パスワード**（droplet作成時に定義される）を通じて**SSHを有効にする**か、アップロードされたSSHキーの**一つまたは複数を選択する**ことができます。

### ファイアウォール

{% hint style="danger" %}
デフォルトでは**ファイアウォールなしでdropletsが作成されます**（AWSやGCPなどの他のクラウドとは異なります）。したがって、DOがdroplet（VM）のポートを保護してほしい場合は、**作成してアタッチする**必要があります。
{% endhint %}

詳細は以下を参照してください:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### 列挙
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Dropletsはメタデータエンドポイントを持っています**が、DOには**IAMやAWSのroleやGCPのサービスアカウントのようなものはありません**。
{% endhint %}

### RCE

コンソールへのアクセスがあれば、以下のURLにアクセスして**droplet内でシェルを取得**することが可能です: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

また、以下のURLにアクセスしてホスト内でコマンドを実行する**リカバリコンソール**を起動することも可能です: **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`**（ただし、この場合はrootパスワードを知っている必要があります）。

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)で</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ゼロからヒーローまでのAWSハッキングを学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告したい**、または**HackTricksをPDFでダウンロードしたい**場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式のPEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見する、私たちの独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクション
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加する**か、[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォローする**。
* [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のgithubリポジトリにPRを提出して、あなたのハッキングのコツを**共有する**。

</details>
