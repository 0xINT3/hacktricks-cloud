# DO - ドロップレット

<details>

<summary><strong>ハックトリックをサポートして特典を得る！</strong></summary>

* **HackTricksで会社の広告を見たい**場合や、**PEASSの最新バージョンをダウンロードしたり、PDFでHackTricksをダウンロード**したい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れる
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローする 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ハッキングのトリックを共有するために、PRを提出して** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリに参加する

</details>

## 基本情報

DigitalOceanでは、「ドロップレット」とは、ウェブサイトやアプリケーションをホストするために使用できる**仮想プライベートサーバー（VPS）**です。ドロップレットは、DigitalOceanのクラウドインフラストラクチャ上で迅速かつ簡単に展開できる、**ある程度のCPU、メモリ、ストレージを含む事前に設定されたコンピューティングリソースのパッケージ**です。

**一般的なOS**から、すでに実行されている**アプリケーション**（WordPress、cPanel、Laravelなど）まで、または**独自のイメージ**をアップロードして使用することができます。

ドロップレットは**ユーザーデータスクリプト**をサポートしています。

<details>

<summary>スナップショットとバックアップの違い</summary>

DigitalOceanでは、スナップショットはドロップレットのディスクの特定の時点でのコピーです。スナップショットは、スナップショットが撮影された時点でのドロップレットのディスクの状態、オペレーティングシステム、インストールされたアプリケーション、ディスク上のすべてのファイルとデータをキャプチャします。

スナップショットは、元のドロップレットと同じ構成で新しいドロップレットを作成するために使用したり、スナップショットが撮影された時点のドロップレットの状態にドロップレットを復元するために使用したりすることができます。スナップショットはDigitalOceanのオブジェクトストレージサービスに保存され、インクリメンタルです。つまり、最後のスナップショット以降の変更のみが保存されます。これにより、使用する際に効率的で、格納する際にも費用対効果が高くなります。

一方、バックアップは、オペレーティングシステム、インストールされたアプリケーション、ファイル、データ、およびドロップレットの設定とメタデータを含む、ドロップレットの完全なコピーです。バックアップは通常、定期的なスケジュールで実行され、特定の時点でのドロップレットの完全な状態をキャプチャします。

スナップショットとは異なり、バックアップは圧縮および暗号化された形式で保存され、DigitalOceanのインフラストラクチャからリモートの場所に転送されます。これにより、バックアップは災害復旧に理想的であり、データの損失やその他の災害的なイベントの場合に復元できるドロップレットの完全なコピーを提供します。

要約すると、スナップショットはドロップレットのディスクの特定の時点でのコピーであり、バックアップはドロップレットの完全なコピーであり、設定とメタデータも含まれます。スナップショットはDigitalOceanのオブジェクトストレージサービスに保存され、バックアップはDigitalOceanのインフラストラクチャからリモートの場所に転送されます。スナップショットとバックアップの両方を使用してドロップレットを復元できますが、スナップショットは使用と保存に効率的であり、バックアップは災害復旧のためのより包括的なバックアップソリューションを提供します。

</details>

### 認証

認証には、ユーザー名とパスワード（ドロップレット作成時に定義されたパスワード）を介してSSHを有効にすることができます。または、アップロードされたSSHキーのうち1つ以上を選択することもできます。

### ファイアウォール

{% hint style="danger" %}
デフォルトでは、**ドロップレットはファイアウォールなしで作成されます**（AWSやGCPなどの他のクラウドとは異なり）。したがって、ドロップレット（VM）のポートをDOで保護する場合は、**作成してアタッチする必要があります**。
{% endhint %}

詳細は次を参照してください：

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### 列挙
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Dropletsにはメタデータエンドポイントがあります**が、DOではAWSのIAMやGCPのロールなどのものはありません。
{% endhint %}

### RCE

コンソールにアクセスすると、**ドロップレット内にシェルを取得する**ことができます。URLにアクセスしてください: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

また、**リカバリーコンソール**を起動してホスト内でコマンドを実行することも可能です。リカバリーコンソールには、**`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** からアクセスします（ただし、この場合はrootパスワードを知っている必要があります）。

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* **HackTricksの最新バージョンを入手したい**、または**PEASSをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をご確認ください。
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけて、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)を手に入れましょう。
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で私をフォローしましょう🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **ハッキングのトリックを共有するには、** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>
