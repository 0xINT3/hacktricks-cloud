# DO - Droplets

<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipos Rojos de AWS de HackTricks)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obt칠n la [**oficial mercanc칤a de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>

## Informaci칩n B치sica

En DigitalOcean, un "droplet" es un **servidor privado virtual (VPS)** que se puede utilizar para alojar sitios web y aplicaciones. Un droplet es un **paquete preconfigurado de recursos inform치ticos**, que incluye una cierta cantidad de CPU, memoria y almacenamiento, que se puede implementar de forma r치pida y sencilla en la infraestructura en la nube de DigitalOcean.

Puedes seleccionar desde **sistemas operativos comunes**, hasta **aplicaciones** que ya se est칠n ejecutando (como WordPress, cPanel, Laravel...), o incluso cargar y utilizar **tus propias im치genes**.

Los droplets admiten **scripts de datos de usuario**.

<details>

<summary>Diferencia entre una instant치nea y una copia de seguridad</summary>

En DigitalOcean, una instant치nea es una copia en un momento dado del disco de un Droplet. Captura el estado del disco del Droplet en el momento en que se tom칩 la instant치nea, incluido el sistema operativo, las aplicaciones instaladas y todos los archivos y datos en el disco.

Las instant치neas se pueden utilizar para crear nuevos Droplets con la misma configuraci칩n que el Droplet original, o para restaurar un Droplet al estado en el que se encontraba cuando se tom칩 la instant치nea. Las instant치neas se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, y son incrementales, lo que significa que solo se almacenan los cambios desde la 칰ltima instant치nea. Esto los hace eficientes de usar y rentables de almacenar.

Por otro lado, una copia de seguridad es una copia completa de un Droplet, que incluye el sistema operativo, las aplicaciones instaladas, archivos y datos, as칤 como la configuraci칩n y metadatos del Droplet. Las copias de seguridad se realizan t칤picamente en un horario regular, y capturan el estado completo de un Droplet en un momento espec칤fico.

A diferencia de las instant치neas, las copias de seguridad se almacenan en un formato comprimido y encriptado, y se transfieren fuera de la infraestructura de DigitalOcean a un lugar remoto para su custodia. Esto hace que las copias de seguridad sean ideales para la recuperaci칩n ante desastres, ya que proporcionan una copia completa de un Droplet que se puede restaurar en caso de p칠rdida de datos u otros eventos catastr칩ficos.

En resumen, las instant치neas son copias en un momento dado del disco de un Droplet, mientras que las copias de seguridad son copias completas de un Droplet, incluidos sus ajustes y metadatos. Las instant치neas se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, mientras que las copias de seguridad se transfieren fuera de la infraestructura de DigitalOcean a un lugar remoto. Tanto las instant치neas como las copias de seguridad se pueden utilizar para restaurar un Droplet, pero las instant치neas son m치s eficientes de usar y almacenar, mientras que las copias de seguridad proporcionan una soluci칩n de copia de seguridad m치s completa para la recuperaci칩n ante desastres.

</details>

### Autenticaci칩n

Para la autenticaci칩n es posible **habilitar SSH** a trav칠s de nombre de usuario y **contrase침a** (contrase침a definida al crear el droplet). O **seleccionar una o m치s de las claves SSH cargadas**.

### Firewall

{% hint style="danger" %}
Por defecto, **los droplets se crean SIN UN FIREWALL** (no como en otras nubes como AWS o GCP). Por lo tanto, si deseas que DO proteja los puertos del droplet (VM), necesitas **crearlo y adjuntarlo**.
{% endhint %}

M치s informaci칩n en:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### Enumeraci칩n
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Los Droplets tienen puntos finales de metadatos**, pero en DO **no hay IAM** o cosas como roles de AWS o cuentas de servicio de GCP.
{% endhint %}

### RCE

Con acceso a la consola es posible **obtener una shell dentro del droplet** accediendo a la URL: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Tambi칠n es posible lanzar una **consola de recuperaci칩n** para ejecutar comandos dentro del host accediendo a una consola de recuperaci칩n en **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`**(pero en este caso necesitar치s conocer la contrase침a de root).
