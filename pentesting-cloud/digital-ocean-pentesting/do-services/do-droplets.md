# DO - Droplets

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **HackTricks**와 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 **PR을 제출하여** 여러분의 해킹 기교를 공유하세요.

</details>

## 기본 정보

DigitalOcean에서 "droplet"은 웹사이트와 애플리케이션을 호스팅하는 데 사용할 수 있는 **가상 개인 서버 (VPS)**입니다. Droplet은 DigitalOcean의 클라우드 인프라에 빠르고 쉽게 배포할 수 있는 **미리 구성된 컴퓨팅 리소스 패키지**로, 특정 양의 CPU, 메모리 및 저장소를 포함합니다.

일반적인 운영 체제부터 이미 실행 중인 애플리케이션 (예: WordPress, cPanel, Laravel 등) 또는 **자체 이미지를 업로드하고 사용**할 수 있습니다.

Droplet은 **사용자 데이터 스크립트**를 지원합니다.

<details>

<summary>스냅샷과 백업의 차이</summary>

DigitalOcean에서 스냅샷은 Droplet의 디스크의 특정 시점의 복사본입니다. 스냅샷은 스냅샷이 촬영된 시점의 Droplet의 디스크 상태를 포함하여 운영 체제, 설치된 애플리케이션 및 디스크의 모든 파일과 데이터를 캡처합니다.

스냅샷은 원본 Droplet과 동일한 구성으로 새로운 Droplet을 생성하거나 스냅샷이 촬영된 시점의 상태로 Droplet을 복원하는 데 사용할 수 있습니다. 스냅샷은 DigitalOcean의 객체 저장소 서비스에 저장되며, 이전 스냅샷 이후의 변경 사항만 저장되므로 사용하기 효율적이고 비용 효율적입니다.

반면, 백업은 운영 체제, 설치된 애플리케이션, 파일 및 데이터뿐만 아니라 Droplet의 설정 및 메타데이터를 포함한 Droplet의 완전한 복사본입니다. 백업은 일정한 주기로 수행되며 특정 시점에서 Droplet의 전체 상태를 캡처합니다.

스냅샷과 달리 백업은 압축 및 암호화된 형식으로 저장되며 DigitalOcean의 인프라에서 원격 위치로 전송됩니다. 이로 인해 백업은 재해 복구에 이상적이며 데이터 손실 또는 기타 재앙 사건 발생 시 복원할 수 있는 Droplet의 완전한 복사본을 제공합니다.

요약하면, 스냅샷은 Droplet의 디스크의 특정 시점의 복사본이며, 백업은 설정 및 메타데이터를 포함한 Droplet의 완전한 복사본입니다. 스냅샷은 DigitalOcean의 객체 저장소 서비스에 저장되고, 백업은 DigitalOcean의 인프라에서 원격 위치로 전송됩니다. 스냅샷과 백업 모두 Droplet을 복원하는 데 사용할 수 있지만, 스냅샷은 사용 및 저장에 더 효율적이며, 백업은 재해 복구를 위한 더 포괄적인 백업 솔루션을 제공합니다.

</details>

### 인증

인증을 위해 사용자는 사용자 이름과 **비밀번호**를 통해 SSH를 **활성화**할 수 있습니다 (Droplet 생성 시 정의한 비밀번호). 또는 업로드한 SSH 키 중 하나 이상을 **선택**할 수 있습니다.

### 방화벽

{% hint style="danger" %}
기본적으로 **droplets는 방화벽 없이 생성됩니다** (AWS 또는 GCP와 같은 다른 클라우드와는 다릅니다). 따라서 droplet (VM)의 포트를 보호하기 위해 DO가 방화벽을 **생성하고 연결**해야 합니다.
{% endhint %}

자세한 내용은 다음에서 확인할 수 있습니다:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### 열거
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Droplets에는 메타데이터 엔드포인트가 있지만**, DO에서는 AWS의 IAM이나 GCP의 서비스 계정과 같은 역할이나 서비스 계정과 같은 것은 없습니다.
{% endhint %}

### RCE

콘솔에 액세스하면 **드롭렛 내부에 쉘을 얻을 수 있습니다**. 다음 URL에 액세스하여 콘솔에 액세스합니다: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

또한 **복구 콘솔을 실행**하여 호스트 내에서 명령을 실행할 수도 있습니다. 다음 URL에 액세스하여 복구 콘솔에 액세스합니다: **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** (이 경우에는 root 암호를 알아야 합니다).

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* HackTricks에서 **회사를 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 상품**](https://peass.creator-spring.com)을 구매하세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFT**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**를** 팔로우하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 여러분의 해킹 기법을 공유하세요.

</details>
