# DO - Droplets

<details>

<summary><strong>춰Apoya a HackTricks y obt칠n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **칰ltima versi칩n de PEASS o descargar HackTricks en PDF** 춰Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obt칠n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de exclusivos [**NFTs**](https://opensea.io/collection/the-peass-family)
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Informaci칩n b치sica

En DigitalOcean, un "droplet" es un **servidor privado virtual (VPS)** que se puede utilizar para alojar sitios web y aplicaciones. Un droplet es un **paquete preconfigurado de recursos inform치ticos**, que incluye una cierta cantidad de CPU, memoria y almacenamiento, que se puede implementar de manera r치pida y sencilla en la infraestructura en la nube de DigitalOcean.

Puede seleccionar desde **sistemas operativos comunes**, hasta **aplicaciones** que ya se est치n ejecutando (como WordPress, cPanel, Laravel...), o incluso cargar y usar **sus propias im치genes**.

Los droplets admiten **scripts de datos de usuario**.

<details>

<summary>Diferencia entre una instant치nea y una copia de seguridad</summary>

En DigitalOcean, una instant치nea es una copia en un momento determinado del disco de un droplet. Captura el estado del disco del droplet en el momento en que se tom칩 la instant치nea, incluido el sistema operativo, las aplicaciones instaladas y todos los archivos y datos en el disco.

Las instant치neas se pueden utilizar para crear nuevos droplets con la misma configuraci칩n que el droplet original, o para restaurar un droplet al estado en que se encontraba cuando se tom칩 la instant치nea. Las instant치neas se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, y son incrementales, lo que significa que solo se almacenan los cambios desde la 칰ltima instant치nea. Esto los hace eficientes de usar y rentables de almacenar.

Por otro lado, una copia de seguridad es una copia completa de un droplet, que incluye el sistema operativo, las aplicaciones instaladas, los archivos y datos, as칤 como la configuraci칩n y los metadatos del droplet. Las copias de seguridad se realizan t칤picamente en un horario regular, y capturan todo el estado de un droplet en un momento espec칤fico.

A diferencia de las instant치neas, las copias de seguridad se almacenan en un formato comprimido y cifrado, y se transfieren fuera de la infraestructura de DigitalOcean a una ubicaci칩n remota para su custodia. Esto hace que las copias de seguridad sean ideales para la recuperaci칩n ante desastres, ya que proporcionan una copia completa de un droplet que se puede restaurar en caso de p칠rdida de datos u otros eventos catastr칩ficos.

En resumen, las instant치neas son copias en un momento determinado del disco de un droplet, mientras que las copias de seguridad son copias completas de un droplet, incluyendo su configuraci칩n y metadatos. Las instant치neas se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, mientras que las copias de seguridad se transfieren fuera de la infraestructura de DigitalOcean a una ubicaci칩n remota. Tanto las instant치neas como las copias de seguridad se pueden utilizar para restaurar un droplet, pero las instant치neas son m치s eficientes de usar y almacenar, mientras que las copias de seguridad proporcionan una soluci칩n de copia de seguridad m치s completa para la recuperaci칩n ante desastres.

</details>

### Autenticaci칩n

Para la autenticaci칩n es posible **habilitar SSH** a trav칠s de un nombre de usuario y **contrase침a** (contrase침a definida cuando se crea el droplet). O **seleccionar una o varias de las claves SSH cargadas**.

### Firewall

{% hint style="danger" %}
Por defecto, **los droplets se crean SIN UN FIREWALL** (no como en otras nubes como AWS o GCP). Por lo tanto, si desea que DO proteja los puertos del droplet (VM), debe **crearlo y adjuntarlo**.
{% endhint %}

M치s informaci칩n en:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### Enumeraci칩n

```bash
# VMs
doctl compute droplet list # Las IPs aparecer치n aqu칤
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Obtener vecinos de red
doctl compute droplet actions <droplet-id> # Obtener acciones de droplet

# Acciones interesantes de VM
doctl compute droplet-action password-reset <droplet-id> # Se enviar치 una nueva contrase침a al usuario
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # Esto solo ejecutar치 SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificados
doctl compute certificate list

# Instant치neas
doctl compute snapshot list
```

{% hint style="danger" %}
**Los droplets tienen puntos finales de metadatos**, pero en DO no hay IAM ni cosas como el rol de AWS o las cuentas de servicio de GCP.
{% endhint %}

### RCE

Con acceso a la consola es posible **obtener una shell dentro del droplet** accediendo a la URL: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Tambi칠n es posible lanzar una **consola de recuperaci칩n** para ejecutar comandos dentro del host accediendo a una consola de recuperaci칩n en **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`**(pero en este caso necesitar치 conocer la contrase침a de root).

<details>

<summary><strong>춰Apoya a HackTricks y obt칠n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **칰ltima versi칩n de PEASS o descargar HackTricks en PDF** 춰Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obt칠n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de exclusivos [**NFTs**](https://opensea.io/collection/the-peass-family)
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>